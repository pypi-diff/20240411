# Comparing `tmp/chia-blockchain-2.3.0rc1.tar.gz` & `tmp/chia-blockchain-2.3.0rc2.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "chia-blockchain-2.3.0rc1.tar", last modified: Fri Mar 29 23:34:03 2024, max compression
+gzip compressed data, was "chia-blockchain-2.3.0rc2.tar", last modified: Wed Apr 10 22:51:30 2024, max compression
```

## Comparing `chia-blockchain-2.3.0rc1.tar` & `chia-blockchain-2.3.0rc2.tar`

### file list

```diff
@@ -1,1275 +1,1275 @@
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.454933 chia-blockchain-2.3.0rc1/
--rw-r--r--   0 runner    (1001) docker     (127)      446 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.coveragerc
--rw-r--r--   0 runner    (1001) docker     (127)      348 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.flake8
--rw-r--r--   0 runner    (1001) docker     (127)      125 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.git_archival.txt
--rw-r--r--   0 runner    (1001) docker     (127)       32 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.gitattributes
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.246932 chia-blockchain-2.3.0rc1/.github/
--rw-r--r--   0 runner    (1001) docker     (127)      259 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/CODEOWNERS
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.246932 chia-blockchain-2.3.0rc1/.github/ISSUE_TEMPLATE/
--rw-r--r--   0 runner    (1001) docker     (127)     1405 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/ISSUE_TEMPLATE/bug_report.yaml
--rw-r--r--   0 runner    (1001) docker     (127)      491 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/ISSUE_TEMPLATE/config.yml
--rw-r--r--   0 runner    (1001) docker     (127)      673 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/PULL_REQUEST_TEMPLATE.md
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.226932 chia-blockchain-2.3.0rc1/.github/actions/
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.246932 chia-blockchain-2.3.0rc1/.github/actions/install/
--rw-r--r--   0 runner    (1001) docker     (127)     2450 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/actions/install/action.yml
--rw-r--r--   0 runner    (1001) docker     (127)     1669 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/dependabot.yml
--rw-r--r--   0 runner    (1001) docker     (127)      435 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/release.yml
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.250932 chia-blockchain-2.3.0rc1/.github/workflows/
--rw-r--r--   0 runner    (1001) docker     (127)     3431 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/benchmarks.yml
--rw-r--r--   0 runner    (1001) docker     (127)    19586 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/build-linux-installer-deb.yml
--rw-r--r--   0 runner    (1001) docker     (127)    19683 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/build-linux-installer-rpm.yml
--rw-r--r--   0 runner    (1001) docker     (127)    18548 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/build-macos-installers.yml
--rw-r--r--   0 runner    (1001) docker     (127)    18461 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/build-windows-installer.yml
--rw-r--r--   0 runner    (1001) docker     (127)      794 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/check-commit-signing.yml
--rw-r--r--   0 runner    (1001) docker     (127)     2031 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/check_wheel_availability.yaml
--rw-r--r--   0 runner    (1001) docker     (127)     2804 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/codeql-analysis.yml
--rw-r--r--   0 runner    (1001) docker     (127)     1036 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/conflict-check.yml
--rw-r--r--   0 runner    (1001) docker     (127)     1131 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/dependency-review.yml
--rw-r--r--   0 runner    (1001) docker     (127)     1338 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/mozilla-ca-cert.yml
--rw-r--r--   0 runner    (1001) docker     (127)     2333 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/pre-commit.yml
--rw-r--r--   0 runner    (1001) docker     (127)      699 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/require-labels.yml
--rw-r--r--   0 runner    (1001) docker     (127)     1427 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/stale-issue.yml
--rw-r--r--   0 runner    (1001) docker     (127)     1079 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/start-release.yml
--rw-r--r--   0 runner    (1001) docker     (127)      877 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/start-sync-test.yml
--rw-r--r--   0 runner    (1001) docker     (127)     2386 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/super-linter.yml
--rw-r--r--   0 runner    (1001) docker     (127)     6450 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/test-install-scripts.yml
--rw-r--r--   0 runner    (1001) docker     (127)     8883 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/test-single.yml
--rw-r--r--   0 runner    (1001) docker     (127)    12143 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/test.yml
--rw-r--r--   0 runner    (1001) docker     (127)     1648 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/trigger-docker-dev.yml
--rw-r--r--   0 runner    (1001) docker     (127)     1102 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/trigger-docker-main.yml
--rw-r--r--   0 runner    (1001) docker     (127)     5827 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.github/workflows/upload-pypi-source.yml
--rw-r--r--   0 runner    (1001) docker     (127)     5412 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.gitignore
--rw-r--r--   0 runner    (1001) docker     (127)      260 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.gitmodules
--rw-r--r--   0 runner    (1001) docker     (127)      110 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.isort.cfg
--rw-r--r--   0 runner    (1001) docker     (127)      893 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.markdown-lint.yml
--rw-r--r--   0 runner    (1001) docker     (127)     2392 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.pre-commit-config.yaml
--rw-r--r--   0 runner    (1001) docker     (127)      182 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/.prettierrc.yaml
--rw-r--r--   0 runner    (1001) docker     (127)     1377 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/BUILD_TIMELORD.md
--rw-r--r--   0 runner    (1001) docker     (127)   228852 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/CHANGELOG.md
--rw-r--r--   0 runner    (1001) docker     (127)     3477 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/CODE_OF_CONDUCT.md
--rw-r--r--   0 runner    (1001) docker     (127)     8855 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/CONTRIBUTING.md
--rw-r--r--   0 runner    (1001) docker     (127)      393 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/INSTALL.md
--rw-r--r--   0 runner    (1001) docker     (127)     1179 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/Install-gui.ps1
--rw-r--r--   0 runner    (1001) docker     (127)     6207 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/Install-plotter.ps1
--rw-r--r--   0 runner    (1001) docker     (127)     3894 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/Install.ps1
--rw-r--r--   0 runner    (1001) docker     (127)      779 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/LEGACY-SUPPORT-POLICY.md
--rw-r--r--   0 runner    (1001) docker     (127)    11347 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/LICENSE
--rw-r--r--   0 runner    (1001) docker     (127)     9256 2024-03-29 23:34:03.454933 chia-blockchain-2.3.0rc1/PKG-INFO
--rw-r--r--   0 runner    (1001) docker     (127)    33098 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/PRETTY_GOOD_PRACTICES.md
--rw-r--r--   0 runner    (1001) docker     (127)     6331 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/README.md
--rw-r--r--   0 runner    (1001) docker     (127)      831 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/SECURITY.md
--rw-r--r--   0 runner    (1001) docker     (127)      286 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/activated.ps1
--rwxr-xr-x   0 runner    (1001) docker     (127)      641 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/activated.py
--rwxr-xr-x   0 runner    (1001) docker     (127)      155 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/activated.sh
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.254932 chia-blockchain-2.3.0rc1/benchmarks/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/benchmarks/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     3186 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/benchmarks/block_ref.py
--rw-r--r--   0 runner    (1001) docker     (127)    16730 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/benchmarks/block_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     2245 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/benchmarks/blockchains.py
--rw-r--r--   0 runner    (1001) docker     (127)     9474 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/benchmarks/coin_store.py
--rw-r--r--   0 runner    (1001) docker     (127)      520 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/benchmarks/jsonify.py
--rw-r--r--   0 runner    (1001) docker     (127)     4693 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/benchmarks/mempool-long-lived.py
--rw-r--r--   0 runner    (1001) docker     (127)    10593 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/benchmarks/mempool.py
--rw-r--r--   0 runner    (1001) docker     (127)    11883 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/benchmarks/streamable.py
--rw-r--r--   0 runner    (1001) docker     (127)   439288 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/benchmarks/transaction_height_delta
--rw-r--r--   0 runner    (1001) docker     (127)     2116 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/benchmarks/utils.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.254932 chia-blockchain-2.3.0rc1/build_scripts/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.254932 chia-blockchain-2.3.0rc1/build_scripts/assets/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.258932 chia-blockchain-2.3.0rc1/build_scripts/assets/deb/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/deb/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)      279 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/deb/control.j2
--rw-r--r--   0 runner    (1001) docker     (127)      290 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/deb/postinst.sh
--rw-r--r--   0 runner    (1001) docker     (127)      178 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/deb/prerm.sh
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.258932 chia-blockchain-2.3.0rc1/build_scripts/assets/dmg/
--rw-r--r--   0 runner    (1001) docker     (127)      315 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/dmg/README
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/dmg/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)   507222 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/dmg/background.tiff
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.258932 chia-blockchain-2.3.0rc1/build_scripts/assets/rpm/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/rpm/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)      214 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/rpm/before-install.sh
--rw-r--r--   0 runner    (1001) docker     (127)      290 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/rpm/postinst.sh
--rw-r--r--   0 runner    (1001) docker     (127)      178 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/rpm/prerm.sh
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.262932 chia-blockchain-2.3.0rc1/build_scripts/assets/systemd/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/systemd/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)      304 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/systemd/chia-crawler@.service
--rw-r--r--   0 runner    (1001) docker     (127)      422 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/systemd/chia-daemon@.service
--rw-r--r--   0 runner    (1001) docker     (127)      338 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/systemd/chia-data-layer-http@.service
--rw-r--r--   0 runner    (1001) docker     (127)      328 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/systemd/chia-data-layer@.service
--rw-r--r--   0 runner    (1001) docker     (127)      302 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/systemd/chia-farmer@.service
--rw-r--r--   0 runner    (1001) docker     (127)      308 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/systemd/chia-full-node@.service
--rw-r--r--   0 runner    (1001) docker     (127)      308 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/systemd/chia-harvester@.service
--rw-r--r--   0 runner    (1001) docker     (127)      310 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/systemd/chia-introducer@.service
--rw-r--r--   0 runner    (1001) docker     (127)      302 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/systemd/chia-seeder@.service
--rw-r--r--   0 runner    (1001) docker     (127)      306 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/systemd/chia-timelord@.service
--rw-r--r--   0 runner    (1001) docker     (127)      465 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/assets/systemd/chia-wallet@.service
--rw-r--r--   0 runner    (1001) docker     (127)     1393 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/build_license_directory.sh
--rw-r--r--   0 runner    (1001) docker     (127)     1310 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/build_linux_deb-1-gui.sh
--rw-r--r--   0 runner    (1001) docker     (127)     5433 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/build_linux_deb-2-installer.sh
--rw-r--r--   0 runner    (1001) docker     (127)     1309 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/build_linux_rpm-1-gui.sh
--rw-r--r--   0 runner    (1001) docker     (127)     4785 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/build_linux_rpm-2-installer.sh
--rw-r--r--   0 runner    (1001) docker     (127)     1332 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/build_macos-1-gui.sh
--rw-r--r--   0 runner    (1001) docker     (127)     3655 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/build_macos-2-installer.sh
--rw-r--r--   0 runner    (1001) docker     (127)     1360 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/build_win_license_dir.sh
--rw-r--r--   0 runner    (1001) docker     (127)     1882 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/build_windows-1-gui.ps1
--rw-r--r--   0 runner    (1001) docker     (127)     4202 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/build_windows-2-installer.ps1
--rw-r--r--   0 runner    (1001) docker     (127)     2218 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/check_dependency_artifacts.py
--rw-r--r--   0 runner    (1001) docker     (127)      907 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/clean-runner.sh
--rw-r--r--   0 runner    (1001) docker     (127)     2820 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/electron-builder.json
--rw-r--r--   0 runner    (1001) docker     (127)     2531 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/installer-version.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.262932 chia-blockchain-2.3.0rc1/build_scripts/npm_global/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/npm_global/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)      342 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/npm_global/package-lock.json
--rw-r--r--   0 runner    (1001) docker     (127)      267 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/npm_global/package.json
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.262932 chia-blockchain-2.3.0rc1/build_scripts/npm_linux/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/npm_linux/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)   531259 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/npm_linux/package-lock.json
--rw-r--r--   0 runner    (1001) docker     (127)      332 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/npm_linux/package.json
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.262932 chia-blockchain-2.3.0rc1/build_scripts/npm_macos/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/npm_macos/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)   575697 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/npm_macos/package-lock.json
--rw-r--r--   0 runner    (1001) docker     (127)      355 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/npm_macos/package.json
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.266932 chia-blockchain-2.3.0rc1/build_scripts/npm_windows/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/npm_windows/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)   525789 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/npm_windows/package-lock.json
--rw-r--r--   0 runner    (1001) docker     (127)      308 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/npm_windows/package.json
--rw-r--r--   0 runner    (1001) docker     (127)     4719 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/build_scripts/pyinstaller.spec
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.266932 chia-blockchain-2.3.0rc1/chia/
--rw-r--r--   0 runner    (1001) docker     (127)      256 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       76 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/__main__.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.266932 chia-blockchain-2.3.0rc1/chia/_tests/
--rw-r--r--   0 runner    (1001) docker     (127)     2318 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/README.md
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.266932 chia-blockchain-2.3.0rc1/chia/_tests/blockchain/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/blockchain/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     6765 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/blockchain/blockchain_test_utils.py
--rw-r--r--   0 runner    (1001) docker     (127)       86 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/blockchain/config.py
--rw-r--r--   0 runner    (1001) docker     (127)   173806 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/blockchain/test_blockchain.py
--rw-r--r--   0 runner    (1001) docker     (127)    41029 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/blockchain/test_blockchain_transactions.py
--rw-r--r--   0 runner    (1001) docker     (127)     5807 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/blockchain/test_lookup_fork_chain.py
--rwxr-xr-x   0 runner    (1001) docker     (127)     2764 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/build-init-files.py
--rw-r--r--   0 runner    (1001) docker     (127)     6961 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/build-job-matrix.py
--rwxr-xr-x   0 runner    (1001) docker     (127)      924 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/check_pytest_monitor_output.py
--rwxr-xr-x   0 runner    (1001) docker     (127)     2325 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/check_sql_statements.py
--rwxr-xr-x   0 runner    (1001) docker     (127)     1750 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/chia-start-sim
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.270932 chia-blockchain-2.3.0rc1/chia/_tests/clvm/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/clvm/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)      968 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/clvm/benchmark_costs.py
--rw-r--r--   0 runner    (1001) docker     (127)     5235 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/clvm/coin_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     3976 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_chialisp_deserialization.py
--rw-r--r--   0 runner    (1001) docker     (127)     1164 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_clvm_step.py
--rw-r--r--   0 runner    (1001) docker     (127)      479 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_condition_codes.py
--rw-r--r--   0 runner    (1001) docker     (127)     1049 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_curry_and_treehash.py
--rw-r--r--   0 runner    (1001) docker     (127)     3339 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_program.py
--rw-r--r--   0 runner    (1001) docker     (127)     5193 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_puzzle_compression.py
--rw-r--r--   0 runner    (1001) docker     (127)     1386 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_puzzle_drivers.py
--rw-r--r--   0 runner    (1001) docker     (127)     9389 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_puzzles.py
--rw-r--r--   0 runner    (1001) docker     (127)    19568 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_singletons.py
--rw-r--r--   0 runner    (1001) docker     (127)     7470 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_spend_sim.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.270932 chia-blockchain-2.3.0rc1/chia/_tests/cmds/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)    20101 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/cmd_test_utils.py
--rw-r--r--   0 runner    (1001) docker     (127)       69 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/config.py
--rw-r--r--   0 runner    (1001) docker     (127)      989 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/conftest.py
--rw-r--r--   0 runner    (1001) docker     (127)     3237 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/test_cmds_util.py
--rw-r--r--   0 runner    (1001) docker     (127)     2632 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/test_farm_cmd.py
--rw-r--r--   0 runner    (1001) docker     (127)     4954 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/test_show.py
--rw-r--r--   0 runner    (1001) docker     (127)     7316 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/test_sim.py
--rw-r--r--   0 runner    (1001) docker     (127)     1055 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/test_timelock_args.py
--rw-r--r--   0 runner    (1001) docker     (127)     4621 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/test_tx_config_args.py
--rw-r--r--   0 runner    (1001) docker     (127)     1810 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/testing_classes.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.274932 chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     8296 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_coins.py
--rw-r--r--   0 runner    (1001) docker     (127)     1470 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_consts.py
--rw-r--r--   0 runner    (1001) docker     (127)    19443 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_dao.py
--rw-r--r--   0 runner    (1001) docker     (127)    14280 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_did.py
--rw-r--r--   0 runner    (1001) docker     (127)    14635 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_nft.py
--rw-r--r--   0 runner    (1001) docker     (127)     4710 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_notifications.py
--rw-r--r--   0 runner    (1001) docker     (127)     3109 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_offer.toffer
--rw-r--r--   0 runner    (1001) docker     (127)    12158 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_vcs.py
--rw-r--r--   0 runner    (1001) docker     (127)    43190 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)     3424 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_wallet_check.py
--rw-r--r--   0 runner    (1001) docker     (127)    45114 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/conftest.py
--rw-r--r--   0 runner    (1001) docker     (127)     4514 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/connection_utils.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.278932 chia-blockchain-2.3.0rc1/chia/_tests/core/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.278932 chia-blockchain-2.3.0rc1/chia/_tests/core/cmds/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/cmds/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)    13587 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/cmds/test_beta.py
--rw-r--r--   0 runner    (1001) docker     (127)    39807 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/cmds/test_keys.py
--rw-r--r--   0 runner    (1001) docker     (127)     4182 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/cmds/test_wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)       69 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/config.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.278932 chia-blockchain-2.3.0rc1/chia/_tests/core/consensus/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/consensus/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     2221 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/consensus/test_block_creation.py
--rw-r--r--   0 runner    (1001) docker     (127)     5100 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/consensus/test_pot_iterations.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.278932 chia-blockchain-2.3.0rc1/chia/_tests/core/custom_types/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/custom_types/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     3803 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/custom_types/test_coin.py
--rw-r--r--   0 runner    (1001) docker     (127)     5605 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/custom_types/test_proof_of_space.py
--rw-r--r--   0 runner    (1001) docker     (127)     2700 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/custom_types/test_spend_bundle.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.282932 chia-blockchain-2.3.0rc1/chia/_tests/core/daemon/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/daemon/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       86 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/daemon/config.py
--rw-r--r--   0 runner    (1001) docker     (127)    70086 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/daemon/test_daemon.py
--rw-r--r--   0 runner    (1001) docker     (127)     4007 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/daemon/test_daemon_register.py
--rw-r--r--   0 runner    (1001) docker     (127)     2507 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/daemon/test_keychain_proxy.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.282932 chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       99 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/config.py
--rw-r--r--   0 runner    (1001) docker     (127)     3878 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/conftest.py
--rw-r--r--   0 runner    (1001) docker     (127)     2341 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/test_data_cli.py
--rw-r--r--   0 runner    (1001) docker     (127)     2517 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/test_data_layer.py
--rw-r--r--   0 runner    (1001) docker     (127)     4469 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/test_data_layer_util.py
--rw-r--r--   0 runner    (1001) docker     (127)   314369 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/test_data_rpc.py
--rw-r--r--   0 runner    (1001) docker     (127)    72022 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/test_data_store.py
--rw-r--r--   0 runner    (1001) docker     (127)    14911 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/test_data_store_schema.py
--rw-r--r--   0 runner    (1001) docker     (127)     7229 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/util.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.282932 chia-blockchain-2.3.0rc1/chia/_tests/core/farmer/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/farmer/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       69 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/farmer/config.py
--rw-r--r--   0 runner    (1001) docker     (127)     3972 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/farmer/test_farmer_api.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.286933 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       86 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/config.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.286933 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/dos/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/dos/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       53 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/dos/config.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.286933 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/full_sync/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/full_sync/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       86 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/full_sync/config.py
--rw-r--r--   0 runner    (1001) docker     (127)    20529 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/full_sync/test_full_sync.py
--rw-r--r--   0 runner    (1001) docker     (127)     1048 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/ram_db.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.290933 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/stores/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/stores/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       86 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/stores/config.py
--rw-r--r--   0 runner    (1001) docker     (127)    20435 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/stores/test_block_store.py
--rw-r--r--   0 runner    (1001) docker     (127)    36969 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/stores/test_coin_store.py
--rw-r--r--   0 runner    (1001) docker     (127)    50558 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/stores/test_full_node_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     8154 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/stores/test_hint_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     4838 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/stores/test_sync_store.py
--rw-r--r--   0 runner    (1001) docker     (127)    23803 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_address_manager.py
--rw-r--r--   0 runner    (1001) docker     (127)    24824 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_block_height_map.py
--rw-r--r--   0 runner    (1001) docker     (127)    19769 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_conditions.py
--rw-r--r--   0 runner    (1001) docker     (127)   110640 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_full_node.py
--rw-r--r--   0 runner    (1001) docker     (127)     2092 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_generator_tools.py
--rw-r--r--   0 runner    (1001) docker     (127)     4577 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_hint_management.py
--rw-r--r--   0 runner    (1001) docker     (127)     1340 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_node_load.py
--rw-r--r--   0 runner    (1001) docker     (127)     7470 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_performance.py
--rw-r--r--   0 runner    (1001) docker     (127)    14014 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_subscriptions.py
--rw-r--r--   0 runner    (1001) docker     (127)     7882 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_transactions.py
--rw-r--r--   0 runner    (1001) docker     (127)     5774 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_tx_processing_queue.py
--rw-r--r--   0 runner    (1001) docker     (127)   187873 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/large_block.py
--rw-r--r--   0 runner    (1001) docker     (127)     2884 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/make_block_generator.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.290933 chia-blockchain-2.3.0rc1/chia/_tests/core/mempool/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/mempool/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       86 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/mempool/config.py
--rw-r--r--   0 runner    (1001) docker     (127)   130987 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/mempool/test_mempool.py
--rw-r--r--   0 runner    (1001) docker     (127)     3635 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/mempool/test_mempool_fee_estimator.py
--rw-r--r--   0 runner    (1001) docker     (127)     2172 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/mempool/test_mempool_fee_protocol.py
--rw-r--r--   0 runner    (1001) docker     (127)    87024 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/mempool/test_mempool_manager.py
--rw-r--r--   0 runner    (1001) docker     (127)     2617 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/mempool/test_mempool_performance.py
--rw-r--r--   0 runner    (1001) docker     (127)    28681 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/mempool/test_singleton_fast_forward.py
--rw-r--r--   0 runner    (1001) docker     (127)      912 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/node_height.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.294932 chia-blockchain-2.3.0rc1/chia/_tests/core/server/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/server/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       69 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/server/config.py
--rw-r--r--   0 runner    (1001) docker     (127)     2553 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/server/flood.py
--rw-r--r--   0 runner    (1001) docker     (127)     3773 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/server/serve.py
--rw-r--r--   0 runner    (1001) docker     (127)     1983 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/server/test_capabilities.py
--rw-r--r--   0 runner    (1001) docker     (127)    12266 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/server/test_dos.py
--rw-r--r--   0 runner    (1001) docker     (127)     5612 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/server/test_event_loop.py
--rw-r--r--   0 runner    (1001) docker     (127)    10058 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/server/test_loop.py
--rw-r--r--   0 runner    (1001) docker     (127)     2639 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/server/test_node_discovery.py
--rw-r--r--   0 runner    (1001) docker     (127)    14925 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/server/test_rate_limits.py
--rw-r--r--   0 runner    (1001) docker     (127)    10428 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/server/test_server.py
--rw-r--r--   0 runner    (1001) docker     (127)      186 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/server/test_upnp.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.294932 chia-blockchain-2.3.0rc1/chia/_tests/core/services/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/services/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       53 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/services/config.py
--rw-r--r--   0 runner    (1001) docker     (127)     6418 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/services/test_services.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.294932 chia-blockchain-2.3.0rc1/chia/_tests/core/ssl/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/ssl/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       69 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/ssl/config.py
--rw-r--r--   0 runner    (1001) docker     (127)     5234 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/ssl/test_ssl.py
--rw-r--r--   0 runner    (1001) docker     (127)      901 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/test_coins.py
--rw-r--r--   0 runner    (1001) docker     (127)    12328 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/test_cost_calculation.py
--rw-r--r--   0 runner    (1001) docker     (127)     3851 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/test_crawler.py
--rw-r--r--   0 runner    (1001) docker     (127)     2200 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/test_crawler_rpc.py
--rw-r--r--   0 runner    (1001) docker     (127)      622 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/test_daemon_rpc.py
--rw-r--r--   0 runner    (1001) docker     (127)     5419 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/test_db_conversion.py
--rw-r--r--   0 runner    (1001) docker     (127)     5834 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/test_db_validation.py
--rw-r--r--   0 runner    (1001) docker     (127)    22463 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/test_farmer_harvester_rpc.py
--rw-r--r--   0 runner    (1001) docker     (127)     1055 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/test_filter.py
--rw-r--r--   0 runner    (1001) docker     (127)    34764 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/test_full_node_rpc.py
--rw-r--r--   0 runner    (1001) docker     (127)    12010 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/test_merkle_set.py
--rw-r--r--   0 runner    (1001) docker     (127)     1386 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/test_program.py
--rw-r--r--   0 runner    (1001) docker     (127)     1176 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/test_rpc_util.py
--rw-r--r--   0 runner    (1001) docker     (127)    13523 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/test_seeder.py
--rw-r--r--   0 runner    (1001) docker     (127)      319 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/test_setproctitle.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.298933 chia-blockchain-2.3.0rc1/chia/_tests/core/util/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/util/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       69 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/util/config.py
--rw-r--r--   0 runner    (1001) docker     (127)     2304 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_cached_bls.py
--rw-r--r--   0 runner    (1001) docker     (127)    13753 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_config.py
--rw-r--r--   0 runner    (1001) docker     (127)     4427 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_file_keyring_synchronization.py
--rw-r--r--   0 runner    (1001) docker     (127)    14620 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_files.py
--rw-r--r--   0 runner    (1001) docker     (127)     3545 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_jsonify.py
--rw-r--r--   0 runner    (1001) docker     (127)    21910 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_keychain.py
--rw-r--r--   0 runner    (1001) docker     (127)    23080 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_keyring_wrapper.py
--rw-r--r--   0 runner    (1001) docker     (127)    14519 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_lockfile.py
--rw-r--r--   0 runner    (1001) docker     (127)     6370 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_log_exceptions.py
--rw-r--r--   0 runner    (1001) docker     (127)     1682 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_lru_cache.py
--rw-r--r--   0 runner    (1001) docker     (127)     1442 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_significant_bits.py
--rw-r--r--   0 runner    (1001) docker     (127)    28803 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_streamable.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.298933 chia-blockchain-2.3.0rc1/chia/_tests/db/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/db/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)    20816 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/db/test_db_wrapper.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.298933 chia-blockchain-2.3.0rc1/chia/_tests/environments/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/environments/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)      966 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/environments/common.py
--rw-r--r--   0 runner    (1001) docker     (127)     1477 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/environments/full_node.py
--rw-r--r--   0 runner    (1001) docker     (127)    18014 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/environments/wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)      821 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/ether.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.298933 chia-blockchain-2.3.0rc1/chia/_tests/farmer_harvester/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/farmer_harvester/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       69 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/farmer_harvester/config.py
--rw-r--r--   0 runner    (1001) docker     (127)    48355 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/farmer_harvester/test_farmer.py
--rw-r--r--   0 runner    (1001) docker     (127)    13565 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/farmer_harvester/test_farmer_harvester.py
--rw-r--r--   0 runner    (1001) docker     (127)     6008 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/farmer_harvester/test_filter_prefix_bits.py
--rw-r--r--   0 runner    (1001) docker     (127)    18876 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/farmer_harvester/test_third_party_harvesters.py
--rw-r--r--   0 runner    (1001) docker     (127)    14109 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/farmer_harvester/test_third_party_harvesters_data.json
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.298933 chia-blockchain-2.3.0rc1/chia/_tests/fee_estimation/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/fee_estimation/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       69 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/fee_estimation/config.py
--rw-r--r--   0 runner    (1001) docker     (127)    10630 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/fee_estimation/test_fee_estimation_integration.py
--rw-r--r--   0 runner    (1001) docker     (127)    11532 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/fee_estimation/test_fee_estimation_rpc.py
--rw-r--r--   0 runner    (1001) docker     (127)     5145 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/fee_estimation/test_fee_estimation_unit_tests.py
--rw-r--r--   0 runner    (1001) docker     (127)     5895 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/fee_estimation/test_mempoolitem_height_added.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.302933 chia-blockchain-2.3.0rc1/chia/_tests/generator/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/generator/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.302933 chia-blockchain-2.3.0rc1/chia/_tests/generator/puzzles/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/generator/puzzles/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       89 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/generator/puzzles/test_generator_deserialize.clsp
--rw-r--r--   0 runner    (1001) docker     (127)       27 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/generator/puzzles/test_generator_deserialize.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      791 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/generator/puzzles/test_multiple_generator_input_arguments.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      465 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/generator/puzzles/test_multiple_generator_input_arguments.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)    14619 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/generator/test_compression.py
--rw-r--r--   0 runner    (1001) docker     (127)     4207 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/generator/test_generator_types.py
--rw-r--r--   0 runner    (1001) docker     (127)     6892 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/generator/test_rom.py
--rw-r--r--   0 runner    (1001) docker     (127)     4142 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/generator/test_scan.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.302933 chia-blockchain-2.3.0rc1/chia/_tests/plot_sync/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/plot_sync/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       69 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/plot_sync/config.py
--rw-r--r--   0 runner    (1001) docker     (127)     3429 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/plot_sync/test_delta.py
--rw-r--r--   0 runner    (1001) docker     (127)    30589 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/plot_sync/test_plot_sync.py
--rw-r--r--   0 runner    (1001) docker     (127)    19621 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/plot_sync/test_receiver.py
--rw-r--r--   0 runner    (1001) docker     (127)     5443 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/plot_sync/test_sender.py
--rw-r--r--   0 runner    (1001) docker     (127)    19139 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/plot_sync/test_sync_simulated.py
--rw-r--r--   0 runner    (1001) docker     (127)     2692 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/plot_sync/util.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.302933 chia-blockchain-2.3.0rc1/chia/_tests/plotting/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/plotting/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       69 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/plotting/config.py
--rw-r--r--   0 runner    (1001) docker     (127)    33046 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/plotting/test_plot_manager.py
--rw-r--r--   0 runner    (1001) docker     (127)      316 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/plotting/util.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.306933 chia-blockchain-2.3.0rc1/chia/_tests/pools/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/pools/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       99 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/pools/config.py
--rw-r--r--   0 runner    (1001) docker     (127)     1186 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/pools/test_pool_cmdline.py
--rw-r--r--   0 runner    (1001) docker     (127)     1788 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/pools/test_pool_config.py
--rw-r--r--   0 runner    (1001) docker     (127)    14652 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/pools/test_pool_puzzles_lifecycle.py
--rw-r--r--   0 runner    (1001) docker     (127)    47271 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/pools/test_pool_rpc.py
--rw-r--r--   0 runner    (1001) docker     (127)     7123 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/pools/test_pool_wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)     7177 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/pools/test_wallet_pool_store.py
--rw-r--r--   0 runner    (1001) docker     (127)    11220 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/process_junit.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.306933 chia-blockchain-2.3.0rc1/chia/_tests/rpc/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/rpc/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     2563 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/rpc/test_rpc_client.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.306933 chia-blockchain-2.3.0rc1/chia/_tests/simulation/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/simulation/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)      127 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/simulation/config.py
--rw-r--r--   0 runner    (1001) docker     (127)    22823 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/simulation/test_simulation.py
--rw-r--r--   0 runner    (1001) docker     (127)     9272 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/simulation/test_simulator.py
--rw-r--r--   0 runner    (1001) docker     (127)     5099 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/simulation/test_start_simulator.py
--rw-r--r--   0 runner    (1001) docker     (127)      431 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/testconfig.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.306933 chia-blockchain-2.3.0rc1/chia/_tests/timelord/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/timelord/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       69 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/timelord/config.py
--rw-r--r--   0 runner    (1001) docker     (127)     9596 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/timelord/test_new_peak.py
--rw-r--r--   0 runner    (1001) docker     (127)      298 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/timelord/test_timelord.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.310932 chia-blockchain-2.3.0rc1/chia/_tests/tools/
--rw-r--r--   0 runner    (1001) docker     (127)    19256 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/tools/1315537.json
--rw-r--r--   0 runner    (1001) docker     (127)    19163 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/tools/1315544.json
--rw-r--r--   0 runner    (1001) docker     (127)    18650 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/tools/1315630.json
--rw-r--r--   0 runner    (1001) docker     (127)     9841 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/tools/300000.json
--rw-r--r--   0 runner    (1001) docker     (127)    17387 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/tools/442734.json
--rw-r--r--   0 runner    (1001) docker     (127)   233239 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/tools/466212.json
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/tools/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       98 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/tools/config.py
--rw-r--r--   0 runner    (1001) docker     (127)   405504 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/tools/test-blockchain-db.sqlite
--rw-r--r--   0 runner    (1001) docker     (127)      714 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/tools/test_full_sync.py
--rw-r--r--   0 runner    (1001) docker     (127)     3276 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/tools/test_legacy_keyring.py
--rw-r--r--   0 runner    (1001) docker     (127)     4393 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/tools/test_run_block.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.322933 chia-blockchain-2.3.0rc1/chia/_tests/util/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     7291 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/benchmark_cost.py
--rw-r--r--   0 runner    (1001) docker     (127)     3977 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/benchmarks.py
--rw-r--r--   0 runner    (1001) docker     (127)    10283 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/bip39_test_vectors.json
--rw-r--r--   0 runner    (1001) docker     (127)     5005 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/blockchain.py
--rw-r--r--   0 runner    (1001) docker     (127)    11215 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/build_network_protocol_files.py
--rw-r--r--   0 runner    (1001) docker     (127)   121543 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/clvm_generator.bin
--rw-r--r--   0 runner    (1001) docker     (127)       53 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/config.py
--rw-r--r--   0 runner    (1001) docker     (127)      845 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/constants.py
--rw-r--r--   0 runner    (1001) docker     (127)     1092 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/db_connection.py
--rw-r--r--   0 runner    (1001) docker     (127)     8332 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/full_sync.py
--rw-r--r--   0 runner    (1001) docker     (127)     4328 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/gen_ssl_certs.py
--rw-r--r--   0 runner    (1001) docker     (127)     1587 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/generator_tools_testing.py
--rw-r--r--   0 runner    (1001) docker     (127)     1617 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/key_tool.py
--rw-r--r--   0 runner    (1001) docker     (127)    18730 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/misc.py
--rw-r--r--   0 runner    (1001) docker     (127)    37175 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/network_protocol_data.py
--rw-r--r--   0 runner    (1001) docker     (127)    50511 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/protocol_messages_bytes-v1.0
--rw-r--r--   0 runner    (1001) docker     (127)   182047 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/protocol_messages_json.py
--rw-r--r--   0 runner    (1001) docker     (127)      721 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/rpc.py
--rw-r--r--   0 runner    (1001) docker     (127)     5960 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/run_block.py
--rw-r--r--   0 runner    (1001) docker     (127)    18244 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/setup_nodes.py
--rw-r--r--   0 runner    (1001) docker     (127)      297 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/temp_file.py
--rw-r--r--   0 runner    (1001) docker     (127)    10700 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_async_pool.py
--rw-r--r--   0 runner    (1001) docker     (127)     1143 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_build_job_matrix.py
--rw-r--r--   0 runner    (1001) docker     (127)      161 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_build_network_protocol_files.py
--rw-r--r--   0 runner    (1001) docker     (127)     1416 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_chia_version.py
--rw-r--r--   0 runner    (1001) docker     (127)      353 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_collection.py
--rw-r--r--   0 runner    (1001) docker     (127)    11353 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_condition_tools.py
--rw-r--r--   0 runner    (1001) docker     (127)    12399 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_config.py
--rw-r--r--   0 runner    (1001) docker     (127)     1595 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_dump_keyring.py
--rw-r--r--   0 runner    (1001) docker     (127)      321 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_errors.py
--rw-r--r--   0 runner    (1001) docker     (127)    11211 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_full_block_utils.py
--rw-r--r--   0 runner    (1001) docker     (127)      754 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_installed.py
--rw-r--r--   0 runner    (1001) docker     (127)     1993 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_limited_semaphore.py
--rw-r--r--   0 runner    (1001) docker     (127)     1262 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_logging_filter.py
--rw-r--r--   0 runner    (1001) docker     (127)    14018 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_misc.py
--rw-r--r--   0 runner    (1001) docker     (127)     2989 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_network.py
--rw-r--r--   0 runner    (1001) docker     (127)    26069 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_network_protocol_files.py
--rw-r--r--   0 runner    (1001) docker     (127)    20957 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_network_protocol_json.py
--rw-r--r--   0 runner    (1001) docker     (127)     8652 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_network_protocol_test.py
--rw-r--r--   0 runner    (1001) docker     (127)     2346 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_paginator.py
--rw-r--r--   0 runner    (1001) docker     (127)      653 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_pprint.py
--rw-r--r--   0 runner    (1001) docker     (127)    16144 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_priority_mutex.py
--rw-r--r--   0 runner    (1001) docker     (127)     3575 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_recursive_replace.py
--rw-r--r--   0 runner    (1001) docker     (127)      403 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_service_groups.py
--rw-r--r--   0 runner    (1001) docker     (127)      934 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_ssl_check.py
--rw-r--r--   0 runner    (1001) docker     (127)    10754 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_struct_stream.py
--rw-r--r--   0 runner    (1001) docker     (127)     1514 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_testnet_overrides.py
--rw-r--r--   0 runner    (1001) docker     (127)      891 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_tests_misc.py
--rw-r--r--   0 runner    (1001) docker     (127)     1035 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_timing.py
--rw-r--r--   0 runner    (1001) docker     (127)     1885 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/test_trusted_peer.py
--rw-r--r--   0 runner    (1001) docker     (127)     4532 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/util/time_out_assert.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.330933 chia-blockchain-2.3.0rc1/chia/_tests/wallet/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.330933 chia-blockchain-2.3.0rc1/chia/_tests/wallet/cat_wallet/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/cat_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       86 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/cat_wallet/config.py
--rw-r--r--   0 runner    (1001) docker     (127)    19794 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/cat_wallet/test_cat_lifecycle.py
--rw-r--r--   0 runner    (1001) docker     (127)     2889 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/cat_wallet/test_cat_outer_puzzle.py
--rw-r--r--   0 runner    (1001) docker     (127)    56045 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/cat_wallet/test_cat_wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)    12937 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/cat_wallet/test_offer_lifecycle.py
--rw-r--r--   0 runner    (1001) docker     (127)    81245 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/cat_wallet/test_trades.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.330933 chia-blockchain-2.3.0rc1/chia/_tests/wallet/clawback/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/clawback/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       69 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/clawback/config.py
--rw-r--r--   0 runner    (1001) docker     (127)     3404 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/clawback/test_clawback_decorator.py
--rw-r--r--   0 runner    (1001) docker     (127)    12823 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/clawback/test_clawback_lifecycle.py
--rw-r--r--   0 runner    (1001) docker     (127)     2130 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/clawback/test_clawback_metadata.py
--rw-r--r--   0 runner    (1001) docker     (127)       86 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/config.py
--rw-r--r--   0 runner    (1001) docker     (127)    10007 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/conftest.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.330933 chia-blockchain-2.3.0rc1/chia/_tests/wallet/dao_wallet/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/dao_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       69 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/dao_wallet/config.py
--rw-r--r--   0 runner    (1001) docker     (127)    50118 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/dao_wallet/test_dao_clvm.py
--rw-r--r--   0 runner    (1001) docker     (127)   167669 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/dao_wallet/test_dao_wallets.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.334933 chia-blockchain-2.3.0rc1/chia/_tests/wallet/db_wallet/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/db_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       69 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/db_wallet/config.py
--rw-r--r--   0 runner    (1001) docker     (127)     6417 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/db_wallet/test_db_graftroot.py
--rw-r--r--   0 runner    (1001) docker     (127)    21776 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/db_wallet/test_dl_offers.py
--rw-r--r--   0 runner    (1001) docker     (127)    26975 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/db_wallet/test_dl_wallet.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.334933 chia-blockchain-2.3.0rc1/chia/_tests/wallet/did_wallet/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/did_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       86 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/did_wallet/config.py
--rw-r--r--   0 runner    (1001) docker     (127)    69405 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/did_wallet/test_did.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.334933 chia-blockchain-2.3.0rc1/chia/_tests/wallet/nft_wallet/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/nft_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       87 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/nft_wallet/config.py
--rw-r--r--   0 runner    (1001) docker     (127)    66494 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/nft_wallet/test_nft_1_offers.py
--rw-r--r--   0 runner    (1001) docker     (127)    45185 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/nft_wallet/test_nft_bulk_mint.py
--rw-r--r--   0 runner    (1001) docker     (127)    15506 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/nft_wallet/test_nft_lifecycle.py
--rw-r--r--   0 runner    (1001) docker     (127)    52950 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/nft_wallet/test_nft_offers.py
--rw-r--r--   0 runner    (1001) docker     (127)     7626 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/nft_wallet/test_nft_puzzles.py
--rw-r--r--   0 runner    (1001) docker     (127)    86274 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/nft_wallet/test_nft_wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)     3273 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/nft_wallet/test_ownership_outer_puzzle.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.338933 chia-blockchain-2.3.0rc1/chia/_tests/wallet/rpc/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/rpc/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       86 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/rpc/config.py
--rw-r--r--   0 runner    (1001) docker     (127)    12533 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/rpc/test_dl_wallet_rpc.py
--rw-r--r--   0 runner    (1001) docker     (127)   128074 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/rpc/test_wallet_rpc.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.338933 chia-blockchain-2.3.0rc1/chia/_tests/wallet/simple_sync/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/simple_sync/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       69 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/simple_sync/config.py
--rw-r--r--   0 runner    (1001) docker     (127)    32532 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/simple_sync/test_simple_sync_protocol.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.338933 chia-blockchain-2.3.0rc1/chia/_tests/wallet/sync/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/sync/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       86 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/sync/config.py
--rw-r--r--   0 runner    (1001) docker     (127)    68588 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/sync/test_wallet_sync.py
--rw-r--r--   0 runner    (1001) docker     (127)     7270 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_address_type.py
--rw-r--r--   0 runner    (1001) docker     (127)     1385 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_bech32m.py
--rw-r--r--   0 runner    (1001) docker     (127)     2148 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_chialisp.py
--rw-r--r--   0 runner    (1001) docker     (127)    23910 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_coin_selection.py
--rw-r--r--   0 runner    (1001) docker     (127)    16214 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_conditions.py
--rw-r--r--   0 runner    (1001) docker     (127)    11819 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_debug_spend_bundle.py
--rw-r--r--   0 runner    (1001) docker     (127)    28340 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_new_wallet_protocol.py
--rw-r--r--   0 runner    (1001) docker     (127)     8624 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_nft_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     8161 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_notifications.py
--rw-r--r--   0 runner    (1001) docker     (127)    14300 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_offer_parsing_performance.py
--rw-r--r--   0 runner    (1001) docker     (127)     6105 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_puzzle_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     7796 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_sign_coin_spends.py
--rw-r--r--   0 runner    (1001) docker     (127)     5043 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_singleton.py
--rw-r--r--   0 runner    (1001) docker     (127)    32097 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_singleton_lifecycle_fast.py
--rw-r--r--   0 runner    (1001) docker     (127)     6780 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_singleton_store.py
--rw-r--r--   0 runner    (1001) docker     (127)      743 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_taproot.py
--rw-r--r--   0 runner    (1001) docker     (127)    38838 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_transaction_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     7969 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_util.py
--rw-r--r--   0 runner    (1001) docker     (127)    93005 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)     4847 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_blockchain.py
--rw-r--r--   0 runner    (1001) docker     (127)    43180 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_coin_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     2383 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_interested_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     1659 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_key_val_store.py
--rw-r--r--   0 runner    (1001) docker     (127)    26087 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_node.py
--rw-r--r--   0 runner    (1001) docker     (127)     4332 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_retry.py
--rw-r--r--   0 runner    (1001) docker     (127)     4477 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_state_manager.py
--rw-r--r--   0 runner    (1001) docker     (127)     9156 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_test_framework.py
--rw-r--r--   0 runner    (1001) docker     (127)     9131 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_trade_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     1221 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_user_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     6378 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_utils.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.338933 chia-blockchain-2.3.0rc1/chia/_tests/wallet/vc_wallet/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/vc_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       69 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/vc_wallet/config.py
--rw-r--r--   0 runner    (1001) docker     (127)     2678 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/vc_wallet/test_cr_outer_puzzle.py
--rw-r--r--   0 runner    (1001) docker     (127)    36650 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/vc_wallet/test_vc_lifecycle.py
--rw-r--r--   0 runner    (1001) docker     (127)    29786 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/vc_wallet/test_vc_wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)    11285 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/wallet/wallet_block_tools.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.338933 chia-blockchain-2.3.0rc1/chia/_tests/weight_proof/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/weight_proof/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       69 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/weight_proof/config.py
--rw-r--r--   0 runner    (1001) docker     (127)    22141 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/_tests/weight_proof/test_weight_proof.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.338933 chia-blockchain-2.3.0rc1/chia/clvm/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/clvm/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)      325 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/clvm/singleton.py
--rw-r--r--   0 runner    (1001) docker     (127)    20915 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/clvm/spend_sim.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.350933 chia-blockchain-2.3.0rc1/chia/cmds/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     7240 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/beta.py
--rw-r--r--   0 runner    (1001) docker     (127)     4705 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/beta_funcs.py
--rw-r--r--   0 runner    (1001) docker     (127)    16311 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/check_wallet_db.py
--rw-r--r--   0 runner    (1001) docker     (127)     4617 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/chia.py
--rw-r--r--   0 runner    (1001) docker     (127)    14834 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/cmds_util.py
--rw-r--r--   0 runner    (1001) docker     (127)    12147 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/coin_funcs.py
--rw-r--r--   0 runner    (1001) docker     (127)     6413 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/coins.py
--rw-r--r--   0 runner    (1001) docker     (127)     1387 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/completion.py
--rw-r--r--   0 runner    (1001) docker     (127)    14772 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/configure.py
--rw-r--r--   0 runner    (1001) docker     (127)    29424 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/dao.py
--rw-r--r--   0 runner    (1001) docker     (127)    25500 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/dao_funcs.py
--rw-r--r--   0 runner    (1001) docker     (127)    17641 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/data.py
--rw-r--r--   0 runner    (1001) docker     (127)    12664 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/data_funcs.py
--rw-r--r--   0 runner    (1001) docker     (127)     2937 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/db.py
--rw-r--r--   0 runner    (1001) docker     (127)     3341 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/db_backup_func.py
--rw-r--r--   0 runner    (1001) docker     (127)    18692 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/db_upgrade_func.py
--rw-r--r--   0 runner    (1001) docker     (127)     7802 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/db_validate_func.py
--rw-r--r--   0 runner    (1001) docker     (127)      332 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/dev.py
--rw-r--r--   0 runner    (1001) docker     (127)     2168 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/farm.py
--rw-r--r--   0 runner    (1001) docker     (127)     9190 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/farm_funcs.py
--rw-r--r--   0 runner    (1001) docker     (127)     2079 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/init.py
--rw-r--r--   0 runner    (1001) docker     (127)    14060 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/init_funcs.py
--rw-r--r--   0 runner    (1001) docker     (127)     4227 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/installers.py
--rw-r--r--   0 runner    (1001) docker     (127)    14287 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/keys.py
--rw-r--r--   0 runner    (1001) docker     (127)    27118 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/keys_funcs.py
--rw-r--r--   0 runner    (1001) docker     (127)     1291 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/netspace.py
--rw-r--r--   0 runner    (1001) docker     (127)     2558 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/netspace_funcs.py
--rw-r--r--   0 runner    (1001) docker     (127)      436 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/options.py
--rw-r--r--   0 runner    (1001) docker     (127)     4784 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/passphrase.py
--rw-r--r--   0 runner    (1001) docker     (127)    12569 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/passphrase_funcs.py
--rw-r--r--   0 runner    (1001) docker     (127)     1398 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/peer.py
--rw-r--r--   0 runner    (1001) docker     (127)     5235 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/peer_funcs.py
--rw-r--r--   0 runner    (1001) docker     (127)     7768 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/plotnft.py
--rw-r--r--   0 runner    (1001) docker     (127)    18442 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/plotnft_funcs.py
--rw-r--r--   0 runner    (1001) docker     (127)     7256 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/plots.py
--rw-r--r--   0 runner    (1001) docker     (127)      430 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/plotters.py
--rw-r--r--   0 runner    (1001) docker     (127)     6712 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/rpc.py
--rw-r--r--   0 runner    (1001) docker     (127)     2443 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/show.py
--rw-r--r--   0 runner    (1001) docker     (127)     9803 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/show_funcs.py
--rw-r--r--   0 runner    (1001) docker     (127)     7671 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/sim.py
--rw-r--r--   0 runner    (1001) docker     (127)    21730 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/sim_funcs.py
--rw-r--r--   0 runner    (1001) docker     (127)      782 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/start.py
--rw-r--r--   0 runner    (1001) docker     (127)     3452 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/start_funcs.py
--rw-r--r--   0 runner    (1001) docker     (127)     2055 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/stop.py
--rw-r--r--   0 runner    (1001) docker     (127)      325 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/units.py
--rw-r--r--   0 runner    (1001) docker     (127)    51260 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)    71518 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/cmds/wallet_funcs.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.354933 chia-blockchain-2.3.0rc1/chia/consensus/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)    23954 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/block_body_validation.py
--rw-r--r--   0 runner    (1001) docker     (127)    22102 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/block_creation.py
--rw-r--r--   0 runner    (1001) docker     (127)    51140 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/block_header_validation.py
--rw-r--r--   0 runner    (1001) docker     (127)      726 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/block_record.py
--rw-r--r--   0 runner    (1001) docker     (127)     2246 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/block_rewards.py
--rw-r--r--   0 runner    (1001) docker     (127)     1602 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/block_root_validation.py
--rw-r--r--   0 runner    (1001) docker     (127)    49055 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/blockchain.py
--rw-r--r--   0 runner    (1001) docker     (127)     3975 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/blockchain_interface.py
--rw-r--r--   0 runner    (1001) docker     (127)     1203 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/coinbase.py
--rw-r--r--   0 runner    (1001) docker     (127)      228 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/condition_costs.py
--rw-r--r--   0 runner    (1001) docker     (127)     4673 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/constants.py
--rw-r--r--   0 runner    (1001) docker     (127)      396 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/cost_calculator.py
--rw-r--r--   0 runner    (1001) docker     (127)     5301 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/default_constants.py
--rw-r--r--   0 runner    (1001) docker     (127)     2183 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/deficit.py
--rw-r--r--   0 runner    (1001) docker     (127)    18266 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/difficulty_adjustment.py
--rw-r--r--   0 runner    (1001) docker     (127)     3348 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/find_fork_point.py
--rw-r--r--   0 runner    (1001) docker     (127)     6609 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/full_block_to_block_record.py
--rw-r--r--   0 runner    (1001) docker     (127)     4934 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/get_block_challenge.py
--rw-r--r--   0 runner    (1001) docker     (127)     7852 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/make_sub_epoch_summary.py
--rw-r--r--   0 runner    (1001) docker     (127)    18022 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/multiprocess_validation.py
--rw-r--r--   0 runner    (1001) docker     (127)      787 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/pos_quality.py
--rw-r--r--   0 runner    (1001) docker     (127)     2829 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/pot_iterations.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.354933 chia-blockchain-2.3.0rc1/chia/consensus/puzzles/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/puzzles/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     2457 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/puzzles/chialisp_deserialisation.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      943 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/puzzles/chialisp_deserialisation.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     1633 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/puzzles/rom_bootstrap_generator.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     1475 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/puzzles/rom_bootstrap_generator.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     6971 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/consensus/vdf_info_computation.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.354933 chia-blockchain-2.3.0rc1/chia/daemon/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/daemon/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     8542 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/daemon/client.py
--rw-r--r--   0 runner    (1001) docker     (127)    18184 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/daemon/keychain_proxy.py
--rw-r--r--   0 runner    (1001) docker     (127)    12803 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/daemon/keychain_server.py
--rw-r--r--   0 runner    (1001) docker     (127)    64587 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/daemon/server.py
--rw-r--r--   0 runner    (1001) docker     (127)     2069 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/daemon/windows_signal.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.358933 chia-blockchain-2.3.0rc1/chia/data_layer/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/data_layer/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)    50856 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/data_layer/data_layer.py
--rw-r--r--   0 runner    (1001) docker     (127)      662 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/data_layer/data_layer_api.py
--rw-r--r--   0 runner    (1001) docker     (127)     1247 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/data_layer/data_layer_errors.py
--rw-r--r--   0 runner    (1001) docker     (127)     4685 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/data_layer/data_layer_server.py
--rw-r--r--   0 runner    (1001) docker     (127)    27429 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/data_layer/data_layer_util.py
--rw-r--r--   0 runner    (1001) docker     (127)    63373 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/data_layer/data_layer_wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)    83336 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/data_layer/data_store.py
--rw-r--r--   0 runner    (1001) docker     (127)    13617 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/data_layer/dl_wallet_store.py
--rw-r--r--   0 runner    (1001) docker     (127)    10862 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/data_layer/download_data.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.358933 chia-blockchain-2.3.0rc1/chia/data_layer/puzzles/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/data_layer/puzzles/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     2838 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/data_layer/puzzles/graftroot_dl_offers.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     1845 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/data_layer/puzzles/graftroot_dl_offers.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     1136 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/data_layer/s3_plugin_config.yml
--rw-r--r--   0 runner    (1001) docker     (127)    16789 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/data_layer/s3_plugin_service.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.358933 chia-blockchain-2.3.0rc1/chia/data_layer/util/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/data_layer/util/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     4325 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/data_layer/util/benchmark.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.358933 chia-blockchain-2.3.0rc1/chia/farmer/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/farmer/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)    44662 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/farmer/farmer.py
--rw-r--r--   0 runner    (1001) docker     (127)    39789 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/farmer/farmer_api.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.366933 chia-blockchain-2.3.0rc1/chia/full_node/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     3595 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/bitcoin_fee_estimator.py
--rw-r--r--   0 runner    (1001) docker     (127)    11283 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/block_height_map.py
--rw-r--r--   0 runner    (1001) docker     (127)    24062 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/block_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     5549 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/bundle_tools.py
--rw-r--r--   0 runner    (1001) docker     (127)    27614 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/coin_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     1796 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/fee_estimate.py
--rw-r--r--   0 runner    (1001) docker     (127)      526 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/fee_estimate_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     2922 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/fee_estimation.py
--rw-r--r--   0 runner    (1001) docker     (127)     3958 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/fee_estimator.py
--rw-r--r--   0 runner    (1001) docker     (127)     1235 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/fee_estimator_constants.py
--rw-r--r--   0 runner    (1001) docker     (127)     1955 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/fee_estimator_example.py
--rw-r--r--   0 runner    (1001) docker     (127)     1606 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/fee_estimator_interface.py
--rw-r--r--   0 runner    (1001) docker     (127)      610 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/fee_history.py
--rw-r--r--   0 runner    (1001) docker     (127)    22559 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/fee_tracker.py
--rw-r--r--   0 runner    (1001) docker     (127)   138979 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/full_node.py
--rw-r--r--   0 runner    (1001) docker     (127)    92772 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/full_node_api.py
--rw-r--r--   0 runner    (1001) docker     (127)    47559 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/full_node_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     2504 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/generator.py
--rw-r--r--   0 runner    (1001) docker     (127)     2323 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/hint_management.py
--rw-r--r--   0 runner    (1001) docker     (127)     3009 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/hint_store.py
--rw-r--r--   0 runner    (1001) docker     (127)    22322 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/mempool.py
--rw-r--r--   0 runner    (1001) docker     (127)     9017 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/mempool_check_conditions.py
--rw-r--r--   0 runner    (1001) docker     (127)    40498 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/mempool_manager.py
--rw-r--r--   0 runner    (1001) docker     (127)     3674 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/pending_tx_cache.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.366933 chia-blockchain-2.3.0rc1/chia/full_node/puzzles/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/puzzles/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)      642 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/puzzles/block_program_zero.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      341 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/puzzles/block_program_zero.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      253 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/puzzles/decompress_coin_spend_entry.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      111 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/puzzles/decompress_coin_spend_entry.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      262 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/puzzles/decompress_coin_spend_entry_with_prefix.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      109 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/puzzles/decompress_coin_spend_entry_with_prefix.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      114 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/puzzles/decompress_puzzle.clsp
--rw-r--r--   0 runner    (1001) docker     (127)       43 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/puzzles/decompress_puzzle.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      414 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/signage_point.py
--rw-r--r--   0 runner    (1001) docker     (127)     7428 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/subscriptions.py
--rw-r--r--   0 runner    (1001) docker     (127)     5218 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/sync_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     3335 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/tx_processing_queue.py
--rw-r--r--   0 runner    (1001) docker     (127)    70929 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/full_node/weight_proof.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.366933 chia-blockchain-2.3.0rc1/chia/harvester/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/harvester/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)    11776 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/harvester/harvester.py
--rw-r--r--   0 runner    (1001) docker     (127)    18476 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/harvester/harvester_api.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.366933 chia-blockchain-2.3.0rc1/chia/introducer/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/introducer/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     4448 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/introducer/introducer.py
--rw-r--r--   0 runner    (1001) docker     (127)     2145 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/introducer/introducer_api.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.366933 chia-blockchain-2.3.0rc1/chia/legacy/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/legacy/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     4752 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/legacy/keyring.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.370933 chia-blockchain-2.3.0rc1/chia/plot_sync/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/plot_sync/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     1846 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/plot_sync/delta.py
--rw-r--r--   0 runner    (1001) docker     (127)     2306 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/plot_sync/exceptions.py
--rw-r--r--   0 runner    (1001) docker     (127)    15187 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/plot_sync/receiver.py
--rw-r--r--   0 runner    (1001) docker     (127)    14141 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/plot_sync/sender.py
--rw-r--r--   0 runner    (1001) docker     (127)      825 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/plot_sync/util.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.370933 chia-blockchain-2.3.0rc1/chia/plotters/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/plotters/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)    14274 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/plotters/bladebit.py
--rw-r--r--   0 runner    (1001) docker     (127)     1942 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/plotters/chiapos.py
--rw-r--r--   0 runner    (1001) docker     (127)     7710 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/plotters/madmax.py
--rw-r--r--   0 runner    (1001) docker     (127)    18622 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/plotters/plotters.py
--rw-r--r--   0 runner    (1001) docker     (127)     4204 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/plotters/plotters_util.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.370933 chia-blockchain-2.3.0rc1/chia/plotting/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/plotting/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     8432 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/plotting/cache.py
--rw-r--r--   0 runner    (1001) docker     (127)    12554 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/plotting/check_plots.py
--rw-r--r--   0 runner    (1001) docker     (127)    10499 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/plotting/create_plots.py
--rw-r--r--   0 runner    (1001) docker     (127)    19085 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/plotting/manager.py
--rw-r--r--   0 runner    (1001) docker     (127)    12348 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/plotting/util.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.370933 chia-blockchain-2.3.0rc1/chia/pools/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/pools/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     5112 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/pools/pool_config.py
--rw-r--r--   0 runner    (1001) docker     (127)    17414 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/pools/pool_puzzles.py
--rw-r--r--   0 runner    (1001) docker     (127)    45274 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/pools/pool_wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)     4564 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/pools/pool_wallet_info.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.370933 chia-blockchain-2.3.0rc1/chia/pools/puzzles/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/pools/puzzles/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     2627 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/pools/puzzles/pool_member_innerpuz.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      753 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/pools/puzzles/pool_member_innerpuz.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     2648 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/pools/puzzles/pool_waitingroom_innerpuz.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      825 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/pools/puzzles/pool_waitingroom_innerpuz.clsp.hex
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.374933 chia-blockchain-2.3.0rc1/chia/protocols/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/protocols/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     3008 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/protocols/farmer_protocol.py
--rw-r--r--   0 runner    (1001) docker     (127)     4578 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/protocols/full_node_protocol.py
--rw-r--r--   0 runner    (1001) docker     (127)     5706 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/protocols/harvester_protocol.py
--rw-r--r--   0 runner    (1001) docker     (127)      600 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/protocols/introducer_protocol.py
--rw-r--r--   0 runner    (1001) docker     (127)     4061 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/protocols/pool_protocol.py
--rw-r--r--   0 runner    (1001) docker     (127)     3692 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/protocols/protocol_message_types.py
--rw-r--r--   0 runner    (1001) docker     (127)     4024 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/protocols/protocol_state_machine.py
--rw-r--r--   0 runner    (1001) docker     (127)      269 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/protocols/protocol_timing.py
--rw-r--r--   0 runner    (1001) docker     (127)     2169 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/protocols/shared_protocol.py
--rw-r--r--   0 runner    (1001) docker     (127)     3111 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/protocols/timelord_protocol.py
--rw-r--r--   0 runner    (1001) docker     (127)     7539 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/protocols/wallet_protocol.py
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/py.typed
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.378933 chia-blockchain-2.3.0rc1/chia/rpc/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/rpc/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     2640 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/rpc/crawler_rpc_api.py
--rw-r--r--   0 runner    (1001) docker     (127)    24176 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/rpc/data_layer_rpc_api.py
--rw-r--r--   0 runner    (1001) docker     (127)     7431 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/rpc/data_layer_rpc_client.py
--rw-r--r--   0 runner    (1001) docker     (127)     1987 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/rpc/data_layer_rpc_util.py
--rw-r--r--   0 runner    (1001) docker     (127)    14142 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/rpc/farmer_rpc_api.py
--rw-r--r--   0 runner    (1001) docker     (127)     3986 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/rpc/farmer_rpc_client.py
--rw-r--r--   0 runner    (1001) docker     (127)    45128 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/rpc/full_node_rpc_api.py
--rw-r--r--   0 runner    (1001) docker     (127)    13283 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/rpc/full_node_rpc_client.py
--rw-r--r--   0 runner    (1001) docker     (127)     6458 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/rpc/harvester_rpc_api.py
--rw-r--r--   0 runner    (1001) docker     (127)     2274 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/rpc/harvester_rpc_client.py
--rw-r--r--   0 runner    (1001) docker     (127)     5120 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/rpc/rpc_client.py
--rw-r--r--   0 runner    (1001) docker     (127)    17122 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/rpc/rpc_server.py
--rw-r--r--   0 runner    (1001) docker     (127)      863 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/rpc/timelord_rpc_api.py
--rw-r--r--   0 runner    (1001) docker     (127)     8609 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/rpc/util.py
--rw-r--r--   0 runner    (1001) docker     (127)      614 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/rpc/wallet_request_types.py
--rw-r--r--   0 runner    (1001) docker     (127)   215173 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/rpc/wallet_rpc_api.py
--rw-r--r--   0 runner    (1001) docker     (127)    65435 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/rpc/wallet_rpc_client.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.378933 chia-blockchain-2.3.0rc1/chia/seeder/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/seeder/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)    15228 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/seeder/crawl_store.py
--rw-r--r--   0 runner    (1001) docker     (127)    18931 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/seeder/crawler.py
--rw-r--r--   0 runner    (1001) docker     (127)     4116 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/seeder/crawler_api.py
--rw-r--r--   0 runner    (1001) docker     (127)    25495 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/seeder/dns_server.py
--rw-r--r--   0 runner    (1001) docker     (127)     5320 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/seeder/peer_record.py
--rw-r--r--   0 runner    (1001) docker     (127)     2927 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/seeder/start_crawler.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.382933 chia-blockchain-2.3.0rc1/chia/server/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)    27079 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/address_manager.py
--rw-r--r--   0 runner    (1001) docker     (127)     9764 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/address_manager_store.py
--rw-r--r--   0 runner    (1001) docker     (127)      184 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/api_protocol.py
--rw-r--r--   0 runner    (1001) docker     (127)      720 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/capabilities.py
--rw-r--r--   0 runner    (1001) docker     (127)    14069 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/chia_policy.py
--rw-r--r--   0 runner    (1001) docker     (127)     2430 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/introducer_peers.py
--rw-r--r--   0 runner    (1001) docker     (127)    32236 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/node_discovery.py
--rw-r--r--   0 runner    (1001) docker     (127)      820 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/outbound_message.py
--rw-r--r--   0 runner    (1001) docker     (127)    13778 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/rate_limit_numbers.py
--rw-r--r--   0 runner    (1001) docker     (127)     5013 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/rate_limits.py
--rw-r--r--   0 runner    (1001) docker     (127)    31804 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/server.py
--rw-r--r--   0 runner    (1001) docker     (127)      867 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/ssl_context.py
--rw-r--r--   0 runner    (1001) docker     (127)     4682 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/start_data_layer.py
--rw-r--r--   0 runner    (1001) docker     (127)     3111 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/start_farmer.py
--rw-r--r--   0 runner    (1001) docker     (127)     4003 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/start_full_node.py
--rw-r--r--   0 runner    (1001) docker     (127)     2890 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/start_harvester.py
--rw-r--r--   0 runner    (1001) docker     (127)     2204 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/start_introducer.py
--rw-r--r--   0 runner    (1001) docker     (127)    12914 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/start_service.py
--rw-r--r--   0 runner    (1001) docker     (127)     2766 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/start_timelord.py
--rw-r--r--   0 runner    (1001) docker     (127)     3740 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/start_wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)     3743 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/upnp.py
--rw-r--r--   0 runner    (1001) docker     (127)    32780 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/server/ws_connection.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.386933 chia-blockchain-2.3.0rc1/chia/simulator/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)    92841 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/block_tools.py
--rw-r--r--   0 runner    (1001) docker     (127)    32431 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/full_node_simulator.py
--rw-r--r--   0 runner    (1001) docker     (127)     5067 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/keyring.py
--rw-r--r--   0 runner    (1001) docker     (127)    19539 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/setup_services.py
--rw-r--r--   0 runner    (1001) docker     (127)      534 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/simulator_constants.py
--rw-r--r--   0 runner    (1001) docker     (127)     5518 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/simulator_full_node_rpc_api.py
--rw-r--r--   0 runner    (1001) docker     (127)     3062 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/simulator_full_node_rpc_client.py
--rw-r--r--   0 runner    (1001) docker     (127)      628 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/simulator_protocol.py
--rw-r--r--   0 runner    (1001) docker     (127)     6629 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/simulator_test_tools.py
--rw-r--r--   0 runner    (1001) docker     (127)      693 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/socket.py
--rw-r--r--   0 runner    (1001) docker     (127)     4944 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs.py
--rw-r--r--   0 runner    (1001) docker     (127)    39840 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_1.py
--rw-r--r--   0 runner    (1001) docker     (127)    39838 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_10.py
--rw-r--r--   0 runner    (1001) docker     (127)    39840 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_2.py
--rw-r--r--   0 runner    (1001) docker     (127)    39832 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_3.py
--rw-r--r--   0 runner    (1001) docker     (127)    39844 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_4.py
--rw-r--r--   0 runner    (1001) docker     (127)    39848 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_5.py
--rw-r--r--   0 runner    (1001) docker     (127)    39840 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_6.py
--rw-r--r--   0 runner    (1001) docker     (127)    39836 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_7.py
--rw-r--r--   0 runner    (1001) docker     (127)    39840 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_8.py
--rw-r--r--   0 runner    (1001) docker     (127)    39840 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_9.py
--rw-r--r--   0 runner    (1001) docker     (127)     4878 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/start_simulator.py
--rw-r--r--   0 runner    (1001) docker     (127)    10869 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/simulator/wallet_tools.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.390933 chia-blockchain-2.3.0rc1/chia/ssl/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/ssl/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     1155 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/ssl/chia_ca.crt
--rw-r--r--   0 runner    (1001) docker     (127)     1704 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/ssl/chia_ca.key
--rw-r--r--   0 runner    (1001) docker     (127)     8898 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/ssl/create_ssl.py
--rw-r--r--   0 runner    (1001) docker     (127)     1200 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/ssl/dst_root_ca.pem
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.390933 chia-blockchain-2.3.0rc1/chia/timelord/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/timelord/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     1820 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/timelord/iters_from_block.py
--rw-r--r--   0 runner    (1001) docker     (127)    59634 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/timelord/timelord.py
--rw-r--r--   0 runner    (1001) docker     (127)     5769 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/timelord/timelord_api.py
--rw-r--r--   0 runner    (1001) docker     (127)     5717 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/timelord/timelord_launcher.py
--rw-r--r--   0 runner    (1001) docker     (127)    12109 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/timelord/timelord_state.py
--rw-r--r--   0 runner    (1001) docker     (127)      354 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/timelord/types.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.394933 chia-blockchain-2.3.0rc1/chia/types/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     1983 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/aliases.py
--rw-r--r--   0 runner    (1001) docker     (127)      571 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/block_protocol.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.398933 chia-blockchain-2.3.0rc1/chia/types/blockchain_format/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/blockchain_format/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)      107 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/blockchain_format/classgroup.py
--rw-r--r--   0 runner    (1001) docker     (127)      695 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/blockchain_format/coin.py
--rw-r--r--   0 runner    (1001) docker     (127)      224 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/blockchain_format/foliage.py
--rw-r--r--   0 runner    (1001) docker     (127)       84 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/blockchain_format/pool_target.py
--rw-r--r--   0 runner    (1001) docker     (127)     8253 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/blockchain_format/program.py
--rw-r--r--   0 runner    (1001) docker     (127)     4994 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/blockchain_format/proof_of_space.py
--rw-r--r--   0 runner    (1001) docker     (127)      160 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/blockchain_format/reward_chain_block.py
--rw-r--r--   0 runner    (1001) docker     (127)       88 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/blockchain_format/serialized_program.py
--rw-r--r--   0 runner    (1001) docker     (127)      388 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/blockchain_format/sized_bytes.py
--rw-r--r--   0 runner    (1001) docker     (127)      308 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/blockchain_format/slots.py
--rw-r--r--   0 runner    (1001) docker     (127)       94 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/blockchain_format/sub_epoch_summary.py
--rw-r--r--   0 runner    (1001) docker     (127)     2006 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/blockchain_format/tree_hash.py
--rw-r--r--   0 runner    (1001) docker     (127)     2374 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/blockchain_format/vdf.py
--rw-r--r--   0 runner    (1001) docker     (127)      332 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/clvm_cost.py
--rw-r--r--   0 runner    (1001) docker     (127)     1284 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/coin_record.py
--rw-r--r--   0 runner    (1001) docker     (127)      186 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/coin_solution.py
--rw-r--r--   0 runner    (1001) docker     (127)     3947 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/coin_spend.py
--rw-r--r--   0 runner    (1001) docker     (127)     2213 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/condition_opcodes.py
--rw-r--r--   0 runner    (1001) docker     (127)      413 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/condition_with_args.py
--rw-r--r--   0 runner    (1001) docker     (127)    17888 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/eligible_coin_spends.py
--rw-r--r--   0 runner    (1001) docker     (127)      100 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/end_of_slot_bundle.py
--rw-r--r--   0 runner    (1001) docker     (127)      854 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/fee_rate.py
--rw-r--r--   0 runner    (1001) docker     (127)       82 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/full_block.py
--rw-r--r--   0 runner    (1001) docker     (127)     1053 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/generator_types.py
--rw-r--r--   0 runner    (1001) docker     (127)       86 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/header_block.py
--rw-r--r--   0 runner    (1001) docker     (127)      607 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/internal_mempool_item.py
--rw-r--r--   0 runner    (1001) docker     (127)      260 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/mempool_inclusion_status.py
--rw-r--r--   0 runner    (1001) docker     (127)     2626 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/mempool_item.py
--rw-r--r--   0 runner    (1001) docker     (127)     1055 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/mempool_submission_status.py
--rw-r--r--   0 runner    (1001) docker     (127)      132 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/mojos.py
--rw-r--r--   0 runner    (1001) docker     (127)     1828 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/peer_info.py
--rw-r--r--   0 runner    (1001) docker     (127)     1403 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/signing_mode.py
--rw-r--r--   0 runner    (1001) docker     (127)     3367 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/spend_bundle.py
--rw-r--r--   0 runner    (1001) docker     (127)      176 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/spend_bundle_conditions.py
--rw-r--r--   0 runner    (1001) docker     (127)      963 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/transaction_queue_entry.py
--rw-r--r--   0 runner    (1001) docker     (127)       94 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/unfinished_block.py
--rw-r--r--   0 runner    (1001) docker     (127)     1527 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/unfinished_header_block.py
--rw-r--r--   0 runner    (1001) docker     (127)     1499 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/types/weight_proof.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.406933 chia-blockchain-2.3.0rc1/chia/util/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     3046 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/api_decorators.py
--rw-r--r--   0 runner    (1001) docker     (127)     7564 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/async_pool.py
--rw-r--r--   0 runner    (1001) docker     (127)     4572 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/bech32m.py
--rw-r--r--   0 runner    (1001) docker     (127)     4371 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/beta_metrics.py
--rw-r--r--   0 runner    (1001) docker     (127)     4253 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/block_cache.py
--rw-r--r--   0 runner    (1001) docker     (127)     2657 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/byte_types.py
--rw-r--r--   0 runner    (1001) docker     (127)     2970 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/cached_bls.py
--rw-r--r--   0 runner    (1001) docker     (127)     1408 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/check_fork_next_block.py
--rw-r--r--   0 runner    (1001) docker     (127)     4956 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/chia_logging.py
--rw-r--r--   0 runner    (1001) docker     (127)      927 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/chia_version.py
--rw-r--r--   0 runner    (1001) docker     (127)      323 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/collection.py
--rw-r--r--   0 runner    (1001) docker     (127)     7890 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/condition_tools.py
--rw-r--r--   0 runner    (1001) docker     (127)    13109 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/config.py
--rw-r--r--   0 runner    (1001) docker     (127)      579 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/db_synchronous.py
--rw-r--r--   0 runner    (1001) docker     (127)      936 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/db_version.py
--rw-r--r--   0 runner    (1001) docker     (127)    16720 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/db_wrapper.py
--rw-r--r--   0 runner    (1001) docker     (127)      389 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/default_root.py
--rwxr-xr-x   0 runner    (1001) docker     (127)     3071 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/dump_keyring.py
--rw-r--r--   0 runner    (1001) docker     (127)    13116 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/english.txt
--rw-r--r--   0 runner    (1001) docker     (127)    10103 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/errors.py
--rw-r--r--   0 runner    (1001) docker     (127)    17542 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/file_keyring.py
--rw-r--r--   0 runner    (1001) docker     (127)     3251 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/files.py
--rw-r--r--   0 runner    (1001) docker     (127)    12070 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/full_block_utils.py
--rw-r--r--   0 runner    (1001) docker     (127)     2490 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/generator_tools.py
--rw-r--r--   0 runner    (1001) docker     (127)      842 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/hash.py
--rw-r--r--   0 runner    (1001) docker     (127)    27734 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/initial-config.yaml
--rw-r--r--   0 runner    (1001) docker     (127)      646 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/inline_executor.py
--rw-r--r--   0 runner    (1001) docker     (127)     1638 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/ints.py
--rw-r--r--   0 runner    (1001) docker     (127)     1102 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/json_util.py
--rw-r--r--   0 runner    (1001) docker     (127)    23548 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/keychain.py
--rw-r--r--   0 runner    (1001) docker     (127)    10842 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/keyring_wrapper.py
--rw-r--r--   0 runner    (1001) docker     (127)     1013 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/limited_semaphore.py
--rw-r--r--   0 runner    (1001) docker     (127)     1326 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/lock.py
--rw-r--r--   0 runner    (1001) docker     (127)      750 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/log_exceptions.py
--rw-r--r--   0 runner    (1001) docker     (127)      918 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/logging.py
--rw-r--r--   0 runner    (1001) docker     (127)      770 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/lru_cache.py
--rw-r--r--   0 runner    (1001) docker     (127)      463 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/math.py
--rw-r--r--   0 runner    (1001) docker     (127)    10520 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/merkle_set.py
--rw-r--r--   0 runner    (1001) docker     (127)    14486 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/misc.py
--rw-r--r--   0 runner    (1001) docker     (127)     6854 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/network.py
--rw-r--r--   0 runner    (1001) docker     (127)     1593 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/paginator.py
--rw-r--r--   0 runner    (1001) docker     (127)      702 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/path.py
--rw-r--r--   0 runner    (1001) docker     (127)      493 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/permissions.py
--rw-r--r--   0 runner    (1001) docker     (127)      884 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/pprint.py
--rw-r--r--   0 runner    (1001) docker     (127)      712 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/prev_transaction_block.py
--rw-r--r--   0 runner    (1001) docker     (127)     2725 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/priority_mutex.py
--rw-r--r--   0 runner    (1001) docker     (127)     7243 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/profiler.py
--rw-r--r--   0 runner    (1001) docker     (127)      927 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/recursive_replace.py
--rw-r--r--   0 runner    (1001) docker     (127)      395 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/safe_cancel_task.py
--rw-r--r--   0 runner    (1001) docker     (127)     1541 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/service_groups.py
--rw-r--r--   0 runner    (1001) docker     (127)      399 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/setproctitle.py
--rw-r--r--   0 runner    (1001) docker     (127)      991 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/significant_bits.py
--rw-r--r--   0 runner    (1001) docker     (127)     8103 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/ssl_check.py
--rw-r--r--   0 runner    (1001) docker     (127)    22187 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/streamable.py
--rw-r--r--   0 runner    (1001) docker     (127)     3857 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/struct_stream.py
--rw-r--r--   0 runner    (1001) docker     (127)    10337 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/task_timing.py
--rw-r--r--   0 runner    (1001) docker     (127)     1422 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/timing.py
--rw-r--r--   0 runner    (1001) docker     (127)     1029 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/vdf_prover.py
--rw-r--r--   0 runner    (1001) docker     (127)     1771 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/util/ws_message.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.414933 chia-blockchain-2.3.0rc1/chia/wallet/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.414933 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)      847 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/cat_constants.py
--rw-r--r--   0 runner    (1001) docker     (127)     1471 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/cat_info.py
--rw-r--r--   0 runner    (1001) docker     (127)     5220 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/cat_outer_puzzle.py
--rw-r--r--   0 runner    (1001) docker     (127)     5952 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/cat_utils.py
--rw-r--r--   0 runner    (1001) docker     (127)    40902 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/cat_wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)      842 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/dao_cat_info.py
--rw-r--r--   0 runner    (1001) docker     (127)    29112 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/dao_cat_wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)     2795 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/lineage_store.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.418933 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     1198 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/cat_truths.clib
--rw-r--r--   0 runner    (1001) docker     (127)    15726 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/cat_v2.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     3345 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/cat_v2.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      576 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/delegated_tail.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      361 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/delegated_tail.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      299 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/everything_with_signature.clsp
--rw-r--r--   0 runner    (1001) docker     (127)       83 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/everything_with_signature.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      499 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/genesis_by_coin_id.clsp
--rw-r--r--   0 runner    (1001) docker     (127)       91 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/genesis_by_coin_id.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      884 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/genesis_by_coin_id_or_singleton.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      159 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/genesis_by_coin_id_or_singleton.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      553 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/genesis_by_puzzle_hash.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      115 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/genesis_by_puzzle_hash.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     2038 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/chialisp.py
--rw-r--r--   0 runner    (1001) docker     (127)     8594 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/coin_selection.py
--rw-r--r--   0 runner    (1001) docker     (127)    44540 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/conditions.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.418933 chia-blockchain-2.3.0rc1/chia/wallet/dao_wallet/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/dao_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     1927 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/dao_wallet/dao_info.py
--rw-r--r--   0 runner    (1001) docker     (127)    30216 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/dao_wallet/dao_utils.py
--rw-r--r--   0 runner    (1001) docker     (127)    97647 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/dao_wallet/dao_wallet.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.418933 chia-blockchain-2.3.0rc1/chia/wallet/db_wallet/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/db_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     4558 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/db_wallet/db_wallet_puzzles.py
--rw-r--r--   0 runner    (1001) docker     (127)      606 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/derivation_record.py
--rw-r--r--   0 runner    (1001) docker     (127)     4836 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/derive_keys.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.418933 chia-blockchain-2.3.0rc1/chia/wallet/did_wallet/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/did_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     1356 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/did_wallet/did_info.py
--rw-r--r--   0 runner    (1001) docker     (127)    66192 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/did_wallet/did_wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)     7225 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/did_wallet/did_wallet_puzzles.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.418933 chia-blockchain-2.3.0rc1/chia/wallet/did_wallet/puzzles/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/did_wallet/puzzles/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     6558 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/did_wallet/puzzles/did_innerpuz.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     2025 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/did_wallet/puzzles/did_innerpuz.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      969 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/driver_protocol.py
--rw-r--r--   0 runner    (1001) docker     (127)     1906 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/key_val_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     2184 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/lineage_proof.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.422933 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     4469 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/metadata_outer_puzzle.py
--rw-r--r--   0 runner    (1001) docker     (127)     3190 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/nft_info.py
--rw-r--r--   0 runner    (1001) docker     (127)    12166 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/nft_puzzles.py
--rw-r--r--   0 runner    (1001) docker     (127)    82708 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/nft_wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)     4619 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/ownership_outer_puzzle.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.422933 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)      189 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/create_nft_launcher_from_did.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      131 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/create_nft_launcher_from_did.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      189 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_intermediate_launcher.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      131 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_intermediate_launcher.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      881 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_metadata_updater_default.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      483 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_metadata_updater_default.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     1005 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_metadata_updater_updateable.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      407 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_metadata_updater_updateable.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     3716 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_ownership_layer.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     2453 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_ownership_layer.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     2693 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_ownership_transfer_program_one_way_claim_with_royalties.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     1375 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_ownership_transfer_program_one_way_claim_with_royalties.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     2882 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_state_layer.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     1655 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_state_layer.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     4478 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/singleton_outer_puzzle.py
--rw-r--r--   0 runner    (1001) docker     (127)     3417 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/transfer_program_puzzle.py
--rw-r--r--   0 runner    (1001) docker     (127)     8278 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/uncurry_nft.py
--rw-r--r--   0 runner    (1001) docker     (127)     5099 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/notification_manager.py
--rw-r--r--   0 runner    (1001) docker     (127)     6532 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/notification_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     4158 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/outer_puzzles.py
--rw-r--r--   0 runner    (1001) docker     (127)     1123 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/payment.py
--rw-r--r--   0 runner    (1001) docker     (127)     3630 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzle_drivers.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.438933 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)      126 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/augmented_condition.clsp
--rw-r--r--   0 runner    (1001) docker     (127)       27 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/augmented_condition.clsp.hex
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.438933 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/clawback/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/clawback/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     8132 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/clawback/drivers.py
--rw-r--r--   0 runner    (1001) docker     (127)     1128 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/clawback/metadata.py
--rw-r--r--   0 runner    (1001) docker     (127)     2757 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/clawback/puzzle_decorator.py
--rw-r--r--   0 runner    (1001) docker     (127)     2236 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/condition_codes.clib
--rw-r--r--   0 runner    (1001) docker     (127)     3869 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/curry-and-treehash.clib
--rw-r--r--   0 runner    (1001) docker     (127)     5226 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/curry.clib
--rw-r--r--   0 runner    (1001) docker     (127)      596 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/curry_by_index.clib
--rw-r--r--   0 runner    (1001) docker     (127)      756 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_cat_eve.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      225 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_cat_eve.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     1003 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_cat_launcher.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     1059 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_cat_launcher.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     1096 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_finished_state.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     1543 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_finished_state.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)       65 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_finished_state.clsp.hex.sha256tree
--rw-r--r--   0 runner    (1001) docker     (127)    10407 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_lockup.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     6281 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_lockup.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)       65 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_lockup.clsp.hex.sha256tree
--rw-r--r--   0 runner    (1001) docker     (127)    14242 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_proposal.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     6541 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_proposal.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)       65 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_proposal.clsp.hex.sha256tree
--rw-r--r--   0 runner    (1001) docker     (127)     2155 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_proposal_timer.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     1651 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_proposal_timer.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)       65 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_proposal_timer.clsp.hex.sha256tree
--rw-r--r--   0 runner    (1001) docker     (127)     2722 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_proposal_validator.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     2341 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_proposal_validator.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)       65 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_proposal_validator.clsp.hex.sha256tree
--rw-r--r--   0 runner    (1001) docker     (127)     8441 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_spend_p2_singleton_v2.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     5909 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_spend_p2_singleton_v2.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)       65 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_spend_p2_singleton_v2.clsp.hex.sha256tree
--rw-r--r--   0 runner    (1001) docker     (127)     4063 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_treasury.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     2401 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_treasury.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     1225 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_update_proposal.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     1411 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_update_proposal.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     6219 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/deployed_puzzle_hashes.json
--rw-r--r--   0 runner    (1001) docker     (127)      888 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/json.clib
--rw-r--r--   0 runner    (1001) docker     (127)     5995 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/load_clvm.py
--rw-r--r--   0 runner    (1001) docker     (127)      502 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/merkle_utils.clib
--rw-r--r--   0 runner    (1001) docker     (127)      145 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/notification.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      119 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/notification.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      470 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_1_of_n.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      561 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_1_of_n.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)       54 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_conditions.clsp
--rw-r--r--   0 runner    (1001) docker     (127)       19 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_conditions.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      757 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_conditions.py
--rw-r--r--   0 runner    (1001) docker     (127)      375 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_delegated_conditions.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      275 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_delegated_conditions.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      624 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_delegated_conditions.py
--rw-r--r--   0 runner    (1001) docker     (127)      451 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_delegated_puzzle.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      287 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_delegated_puzzle.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     1166 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_delegated_puzzle.py
--rw-r--r--   0 runner    (1001) docker     (127)     3072 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      455 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     6982 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.py
--rw-r--r--   0 runner    (1001) docker     (127)     3119 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_m_of_n_delegate_direct.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      907 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_m_of_n_delegate_direct.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      645 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_m_of_n_delegate_direct.py
--rw-r--r--   0 runner    (1001) docker     (127)      385 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_parent.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      485 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_parent.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      414 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_puzzle_hash.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      287 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_puzzle_hash.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      940 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_puzzle_hash.py
--rw-r--r--   0 runner    (1001) docker     (127)     1466 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_singleton.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      807 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_singleton.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     2732 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_singleton_aggregator.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     1149 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_singleton_aggregator.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     2389 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_singleton_or_delayed_puzhash.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      993 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_singleton_or_delayed_puzhash.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     1822 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_singleton_via_delegated_puzzle.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      949 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_singleton_via_delegated_puzzle.clsp.hex
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.438933 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/prefarm/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/prefarm/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     2233 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/prefarm/make_prefarm_ph.py
--rw-r--r--   0 runner    (1001) docker     (127)     3813 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/prefarm/spend_prefarm.py
--rw-r--r--   0 runner    (1001) docker     (127)     1148 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/puzzle_utils.py
--rw-r--r--   0 runner    (1001) docker     (127)     1681 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/settlement_payments.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      587 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/settlement_payments.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      235 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/sha256tree.clib
--rw-r--r--   0 runner    (1001) docker     (127)      462 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/singleton_launcher.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      351 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/singleton_launcher.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     7314 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/singleton_top_layer.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     2337 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/singleton_top_layer.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)    12581 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/singleton_top_layer.py
--rw-r--r--   0 runner    (1001) docker     (127)     4978 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/singleton_top_layer_v1_1.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     1935 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/singleton_top_layer_v1_1.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)    12591 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/singleton_top_layer_v1_1.py
--rw-r--r--   0 runner    (1001) docker     (127)     1372 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/singleton_truths.clib
--rw-r--r--   0 runner    (1001) docker     (127)    12390 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/tails.py
--rw-r--r--   0 runner    (1001) docker     (127)      850 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/puzzles/utility_macros.clib
--rw-r--r--   0 runner    (1001) docker     (127)     3394 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/sign_coin_spends.py
--rw-r--r--   0 runner    (1001) docker     (127)     3764 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/singleton.py
--rw-r--r--   0 runner    (1001) docker     (127)      816 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/singleton_record.py
--rw-r--r--   0 runner    (1001) docker     (127)    48117 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/trade_manager.py
--rw-r--r--   0 runner    (1001) docker     (127)     2301 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/trade_record.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.438933 chia-blockchain-2.3.0rc1/chia/wallet/trading/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/trading/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)    33977 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/trading/offer.py
--rw-r--r--   0 runner    (1001) docker     (127)      222 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/trading/trade_status.py
--rw-r--r--   0 runner    (1001) docker     (127)    22392 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/trading/trade_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     5490 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/transaction_record.py
--rw-r--r--   0 runner    (1001) docker     (127)      415 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/transaction_sorting.py
--rw-r--r--   0 runner    (1001) docker     (127)      316 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/uncurried_puzzle.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.442933 chia-blockchain-2.3.0rc1/chia/wallet/util/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     2008 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/address_type.py
--rw-r--r--   0 runner    (1001) docker     (127)     2456 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/compute_hints.py
--rw-r--r--   0 runner    (1001) docker     (127)     2069 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/compute_memos.py
--rw-r--r--   0 runner    (1001) docker     (127)     2066 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/curry_and_treehash.py
--rw-r--r--   0 runner    (1001) docker     (127)     9683 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/debug_spend_bundle.py
--rw-r--r--   0 runner    (1001) docker     (127)      582 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/json_clvm_utils.py
--rw-r--r--   0 runner    (1001) docker     (127)     3673 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/merkle_tree.py
--rw-r--r--   0 runner    (1001) docker     (127)     3561 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/merkle_utils.py
--rw-r--r--   0 runner    (1001) docker     (127)     3484 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/new_peak_queue.py
--rw-r--r--   0 runner    (1001) docker     (127)      447 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/notifications.py
--rw-r--r--   0 runner    (1001) docker     (127)     8581 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/peer_request_cache.py
--rw-r--r--   0 runner    (1001) docker     (127)     6675 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/puzzle_compression.py
--rw-r--r--   0 runner    (1001) docker     (127)     3856 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/puzzle_decorator.py
--rw-r--r--   0 runner    (1001) docker     (127)      110 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/puzzle_decorator_type.py
--rw-r--r--   0 runner    (1001) docker     (127)     1681 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/query_filter.py
--rw-r--r--   0 runner    (1001) docker     (127)      543 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/transaction_type.py
--rw-r--r--   0 runner    (1001) docker     (127)     5777 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/tx_config.py
--rw-r--r--   0 runner    (1001) docker     (127)    13440 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/wallet_sync_utils.py
--rw-r--r--   0 runner    (1001) docker     (127)     1283 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/util/wallet_types.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.442933 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)    25822 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/cr_cat_drivers.py
--rw-r--r--   0 runner    (1001) docker     (127)    40874 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/cr_cat_wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)     4913 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/cr_outer_puzzle.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.442933 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/cr_puzzles/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/cr_puzzles/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)       59 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/cr_puzzles/conditions_w_fee_announce.clsp
--rw-r--r--   0 runner    (1001) docker     (127)       43 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/cr_puzzles/conditions_w_fee_announce.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     9401 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/cr_puzzles/credential_restriction.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     3297 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/cr_puzzles/credential_restriction.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     1599 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/cr_puzzles/flag_proofs_checker.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      799 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/cr_puzzles/flag_proofs_checker.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)    33551 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_drivers.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.446933 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)     1117 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/covenant_layer.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      221 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/covenant_layer.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     2042 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/eml_covenant_morpher.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     1179 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/eml_covenant_morpher.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      954 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/eml_transfer_program_covenant_adapter.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      209 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/eml_transfer_program_covenant_adapter.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     2597 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/eml_update_metadata_with_DID.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     1105 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/eml_update_metadata_with_DID.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     5059 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/exigent_metadata_layer.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     1777 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/exigent_metadata_layer.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      560 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/p2_announced_delegated_puzzle.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      275 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/p2_announced_delegated_puzzle.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     2700 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/standard_vc_backdoor_puzzle.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     1305 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/standard_vc_backdoor_puzzle.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)      544 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/std_parent_morpher.clsp
--rw-r--r--   0 runner    (1001) docker     (127)      855 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/std_parent_morpher.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)     1939 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/viral_backdoor.clsp
--rw-r--r--   0 runner    (1001) docker     (127)     1307 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/viral_backdoor.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (127)    10657 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_store.py
--rw-r--r--   0 runner    (1001) docker     (127)    30887 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)    21663 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/wallet.py
--rw-r--r--   0 runner    (1001) docker     (127)    11445 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/wallet_blockchain.py
--rw-r--r--   0 runner    (1001) docker     (127)     3224 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/wallet_coin_record.py
--rw-r--r--   0 runner    (1001) docker     (127)    16058 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/wallet_coin_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     1095 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/wallet_info.py
--rw-r--r--   0 runner    (1001) docker     (127)     8190 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/wallet_interested_store.py
--rw-r--r--   0 runner    (1001) docker     (127)    12443 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/wallet_nft_store.py
--rw-r--r--   0 runner    (1001) docker     (127)    83039 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/wallet_node.py
--rw-r--r--   0 runner    (1001) docker     (127)     8736 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/wallet_node_api.py
--rw-r--r--   0 runner    (1001) docker     (127)     4623 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/wallet_pool_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     3423 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/wallet_protocol.py
--rw-r--r--   0 runner    (1001) docker     (127)    14555 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/wallet_puzzle_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     2495 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/wallet_retry_store.py
--rw-r--r--   0 runner    (1001) docker     (127)    11478 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/wallet_singleton_store.py
--rw-r--r--   0 runner    (1001) docker     (127)   128318 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/wallet_state_manager.py
--rw-r--r--   0 runner    (1001) docker     (127)    20987 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/wallet_transaction_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     4090 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/wallet_user_store.py
--rw-r--r--   0 runner    (1001) docker     (127)     4932 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/chia/wallet/wallet_weight_proof_handler.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.450933 chia-blockchain-2.3.0rc1/chia_blockchain.egg-info/
--rw-r--r--   0 runner    (1001) docker     (127)     9256 2024-03-29 23:34:02.000000 chia-blockchain-2.3.0rc1/chia_blockchain.egg-info/PKG-INFO
--rw-r--r--   0 runner    (1001) docker     (127)    42543 2024-03-29 23:34:03.000000 chia-blockchain-2.3.0rc1/chia_blockchain.egg-info/SOURCES.txt
--rw-r--r--   0 runner    (1001) docker     (127)        1 2024-03-29 23:34:02.000000 chia-blockchain-2.3.0rc1/chia_blockchain.egg-info/dependency_links.txt
--rw-r--r--   0 runner    (1001) docker     (127)      771 2024-03-29 23:34:02.000000 chia-blockchain-2.3.0rc1/chia_blockchain.egg-info/entry_points.txt
--rw-r--r--   0 runner    (1001) docker     (127)        1 2024-03-29 23:32:51.000000 chia-blockchain-2.3.0rc1/chia_blockchain.egg-info/not-zip-safe
--rw-r--r--   0 runner    (1001) docker     (127)     1099 2024-03-29 23:34:02.000000 chia-blockchain-2.3.0rc1/chia_blockchain.egg-info/requires.txt
--rw-r--r--   0 runner    (1001) docker     (127)       30 2024-03-29 23:34:02.000000 chia-blockchain-2.3.0rc1/chia_blockchain.egg-info/top_level.txt
--rwxr-xr-x   0 runner    (1001) docker     (127)     6697 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/install-gui.sh
--rwxr-xr-x   0 runner    (1001) docker     (127)     6147 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/install-plotter.sh
--rwxr-xr-x   0 runner    (1001) docker     (127)     5242 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/install-timelord.sh
--rwxr-xr-x   0 runner    (1001) docker     (127)     6702 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/install.sh
--rw-r--r--   0 runner    (1001) docker     (127)     2218 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/installhelper.py
--rwxr-xr-x   0 runner    (1001) docker     (127)     3908 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/manage-mypy.py
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.446933 chia-blockchain-2.3.0rc1/mozilla-ca/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:38.000000 chia-blockchain-2.3.0rc1/mozilla-ca/__init__.py
--rw-r--r--   0 runner    (1001) docker     (127)   229654 2024-03-29 23:32:38.000000 chia-blockchain-2.3.0rc1/mozilla-ca/cacert.pem
--rw-r--r--   0 runner    (1001) docker     (127)     3609 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/mypy-exclusions.txt
--rw-r--r--   0 runner    (1001) docker     (127)      873 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/mypy.ini.template
--rw-r--r--   0 runner    (1001) docker     (127)    18019 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/pylintrc
--rw-r--r--   0 runner    (1001) docker     (127)      433 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/pyproject.toml
--rw-r--r--   0 runner    (1001) docker     (127)     2072 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/pytest.ini
--rw-r--r--   0 runner    (1001) docker     (127)       38 2024-03-29 23:34:03.454933 chia-blockchain-2.3.0rc1/setup.cfg
--rw-r--r--   0 runner    (1001) docker     (127)     5314 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/setup.py
--rwxr-xr-x   0 runner    (1001) docker     (127)     1303 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/start-gui.sh
-drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-03-29 23:34:03.450933 chia-blockchain-2.3.0rc1/tools/
--rw-r--r--   0 runner    (1001) docker     (127)        0 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/tools/__init__.py
--rwxr-xr-x   0 runner    (1001) docker     (127)     5748 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/tools/analyze-chain.py
--rw-r--r--   0 runner    (1001) docker     (127)     6892 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/tools/analyze_memory_profile.py
--rw-r--r--   0 runner    (1001) docker     (127)    12172 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/tools/chialispp.py
--rw-r--r--   0 runner    (1001) docker     (127)     3575 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/tools/cpu_utilization.py
--rw-r--r--   0 runner    (1001) docker     (127)     8745 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/tools/generate_chain.py
--rw-r--r--   0 runner    (1001) docker     (127)    13961 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/tools/manage_clvm.py
--rw-r--r--   0 runner    (1001) docker     (127)     1024 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/tools/plot-log.gnuplot
--rwxr-xr-x   0 runner    (1001) docker     (127)     1171 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/tools/run_benchmark.sh
--rw-r--r--   0 runner    (1001) docker     (127)     3113 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/tools/run_block.py
--rwxr-xr-x   0 runner    (1001) docker     (127)     5841 2024-03-29 23:32:27.000000 chia-blockchain-2.3.0rc1/tools/test_full_sync.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.967802 chia-blockchain-2.3.0rc2/
+-rw-r--r--   0 runner    (1001) docker     (127)      446 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.coveragerc
+-rw-r--r--   0 runner    (1001) docker     (127)      348 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.flake8
+-rw-r--r--   0 runner    (1001) docker     (127)      125 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.git_archival.txt
+-rw-r--r--   0 runner    (1001) docker     (127)       32 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.gitattributes
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.767801 chia-blockchain-2.3.0rc2/.github/
+-rw-r--r--   0 runner    (1001) docker     (127)      259 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/CODEOWNERS
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.767801 chia-blockchain-2.3.0rc2/.github/ISSUE_TEMPLATE/
+-rw-r--r--   0 runner    (1001) docker     (127)     1405 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/ISSUE_TEMPLATE/bug_report.yaml
+-rw-r--r--   0 runner    (1001) docker     (127)      491 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/ISSUE_TEMPLATE/config.yml
+-rw-r--r--   0 runner    (1001) docker     (127)      673 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/PULL_REQUEST_TEMPLATE.md
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.747801 chia-blockchain-2.3.0rc2/.github/actions/
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.767801 chia-blockchain-2.3.0rc2/.github/actions/install/
+-rw-r--r--   0 runner    (1001) docker     (127)     2450 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/actions/install/action.yml
+-rw-r--r--   0 runner    (1001) docker     (127)     1669 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/dependabot.yml
+-rw-r--r--   0 runner    (1001) docker     (127)      435 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/release.yml
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.771801 chia-blockchain-2.3.0rc2/.github/workflows/
+-rw-r--r--   0 runner    (1001) docker     (127)     3431 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/benchmarks.yml
+-rw-r--r--   0 runner    (1001) docker     (127)    19586 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/build-linux-installer-deb.yml
+-rw-r--r--   0 runner    (1001) docker     (127)    19683 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/build-linux-installer-rpm.yml
+-rw-r--r--   0 runner    (1001) docker     (127)    18548 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/build-macos-installers.yml
+-rw-r--r--   0 runner    (1001) docker     (127)    18461 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/build-windows-installer.yml
+-rw-r--r--   0 runner    (1001) docker     (127)      794 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/check-commit-signing.yml
+-rw-r--r--   0 runner    (1001) docker     (127)     2031 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/check_wheel_availability.yaml
+-rw-r--r--   0 runner    (1001) docker     (127)     2804 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/codeql-analysis.yml
+-rw-r--r--   0 runner    (1001) docker     (127)     1036 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/conflict-check.yml
+-rw-r--r--   0 runner    (1001) docker     (127)     1131 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/dependency-review.yml
+-rw-r--r--   0 runner    (1001) docker     (127)     1338 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/mozilla-ca-cert.yml
+-rw-r--r--   0 runner    (1001) docker     (127)     2333 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/pre-commit.yml
+-rw-r--r--   0 runner    (1001) docker     (127)      699 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/require-labels.yml
+-rw-r--r--   0 runner    (1001) docker     (127)     1427 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/stale-issue.yml
+-rw-r--r--   0 runner    (1001) docker     (127)     1079 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/start-release.yml
+-rw-r--r--   0 runner    (1001) docker     (127)      877 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/start-sync-test.yml
+-rw-r--r--   0 runner    (1001) docker     (127)     2386 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/super-linter.yml
+-rw-r--r--   0 runner    (1001) docker     (127)     6450 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/test-install-scripts.yml
+-rw-r--r--   0 runner    (1001) docker     (127)     9005 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/test-single.yml
+-rw-r--r--   0 runner    (1001) docker     (127)    12296 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/test.yml
+-rw-r--r--   0 runner    (1001) docker     (127)     1648 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/trigger-docker-dev.yml
+-rw-r--r--   0 runner    (1001) docker     (127)     1102 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/trigger-docker-main.yml
+-rw-r--r--   0 runner    (1001) docker     (127)     5827 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.github/workflows/upload-pypi-source.yml
+-rw-r--r--   0 runner    (1001) docker     (127)     5412 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.gitignore
+-rw-r--r--   0 runner    (1001) docker     (127)      260 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.gitmodules
+-rw-r--r--   0 runner    (1001) docker     (127)      110 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.isort.cfg
+-rw-r--r--   0 runner    (1001) docker     (127)      893 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.markdown-lint.yml
+-rw-r--r--   0 runner    (1001) docker     (127)     2392 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.pre-commit-config.yaml
+-rw-r--r--   0 runner    (1001) docker     (127)      182 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/.prettierrc.yaml
+-rw-r--r--   0 runner    (1001) docker     (127)     1377 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/BUILD_TIMELORD.md
+-rw-r--r--   0 runner    (1001) docker     (127)   228852 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/CHANGELOG.md
+-rw-r--r--   0 runner    (1001) docker     (127)     3477 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/CODE_OF_CONDUCT.md
+-rw-r--r--   0 runner    (1001) docker     (127)     8855 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/CONTRIBUTING.md
+-rw-r--r--   0 runner    (1001) docker     (127)      393 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/INSTALL.md
+-rw-r--r--   0 runner    (1001) docker     (127)     1179 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/Install-gui.ps1
+-rw-r--r--   0 runner    (1001) docker     (127)     6207 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/Install-plotter.ps1
+-rw-r--r--   0 runner    (1001) docker     (127)     3894 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/Install.ps1
+-rw-r--r--   0 runner    (1001) docker     (127)      779 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/LEGACY-SUPPORT-POLICY.md
+-rw-r--r--   0 runner    (1001) docker     (127)    11347 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/LICENSE
+-rw-r--r--   0 runner    (1001) docker     (127)     9256 2024-04-10 22:51:30.967802 chia-blockchain-2.3.0rc2/PKG-INFO
+-rw-r--r--   0 runner    (1001) docker     (127)    33098 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/PRETTY_GOOD_PRACTICES.md
+-rw-r--r--   0 runner    (1001) docker     (127)     6331 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/README.md
+-rw-r--r--   0 runner    (1001) docker     (127)      831 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/SECURITY.md
+-rw-r--r--   0 runner    (1001) docker     (127)      286 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/activated.ps1
+-rwxr-xr-x   0 runner    (1001) docker     (127)      641 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/activated.py
+-rwxr-xr-x   0 runner    (1001) docker     (127)      155 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/activated.sh
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.775801 chia-blockchain-2.3.0rc2/benchmarks/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/benchmarks/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3186 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/benchmarks/block_ref.py
+-rw-r--r--   0 runner    (1001) docker     (127)    16730 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/benchmarks/block_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2245 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/benchmarks/blockchains.py
+-rw-r--r--   0 runner    (1001) docker     (127)     9474 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/benchmarks/coin_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)      520 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/benchmarks/jsonify.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4693 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/benchmarks/mempool-long-lived.py
+-rw-r--r--   0 runner    (1001) docker     (127)    10593 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/benchmarks/mempool.py
+-rw-r--r--   0 runner    (1001) docker     (127)    11883 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/benchmarks/streamable.py
+-rw-r--r--   0 runner    (1001) docker     (127)   439288 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/benchmarks/transaction_height_delta
+-rw-r--r--   0 runner    (1001) docker     (127)     2116 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/benchmarks/utils.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.779801 chia-blockchain-2.3.0rc2/build_scripts/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.779801 chia-blockchain-2.3.0rc2/build_scripts/assets/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.779801 chia-blockchain-2.3.0rc2/build_scripts/assets/deb/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/deb/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)      279 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/deb/control.j2
+-rw-r--r--   0 runner    (1001) docker     (127)      290 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/deb/postinst.sh
+-rw-r--r--   0 runner    (1001) docker     (127)      178 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/deb/prerm.sh
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.779801 chia-blockchain-2.3.0rc2/build_scripts/assets/dmg/
+-rw-r--r--   0 runner    (1001) docker     (127)      315 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/dmg/README
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/dmg/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)   507222 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/dmg/background.tiff
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.779801 chia-blockchain-2.3.0rc2/build_scripts/assets/rpm/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/rpm/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)      214 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/rpm/before-install.sh
+-rw-r--r--   0 runner    (1001) docker     (127)      290 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/rpm/postinst.sh
+-rw-r--r--   0 runner    (1001) docker     (127)      178 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/rpm/prerm.sh
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.783801 chia-blockchain-2.3.0rc2/build_scripts/assets/systemd/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/systemd/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)      304 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/systemd/chia-crawler@.service
+-rw-r--r--   0 runner    (1001) docker     (127)      422 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/systemd/chia-daemon@.service
+-rw-r--r--   0 runner    (1001) docker     (127)      338 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/systemd/chia-data-layer-http@.service
+-rw-r--r--   0 runner    (1001) docker     (127)      328 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/systemd/chia-data-layer@.service
+-rw-r--r--   0 runner    (1001) docker     (127)      302 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/systemd/chia-farmer@.service
+-rw-r--r--   0 runner    (1001) docker     (127)      308 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/systemd/chia-full-node@.service
+-rw-r--r--   0 runner    (1001) docker     (127)      308 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/systemd/chia-harvester@.service
+-rw-r--r--   0 runner    (1001) docker     (127)      310 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/systemd/chia-introducer@.service
+-rw-r--r--   0 runner    (1001) docker     (127)      302 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/systemd/chia-seeder@.service
+-rw-r--r--   0 runner    (1001) docker     (127)      306 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/systemd/chia-timelord@.service
+-rw-r--r--   0 runner    (1001) docker     (127)      465 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/assets/systemd/chia-wallet@.service
+-rw-r--r--   0 runner    (1001) docker     (127)     1393 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/build_license_directory.sh
+-rw-r--r--   0 runner    (1001) docker     (127)     1310 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/build_linux_deb-1-gui.sh
+-rw-r--r--   0 runner    (1001) docker     (127)     5433 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/build_linux_deb-2-installer.sh
+-rw-r--r--   0 runner    (1001) docker     (127)     1309 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/build_linux_rpm-1-gui.sh
+-rw-r--r--   0 runner    (1001) docker     (127)     4785 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/build_linux_rpm-2-installer.sh
+-rw-r--r--   0 runner    (1001) docker     (127)     1332 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/build_macos-1-gui.sh
+-rw-r--r--   0 runner    (1001) docker     (127)     3655 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/build_macos-2-installer.sh
+-rw-r--r--   0 runner    (1001) docker     (127)     1360 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/build_win_license_dir.sh
+-rw-r--r--   0 runner    (1001) docker     (127)     1882 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/build_windows-1-gui.ps1
+-rw-r--r--   0 runner    (1001) docker     (127)     4202 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/build_windows-2-installer.ps1
+-rw-r--r--   0 runner    (1001) docker     (127)     2218 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/check_dependency_artifacts.py
+-rw-r--r--   0 runner    (1001) docker     (127)      907 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/clean-runner.sh
+-rw-r--r--   0 runner    (1001) docker     (127)     2820 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/electron-builder.json
+-rw-r--r--   0 runner    (1001) docker     (127)     2531 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/installer-version.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.783801 chia-blockchain-2.3.0rc2/build_scripts/npm_global/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/npm_global/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)      342 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/npm_global/package-lock.json
+-rw-r--r--   0 runner    (1001) docker     (127)      267 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/npm_global/package.json
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.783801 chia-blockchain-2.3.0rc2/build_scripts/npm_linux/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/npm_linux/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)   531259 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/npm_linux/package-lock.json
+-rw-r--r--   0 runner    (1001) docker     (127)      332 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/npm_linux/package.json
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.783801 chia-blockchain-2.3.0rc2/build_scripts/npm_macos/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/npm_macos/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)   575697 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/npm_macos/package-lock.json
+-rw-r--r--   0 runner    (1001) docker     (127)      355 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/npm_macos/package.json
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.787801 chia-blockchain-2.3.0rc2/build_scripts/npm_windows/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/npm_windows/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)   525789 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/npm_windows/package-lock.json
+-rw-r--r--   0 runner    (1001) docker     (127)      308 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/npm_windows/package.json
+-rw-r--r--   0 runner    (1001) docker     (127)     4719 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/build_scripts/pyinstaller.spec
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.787801 chia-blockchain-2.3.0rc2/chia/
+-rw-r--r--   0 runner    (1001) docker     (127)      256 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       76 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/__main__.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.787801 chia-blockchain-2.3.0rc2/chia/_tests/
+-rw-r--r--   0 runner    (1001) docker     (127)     2318 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/README.md
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.791801 chia-blockchain-2.3.0rc2/chia/_tests/blockchain/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/blockchain/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6765 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/blockchain/blockchain_test_utils.py
+-rw-r--r--   0 runner    (1001) docker     (127)       86 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/blockchain/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)   173806 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/blockchain/test_blockchain.py
+-rw-r--r--   0 runner    (1001) docker     (127)    41029 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/blockchain/test_blockchain_transactions.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5807 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/blockchain/test_lookup_fork_chain.py
+-rwxr-xr-x   0 runner    (1001) docker     (127)     2764 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/build-init-files.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6961 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/build-job-matrix.py
+-rwxr-xr-x   0 runner    (1001) docker     (127)      924 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/check_pytest_monitor_output.py
+-rwxr-xr-x   0 runner    (1001) docker     (127)     2325 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/check_sql_statements.py
+-rwxr-xr-x   0 runner    (1001) docker     (127)     1750 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/chia-start-sim
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.791801 chia-blockchain-2.3.0rc2/chia/_tests/clvm/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/clvm/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)      968 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/clvm/benchmark_costs.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5235 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/clvm/coin_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3976 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_chialisp_deserialization.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1164 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_clvm_step.py
+-rw-r--r--   0 runner    (1001) docker     (127)      479 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_condition_codes.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1049 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_curry_and_treehash.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3339 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_program.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5193 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_puzzle_compression.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1386 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_puzzle_drivers.py
+-rw-r--r--   0 runner    (1001) docker     (127)     9389 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_puzzles.py
+-rw-r--r--   0 runner    (1001) docker     (127)    19568 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_singletons.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7470 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_spend_sim.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.795801 chia-blockchain-2.3.0rc2/chia/_tests/cmds/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)    20101 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/cmd_test_utils.py
+-rw-r--r--   0 runner    (1001) docker     (127)       69 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)      989 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/conftest.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3237 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/test_cmds_util.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2632 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/test_farm_cmd.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4954 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/test_show.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7316 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/test_sim.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1055 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/test_timelock_args.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4621 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/test_tx_config_args.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1810 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/testing_classes.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.795801 chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8296 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_coins.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1470 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_consts.py
+-rw-r--r--   0 runner    (1001) docker     (127)    19443 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_dao.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14280 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_did.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14635 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_nft.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4710 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_notifications.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3109 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_offer.toffer
+-rw-r--r--   0 runner    (1001) docker     (127)    12158 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_vcs.py
+-rw-r--r--   0 runner    (1001) docker     (127)    43190 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3424 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_wallet_check.py
+-rw-r--r--   0 runner    (1001) docker     (127)    45123 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/conftest.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4514 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/connection_utils.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.799801 chia-blockchain-2.3.0rc2/chia/_tests/core/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.799801 chia-blockchain-2.3.0rc2/chia/_tests/core/cmds/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/cmds/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)    13587 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/cmds/test_beta.py
+-rw-r--r--   0 runner    (1001) docker     (127)    39807 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/cmds/test_keys.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4182 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/cmds/test_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)       69 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/config.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.803801 chia-blockchain-2.3.0rc2/chia/_tests/core/consensus/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/consensus/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2221 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/consensus/test_block_creation.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5100 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/consensus/test_pot_iterations.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.803801 chia-blockchain-2.3.0rc2/chia/_tests/core/custom_types/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/custom_types/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3803 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/custom_types/test_coin.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5605 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/custom_types/test_proof_of_space.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2700 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/custom_types/test_spend_bundle.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.803801 chia-blockchain-2.3.0rc2/chia/_tests/core/daemon/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/daemon/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       86 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/daemon/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    70086 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/daemon/test_daemon.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4007 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/daemon/test_daemon_register.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2507 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/daemon/test_keychain_proxy.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.807801 chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       99 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3878 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/conftest.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2341 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/test_data_cli.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2517 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/test_data_layer.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4469 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/test_data_layer_util.py
+-rw-r--r--   0 runner    (1001) docker     (127)   318755 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/test_data_rpc.py
+-rw-r--r--   0 runner    (1001) docker     (127)    72455 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/test_data_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14911 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/test_data_store_schema.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7229 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/util.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.807801 chia-blockchain-2.3.0rc2/chia/_tests/core/farmer/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/farmer/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       69 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/farmer/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3972 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/farmer/test_farmer_api.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.807801 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       86 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/config.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.807801 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/dos/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/dos/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       53 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/dos/config.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.811801 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/full_sync/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/full_sync/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       86 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/full_sync/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    20529 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/full_sync/test_full_sync.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1048 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/ram_db.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.811801 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/stores/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/stores/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       86 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/stores/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    20435 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/stores/test_block_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)    36969 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/stores/test_coin_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)    50558 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/stores/test_full_node_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8154 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/stores/test_hint_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4838 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/stores/test_sync_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)    23803 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_address_manager.py
+-rw-r--r--   0 runner    (1001) docker     (127)    24824 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_block_height_map.py
+-rw-r--r--   0 runner    (1001) docker     (127)    21413 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_conditions.py
+-rw-r--r--   0 runner    (1001) docker     (127)   110688 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_full_node.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2092 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_generator_tools.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4577 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_hint_management.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1340 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_node_load.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7470 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_performance.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14014 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_subscriptions.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7882 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_transactions.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5774 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_tx_processing_queue.py
+-rw-r--r--   0 runner    (1001) docker     (127)   187873 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/large_block.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2884 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/make_block_generator.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.811801 chia-blockchain-2.3.0rc2/chia/_tests/core/mempool/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/mempool/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       86 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/mempool/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)   131885 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/mempool/test_mempool.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3635 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/mempool/test_mempool_fee_estimator.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2172 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/mempool/test_mempool_fee_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (127)    87024 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/mempool/test_mempool_manager.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2617 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/mempool/test_mempool_performance.py
+-rw-r--r--   0 runner    (1001) docker     (127)    28681 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/mempool/test_singleton_fast_forward.py
+-rw-r--r--   0 runner    (1001) docker     (127)      912 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/node_height.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.815801 chia-blockchain-2.3.0rc2/chia/_tests/core/server/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/server/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       69 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/server/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2553 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/server/flood.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3773 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/server/serve.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1983 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/server/test_capabilities.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12266 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/server/test_dos.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5612 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/server/test_event_loop.py
+-rw-r--r--   0 runner    (1001) docker     (127)    10058 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/server/test_loop.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2639 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/server/test_node_discovery.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14925 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/server/test_rate_limits.py
+-rw-r--r--   0 runner    (1001) docker     (127)    10428 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/server/test_server.py
+-rw-r--r--   0 runner    (1001) docker     (127)      186 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/server/test_upnp.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.815801 chia-blockchain-2.3.0rc2/chia/_tests/core/services/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/services/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       53 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/services/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6418 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/services/test_services.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.815801 chia-blockchain-2.3.0rc2/chia/_tests/core/ssl/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/ssl/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       69 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/ssl/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5234 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/ssl/test_ssl.py
+-rw-r--r--   0 runner    (1001) docker     (127)      901 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/test_coins.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12328 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/test_cost_calculation.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3851 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/test_crawler.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2200 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/test_crawler_rpc.py
+-rw-r--r--   0 runner    (1001) docker     (127)      622 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/test_daemon_rpc.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5419 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/test_db_conversion.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5834 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/test_db_validation.py
+-rw-r--r--   0 runner    (1001) docker     (127)    22463 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/test_farmer_harvester_rpc.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1055 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/test_filter.py
+-rw-r--r--   0 runner    (1001) docker     (127)    34764 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/test_full_node_rpc.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12010 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/test_merkle_set.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1386 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/test_program.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1176 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/test_rpc_util.py
+-rw-r--r--   0 runner    (1001) docker     (127)    13523 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/test_seeder.py
+-rw-r--r--   0 runner    (1001) docker     (127)      319 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/test_setproctitle.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.819801 chia-blockchain-2.3.0rc2/chia/_tests/core/util/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/util/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       69 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/util/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2304 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_cached_bls.py
+-rw-r--r--   0 runner    (1001) docker     (127)    13753 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_config.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4427 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_file_keyring_synchronization.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14620 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_files.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3545 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_jsonify.py
+-rw-r--r--   0 runner    (1001) docker     (127)    21910 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_keychain.py
+-rw-r--r--   0 runner    (1001) docker     (127)    23080 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_keyring_wrapper.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14519 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_lockfile.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6370 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_log_exceptions.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1682 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_lru_cache.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1442 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_significant_bits.py
+-rw-r--r--   0 runner    (1001) docker     (127)    28803 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_streamable.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.819801 chia-blockchain-2.3.0rc2/chia/_tests/db/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/db/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)    20816 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/db/test_db_wrapper.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.819801 chia-blockchain-2.3.0rc2/chia/_tests/environments/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/environments/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)      966 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/environments/common.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1477 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/environments/full_node.py
+-rw-r--r--   0 runner    (1001) docker     (127)    18014 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/environments/wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)      821 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/ether.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.819801 chia-blockchain-2.3.0rc2/chia/_tests/farmer_harvester/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/farmer_harvester/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       69 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/farmer_harvester/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    48355 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/farmer_harvester/test_farmer.py
+-rw-r--r--   0 runner    (1001) docker     (127)    13565 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/farmer_harvester/test_farmer_harvester.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6008 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/farmer_harvester/test_filter_prefix_bits.py
+-rw-r--r--   0 runner    (1001) docker     (127)    18876 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/farmer_harvester/test_third_party_harvesters.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14109 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/farmer_harvester/test_third_party_harvesters_data.json
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.823801 chia-blockchain-2.3.0rc2/chia/_tests/fee_estimation/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/fee_estimation/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       69 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/fee_estimation/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    10630 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/fee_estimation/test_fee_estimation_integration.py
+-rw-r--r--   0 runner    (1001) docker     (127)    11532 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/fee_estimation/test_fee_estimation_rpc.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5145 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/fee_estimation/test_fee_estimation_unit_tests.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5895 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/fee_estimation/test_mempoolitem_height_added.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.823801 chia-blockchain-2.3.0rc2/chia/_tests/generator/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/generator/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.823801 chia-blockchain-2.3.0rc2/chia/_tests/generator/puzzles/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/generator/puzzles/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       89 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/generator/puzzles/test_generator_deserialize.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)       27 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/generator/puzzles/test_generator_deserialize.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      791 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/generator/puzzles/test_multiple_generator_input_arguments.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      465 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/generator/puzzles/test_multiple_generator_input_arguments.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)    14619 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/generator/test_compression.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4207 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/generator/test_generator_types.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6892 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/generator/test_rom.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4142 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/generator/test_scan.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.823801 chia-blockchain-2.3.0rc2/chia/_tests/plot_sync/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/plot_sync/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       69 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/plot_sync/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3429 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/plot_sync/test_delta.py
+-rw-r--r--   0 runner    (1001) docker     (127)    30589 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/plot_sync/test_plot_sync.py
+-rw-r--r--   0 runner    (1001) docker     (127)    19621 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/plot_sync/test_receiver.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5443 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/plot_sync/test_sender.py
+-rw-r--r--   0 runner    (1001) docker     (127)    19139 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/plot_sync/test_sync_simulated.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2692 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/plot_sync/util.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.823801 chia-blockchain-2.3.0rc2/chia/_tests/plotting/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/plotting/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       69 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/plotting/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    33046 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/plotting/test_plot_manager.py
+-rw-r--r--   0 runner    (1001) docker     (127)      316 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/plotting/util.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.827801 chia-blockchain-2.3.0rc2/chia/_tests/pools/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/pools/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       99 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/pools/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1186 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/pools/test_pool_cmdline.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1788 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/pools/test_pool_config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14652 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/pools/test_pool_puzzles_lifecycle.py
+-rw-r--r--   0 runner    (1001) docker     (127)    47271 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/pools/test_pool_rpc.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7123 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/pools/test_pool_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7177 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/pools/test_wallet_pool_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)    11220 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/process_junit.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.827801 chia-blockchain-2.3.0rc2/chia/_tests/rpc/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/rpc/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2563 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/rpc/test_rpc_client.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.827801 chia-blockchain-2.3.0rc2/chia/_tests/simulation/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/simulation/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)      127 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/simulation/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    22823 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/simulation/test_simulation.py
+-rw-r--r--   0 runner    (1001) docker     (127)     9272 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/simulation/test_simulator.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5099 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/simulation/test_start_simulator.py
+-rw-r--r--   0 runner    (1001) docker     (127)      431 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/testconfig.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.827801 chia-blockchain-2.3.0rc2/chia/_tests/timelord/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/timelord/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       69 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/timelord/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)     9596 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/timelord/test_new_peak.py
+-rw-r--r--   0 runner    (1001) docker     (127)      298 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/timelord/test_timelord.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.831801 chia-blockchain-2.3.0rc2/chia/_tests/tools/
+-rw-r--r--   0 runner    (1001) docker     (127)    19256 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/tools/1315537.json
+-rw-r--r--   0 runner    (1001) docker     (127)    19163 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/tools/1315544.json
+-rw-r--r--   0 runner    (1001) docker     (127)    18650 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/tools/1315630.json
+-rw-r--r--   0 runner    (1001) docker     (127)     9841 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/tools/300000.json
+-rw-r--r--   0 runner    (1001) docker     (127)    17387 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/tools/442734.json
+-rw-r--r--   0 runner    (1001) docker     (127)   233239 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/tools/466212.json
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/tools/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       98 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/tools/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)   405504 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/tools/test-blockchain-db.sqlite
+-rw-r--r--   0 runner    (1001) docker     (127)      714 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/tools/test_full_sync.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3276 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/tools/test_legacy_keyring.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4393 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/tools/test_run_block.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.839801 chia-blockchain-2.3.0rc2/chia/_tests/util/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7291 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/benchmark_cost.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3977 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/benchmarks.py
+-rw-r--r--   0 runner    (1001) docker     (127)    10283 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/bip39_test_vectors.json
+-rw-r--r--   0 runner    (1001) docker     (127)     5005 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/blockchain.py
+-rw-r--r--   0 runner    (1001) docker     (127)    11215 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/build_network_protocol_files.py
+-rw-r--r--   0 runner    (1001) docker     (127)   121543 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/clvm_generator.bin
+-rw-r--r--   0 runner    (1001) docker     (127)       53 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)      845 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/constants.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1092 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/db_connection.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8332 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/full_sync.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4328 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/gen_ssl_certs.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1587 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/generator_tools_testing.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1617 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/key_tool.py
+-rw-r--r--   0 runner    (1001) docker     (127)    18730 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/misc.py
+-rw-r--r--   0 runner    (1001) docker     (127)    37175 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/network_protocol_data.py
+-rw-r--r--   0 runner    (1001) docker     (127)    50511 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/protocol_messages_bytes-v1.0
+-rw-r--r--   0 runner    (1001) docker     (127)   182047 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/protocol_messages_json.py
+-rw-r--r--   0 runner    (1001) docker     (127)      721 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/rpc.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5960 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/run_block.py
+-rw-r--r--   0 runner    (1001) docker     (127)    18244 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/setup_nodes.py
+-rw-r--r--   0 runner    (1001) docker     (127)      297 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/temp_file.py
+-rw-r--r--   0 runner    (1001) docker     (127)    10895 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_async_pool.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1143 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_build_job_matrix.py
+-rw-r--r--   0 runner    (1001) docker     (127)      161 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_build_network_protocol_files.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1416 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_chia_version.py
+-rw-r--r--   0 runner    (1001) docker     (127)      353 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_collection.py
+-rw-r--r--   0 runner    (1001) docker     (127)    11353 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_condition_tools.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12399 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_config.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1595 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_dump_keyring.py
+-rw-r--r--   0 runner    (1001) docker     (127)      321 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_errors.py
+-rw-r--r--   0 runner    (1001) docker     (127)    11211 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_full_block_utils.py
+-rw-r--r--   0 runner    (1001) docker     (127)      754 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_installed.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1993 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_limited_semaphore.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1262 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_logging_filter.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14018 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_misc.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2989 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_network.py
+-rw-r--r--   0 runner    (1001) docker     (127)    26069 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_network_protocol_files.py
+-rw-r--r--   0 runner    (1001) docker     (127)    20957 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_network_protocol_json.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8652 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_network_protocol_test.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2346 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_paginator.py
+-rw-r--r--   0 runner    (1001) docker     (127)      653 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_pprint.py
+-rw-r--r--   0 runner    (1001) docker     (127)    16144 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_priority_mutex.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3575 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_recursive_replace.py
+-rw-r--r--   0 runner    (1001) docker     (127)      403 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_service_groups.py
+-rw-r--r--   0 runner    (1001) docker     (127)      934 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_ssl_check.py
+-rw-r--r--   0 runner    (1001) docker     (127)    10754 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_struct_stream.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1514 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_testnet_overrides.py
+-rw-r--r--   0 runner    (1001) docker     (127)      891 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_tests_misc.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1035 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_timing.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1885 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/test_trusted_peer.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4532 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/util/time_out_assert.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.847802 chia-blockchain-2.3.0rc2/chia/_tests/wallet/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.847802 chia-blockchain-2.3.0rc2/chia/_tests/wallet/cat_wallet/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/cat_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       86 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/cat_wallet/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    19794 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/cat_wallet/test_cat_lifecycle.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2889 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/cat_wallet/test_cat_outer_puzzle.py
+-rw-r--r--   0 runner    (1001) docker     (127)    56045 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/cat_wallet/test_cat_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12937 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/cat_wallet/test_offer_lifecycle.py
+-rw-r--r--   0 runner    (1001) docker     (127)    81245 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/cat_wallet/test_trades.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.847802 chia-blockchain-2.3.0rc2/chia/_tests/wallet/clawback/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/clawback/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       69 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/clawback/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3404 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/clawback/test_clawback_decorator.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12823 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/clawback/test_clawback_lifecycle.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2130 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/clawback/test_clawback_metadata.py
+-rw-r--r--   0 runner    (1001) docker     (127)       86 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    10007 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/conftest.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.847802 chia-blockchain-2.3.0rc2/chia/_tests/wallet/dao_wallet/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/dao_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       69 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/dao_wallet/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    50118 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/dao_wallet/test_dao_clvm.py
+-rw-r--r--   0 runner    (1001) docker     (127)   167669 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/dao_wallet/test_dao_wallets.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.851801 chia-blockchain-2.3.0rc2/chia/_tests/wallet/db_wallet/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/db_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       69 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/db_wallet/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6417 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/db_wallet/test_db_graftroot.py
+-rw-r--r--   0 runner    (1001) docker     (127)    21776 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/db_wallet/test_dl_offers.py
+-rw-r--r--   0 runner    (1001) docker     (127)    26975 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/db_wallet/test_dl_wallet.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.851801 chia-blockchain-2.3.0rc2/chia/_tests/wallet/did_wallet/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/did_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       86 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/did_wallet/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    69405 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/did_wallet/test_did.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.851801 chia-blockchain-2.3.0rc2/chia/_tests/wallet/nft_wallet/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/nft_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       87 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/nft_wallet/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    66494 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/nft_wallet/test_nft_1_offers.py
+-rw-r--r--   0 runner    (1001) docker     (127)    45185 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/nft_wallet/test_nft_bulk_mint.py
+-rw-r--r--   0 runner    (1001) docker     (127)    15506 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/nft_wallet/test_nft_lifecycle.py
+-rw-r--r--   0 runner    (1001) docker     (127)    52950 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/nft_wallet/test_nft_offers.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7626 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/nft_wallet/test_nft_puzzles.py
+-rw-r--r--   0 runner    (1001) docker     (127)    86274 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/nft_wallet/test_nft_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3273 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/nft_wallet/test_ownership_outer_puzzle.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.851801 chia-blockchain-2.3.0rc2/chia/_tests/wallet/rpc/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/rpc/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       86 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/rpc/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12533 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/rpc/test_dl_wallet_rpc.py
+-rw-r--r--   0 runner    (1001) docker     (127)   128074 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/rpc/test_wallet_rpc.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.855801 chia-blockchain-2.3.0rc2/chia/_tests/wallet/simple_sync/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/simple_sync/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       69 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/simple_sync/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    32532 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/simple_sync/test_simple_sync_protocol.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.855801 chia-blockchain-2.3.0rc2/chia/_tests/wallet/sync/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/sync/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       86 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/sync/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    68588 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/sync/test_wallet_sync.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7270 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_address_type.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1385 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_bech32m.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2148 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_chialisp.py
+-rw-r--r--   0 runner    (1001) docker     (127)    23910 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_coin_selection.py
+-rw-r--r--   0 runner    (1001) docker     (127)    16214 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_conditions.py
+-rw-r--r--   0 runner    (1001) docker     (127)    11819 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_debug_spend_bundle.py
+-rw-r--r--   0 runner    (1001) docker     (127)    28340 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_new_wallet_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8624 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_nft_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8161 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_notifications.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14300 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_offer_parsing_performance.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6105 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_puzzle_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7796 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_sign_coin_spends.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5043 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_singleton.py
+-rw-r--r--   0 runner    (1001) docker     (127)    32097 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_singleton_lifecycle_fast.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6780 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_singleton_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)      743 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_taproot.py
+-rw-r--r--   0 runner    (1001) docker     (127)    38838 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_transaction_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7969 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_util.py
+-rw-r--r--   0 runner    (1001) docker     (127)    93005 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4847 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_blockchain.py
+-rw-r--r--   0 runner    (1001) docker     (127)    43180 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_coin_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2383 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_interested_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1659 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_key_val_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)    26087 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_node.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4332 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_retry.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4477 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_state_manager.py
+-rw-r--r--   0 runner    (1001) docker     (127)     9156 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_test_framework.py
+-rw-r--r--   0 runner    (1001) docker     (127)     9131 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_trade_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1221 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_user_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6378 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_utils.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.855801 chia-blockchain-2.3.0rc2/chia/_tests/wallet/vc_wallet/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/vc_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       69 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/vc_wallet/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2678 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/vc_wallet/test_cr_outer_puzzle.py
+-rw-r--r--   0 runner    (1001) docker     (127)    36650 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/vc_wallet/test_vc_lifecycle.py
+-rw-r--r--   0 runner    (1001) docker     (127)    29786 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/vc_wallet/test_vc_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)    11285 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/wallet/wallet_block_tools.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.855801 chia-blockchain-2.3.0rc2/chia/_tests/weight_proof/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/weight_proof/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       69 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/weight_proof/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    22141 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/_tests/weight_proof/test_weight_proof.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.855801 chia-blockchain-2.3.0rc2/chia/clvm/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/clvm/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)      325 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/clvm/singleton.py
+-rw-r--r--   0 runner    (1001) docker     (127)    20915 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/clvm/spend_sim.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.863802 chia-blockchain-2.3.0rc2/chia/cmds/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7240 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/beta.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4705 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/beta_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (127)    16311 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/check_wallet_db.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4617 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/chia.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14834 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/cmds_util.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12147 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/coin_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6413 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/coins.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1387 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/completion.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14772 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/configure.py
+-rw-r--r--   0 runner    (1001) docker     (127)    29424 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/dao.py
+-rw-r--r--   0 runner    (1001) docker     (127)    25500 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/dao_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (127)    17641 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/data.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12664 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/data_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2937 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/db.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3341 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/db_backup_func.py
+-rw-r--r--   0 runner    (1001) docker     (127)    18692 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/db_upgrade_func.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7802 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/db_validate_func.py
+-rw-r--r--   0 runner    (1001) docker     (127)      332 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/dev.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2168 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/farm.py
+-rw-r--r--   0 runner    (1001) docker     (127)     9190 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/farm_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2079 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/init.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14060 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/init_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4227 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/installers.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14287 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/keys.py
+-rw-r--r--   0 runner    (1001) docker     (127)    27118 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/keys_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1291 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/netspace.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2558 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/netspace_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (127)      436 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/options.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4784 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/passphrase.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12569 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/passphrase_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1398 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/peer.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5235 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/peer_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7768 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/plotnft.py
+-rw-r--r--   0 runner    (1001) docker     (127)    18442 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/plotnft_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7256 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/plots.py
+-rw-r--r--   0 runner    (1001) docker     (127)      430 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/plotters.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6712 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/rpc.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2443 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/show.py
+-rw-r--r--   0 runner    (1001) docker     (127)     9803 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/show_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7671 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/sim.py
+-rw-r--r--   0 runner    (1001) docker     (127)    21730 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/sim_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (127)      782 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/start.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3452 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/start_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2055 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/stop.py
+-rw-r--r--   0 runner    (1001) docker     (127)      325 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/units.py
+-rw-r--r--   0 runner    (1001) docker     (127)    51260 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)    71518 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/cmds/wallet_funcs.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.867802 chia-blockchain-2.3.0rc2/chia/consensus/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)    23954 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/block_body_validation.py
+-rw-r--r--   0 runner    (1001) docker     (127)    22102 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/block_creation.py
+-rw-r--r--   0 runner    (1001) docker     (127)    51140 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/block_header_validation.py
+-rw-r--r--   0 runner    (1001) docker     (127)      726 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/block_record.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2246 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/block_rewards.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1602 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/block_root_validation.py
+-rw-r--r--   0 runner    (1001) docker     (127)    49055 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/blockchain.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3975 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/blockchain_interface.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1203 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/coinbase.py
+-rw-r--r--   0 runner    (1001) docker     (127)      228 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/condition_costs.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4673 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/constants.py
+-rw-r--r--   0 runner    (1001) docker     (127)      396 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/cost_calculator.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5301 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/default_constants.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2183 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/deficit.py
+-rw-r--r--   0 runner    (1001) docker     (127)    18266 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/difficulty_adjustment.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3348 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/find_fork_point.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6609 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/full_block_to_block_record.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4934 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/get_block_challenge.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7852 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/make_sub_epoch_summary.py
+-rw-r--r--   0 runner    (1001) docker     (127)    18022 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/multiprocess_validation.py
+-rw-r--r--   0 runner    (1001) docker     (127)      787 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/pos_quality.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2829 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/pot_iterations.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.867802 chia-blockchain-2.3.0rc2/chia/consensus/puzzles/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/puzzles/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2457 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/puzzles/chialisp_deserialisation.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      943 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/puzzles/chialisp_deserialisation.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     1633 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/puzzles/rom_bootstrap_generator.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     1475 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/puzzles/rom_bootstrap_generator.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     6971 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/consensus/vdf_info_computation.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.871802 chia-blockchain-2.3.0rc2/chia/daemon/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/daemon/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8542 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/daemon/client.py
+-rw-r--r--   0 runner    (1001) docker     (127)    18184 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/daemon/keychain_proxy.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12803 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/daemon/keychain_server.py
+-rw-r--r--   0 runner    (1001) docker     (127)    64587 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/daemon/server.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2069 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/daemon/windows_signal.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.871802 chia-blockchain-2.3.0rc2/chia/data_layer/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/data_layer/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)    50919 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/data_layer/data_layer.py
+-rw-r--r--   0 runner    (1001) docker     (127)      662 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/data_layer/data_layer_api.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1247 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/data_layer/data_layer_errors.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4685 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/data_layer/data_layer_server.py
+-rw-r--r--   0 runner    (1001) docker     (127)    27429 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/data_layer/data_layer_util.py
+-rw-r--r--   0 runner    (1001) docker     (127)    63373 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/data_layer/data_layer_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)    85282 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/data_layer/data_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)    13617 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/data_layer/dl_wallet_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)    10862 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/data_layer/download_data.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.871802 chia-blockchain-2.3.0rc2/chia/data_layer/puzzles/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/data_layer/puzzles/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2838 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/data_layer/puzzles/graftroot_dl_offers.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     1845 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/data_layer/puzzles/graftroot_dl_offers.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     1136 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/data_layer/s3_plugin_config.yml
+-rw-r--r--   0 runner    (1001) docker     (127)    16789 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/data_layer/s3_plugin_service.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.871802 chia-blockchain-2.3.0rc2/chia/data_layer/util/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/data_layer/util/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4325 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/data_layer/util/benchmark.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.871802 chia-blockchain-2.3.0rc2/chia/farmer/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/farmer/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)    44662 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/farmer/farmer.py
+-rw-r--r--   0 runner    (1001) docker     (127)    39789 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/farmer/farmer_api.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.879802 chia-blockchain-2.3.0rc2/chia/full_node/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3595 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/bitcoin_fee_estimator.py
+-rw-r--r--   0 runner    (1001) docker     (127)    11405 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/block_height_map.py
+-rw-r--r--   0 runner    (1001) docker     (127)    24062 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/block_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5549 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/bundle_tools.py
+-rw-r--r--   0 runner    (1001) docker     (127)    27614 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/coin_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1796 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/fee_estimate.py
+-rw-r--r--   0 runner    (1001) docker     (127)      526 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/fee_estimate_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2922 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/fee_estimation.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3958 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/fee_estimator.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1235 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/fee_estimator_constants.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1955 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/fee_estimator_example.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1606 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/fee_estimator_interface.py
+-rw-r--r--   0 runner    (1001) docker     (127)      610 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/fee_history.py
+-rw-r--r--   0 runner    (1001) docker     (127)    22559 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/fee_tracker.py
+-rw-r--r--   0 runner    (1001) docker     (127)   138999 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/full_node.py
+-rw-r--r--   0 runner    (1001) docker     (127)    92772 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/full_node_api.py
+-rw-r--r--   0 runner    (1001) docker     (127)    47559 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/full_node_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2504 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/generator.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2323 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/hint_management.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3009 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/hint_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)    22322 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/mempool.py
+-rw-r--r--   0 runner    (1001) docker     (127)     9017 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/mempool_check_conditions.py
+-rw-r--r--   0 runner    (1001) docker     (127)    40498 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/mempool_manager.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3674 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/pending_tx_cache.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.879802 chia-blockchain-2.3.0rc2/chia/full_node/puzzles/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/puzzles/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)      642 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/puzzles/block_program_zero.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      341 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/puzzles/block_program_zero.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      253 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/puzzles/decompress_coin_spend_entry.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      111 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/puzzles/decompress_coin_spend_entry.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      262 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/puzzles/decompress_coin_spend_entry_with_prefix.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      109 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/puzzles/decompress_coin_spend_entry_with_prefix.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      114 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/puzzles/decompress_puzzle.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)       43 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/puzzles/decompress_puzzle.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      414 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/signage_point.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7428 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/subscriptions.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5218 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/sync_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3335 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/tx_processing_queue.py
+-rw-r--r--   0 runner    (1001) docker     (127)    70929 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/full_node/weight_proof.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.879802 chia-blockchain-2.3.0rc2/chia/harvester/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/harvester/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)    11776 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/harvester/harvester.py
+-rw-r--r--   0 runner    (1001) docker     (127)    18476 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/harvester/harvester_api.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.879802 chia-blockchain-2.3.0rc2/chia/introducer/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/introducer/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4448 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/introducer/introducer.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2145 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/introducer/introducer_api.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.879802 chia-blockchain-2.3.0rc2/chia/legacy/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/legacy/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4752 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/legacy/keyring.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.883802 chia-blockchain-2.3.0rc2/chia/plot_sync/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/plot_sync/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1846 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/plot_sync/delta.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2306 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/plot_sync/exceptions.py
+-rw-r--r--   0 runner    (1001) docker     (127)    15187 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/plot_sync/receiver.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14141 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/plot_sync/sender.py
+-rw-r--r--   0 runner    (1001) docker     (127)      825 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/plot_sync/util.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.883802 chia-blockchain-2.3.0rc2/chia/plotters/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/plotters/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14274 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/plotters/bladebit.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1942 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/plotters/chiapos.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7710 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/plotters/madmax.py
+-rw-r--r--   0 runner    (1001) docker     (127)    18622 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/plotters/plotters.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4204 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/plotters/plotters_util.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.883802 chia-blockchain-2.3.0rc2/chia/plotting/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/plotting/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8432 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/plotting/cache.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12554 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/plotting/check_plots.py
+-rw-r--r--   0 runner    (1001) docker     (127)    10499 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/plotting/create_plots.py
+-rw-r--r--   0 runner    (1001) docker     (127)    19085 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/plotting/manager.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12348 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/plotting/util.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.883802 chia-blockchain-2.3.0rc2/chia/pools/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/pools/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5112 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/pools/pool_config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    17414 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/pools/pool_puzzles.py
+-rw-r--r--   0 runner    (1001) docker     (127)    45274 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/pools/pool_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4564 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/pools/pool_wallet_info.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.887802 chia-blockchain-2.3.0rc2/chia/pools/puzzles/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/pools/puzzles/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2627 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/pools/puzzles/pool_member_innerpuz.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      753 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/pools/puzzles/pool_member_innerpuz.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     2648 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/pools/puzzles/pool_waitingroom_innerpuz.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      825 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/pools/puzzles/pool_waitingroom_innerpuz.clsp.hex
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.887802 chia-blockchain-2.3.0rc2/chia/protocols/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/protocols/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3008 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/protocols/farmer_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4578 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/protocols/full_node_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5706 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/protocols/harvester_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (127)      600 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/protocols/introducer_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4061 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/protocols/pool_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3692 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/protocols/protocol_message_types.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4024 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/protocols/protocol_state_machine.py
+-rw-r--r--   0 runner    (1001) docker     (127)      269 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/protocols/protocol_timing.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2169 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/protocols/shared_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3111 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/protocols/timelord_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7539 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/protocols/wallet_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/py.typed
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.891802 chia-blockchain-2.3.0rc2/chia/rpc/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/rpc/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2640 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/rpc/crawler_rpc_api.py
+-rw-r--r--   0 runner    (1001) docker     (127)    24176 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/rpc/data_layer_rpc_api.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7431 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/rpc/data_layer_rpc_client.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1987 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/rpc/data_layer_rpc_util.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14142 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/rpc/farmer_rpc_api.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3986 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/rpc/farmer_rpc_client.py
+-rw-r--r--   0 runner    (1001) docker     (127)    45128 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/rpc/full_node_rpc_api.py
+-rw-r--r--   0 runner    (1001) docker     (127)    13283 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/rpc/full_node_rpc_client.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6458 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/rpc/harvester_rpc_api.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2274 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/rpc/harvester_rpc_client.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5120 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/rpc/rpc_client.py
+-rw-r--r--   0 runner    (1001) docker     (127)    17122 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/rpc/rpc_server.py
+-rw-r--r--   0 runner    (1001) docker     (127)      863 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/rpc/timelord_rpc_api.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8609 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/rpc/util.py
+-rw-r--r--   0 runner    (1001) docker     (127)      614 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/rpc/wallet_request_types.py
+-rw-r--r--   0 runner    (1001) docker     (127)   215173 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/rpc/wallet_rpc_api.py
+-rw-r--r--   0 runner    (1001) docker     (127)    65435 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/rpc/wallet_rpc_client.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.891802 chia-blockchain-2.3.0rc2/chia/seeder/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/seeder/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)    15228 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/seeder/crawl_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)    18931 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/seeder/crawler.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4116 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/seeder/crawler_api.py
+-rw-r--r--   0 runner    (1001) docker     (127)    25495 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/seeder/dns_server.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5320 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/seeder/peer_record.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2927 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/seeder/start_crawler.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.895802 chia-blockchain-2.3.0rc2/chia/server/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)    27079 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/address_manager.py
+-rw-r--r--   0 runner    (1001) docker     (127)     9764 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/address_manager_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)      184 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/api_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (127)      720 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/capabilities.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14069 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/chia_policy.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2430 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/introducer_peers.py
+-rw-r--r--   0 runner    (1001) docker     (127)    32236 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/node_discovery.py
+-rw-r--r--   0 runner    (1001) docker     (127)      820 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/outbound_message.py
+-rw-r--r--   0 runner    (1001) docker     (127)    13778 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/rate_limit_numbers.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5013 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/rate_limits.py
+-rw-r--r--   0 runner    (1001) docker     (127)    31804 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/server.py
+-rw-r--r--   0 runner    (1001) docker     (127)      867 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/ssl_context.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4682 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/start_data_layer.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3111 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/start_farmer.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4003 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/start_full_node.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2890 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/start_harvester.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2204 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/start_introducer.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12914 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/start_service.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2766 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/start_timelord.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3740 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/start_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3743 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/upnp.py
+-rw-r--r--   0 runner    (1001) docker     (127)    32780 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/server/ws_connection.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.899802 chia-blockchain-2.3.0rc2/chia/simulator/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)    92841 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/block_tools.py
+-rw-r--r--   0 runner    (1001) docker     (127)    32431 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/full_node_simulator.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5067 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/keyring.py
+-rw-r--r--   0 runner    (1001) docker     (127)    19539 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/setup_services.py
+-rw-r--r--   0 runner    (1001) docker     (127)      534 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/simulator_constants.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5518 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/simulator_full_node_rpc_api.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3062 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/simulator_full_node_rpc_client.py
+-rw-r--r--   0 runner    (1001) docker     (127)      628 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/simulator_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6629 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/simulator_test_tools.py
+-rw-r--r--   0 runner    (1001) docker     (127)      693 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/socket.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4944 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs.py
+-rw-r--r--   0 runner    (1001) docker     (127)    39840 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_1.py
+-rw-r--r--   0 runner    (1001) docker     (127)    39838 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_10.py
+-rw-r--r--   0 runner    (1001) docker     (127)    39840 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_2.py
+-rw-r--r--   0 runner    (1001) docker     (127)    39832 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_3.py
+-rw-r--r--   0 runner    (1001) docker     (127)    39844 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_4.py
+-rw-r--r--   0 runner    (1001) docker     (127)    39848 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_5.py
+-rw-r--r--   0 runner    (1001) docker     (127)    39840 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_6.py
+-rw-r--r--   0 runner    (1001) docker     (127)    39836 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_7.py
+-rw-r--r--   0 runner    (1001) docker     (127)    39840 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_8.py
+-rw-r--r--   0 runner    (1001) docker     (127)    39840 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_9.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4878 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/start_simulator.py
+-rw-r--r--   0 runner    (1001) docker     (127)    10869 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/simulator/wallet_tools.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.899802 chia-blockchain-2.3.0rc2/chia/ssl/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/ssl/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1155 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/ssl/chia_ca.crt
+-rw-r--r--   0 runner    (1001) docker     (127)     1704 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/ssl/chia_ca.key
+-rw-r--r--   0 runner    (1001) docker     (127)     8898 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/ssl/create_ssl.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1200 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/ssl/dst_root_ca.pem
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.903802 chia-blockchain-2.3.0rc2/chia/timelord/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/timelord/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1820 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/timelord/iters_from_block.py
+-rw-r--r--   0 runner    (1001) docker     (127)    59634 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/timelord/timelord.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5769 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/timelord/timelord_api.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5717 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/timelord/timelord_launcher.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12109 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/timelord/timelord_state.py
+-rw-r--r--   0 runner    (1001) docker     (127)      354 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/timelord/types.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.907802 chia-blockchain-2.3.0rc2/chia/types/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1983 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/aliases.py
+-rw-r--r--   0 runner    (1001) docker     (127)      571 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/block_protocol.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.907802 chia-blockchain-2.3.0rc2/chia/types/blockchain_format/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/blockchain_format/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)      107 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/blockchain_format/classgroup.py
+-rw-r--r--   0 runner    (1001) docker     (127)      695 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/blockchain_format/coin.py
+-rw-r--r--   0 runner    (1001) docker     (127)      224 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/blockchain_format/foliage.py
+-rw-r--r--   0 runner    (1001) docker     (127)       84 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/blockchain_format/pool_target.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8253 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/blockchain_format/program.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4994 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/blockchain_format/proof_of_space.py
+-rw-r--r--   0 runner    (1001) docker     (127)      160 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/blockchain_format/reward_chain_block.py
+-rw-r--r--   0 runner    (1001) docker     (127)       88 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/blockchain_format/serialized_program.py
+-rw-r--r--   0 runner    (1001) docker     (127)      388 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/blockchain_format/sized_bytes.py
+-rw-r--r--   0 runner    (1001) docker     (127)      308 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/blockchain_format/slots.py
+-rw-r--r--   0 runner    (1001) docker     (127)       94 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/blockchain_format/sub_epoch_summary.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2006 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/blockchain_format/tree_hash.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2374 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/blockchain_format/vdf.py
+-rw-r--r--   0 runner    (1001) docker     (127)      332 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/clvm_cost.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1284 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/coin_record.py
+-rw-r--r--   0 runner    (1001) docker     (127)      186 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/coin_solution.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3947 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/coin_spend.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2213 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/condition_opcodes.py
+-rw-r--r--   0 runner    (1001) docker     (127)      413 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/condition_with_args.py
+-rw-r--r--   0 runner    (1001) docker     (127)    17888 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/eligible_coin_spends.py
+-rw-r--r--   0 runner    (1001) docker     (127)      100 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/end_of_slot_bundle.py
+-rw-r--r--   0 runner    (1001) docker     (127)      854 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/fee_rate.py
+-rw-r--r--   0 runner    (1001) docker     (127)       82 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/full_block.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1053 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/generator_types.py
+-rw-r--r--   0 runner    (1001) docker     (127)       86 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/header_block.py
+-rw-r--r--   0 runner    (1001) docker     (127)      607 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/internal_mempool_item.py
+-rw-r--r--   0 runner    (1001) docker     (127)      260 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/mempool_inclusion_status.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2626 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/mempool_item.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1055 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/mempool_submission_status.py
+-rw-r--r--   0 runner    (1001) docker     (127)      132 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/mojos.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1828 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/peer_info.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1403 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/signing_mode.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3367 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/spend_bundle.py
+-rw-r--r--   0 runner    (1001) docker     (127)      176 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/spend_bundle_conditions.py
+-rw-r--r--   0 runner    (1001) docker     (127)      963 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/transaction_queue_entry.py
+-rw-r--r--   0 runner    (1001) docker     (127)       94 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/unfinished_block.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1527 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/unfinished_header_block.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1499 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/types/weight_proof.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.919802 chia-blockchain-2.3.0rc2/chia/util/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3046 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/api_decorators.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7564 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/async_pool.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4572 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/bech32m.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4371 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/beta_metrics.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4253 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/block_cache.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2657 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/byte_types.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2970 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/cached_bls.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1408 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/check_fork_next_block.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4956 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/chia_logging.py
+-rw-r--r--   0 runner    (1001) docker     (127)      927 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/chia_version.py
+-rw-r--r--   0 runner    (1001) docker     (127)      323 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/collection.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7890 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/condition_tools.py
+-rw-r--r--   0 runner    (1001) docker     (127)    13109 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)      579 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/db_synchronous.py
+-rw-r--r--   0 runner    (1001) docker     (127)      936 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/db_version.py
+-rw-r--r--   0 runner    (1001) docker     (127)    16720 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/db_wrapper.py
+-rw-r--r--   0 runner    (1001) docker     (127)      389 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/default_root.py
+-rwxr-xr-x   0 runner    (1001) docker     (127)     3071 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/dump_keyring.py
+-rw-r--r--   0 runner    (1001) docker     (127)    13116 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/english.txt
+-rw-r--r--   0 runner    (1001) docker     (127)    10215 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/errors.py
+-rw-r--r--   0 runner    (1001) docker     (127)    17542 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/file_keyring.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3251 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/files.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12070 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/full_block_utils.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2490 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/generator_tools.py
+-rw-r--r--   0 runner    (1001) docker     (127)      842 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/hash.py
+-rw-r--r--   0 runner    (1001) docker     (127)    27734 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/initial-config.yaml
+-rw-r--r--   0 runner    (1001) docker     (127)      646 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/inline_executor.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1638 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/ints.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1102 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/json_util.py
+-rw-r--r--   0 runner    (1001) docker     (127)    23548 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/keychain.py
+-rw-r--r--   0 runner    (1001) docker     (127)    10842 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/keyring_wrapper.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1013 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/limited_semaphore.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1326 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/lock.py
+-rw-r--r--   0 runner    (1001) docker     (127)      750 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/log_exceptions.py
+-rw-r--r--   0 runner    (1001) docker     (127)      918 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/logging.py
+-rw-r--r--   0 runner    (1001) docker     (127)      770 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/lru_cache.py
+-rw-r--r--   0 runner    (1001) docker     (127)      463 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/math.py
+-rw-r--r--   0 runner    (1001) docker     (127)    10520 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/merkle_set.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14486 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/misc.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6854 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/network.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1593 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/paginator.py
+-rw-r--r--   0 runner    (1001) docker     (127)      702 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/path.py
+-rw-r--r--   0 runner    (1001) docker     (127)      493 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/permissions.py
+-rw-r--r--   0 runner    (1001) docker     (127)      884 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/pprint.py
+-rw-r--r--   0 runner    (1001) docker     (127)      712 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/prev_transaction_block.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2725 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/priority_mutex.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7243 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/profiler.py
+-rw-r--r--   0 runner    (1001) docker     (127)      927 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/recursive_replace.py
+-rw-r--r--   0 runner    (1001) docker     (127)      395 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/safe_cancel_task.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1541 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/service_groups.py
+-rw-r--r--   0 runner    (1001) docker     (127)      399 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/setproctitle.py
+-rw-r--r--   0 runner    (1001) docker     (127)      991 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/significant_bits.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8103 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/ssl_check.py
+-rw-r--r--   0 runner    (1001) docker     (127)    22187 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/streamable.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3857 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/struct_stream.py
+-rw-r--r--   0 runner    (1001) docker     (127)    10337 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/task_timing.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1422 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/timing.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1029 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/vdf_prover.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1771 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/util/ws_message.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.927802 chia-blockchain-2.3.0rc2/chia/wallet/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.927802 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)      847 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/cat_constants.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1471 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/cat_info.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5220 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/cat_outer_puzzle.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5952 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/cat_utils.py
+-rw-r--r--   0 runner    (1001) docker     (127)    40902 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/cat_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)      842 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/dao_cat_info.py
+-rw-r--r--   0 runner    (1001) docker     (127)    29112 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/dao_cat_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2795 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/lineage_store.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.931802 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1198 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/cat_truths.clib
+-rw-r--r--   0 runner    (1001) docker     (127)    15726 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/cat_v2.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     3345 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/cat_v2.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      576 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/delegated_tail.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      361 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/delegated_tail.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      299 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/everything_with_signature.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)       83 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/everything_with_signature.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      499 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/genesis_by_coin_id.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)       91 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/genesis_by_coin_id.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      884 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/genesis_by_coin_id_or_singleton.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      159 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/genesis_by_coin_id_or_singleton.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      553 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/genesis_by_puzzle_hash.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      115 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/genesis_by_puzzle_hash.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     2038 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/chialisp.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8594 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/coin_selection.py
+-rw-r--r--   0 runner    (1001) docker     (127)    44540 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/conditions.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.931802 chia-blockchain-2.3.0rc2/chia/wallet/dao_wallet/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:16.000000 chia-blockchain-2.3.0rc2/chia/wallet/dao_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1927 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/dao_wallet/dao_info.py
+-rw-r--r--   0 runner    (1001) docker     (127)    30216 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/dao_wallet/dao_utils.py
+-rw-r--r--   0 runner    (1001) docker     (127)    97647 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/dao_wallet/dao_wallet.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.931802 chia-blockchain-2.3.0rc2/chia/wallet/db_wallet/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/db_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4558 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/db_wallet/db_wallet_puzzles.py
+-rw-r--r--   0 runner    (1001) docker     (127)      606 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/derivation_record.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4836 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/derive_keys.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.931802 chia-blockchain-2.3.0rc2/chia/wallet/did_wallet/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/did_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1356 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/did_wallet/did_info.py
+-rw-r--r--   0 runner    (1001) docker     (127)    66192 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/did_wallet/did_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)     7225 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/did_wallet/did_wallet_puzzles.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.931802 chia-blockchain-2.3.0rc2/chia/wallet/did_wallet/puzzles/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/did_wallet/puzzles/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6558 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/did_wallet/puzzles/did_innerpuz.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     2025 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/did_wallet/puzzles/did_innerpuz.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      969 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/driver_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1906 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/key_val_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2184 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/lineage_proof.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.935802 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4469 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/metadata_outer_puzzle.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3190 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/nft_info.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12166 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/nft_puzzles.py
+-rw-r--r--   0 runner    (1001) docker     (127)    82708 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/nft_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4619 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/ownership_outer_puzzle.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.935802 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)      189 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/create_nft_launcher_from_did.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      131 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/create_nft_launcher_from_did.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      189 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_intermediate_launcher.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      131 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_intermediate_launcher.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      881 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_metadata_updater_default.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      483 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_metadata_updater_default.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     1005 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_metadata_updater_updateable.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      407 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_metadata_updater_updateable.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     3716 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_ownership_layer.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     2453 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_ownership_layer.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     2693 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_ownership_transfer_program_one_way_claim_with_royalties.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     1375 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_ownership_transfer_program_one_way_claim_with_royalties.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     2882 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_state_layer.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     1655 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_state_layer.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     4478 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/singleton_outer_puzzle.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3417 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/transfer_program_puzzle.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8278 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/uncurry_nft.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5099 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/notification_manager.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6532 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/notification_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4158 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/outer_puzzles.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1123 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/payment.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3630 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzle_drivers.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.951802 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)      126 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/augmented_condition.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)       27 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/augmented_condition.clsp.hex
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.951802 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/clawback/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/clawback/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8132 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/clawback/drivers.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1128 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/clawback/metadata.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2757 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/clawback/puzzle_decorator.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2236 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/condition_codes.clib
+-rw-r--r--   0 runner    (1001) docker     (127)     3869 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/curry-and-treehash.clib
+-rw-r--r--   0 runner    (1001) docker     (127)     5226 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/curry.clib
+-rw-r--r--   0 runner    (1001) docker     (127)      596 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/curry_by_index.clib
+-rw-r--r--   0 runner    (1001) docker     (127)      756 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_cat_eve.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      225 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_cat_eve.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     1003 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_cat_launcher.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     1059 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_cat_launcher.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     1096 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_finished_state.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     1543 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_finished_state.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)       65 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_finished_state.clsp.hex.sha256tree
+-rw-r--r--   0 runner    (1001) docker     (127)    10407 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_lockup.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     6281 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_lockup.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)       65 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_lockup.clsp.hex.sha256tree
+-rw-r--r--   0 runner    (1001) docker     (127)    14242 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_proposal.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     6541 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_proposal.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)       65 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_proposal.clsp.hex.sha256tree
+-rw-r--r--   0 runner    (1001) docker     (127)     2155 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_proposal_timer.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     1651 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_proposal_timer.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)       65 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_proposal_timer.clsp.hex.sha256tree
+-rw-r--r--   0 runner    (1001) docker     (127)     2722 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_proposal_validator.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     2341 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_proposal_validator.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)       65 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_proposal_validator.clsp.hex.sha256tree
+-rw-r--r--   0 runner    (1001) docker     (127)     8441 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_spend_p2_singleton_v2.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     5909 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_spend_p2_singleton_v2.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)       65 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_spend_p2_singleton_v2.clsp.hex.sha256tree
+-rw-r--r--   0 runner    (1001) docker     (127)     4063 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_treasury.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     2401 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_treasury.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     1225 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_update_proposal.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     1411 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_update_proposal.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     6219 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/deployed_puzzle_hashes.json
+-rw-r--r--   0 runner    (1001) docker     (127)      888 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/json.clib
+-rw-r--r--   0 runner    (1001) docker     (127)     5995 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/load_clvm.py
+-rw-r--r--   0 runner    (1001) docker     (127)      502 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/merkle_utils.clib
+-rw-r--r--   0 runner    (1001) docker     (127)      145 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/notification.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      119 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/notification.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      470 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_1_of_n.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      561 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_1_of_n.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)       54 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_conditions.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)       19 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_conditions.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      757 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_conditions.py
+-rw-r--r--   0 runner    (1001) docker     (127)      375 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_delegated_conditions.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      275 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_delegated_conditions.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      624 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_delegated_conditions.py
+-rw-r--r--   0 runner    (1001) docker     (127)      451 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_delegated_puzzle.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      287 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_delegated_puzzle.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     1166 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_delegated_puzzle.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3072 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      455 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     6982 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3119 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_m_of_n_delegate_direct.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      907 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_m_of_n_delegate_direct.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      645 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_m_of_n_delegate_direct.py
+-rw-r--r--   0 runner    (1001) docker     (127)      385 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_parent.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      485 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_parent.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      414 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_puzzle_hash.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      287 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_puzzle_hash.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      940 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_puzzle_hash.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1466 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_singleton.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      807 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_singleton.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     2732 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_singleton_aggregator.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     1149 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_singleton_aggregator.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     2389 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_singleton_or_delayed_puzhash.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      993 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_singleton_or_delayed_puzhash.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     1822 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_singleton_via_delegated_puzzle.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      949 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_singleton_via_delegated_puzzle.clsp.hex
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.951802 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/prefarm/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/prefarm/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2233 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/prefarm/make_prefarm_ph.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3813 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/prefarm/spend_prefarm.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1148 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/puzzle_utils.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1681 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/settlement_payments.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      587 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/settlement_payments.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      235 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/sha256tree.clib
+-rw-r--r--   0 runner    (1001) docker     (127)      462 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/singleton_launcher.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      351 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/singleton_launcher.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     7314 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/singleton_top_layer.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     2337 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/singleton_top_layer.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)    12581 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/singleton_top_layer.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4978 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/singleton_top_layer_v1_1.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     1935 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/singleton_top_layer_v1_1.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)    12591 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/singleton_top_layer_v1_1.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1372 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/singleton_truths.clib
+-rw-r--r--   0 runner    (1001) docker     (127)    12390 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/tails.py
+-rw-r--r--   0 runner    (1001) docker     (127)      850 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/puzzles/utility_macros.clib
+-rw-r--r--   0 runner    (1001) docker     (127)     3394 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/sign_coin_spends.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3764 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/singleton.py
+-rw-r--r--   0 runner    (1001) docker     (127)      816 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/singleton_record.py
+-rw-r--r--   0 runner    (1001) docker     (127)    48117 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/trade_manager.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2301 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/trade_record.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.951802 chia-blockchain-2.3.0rc2/chia/wallet/trading/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/trading/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)    33977 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/trading/offer.py
+-rw-r--r--   0 runner    (1001) docker     (127)      222 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/trading/trade_status.py
+-rw-r--r--   0 runner    (1001) docker     (127)    22392 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/trading/trade_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5490 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/transaction_record.py
+-rw-r--r--   0 runner    (1001) docker     (127)      415 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/transaction_sorting.py
+-rw-r--r--   0 runner    (1001) docker     (127)      316 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/uncurried_puzzle.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.955802 chia-blockchain-2.3.0rc2/chia/wallet/util/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2008 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/address_type.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2456 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/compute_hints.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2069 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/compute_memos.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2066 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/curry_and_treehash.py
+-rw-r--r--   0 runner    (1001) docker     (127)     9683 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/debug_spend_bundle.py
+-rw-r--r--   0 runner    (1001) docker     (127)      582 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/json_clvm_utils.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3673 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/merkle_tree.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3561 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/merkle_utils.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3484 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/new_peak_queue.py
+-rw-r--r--   0 runner    (1001) docker     (127)      447 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/notifications.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8581 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/peer_request_cache.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6675 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/puzzle_compression.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3856 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/puzzle_decorator.py
+-rw-r--r--   0 runner    (1001) docker     (127)      110 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/puzzle_decorator_type.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1681 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/query_filter.py
+-rw-r--r--   0 runner    (1001) docker     (127)      543 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/transaction_type.py
+-rw-r--r--   0 runner    (1001) docker     (127)     5777 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/tx_config.py
+-rw-r--r--   0 runner    (1001) docker     (127)    13440 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/wallet_sync_utils.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1283 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/util/wallet_types.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.955802 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)    25822 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/cr_cat_drivers.py
+-rw-r--r--   0 runner    (1001) docker     (127)    40874 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/cr_cat_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4913 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/cr_outer_puzzle.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.955802 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/cr_puzzles/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/cr_puzzles/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)       59 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/cr_puzzles/conditions_w_fee_announce.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)       43 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/cr_puzzles/conditions_w_fee_announce.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     9401 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/cr_puzzles/credential_restriction.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     3297 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/cr_puzzles/credential_restriction.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     1599 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/cr_puzzles/flag_proofs_checker.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      799 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/cr_puzzles/flag_proofs_checker.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)    33551 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_drivers.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.959802 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1117 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/covenant_layer.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      221 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/covenant_layer.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     2042 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/eml_covenant_morpher.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     1179 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/eml_covenant_morpher.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      954 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/eml_transfer_program_covenant_adapter.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      209 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/eml_transfer_program_covenant_adapter.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     2597 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/eml_update_metadata_with_DID.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     1105 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/eml_update_metadata_with_DID.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     5059 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/exigent_metadata_layer.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     1777 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/exigent_metadata_layer.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      560 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/p2_announced_delegated_puzzle.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      275 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/p2_announced_delegated_puzzle.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     2700 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/standard_vc_backdoor_puzzle.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     1305 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/standard_vc_backdoor_puzzle.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)      544 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/std_parent_morpher.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)      855 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/std_parent_morpher.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)     1939 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/viral_backdoor.clsp
+-rw-r--r--   0 runner    (1001) docker     (127)     1307 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/viral_backdoor.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (127)    10657 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)    30887 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)    21663 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/wallet.py
+-rw-r--r--   0 runner    (1001) docker     (127)    11445 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/wallet_blockchain.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3224 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/wallet_coin_record.py
+-rw-r--r--   0 runner    (1001) docker     (127)    16058 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/wallet_coin_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1095 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/wallet_info.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8190 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/wallet_interested_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12443 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/wallet_nft_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)    83073 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/wallet_node.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8736 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/wallet_node_api.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4623 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/wallet_pool_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3423 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/wallet_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14555 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/wallet_puzzle_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2495 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/wallet_retry_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)    11478 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/wallet_singleton_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)   128318 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/wallet_state_manager.py
+-rw-r--r--   0 runner    (1001) docker     (127)    20987 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/wallet_transaction_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4090 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/wallet_user_store.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4932 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/chia/wallet/wallet_weight_proof_handler.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.963802 chia-blockchain-2.3.0rc2/chia_blockchain.egg-info/
+-rw-r--r--   0 runner    (1001) docker     (127)     9256 2024-04-10 22:51:30.000000 chia-blockchain-2.3.0rc2/chia_blockchain.egg-info/PKG-INFO
+-rw-r--r--   0 runner    (1001) docker     (127)    42543 2024-04-10 22:51:30.000000 chia-blockchain-2.3.0rc2/chia_blockchain.egg-info/SOURCES.txt
+-rw-r--r--   0 runner    (1001) docker     (127)        1 2024-04-10 22:51:30.000000 chia-blockchain-2.3.0rc2/chia_blockchain.egg-info/dependency_links.txt
+-rw-r--r--   0 runner    (1001) docker     (127)      771 2024-04-10 22:51:30.000000 chia-blockchain-2.3.0rc2/chia_blockchain.egg-info/entry_points.txt
+-rw-r--r--   0 runner    (1001) docker     (127)        1 2024-04-10 22:50:34.000000 chia-blockchain-2.3.0rc2/chia_blockchain.egg-info/not-zip-safe
+-rw-r--r--   0 runner    (1001) docker     (127)     1099 2024-04-10 22:51:30.000000 chia-blockchain-2.3.0rc2/chia_blockchain.egg-info/requires.txt
+-rw-r--r--   0 runner    (1001) docker     (127)       30 2024-04-10 22:51:30.000000 chia-blockchain-2.3.0rc2/chia_blockchain.egg-info/top_level.txt
+-rwxr-xr-x   0 runner    (1001) docker     (127)     6697 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/install-gui.sh
+-rwxr-xr-x   0 runner    (1001) docker     (127)     6147 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/install-plotter.sh
+-rwxr-xr-x   0 runner    (1001) docker     (127)     5242 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/install-timelord.sh
+-rwxr-xr-x   0 runner    (1001) docker     (127)     6702 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/install.sh
+-rw-r--r--   0 runner    (1001) docker     (127)     2218 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/installhelper.py
+-rwxr-xr-x   0 runner    (1001) docker     (127)     3908 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/manage-mypy.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.963802 chia-blockchain-2.3.0rc2/mozilla-ca/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:23.000000 chia-blockchain-2.3.0rc2/mozilla-ca/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)   229654 2024-04-10 22:50:23.000000 chia-blockchain-2.3.0rc2/mozilla-ca/cacert.pem
+-rw-r--r--   0 runner    (1001) docker     (127)     3609 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/mypy-exclusions.txt
+-rw-r--r--   0 runner    (1001) docker     (127)      873 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/mypy.ini.template
+-rw-r--r--   0 runner    (1001) docker     (127)    18019 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/pylintrc
+-rw-r--r--   0 runner    (1001) docker     (127)      433 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/pyproject.toml
+-rw-r--r--   0 runner    (1001) docker     (127)     2072 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/pytest.ini
+-rw-r--r--   0 runner    (1001) docker     (127)       38 2024-04-10 22:51:30.967802 chia-blockchain-2.3.0rc2/setup.cfg
+-rw-r--r--   0 runner    (1001) docker     (127)     5314 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/setup.py
+-rwxr-xr-x   0 runner    (1001) docker     (127)     1303 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/start-gui.sh
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-10 22:51:30.963802 chia-blockchain-2.3.0rc2/tools/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/tools/__init__.py
+-rwxr-xr-x   0 runner    (1001) docker     (127)     5748 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/tools/analyze-chain.py
+-rw-r--r--   0 runner    (1001) docker     (127)     6892 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/tools/analyze_memory_profile.py
+-rw-r--r--   0 runner    (1001) docker     (127)    12172 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/tools/chialispp.py
+-rw-r--r--   0 runner    (1001) docker     (127)     3575 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/tools/cpu_utilization.py
+-rw-r--r--   0 runner    (1001) docker     (127)     8745 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/tools/generate_chain.py
+-rw-r--r--   0 runner    (1001) docker     (127)    13961 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/tools/manage_clvm.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1024 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/tools/plot-log.gnuplot
+-rwxr-xr-x   0 runner    (1001) docker     (127)     1171 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/tools/run_benchmark.sh
+-rw-r--r--   0 runner    (1001) docker     (127)     3113 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/tools/run_block.py
+-rwxr-xr-x   0 runner    (1001) docker     (127)     5841 2024-04-10 22:50:17.000000 chia-blockchain-2.3.0rc2/tools/test_full_sync.py
```

### Comparing `chia-blockchain-2.3.0rc1/.github/ISSUE_TEMPLATE/bug_report.yaml` & `chia-blockchain-2.3.0rc2/.github/ISSUE_TEMPLATE/bug_report.yaml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/PULL_REQUEST_TEMPLATE.md` & `chia-blockchain-2.3.0rc2/.github/PULL_REQUEST_TEMPLATE.md`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/actions/install/action.yml` & `chia-blockchain-2.3.0rc2/.github/actions/install/action.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/dependabot.yml` & `chia-blockchain-2.3.0rc2/.github/dependabot.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/benchmarks.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/benchmarks.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/build-linux-installer-deb.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/build-linux-installer-deb.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/build-linux-installer-rpm.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/build-linux-installer-rpm.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/build-macos-installers.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/build-macos-installers.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/build-windows-installer.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/build-windows-installer.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/check-commit-signing.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/check-commit-signing.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/check_wheel_availability.yaml` & `chia-blockchain-2.3.0rc2/.github/workflows/check_wheel_availability.yaml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/codeql-analysis.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/codeql-analysis.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/conflict-check.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/conflict-check.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/dependency-review.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/dependency-review.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/mozilla-ca-cert.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/mozilla-ca-cert.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/pre-commit.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/pre-commit.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/require-labels.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/require-labels.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/stale-issue.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/stale-issue.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/start-release.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/start-release.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/start-sync-test.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/start-sync-test.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/super-linter.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/super-linter.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/test-install-scripts.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/test-install-scripts.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/test-single.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/test-single.yml`

 * *Files 1% similar despite different names*

```diff
@@ -28,14 +28,18 @@
         type: string
       matrix_mode:
         required: true
         type: string
       runs-on:
         required: true
         type: string
+      collect-junit:
+        required: false
+        type: boolean
+        default: true
 
 concurrency:
   # SHA is added to the end if on `main` to let all main workflows run
   group: ${{ github.ref }}-${{ github.workflow }}-${{ inputs.concurrency_name }}-${{ github.event_name }}-${{ (github.ref == 'refs/heads/main' || startsWith(github.ref, 'refs/heads/release/') || startsWith(github.ref, 'refs/heads/long_lived/')) && github.sha || '' }}
   cancel-in-progress: true
 
 defaults:
@@ -225,14 +229,15 @@
           pytest --cov=chia --cov-config=.coveragerc --cov-report= -o 'junit_suite_name=${{ env.JOB_FILE_NAME }}' --junitxml='junit-data/junit.${{ env.JOB_FILE_NAME }}.xml' --durations=10 ${{ matrix.configuration.pytest_parallel_args[matrix.os.matrix] }} -m "not benchmark" ${{ env.ENABLE_PYTEST_MONITOR }} ${{ matrix.configuration.test_files }}
 
       - name: Move back to chia/ for coverage
         run: |
           mv notchia/ chia/
 
       - name: Publish JUnit results
+        if: inputs.collect-junit
         uses: actions/upload-artifact@v4
         with:
           name: junit-data-${{ env.JOB_FILE_NAME }}
           path: junit-data/*
           if-no-files-found: error
 
       - name: Process coverage data
```

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/test.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/test.yml`

 * *Files 2% similar despite different names*

```diff
@@ -57,38 +57,41 @@
       matrix: macos
       name: macOS
       file_name: macos
       concurrency_name: macos
       configuration: ${{ needs.configure.outputs.configuration }}
       matrix_mode: ${{ needs.configure.outputs.matrix_mode }}
       runs-on: macos-latest
+      collect-junit: false
   ubuntu:
     uses: ./.github/workflows/test-single.yml
     needs: configure
     with:
       emoji: 
       matrix: ubuntu
       name: Ubuntu
       file_name: ubuntu
       concurrency_name: ubuntu
       configuration: ${{ needs.configure.outputs.configuration }}
       matrix_mode: ${{ needs.configure.outputs.matrix_mode }}
       runs-on: ubuntu-latest
+      collect-junit: false
   windows:
     uses: ./.github/workflows/test-single.yml
     needs: configure
     with:
       emoji: 
       matrix: windows
       name: Windows
       file_name: windows
       concurrency_name: windows
       configuration: ${{ needs.configure.outputs.configuration }}
       matrix_mode: ${{ needs.configure.outputs.matrix_mode }}
       runs-on: windows-latest
+      collect-junit: false
 
   coverage:
     name: ${{ matrix.os.emoji }} Coverage - ${{ matrix.python.name }}
     runs-on: ${{ matrix.os.runs-on }}
     needs:
       - macos
       - ubuntu
@@ -115,31 +118,34 @@
 
       - name: Set Env
         uses: Chia-Network/actions/setjobenv@main
         env:
           GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
 
       - name: Download Results
+        if: false
         uses: actions/download-artifact@v4
         with:
           merge-multiple: true
           pattern: junit-data-*
           path: junit-data
 
       - name: Format JUnit data and prepare results
+        if: false
         run: |
           sudo snap install yq
           ls junit-data/*.xml | xargs --max-procs=10 --replace={} yq eval '.testsuites.testsuite.testcase |= sort_by(.+@classname, .+@name)' --inplace {}
 
           sudo apt-get install junitparser
           mkdir junit-results
           junitparser merge junit-data/*.xml junit-results/junit.xml
           ls junit-results/*.xml | xargs --max-procs=10 --replace={} yq eval '.testsuites.testsuite |= sort_by(.+@name) | .testsuites.testsuite[].testcase |= sort_by(.+@classname, .+@name)' --inplace {}
 
       - name: Publish formatted JUnit data
+        if: false
         uses: actions/upload-artifact@v4
         with:
           name: junit-data
           path: junit-data/*
           if-no-files-found: error
 
       - name: Download Coverage
@@ -158,21 +164,21 @@
         with:
           python-version: ${{ matrix.python.action }}
           development: true
 
       - uses: chia-network/actions/activate-venv@main
 
       - name: Add time out assert results to workflow summary
-        if: always()
+        if: always() && false
         run: |
           python -m chia._tests.process_junit --limit 50 --type time_out_assert --xml junit-results/junit.xml --markdown --link-prefix ${{ github.event.repository.html_url }}/blob/${{ github.sha }}/ --link-line-separator \#L >> "$GITHUB_STEP_SUMMARY"
           python -m chia._tests.process_junit            --type time_out_assert --xml junit-results/junit.xml --markdown --link-prefix ${{ github.event.repository.html_url }}/blob/${{ github.sha }}/ --link-line-separator \#L >> junit-results/time_out_assert.md
 
       - name: Publish JUnit results
-        if: always()
+        if: always() && false
         uses: actions/upload-artifact@v4
         with:
           name: junit-results
           path: junit-results/*
           if-no-files-found: error
 
       - name: Coverage Processing
```

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/trigger-docker-dev.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/trigger-docker-dev.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/trigger-docker-main.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/trigger-docker-main.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.github/workflows/upload-pypi-source.yml` & `chia-blockchain-2.3.0rc2/.github/workflows/upload-pypi-source.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.gitignore` & `chia-blockchain-2.3.0rc2/.gitignore`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.markdown-lint.yml` & `chia-blockchain-2.3.0rc2/.markdown-lint.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/.pre-commit-config.yaml` & `chia-blockchain-2.3.0rc2/.pre-commit-config.yaml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/BUILD_TIMELORD.md` & `chia-blockchain-2.3.0rc2/BUILD_TIMELORD.md`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/CHANGELOG.md` & `chia-blockchain-2.3.0rc2/CHANGELOG.md`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/CODE_OF_CONDUCT.md` & `chia-blockchain-2.3.0rc2/CODE_OF_CONDUCT.md`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/CONTRIBUTING.md` & `chia-blockchain-2.3.0rc2/CONTRIBUTING.md`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/Install-gui.ps1` & `chia-blockchain-2.3.0rc2/Install-gui.ps1`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/Install-plotter.ps1` & `chia-blockchain-2.3.0rc2/Install-plotter.ps1`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/Install.ps1` & `chia-blockchain-2.3.0rc2/Install.ps1`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/LEGACY-SUPPORT-POLICY.md` & `chia-blockchain-2.3.0rc2/LEGACY-SUPPORT-POLICY.md`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/LICENSE` & `chia-blockchain-2.3.0rc2/LICENSE`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/PKG-INFO` & `chia-blockchain-2.3.0rc2/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: chia-blockchain
-Version: 2.3.0rc1
+Version: 2.3.0rc2
 Summary: Chia blockchain full node, farmer, timelord, and wallet.
 Home-page: https://chia.net/
 Author: Mariano Sorgente
 Author-email: mariano@chia.net
 License: Apache License
 Project-URL: Source, https://github.com/Chia-Network/chia-blockchain/
 Project-URL: Changelog, https://github.com/Chia-Network/chia-blockchain/blob/main/CHANGELOG.md
```

### Comparing `chia-blockchain-2.3.0rc1/PRETTY_GOOD_PRACTICES.md` & `chia-blockchain-2.3.0rc2/PRETTY_GOOD_PRACTICES.md`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/README.md` & `chia-blockchain-2.3.0rc2/README.md`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/SECURITY.md` & `chia-blockchain-2.3.0rc2/SECURITY.md`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/activated.py` & `chia-blockchain-2.3.0rc2/activated.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/benchmarks/block_ref.py` & `chia-blockchain-2.3.0rc2/benchmarks/block_ref.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/benchmarks/block_store.py` & `chia-blockchain-2.3.0rc2/benchmarks/block_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/benchmarks/blockchains.py` & `chia-blockchain-2.3.0rc2/benchmarks/blockchains.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/benchmarks/coin_store.py` & `chia-blockchain-2.3.0rc2/benchmarks/coin_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/benchmarks/jsonify.py` & `chia-blockchain-2.3.0rc2/benchmarks/jsonify.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/benchmarks/mempool-long-lived.py` & `chia-blockchain-2.3.0rc2/benchmarks/mempool-long-lived.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/benchmarks/mempool.py` & `chia-blockchain-2.3.0rc2/benchmarks/mempool.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/benchmarks/streamable.py` & `chia-blockchain-2.3.0rc2/benchmarks/streamable.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/benchmarks/transaction_height_delta` & `chia-blockchain-2.3.0rc2/benchmarks/transaction_height_delta`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/benchmarks/utils.py` & `chia-blockchain-2.3.0rc2/benchmarks/utils.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/assets/dmg/background.tiff` & `chia-blockchain-2.3.0rc2/build_scripts/assets/dmg/background.tiff`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/build_license_directory.sh` & `chia-blockchain-2.3.0rc2/build_scripts/build_license_directory.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/build_linux_deb-1-gui.sh` & `chia-blockchain-2.3.0rc2/build_scripts/build_linux_deb-1-gui.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/build_linux_deb-2-installer.sh` & `chia-blockchain-2.3.0rc2/build_scripts/build_linux_deb-2-installer.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/build_linux_rpm-1-gui.sh` & `chia-blockchain-2.3.0rc2/build_scripts/build_linux_rpm-1-gui.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/build_linux_rpm-2-installer.sh` & `chia-blockchain-2.3.0rc2/build_scripts/build_linux_rpm-2-installer.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/build_macos-1-gui.sh` & `chia-blockchain-2.3.0rc2/build_scripts/build_macos-1-gui.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/build_macos-2-installer.sh` & `chia-blockchain-2.3.0rc2/build_scripts/build_macos-2-installer.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/build_win_license_dir.sh` & `chia-blockchain-2.3.0rc2/build_scripts/build_win_license_dir.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/build_windows-1-gui.ps1` & `chia-blockchain-2.3.0rc2/build_scripts/build_windows-1-gui.ps1`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/build_windows-2-installer.ps1` & `chia-blockchain-2.3.0rc2/build_scripts/build_windows-2-installer.ps1`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/check_dependency_artifacts.py` & `chia-blockchain-2.3.0rc2/build_scripts/check_dependency_artifacts.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/clean-runner.sh` & `chia-blockchain-2.3.0rc2/build_scripts/clean-runner.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/electron-builder.json` & `chia-blockchain-2.3.0rc2/build_scripts/electron-builder.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/installer-version.py` & `chia-blockchain-2.3.0rc2/build_scripts/installer-version.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/npm_linux/package-lock.json` & `chia-blockchain-2.3.0rc2/build_scripts/npm_linux/package-lock.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/npm_macos/package-lock.json` & `chia-blockchain-2.3.0rc2/build_scripts/npm_macos/package-lock.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/npm_windows/package-lock.json` & `chia-blockchain-2.3.0rc2/build_scripts/npm_windows/package-lock.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/build_scripts/pyinstaller.spec` & `chia-blockchain-2.3.0rc2/build_scripts/pyinstaller.spec`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/README.md` & `chia-blockchain-2.3.0rc2/chia/_tests/README.md`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/blockchain/blockchain_test_utils.py` & `chia-blockchain-2.3.0rc2/chia/_tests/blockchain/blockchain_test_utils.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/blockchain/test_blockchain.py` & `chia-blockchain-2.3.0rc2/chia/_tests/blockchain/test_blockchain.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/blockchain/test_blockchain_transactions.py` & `chia-blockchain-2.3.0rc2/chia/_tests/blockchain/test_blockchain_transactions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/blockchain/test_lookup_fork_chain.py` & `chia-blockchain-2.3.0rc2/chia/_tests/blockchain/test_lookup_fork_chain.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/build-init-files.py` & `chia-blockchain-2.3.0rc2/chia/_tests/build-init-files.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/build-job-matrix.py` & `chia-blockchain-2.3.0rc2/chia/_tests/build-job-matrix.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/check_pytest_monitor_output.py` & `chia-blockchain-2.3.0rc2/chia/_tests/check_pytest_monitor_output.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/check_sql_statements.py` & `chia-blockchain-2.3.0rc2/chia/_tests/check_sql_statements.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/chia-start-sim` & `chia-blockchain-2.3.0rc2/chia/_tests/chia-start-sim`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/clvm/benchmark_costs.py` & `chia-blockchain-2.3.0rc2/chia/_tests/clvm/benchmark_costs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/clvm/coin_store.py` & `chia-blockchain-2.3.0rc2/chia/_tests/clvm/coin_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_chialisp_deserialization.py` & `chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_chialisp_deserialization.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_clvm_step.py` & `chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_clvm_step.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_curry_and_treehash.py` & `chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_curry_and_treehash.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_program.py` & `chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_program.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_puzzle_compression.py` & `chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_puzzle_compression.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_puzzle_drivers.py` & `chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_puzzle_drivers.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_puzzles.py` & `chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_puzzles.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_singletons.py` & `chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_singletons.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/clvm/test_spend_sim.py` & `chia-blockchain-2.3.0rc2/chia/_tests/clvm/test_spend_sim.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/cmd_test_utils.py` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/cmd_test_utils.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/conftest.py` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/conftest.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/test_cmds_util.py` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/test_cmds_util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/test_farm_cmd.py` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/test_farm_cmd.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/test_show.py` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/test_show.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/test_sim.py` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/test_sim.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/test_timelock_args.py` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/test_timelock_args.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/test_tx_config_args.py` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/test_tx_config_args.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/testing_classes.py` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/testing_classes.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_coins.py` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_coins.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_consts.py` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_consts.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_dao.py` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_dao.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_did.py` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_did.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_nft.py` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_nft.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_notifications.py` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_notifications.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_offer.toffer` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_offer.toffer`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_vcs.py` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_vcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_wallet.py` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/cmds/wallet/test_wallet_check.py` & `chia-blockchain-2.3.0rc2/chia/_tests/cmds/wallet/test_wallet_check.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/conftest.py` & `chia-blockchain-2.3.0rc2/chia/_tests/conftest.py`

 * *Files 0% similar despite different names*

```diff
@@ -262,15 +262,15 @@
 
 
 @pytest.fixture(scope="function", params=[2])
 def db_version(request) -> int:
     return request.param
 
 
-SOFTFORK_HEIGHTS = [1000000, 5496000, 5496100]
+SOFTFORK_HEIGHTS = [1000000, 5496000, 5496100, 5650000]
 
 
 @pytest.fixture(scope="function", params=SOFTFORK_HEIGHTS)
 def softfork_height(request) -> int:
     return request.param
```

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/connection_utils.py` & `chia-blockchain-2.3.0rc2/chia/_tests/connection_utils.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/cmds/test_beta.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/cmds/test_beta.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/cmds/test_keys.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/cmds/test_keys.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/cmds/test_wallet.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/cmds/test_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/consensus/test_block_creation.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/consensus/test_block_creation.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/consensus/test_pot_iterations.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/consensus/test_pot_iterations.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/custom_types/test_coin.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/custom_types/test_coin.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/custom_types/test_proof_of_space.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/custom_types/test_proof_of_space.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/custom_types/test_spend_bundle.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/custom_types/test_spend_bundle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/daemon/test_daemon.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/daemon/test_daemon.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/daemon/test_daemon_register.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/daemon/test_daemon_register.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/daemon/test_keychain_proxy.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/daemon/test_keychain_proxy.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/conftest.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/conftest.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/test_data_cli.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/test_data_cli.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/test_data_layer.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/test_data_layer.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/test_data_layer_util.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/test_data_layer_util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/test_data_rpc.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/test_data_rpc.py`

 * *Files 1% similar despite different names*

```diff
@@ -3,18 +3,20 @@
 import asyncio
 import contextlib
 import copy
 import enum
 import json
 import os
 import random
+import sqlite3
 import sys
 import time
 from copy import deepcopy
 from dataclasses import dataclass
+from enum import IntEnum
 from pathlib import Path
 from typing import Any, AsyncIterator, Dict, List, Optional, Tuple, cast
 
 import anyio
 import pytest
 
 from chia._tests.util.setup_nodes import SimulatorsAndWalletsServices
@@ -39,14 +41,15 @@
     ProofLayer,
     Status,
     StoreProofs,
     key_hash,
     leaf_hash,
 )
 from chia.data_layer.data_layer_wallet import DataLayerWallet, verify_offer
+from chia.data_layer.data_store import DataStore
 from chia.data_layer.download_data import get_delta_filename, get_full_tree_filename
 from chia.rpc.data_layer_rpc_api import DataLayerRpcApi
 from chia.rpc.data_layer_rpc_client import DataLayerRpcClient
 from chia.rpc.wallet_rpc_api import WalletRpcApi
 from chia.server.start_data_layer import create_data_layer_service
 from chia.simulator.block_tools import BlockTools
 from chia.simulator.full_node_simulator import FullNodeSimulator
@@ -3427,7 +3430,97 @@
         assert len(keys_values["keys_values"]) == len(to_insert)
         kv_dict = {item["key"]: item["value"] for item in keys_values["keys_values"]}
         for key, value in to_insert:
             assert kv_dict["0x" + key.hex()] == "0x" + value.hex()
 
         with pytest.raises(Exception, match="Latest root is already confirmed"):
             res = await data_rpc_api.submit_pending_root({"id": store_id.hex()})
+
+
+@pytest.mark.limit_consensus_modes(reason="does not depend on consensus rules")
+@pytest.mark.anyio
+async def test_unsubmitted_batch_db_migration(
+    self_hostname: str,
+    one_wallet_and_one_simulator_services: SimulatorsAndWalletsServices,
+    tmp_path: Path,
+    bt: BlockTools,
+    monkeypatch: Any,
+) -> None:
+    with monkeypatch.context() as m:
+
+        class OldStatus(IntEnum):
+            PENDING = 1
+            COMMITTED = 2
+            PENDING_BATCH = 3
+
+        class ModifiedStatus(IntEnum):
+            PENDING = 1
+            COMMITTED = 2
+
+        m.setattr("chia.data_layer.data_layer_util.Status", ModifiedStatus)
+        m.setattr("chia.data_layer.data_store.Status", ModifiedStatus)
+        m.setattr("chia.data_layer.data_layer.Status", ModifiedStatus)
+
+        wallet_rpc_api, full_node_api, wallet_rpc_port, ph, bt = await init_wallet_and_node(
+            self_hostname, one_wallet_and_one_simulator_services
+        )
+
+        async with init_data_layer_service(
+            wallet_rpc_port=wallet_rpc_port, bt=bt, db_path=tmp_path
+        ) as data_layer_service:
+            assert data_layer_service.rpc_server is not None
+            data_layer = data_layer_service._api.data_layer
+            data_rpc_api = DataLayerRpcApi(data_layer)
+            res = await data_rpc_api.create_data_store({})
+            assert res is not None
+
+            store_id = bytes32(hexstr_to_bytes(res["id"]))
+            await farm_block_check_singleton(data_layer, full_node_api, ph, store_id, wallet=wallet_rpc_api.service)
+
+            m.setattr("chia.data_layer.data_layer_util.Status", OldStatus)
+            m.setattr("chia.data_layer.data_store.Status", OldStatus)
+            m.setattr("chia.data_layer.data_layer.Status", OldStatus)
+
+            key = b"0000"
+            value = b"0000"
+            changelist: List[Dict[str, str]] = [{"action": "insert", "key": key.hex(), "value": value.hex()}]
+            res = await data_rpc_api.batch_update({"id": store_id.hex(), "changelist": changelist})
+            update_tx_rec0 = res["tx_id"]
+            await farm_block_with_spend(full_node_api, ph, update_tx_rec0, wallet_rpc_api)
+            keys = await data_rpc_api.get_keys({"id": store_id.hex()})
+            assert keys == {"keys": ["0x30303030"]}
+
+            key = b"0001"
+            value = b"0001"
+            changelist = [{"action": "insert", "key": key.hex(), "value": value.hex()}]
+            with pytest.raises(sqlite3.IntegrityError, match="CHECK constraint failed: status == 1 OR status == 2"):
+                await data_rpc_api.batch_update(
+                    {"id": store_id.hex(), "changelist": changelist, "submit_on_chain": False}
+                )
+
+    async with init_data_layer_service(wallet_rpc_port=wallet_rpc_port, bt=bt, db_path=tmp_path) as data_layer_service:
+        assert data_layer_service.rpc_server is not None
+        data_layer = data_layer_service._api.data_layer
+        data_rpc_api = DataLayerRpcApi(data_layer)
+        # Test we don't migrate twice.
+        with pytest.raises(sqlite3.IntegrityError, match="CHECK constraint failed: status == 1 OR status == 2"):
+            await data_rpc_api.batch_update({"id": store_id.hex(), "changelist": changelist, "submit_on_chain": False})
+
+    # Artificially remove the first migration.
+    async with DataStore.managed(database=tmp_path.joinpath("db.sqlite")) as data_store:
+        async with data_store.db_wrapper.writer() as writer:
+            await writer.execute("DELETE FROM schema")
+
+    async with init_data_layer_service(wallet_rpc_port=wallet_rpc_port, bt=bt, db_path=tmp_path) as data_layer_service:
+        assert data_layer_service.rpc_server is not None
+        data_layer = data_layer_service._api.data_layer
+        data_rpc_api = DataLayerRpcApi(data_layer)
+        res = await data_rpc_api.batch_update(
+            {"id": store_id.hex(), "changelist": changelist, "submit_on_chain": False}
+        )
+        assert res == {}
+
+        res = await data_rpc_api.submit_pending_root({"id": store_id.hex()})
+        update_tx_rec1 = res["tx_id"]
+        await farm_block_with_spend(full_node_api, ph, update_tx_rec1, wallet_rpc_api)
+        keys = await data_rpc_api.get_keys({"id": store_id.hex()})
+        assert keys == {"keys": ["0x30303031", "0x30303030"]}
```

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/test_data_store.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/test_data_store.py`

 * *Files 1% similar despite different names*

```diff
@@ -1912,7 +1912,20 @@
     key = b"foo"
     value = b"bar"
     await data_store.insert(
         key=key, value=value, tree_id=tree_id, reference_node_hash=None, side=None, status=Status.COMMITTED
     )
     with pytest.raises(Exception, match=f"Key already present: {key.hex()}"):
         await data_store.insert(key=key, value=value, tree_id=tree_id, reference_node_hash=None, side=None)
+
+
+@pytest.mark.anyio
+async def test_migration_unknown_version(data_store: DataStore) -> None:
+    async with data_store.db_wrapper.writer() as writer:
+        await writer.execute(
+            "INSERT INTO schema(version_id) VALUES(:version_id)",
+            {
+                "version_id": "unknown version",
+            },
+        )
+    with pytest.raises(Exception, match="Unknown version"):
+        await data_store.migrate_db()
```

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/test_data_store_schema.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/test_data_store_schema.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/data_layer/util.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/data_layer/util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/farmer/test_farmer_api.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/farmer/test_farmer_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/full_sync/test_full_sync.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/full_sync/test_full_sync.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/ram_db.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/ram_db.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/stores/test_block_store.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/stores/test_block_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/stores/test_coin_store.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/stores/test_coin_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/stores/test_full_node_store.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/stores/test_full_node_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/stores/test_hint_store.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/stores/test_hint_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/stores/test_sync_store.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/stores/test_sync_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_address_manager.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_address_manager.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_block_height_map.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_block_height_map.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_conditions.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_conditions.py`

 * *Files 13% similar despite different names*

```diff
@@ -428,7 +428,38 @@
         conditions = Program.to(
             assemble(
                 f"(({ConditionOpcode.SEND_MESSAGE[0]} 0x24 'test' 0x{coin.parent_coin_info})"
                 f"({ConditionOpcode.RECEIVE_MESSAGE[0]} 0x24 'test' 0x{coin.parent_coin_info}))"
             )
         )
         await check_conditions(bt, conditions)
+
+    @pytest.mark.anyio
+    @pytest.mark.parametrize(
+        "conds, expected",
+        [
+            ('(66 0x3f "foobar" {coin}) (67 0x3f "foobar" {coin})', None),
+            ('(66 0x3f "foobar" {coin}) (67 0x3f "foo" {coin})', Err.MESSAGE_NOT_SENT_OR_RECEIVED),
+            ('(66 0x39 "foo" {coin})', Err.COIN_AMOUNT_EXCEEDS_MAXIMUM),
+            ('(67 0x0f "foo" {coin})', Err.COIN_AMOUNT_EXCEEDS_MAXIMUM),
+            ('(66 0x3f "foo" {coin}) (67 0x27 "foo" {coin})', Err.MESSAGE_NOT_SENT_OR_RECEIVED),
+            ('(66 0x27 "foo" {coin}) (67 0x3f "foo" {coin})', Err.MESSAGE_NOT_SENT_OR_RECEIVED),
+            ('(66 0 "foo") (67 0 "foo")', None),
+            ('(66 0 "foobar") (67 0 "foo")', Err.MESSAGE_NOT_SENT_OR_RECEIVED),
+            ('(66 0x09 "foo" 1750000000000) (67 0x09 "foo" 1750000000000)', None),
+            ('(66 -1 "foo")', Err.INVALID_MESSAGE_MODE),
+            ('(67 -1 "foo")', Err.INVALID_MESSAGE_MODE),
+            ('(66 0x40 "foo")', Err.INVALID_MESSAGE_MODE),
+            ('(67 0x40 "foo")', Err.INVALID_MESSAGE_MODE),
+        ],
+    )
+    async def test_message_conditions(
+        self, bt: BlockTools, consensus_mode: ConsensusMode, conds: str, expected: Optional[Err]
+    ) -> None:
+        blocks = await initial_blocks(bt)
+        coin = blocks[-2].get_included_reward_coins()[0]
+        conditions = Program.to(assemble("(" + conds.format(coin="0x" + coin.name().hex()) + ")"))
+        # before the softfork has activated, it's all allowed
+        if consensus_mode.value < ConsensusMode.SOFT_FORK_4.value:
+            expected = None
+
+        await check_conditions(bt, conditions, expected_err=expected)
```

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_full_node.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_full_node.py`

 * *Files 0% similar despite different names*

```diff
@@ -957,15 +957,17 @@
         assert not_included_tx == 10
         assert seen_bigger_transaction_has_high_fee
 
         # Mempool is full
         new_transaction = fnp.NewTransaction(bytes32.random(seeded_random), uint64(10000000), uint64(1))
         await full_node_1.new_transaction(new_transaction, fake_peer)
         assert full_node_1.full_node.mempool_manager.mempool.at_full_capacity(10000000 * group_size)
-        assert full_node_2.full_node.mempool_manager.mempool.at_full_capacity(10000000 * group_size)
+        await time_out_assert(
+            30, full_node_2.full_node.mempool_manager.mempool.at_full_capacity, True, 10000000 * group_size
+        )
 
         await time_out_assert(10, new_transaction_not_requested, True, incoming_queue, new_transaction)
 
         # Idempotence in resubmission
         status, err = await full_node_1.full_node.add_transaction(
             successful_bundle, successful_bundle.name(), peer, test=True
         )
```

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_generator_tools.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_generator_tools.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_hint_management.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_hint_management.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_node_load.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_node_load.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_performance.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_performance.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_subscriptions.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_subscriptions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_transactions.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_transactions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/full_node/test_tx_processing_queue.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/full_node/test_tx_processing_queue.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/large_block.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/large_block.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/make_block_generator.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/make_block_generator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/mempool/test_mempool.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/mempool/test_mempool.py`

 * *Files 0% similar despite different names*

```diff
@@ -2366,14 +2366,36 @@
         # the SOFTFORK condition is only activated with the hard fork, so
         # before then there are no errors
         elif softfork_height < test_constants.HARD_FORK_HEIGHT:
             expect_error = None
 
         assert npc_result.error == expect_error
 
+    @pytest.mark.parametrize("mempool", [True, False])
+    @pytest.mark.parametrize(
+        "condition, expect_error",
+        [
+            ('(66 0 "foo") (67 0 "bar")', Err.MESSAGE_NOT_SENT_OR_RECEIVED.value),
+            ('(66 0 "foo") (67 0 "foo")', None),
+        ],
+    )
+    def test_message_condition(
+        self, mempool: bool, condition: str, expect_error: Optional[int], softfork_height: uint32
+    ):
+        npc_result = generator_condition_tester(condition, mempool_mode=mempool, height=softfork_height)
+        print(npc_result)
+
+        # the message conditions are only activated with soft fork 4, so
+        # before then there are no errors.
+        # In mempool mode, the message conditions activated immediately.
+        if softfork_height < test_constants.SOFT_FORK4_HEIGHT and not mempool:
+            expect_error = None
+
+        assert npc_result.error == expect_error
+
 
 # the tests below are malicious generator programs
 
 # this program:
 # (mod (A B)
 #  (defun large_string (V N)
 #    (if N (large_string (concat V V) (- N 1)) V)
```

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/mempool/test_mempool_fee_estimator.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/mempool/test_mempool_fee_estimator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/mempool/test_mempool_fee_protocol.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/mempool/test_mempool_fee_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/mempool/test_mempool_manager.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/mempool/test_mempool_manager.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/mempool/test_mempool_performance.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/mempool/test_mempool_performance.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/mempool/test_singleton_fast_forward.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/mempool/test_singleton_fast_forward.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/node_height.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/node_height.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/server/flood.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/server/flood.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/server/serve.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/server/serve.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/server/test_capabilities.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/server/test_capabilities.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/server/test_dos.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/server/test_dos.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/server/test_event_loop.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/server/test_event_loop.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/server/test_loop.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/server/test_loop.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/server/test_node_discovery.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/server/test_node_discovery.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/server/test_rate_limits.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/server/test_rate_limits.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/server/test_server.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/server/test_server.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/services/test_services.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/services/test_services.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/ssl/test_ssl.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/ssl/test_ssl.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/test_coins.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/test_coins.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/test_cost_calculation.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/test_cost_calculation.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/test_crawler.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/test_crawler.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/test_crawler_rpc.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/test_crawler_rpc.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/test_daemon_rpc.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/test_daemon_rpc.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/test_db_conversion.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/test_db_conversion.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/test_db_validation.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/test_db_validation.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/test_farmer_harvester_rpc.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/test_farmer_harvester_rpc.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/test_filter.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/test_filter.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/test_full_node_rpc.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/test_full_node_rpc.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/test_merkle_set.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/test_merkle_set.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/test_program.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/test_program.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/test_rpc_util.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/test_rpc_util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/test_seeder.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/test_seeder.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_cached_bls.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_cached_bls.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_config.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_config.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_file_keyring_synchronization.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_file_keyring_synchronization.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_files.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_files.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_jsonify.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_jsonify.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_keychain.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_keychain.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_keyring_wrapper.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_keyring_wrapper.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_lockfile.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_lockfile.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_log_exceptions.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_log_exceptions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_lru_cache.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_lru_cache.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_significant_bits.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_significant_bits.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/core/util/test_streamable.py` & `chia-blockchain-2.3.0rc2/chia/_tests/core/util/test_streamable.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/db/test_db_wrapper.py` & `chia-blockchain-2.3.0rc2/chia/_tests/db/test_db_wrapper.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/environments/common.py` & `chia-blockchain-2.3.0rc2/chia/_tests/environments/common.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/environments/full_node.py` & `chia-blockchain-2.3.0rc2/chia/_tests/environments/full_node.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/environments/wallet.py` & `chia-blockchain-2.3.0rc2/chia/_tests/environments/wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/ether.py` & `chia-blockchain-2.3.0rc2/chia/_tests/ether.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/farmer_harvester/test_farmer.py` & `chia-blockchain-2.3.0rc2/chia/_tests/farmer_harvester/test_farmer.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/farmer_harvester/test_farmer_harvester.py` & `chia-blockchain-2.3.0rc2/chia/_tests/farmer_harvester/test_farmer_harvester.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/farmer_harvester/test_filter_prefix_bits.py` & `chia-blockchain-2.3.0rc2/chia/_tests/farmer_harvester/test_filter_prefix_bits.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/farmer_harvester/test_third_party_harvesters.py` & `chia-blockchain-2.3.0rc2/chia/_tests/farmer_harvester/test_third_party_harvesters.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/farmer_harvester/test_third_party_harvesters_data.json` & `chia-blockchain-2.3.0rc2/chia/_tests/farmer_harvester/test_third_party_harvesters_data.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/fee_estimation/test_fee_estimation_integration.py` & `chia-blockchain-2.3.0rc2/chia/_tests/fee_estimation/test_fee_estimation_integration.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/fee_estimation/test_fee_estimation_rpc.py` & `chia-blockchain-2.3.0rc2/chia/_tests/fee_estimation/test_fee_estimation_rpc.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/fee_estimation/test_fee_estimation_unit_tests.py` & `chia-blockchain-2.3.0rc2/chia/_tests/fee_estimation/test_fee_estimation_unit_tests.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/fee_estimation/test_mempoolitem_height_added.py` & `chia-blockchain-2.3.0rc2/chia/_tests/fee_estimation/test_mempoolitem_height_added.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/generator/puzzles/test_multiple_generator_input_arguments.clsp` & `chia-blockchain-2.3.0rc2/chia/_tests/generator/puzzles/test_multiple_generator_input_arguments.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/generator/test_compression.py` & `chia-blockchain-2.3.0rc2/chia/_tests/generator/test_compression.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/generator/test_generator_types.py` & `chia-blockchain-2.3.0rc2/chia/_tests/generator/test_generator_types.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/generator/test_rom.py` & `chia-blockchain-2.3.0rc2/chia/_tests/generator/test_rom.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/generator/test_scan.py` & `chia-blockchain-2.3.0rc2/chia/_tests/generator/test_scan.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/plot_sync/test_delta.py` & `chia-blockchain-2.3.0rc2/chia/_tests/plot_sync/test_delta.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/plot_sync/test_plot_sync.py` & `chia-blockchain-2.3.0rc2/chia/_tests/plot_sync/test_plot_sync.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/plot_sync/test_receiver.py` & `chia-blockchain-2.3.0rc2/chia/_tests/plot_sync/test_receiver.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/plot_sync/test_sender.py` & `chia-blockchain-2.3.0rc2/chia/_tests/plot_sync/test_sender.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/plot_sync/test_sync_simulated.py` & `chia-blockchain-2.3.0rc2/chia/_tests/plot_sync/test_sync_simulated.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/plot_sync/util.py` & `chia-blockchain-2.3.0rc2/chia/_tests/plot_sync/util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/plotting/test_plot_manager.py` & `chia-blockchain-2.3.0rc2/chia/_tests/plotting/test_plot_manager.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/pools/test_pool_cmdline.py` & `chia-blockchain-2.3.0rc2/chia/_tests/pools/test_pool_cmdline.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/pools/test_pool_config.py` & `chia-blockchain-2.3.0rc2/chia/_tests/pools/test_pool_config.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/pools/test_pool_puzzles_lifecycle.py` & `chia-blockchain-2.3.0rc2/chia/_tests/pools/test_pool_puzzles_lifecycle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/pools/test_pool_rpc.py` & `chia-blockchain-2.3.0rc2/chia/_tests/pools/test_pool_rpc.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/pools/test_pool_wallet.py` & `chia-blockchain-2.3.0rc2/chia/_tests/pools/test_pool_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/pools/test_wallet_pool_store.py` & `chia-blockchain-2.3.0rc2/chia/_tests/pools/test_wallet_pool_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/process_junit.py` & `chia-blockchain-2.3.0rc2/chia/_tests/process_junit.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/rpc/test_rpc_client.py` & `chia-blockchain-2.3.0rc2/chia/_tests/rpc/test_rpc_client.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/simulation/test_simulation.py` & `chia-blockchain-2.3.0rc2/chia/_tests/simulation/test_simulation.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/simulation/test_simulator.py` & `chia-blockchain-2.3.0rc2/chia/_tests/simulation/test_simulator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/simulation/test_start_simulator.py` & `chia-blockchain-2.3.0rc2/chia/_tests/simulation/test_start_simulator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/timelord/test_new_peak.py` & `chia-blockchain-2.3.0rc2/chia/_tests/timelord/test_new_peak.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/tools/1315537.json` & `chia-blockchain-2.3.0rc2/chia/_tests/tools/1315537.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/tools/1315544.json` & `chia-blockchain-2.3.0rc2/chia/_tests/tools/1315544.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/tools/1315630.json` & `chia-blockchain-2.3.0rc2/chia/_tests/tools/1315630.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/tools/300000.json` & `chia-blockchain-2.3.0rc2/chia/_tests/tools/300000.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/tools/442734.json` & `chia-blockchain-2.3.0rc2/chia/_tests/tools/442734.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/tools/466212.json` & `chia-blockchain-2.3.0rc2/chia/_tests/tools/466212.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/tools/test-blockchain-db.sqlite` & `chia-blockchain-2.3.0rc2/chia/_tests/tools/test-blockchain-db.sqlite`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/tools/test_full_sync.py` & `chia-blockchain-2.3.0rc2/chia/_tests/tools/test_full_sync.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/tools/test_legacy_keyring.py` & `chia-blockchain-2.3.0rc2/chia/_tests/tools/test_legacy_keyring.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/tools/test_run_block.py` & `chia-blockchain-2.3.0rc2/chia/_tests/tools/test_run_block.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/benchmark_cost.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/benchmark_cost.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/benchmarks.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/benchmarks.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/bip39_test_vectors.json` & `chia-blockchain-2.3.0rc2/chia/_tests/util/bip39_test_vectors.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/blockchain.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/blockchain.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/build_network_protocol_files.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/build_network_protocol_files.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/clvm_generator.bin` & `chia-blockchain-2.3.0rc2/chia/_tests/util/clvm_generator.bin`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/constants.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/constants.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/db_connection.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/db_connection.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/full_sync.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/full_sync.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/gen_ssl_certs.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/gen_ssl_certs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/generator_tools_testing.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/generator_tools_testing.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/key_tool.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/key_tool.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/misc.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/misc.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/network_protocol_data.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/network_protocol_data.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/protocol_messages_bytes-v1.0` & `chia-blockchain-2.3.0rc2/chia/_tests/util/protocol_messages_bytes-v1.0`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/protocol_messages_json.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/protocol_messages_json.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/rpc.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/rpc.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/run_block.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/run_block.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/setup_nodes.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/setup_nodes.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_async_pool.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_async_pool.py`

 * *Files 6% similar despite different names*

```diff
@@ -89,15 +89,15 @@
     assert instrumented_workers.peak == count
 
 
 @pytest.mark.anyio
 async def test_worker_id_counts() -> None:
     expected_results = [0, 1, 2, 3, 4, 5]
 
-    result_queue = asyncio.Queue[int]()
+    result_queue: asyncio.Queue[int] = asyncio.Queue()
 
     async def worker(
         worker_id: int,
         result_queue: asyncio.Queue[int] = result_queue,
         hang_on_worker_id: int = expected_results[-1],
     ) -> None:
         await result_queue.put(worker_id)
@@ -124,16 +124,16 @@
     expected_name = "test pool"
     expected_message = "this is the exception message"
 
     class CustomException(Exception):
         def __init__(self) -> None:
             super().__init__(expected_message)
 
-    work_queue = asyncio.Queue[Optional[Exception]]()
-    result_queue = asyncio.Queue[None]()
+    work_queue: asyncio.Queue[Optional[Exception]] = asyncio.Queue()
+    result_queue: asyncio.Queue[None] = asyncio.Queue()
 
     async def worker(
         worker_id: int,
         work_queue: asyncio.Queue[Optional[Exception]] = work_queue,
         result_queue: asyncio.Queue[None] = result_queue,
     ) -> None:
         work = await work_queue.get()
@@ -171,16 +171,16 @@
 
 
 @pytest.mark.anyio
 async def test_simple_queue_example() -> None:
     inputs = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
     expected_results = [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]
 
-    work_queue = asyncio.Queue[int]()
-    result_queue = asyncio.Queue[int]()
+    work_queue: asyncio.Queue[int] = asyncio.Queue()
+    result_queue: asyncio.Queue[int] = asyncio.Queue()
 
     async def worker(
         worker_id: int,
         work_queue: asyncio.Queue[int] = work_queue,
         result_queue: asyncio.Queue[int] = result_queue,
     ) -> None:
         x = await work_queue.get()
@@ -204,16 +204,16 @@
 
 
 @pytest.mark.anyio
 async def test_simple_queue_example_using_queued() -> None:
     inputs = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
     expected_results = [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]
 
-    work_queue = asyncio.Queue[Job[int]]()
-    result_queue = asyncio.Queue[int]()
+    work_queue: asyncio.Queue[Job[int]] = asyncio.Queue()
+    result_queue: asyncio.Queue[int] = asyncio.Queue()
 
     async def worker(
         worker_id: int,
         job: Job[int],
     ) -> int:
         return job.input**2
 
@@ -239,16 +239,16 @@
 
 @pytest.mark.anyio
 async def test_queued_pre_cancel() -> None:
     cancel = {4, 7}
     inputs = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
     expected_results = [1, 4, 9, 25, 36, 64, 81, 100]
 
-    work_queue = asyncio.Queue[Job[int]]()
-    result_queue = asyncio.Queue[int]()
+    work_queue: asyncio.Queue[Job[int]] = asyncio.Queue()
+    result_queue: asyncio.Queue[int] = asyncio.Queue()
 
     async def worker(
         worker_id: int,
         job: Job[int],
     ) -> int:
         return job.input**2
 
@@ -277,16 +277,16 @@
 
 @pytest.mark.anyio
 async def test_queued_active_cancel() -> None:
     cancel = {4, 7}
     inputs = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
     expected_results = [1, 4, 9, 25, 36, 64, 81, 100]
 
-    work_queue = asyncio.Queue[Job[int]]()
-    result_queue = asyncio.Queue[int]()
+    work_queue: asyncio.Queue[Job[int]] = asyncio.Queue()
+    result_queue: asyncio.Queue[int] = asyncio.Queue()
 
     async def worker(
         worker_id: int,
         job: Job[int],
     ) -> int:
         if job.input in cancel:
             forever = asyncio.Event()
@@ -319,16 +319,16 @@
 
 @pytest.mark.anyio
 async def test_queued_raises() -> None:
     raises = {4, 7}
     inputs = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
     expected_results = [1, 4, 9, 25, 36, 64, 81, 100]
 
-    work_queue = asyncio.Queue[Job[int]]()
-    result_queue = asyncio.Queue[int]()
+    work_queue: asyncio.Queue[Job[int]] = asyncio.Queue()
+    result_queue: asyncio.Queue[int] = asyncio.Queue()
 
     async def worker(
         worker_id: int,
         job: Job[int],
     ) -> int:
         if job.input in raises:
             raise Exception(job.input)
```

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_build_job_matrix.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_build_job_matrix.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_chia_version.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_chia_version.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_condition_tools.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_condition_tools.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_config.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_config.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_dump_keyring.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_dump_keyring.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_full_block_utils.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_full_block_utils.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_installed.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_installed.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_limited_semaphore.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_limited_semaphore.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_logging_filter.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_logging_filter.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_misc.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_misc.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_network.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_network.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_network_protocol_files.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_network_protocol_files.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_network_protocol_json.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_network_protocol_json.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_network_protocol_test.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_network_protocol_test.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_paginator.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_paginator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_pprint.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_pprint.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_priority_mutex.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_priority_mutex.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_recursive_replace.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_recursive_replace.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_ssl_check.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_ssl_check.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_struct_stream.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_struct_stream.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_testnet_overrides.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_testnet_overrides.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_tests_misc.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_tests_misc.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_timing.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_timing.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/test_trusted_peer.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/test_trusted_peer.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/util/time_out_assert.py` & `chia-blockchain-2.3.0rc2/chia/_tests/util/time_out_assert.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/cat_wallet/test_cat_lifecycle.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/cat_wallet/test_cat_lifecycle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/cat_wallet/test_cat_outer_puzzle.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/cat_wallet/test_cat_outer_puzzle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/cat_wallet/test_cat_wallet.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/cat_wallet/test_cat_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/cat_wallet/test_offer_lifecycle.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/cat_wallet/test_offer_lifecycle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/cat_wallet/test_trades.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/cat_wallet/test_trades.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/clawback/test_clawback_decorator.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/clawback/test_clawback_decorator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/clawback/test_clawback_lifecycle.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/clawback/test_clawback_lifecycle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/clawback/test_clawback_metadata.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/clawback/test_clawback_metadata.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/conftest.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/conftest.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/dao_wallet/test_dao_clvm.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/dao_wallet/test_dao_clvm.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/dao_wallet/test_dao_wallets.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/dao_wallet/test_dao_wallets.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/db_wallet/test_db_graftroot.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/db_wallet/test_db_graftroot.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/db_wallet/test_dl_offers.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/db_wallet/test_dl_offers.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/db_wallet/test_dl_wallet.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/db_wallet/test_dl_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/did_wallet/test_did.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/did_wallet/test_did.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/nft_wallet/test_nft_1_offers.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/nft_wallet/test_nft_1_offers.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/nft_wallet/test_nft_bulk_mint.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/nft_wallet/test_nft_bulk_mint.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/nft_wallet/test_nft_lifecycle.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/nft_wallet/test_nft_lifecycle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/nft_wallet/test_nft_offers.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/nft_wallet/test_nft_offers.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/nft_wallet/test_nft_puzzles.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/nft_wallet/test_nft_puzzles.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/nft_wallet/test_nft_wallet.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/nft_wallet/test_nft_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/nft_wallet/test_ownership_outer_puzzle.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/nft_wallet/test_ownership_outer_puzzle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/rpc/test_dl_wallet_rpc.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/rpc/test_dl_wallet_rpc.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/rpc/test_wallet_rpc.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/rpc/test_wallet_rpc.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/simple_sync/test_simple_sync_protocol.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/simple_sync/test_simple_sync_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/sync/test_wallet_sync.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/sync/test_wallet_sync.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_address_type.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_address_type.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_bech32m.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_bech32m.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_chialisp.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_chialisp.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_coin_selection.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_coin_selection.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_conditions.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_conditions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_debug_spend_bundle.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_debug_spend_bundle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_new_wallet_protocol.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_new_wallet_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_nft_store.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_nft_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_notifications.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_notifications.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_offer_parsing_performance.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_offer_parsing_performance.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_puzzle_store.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_puzzle_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_sign_coin_spends.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_sign_coin_spends.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_singleton.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_singleton.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_singleton_lifecycle_fast.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_singleton_lifecycle_fast.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_singleton_store.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_singleton_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_taproot.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_taproot.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_transaction_store.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_transaction_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_util.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_blockchain.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_blockchain.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_coin_store.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_coin_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_interested_store.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_interested_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_key_val_store.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_key_val_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_node.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_node.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_retry.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_retry.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_state_manager.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_state_manager.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_test_framework.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_test_framework.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_trade_store.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_trade_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_user_store.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_user_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/test_wallet_utils.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/test_wallet_utils.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/vc_wallet/test_cr_outer_puzzle.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/vc_wallet/test_cr_outer_puzzle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/vc_wallet/test_vc_lifecycle.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/vc_wallet/test_vc_lifecycle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/vc_wallet/test_vc_wallet.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/vc_wallet/test_vc_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/wallet/wallet_block_tools.py` & `chia-blockchain-2.3.0rc2/chia/_tests/wallet/wallet_block_tools.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/_tests/weight_proof/test_weight_proof.py` & `chia-blockchain-2.3.0rc2/chia/_tests/weight_proof/test_weight_proof.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/clvm/spend_sim.py` & `chia-blockchain-2.3.0rc2/chia/clvm/spend_sim.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/beta.py` & `chia-blockchain-2.3.0rc2/chia/cmds/beta.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/beta_funcs.py` & `chia-blockchain-2.3.0rc2/chia/cmds/beta_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/check_wallet_db.py` & `chia-blockchain-2.3.0rc2/chia/cmds/check_wallet_db.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/chia.py` & `chia-blockchain-2.3.0rc2/chia/cmds/chia.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/cmds_util.py` & `chia-blockchain-2.3.0rc2/chia/cmds/cmds_util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/coin_funcs.py` & `chia-blockchain-2.3.0rc2/chia/cmds/coin_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/coins.py` & `chia-blockchain-2.3.0rc2/chia/cmds/coins.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/completion.py` & `chia-blockchain-2.3.0rc2/chia/cmds/completion.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/configure.py` & `chia-blockchain-2.3.0rc2/chia/cmds/configure.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/dao.py` & `chia-blockchain-2.3.0rc2/chia/cmds/dao.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/dao_funcs.py` & `chia-blockchain-2.3.0rc2/chia/cmds/dao_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/data.py` & `chia-blockchain-2.3.0rc2/chia/cmds/data.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/data_funcs.py` & `chia-blockchain-2.3.0rc2/chia/cmds/data_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/db.py` & `chia-blockchain-2.3.0rc2/chia/cmds/db.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/db_backup_func.py` & `chia-blockchain-2.3.0rc2/chia/cmds/db_backup_func.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/db_upgrade_func.py` & `chia-blockchain-2.3.0rc2/chia/cmds/db_upgrade_func.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/db_validate_func.py` & `chia-blockchain-2.3.0rc2/chia/cmds/db_validate_func.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/farm.py` & `chia-blockchain-2.3.0rc2/chia/cmds/farm.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/farm_funcs.py` & `chia-blockchain-2.3.0rc2/chia/cmds/farm_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/init.py` & `chia-blockchain-2.3.0rc2/chia/cmds/init.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/init_funcs.py` & `chia-blockchain-2.3.0rc2/chia/cmds/init_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/installers.py` & `chia-blockchain-2.3.0rc2/chia/cmds/installers.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/keys.py` & `chia-blockchain-2.3.0rc2/chia/cmds/keys.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/keys_funcs.py` & `chia-blockchain-2.3.0rc2/chia/cmds/keys_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/netspace.py` & `chia-blockchain-2.3.0rc2/chia/cmds/netspace.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/netspace_funcs.py` & `chia-blockchain-2.3.0rc2/chia/cmds/netspace_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/passphrase.py` & `chia-blockchain-2.3.0rc2/chia/cmds/passphrase.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/passphrase_funcs.py` & `chia-blockchain-2.3.0rc2/chia/cmds/passphrase_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/peer.py` & `chia-blockchain-2.3.0rc2/chia/cmds/peer.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/peer_funcs.py` & `chia-blockchain-2.3.0rc2/chia/cmds/peer_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/plotnft.py` & `chia-blockchain-2.3.0rc2/chia/cmds/plotnft.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/plotnft_funcs.py` & `chia-blockchain-2.3.0rc2/chia/cmds/plotnft_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/plots.py` & `chia-blockchain-2.3.0rc2/chia/cmds/plots.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/rpc.py` & `chia-blockchain-2.3.0rc2/chia/cmds/rpc.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/show.py` & `chia-blockchain-2.3.0rc2/chia/cmds/show.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/show_funcs.py` & `chia-blockchain-2.3.0rc2/chia/cmds/show_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/sim.py` & `chia-blockchain-2.3.0rc2/chia/cmds/sim.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/sim_funcs.py` & `chia-blockchain-2.3.0rc2/chia/cmds/sim_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/start.py` & `chia-blockchain-2.3.0rc2/chia/cmds/start.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/start_funcs.py` & `chia-blockchain-2.3.0rc2/chia/cmds/start_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/stop.py` & `chia-blockchain-2.3.0rc2/chia/cmds/stop.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/wallet.py` & `chia-blockchain-2.3.0rc2/chia/cmds/wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/cmds/wallet_funcs.py` & `chia-blockchain-2.3.0rc2/chia/cmds/wallet_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/block_body_validation.py` & `chia-blockchain-2.3.0rc2/chia/consensus/block_body_validation.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/block_creation.py` & `chia-blockchain-2.3.0rc2/chia/consensus/block_creation.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/block_header_validation.py` & `chia-blockchain-2.3.0rc2/chia/consensus/block_header_validation.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/block_record.py` & `chia-blockchain-2.3.0rc2/chia/consensus/block_record.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/block_rewards.py` & `chia-blockchain-2.3.0rc2/chia/consensus/block_rewards.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/block_root_validation.py` & `chia-blockchain-2.3.0rc2/chia/consensus/block_root_validation.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/blockchain.py` & `chia-blockchain-2.3.0rc2/chia/consensus/blockchain.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/blockchain_interface.py` & `chia-blockchain-2.3.0rc2/chia/consensus/blockchain_interface.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/coinbase.py` & `chia-blockchain-2.3.0rc2/chia/consensus/coinbase.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/constants.py` & `chia-blockchain-2.3.0rc2/chia/consensus/constants.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/default_constants.py` & `chia-blockchain-2.3.0rc2/chia/consensus/default_constants.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/deficit.py` & `chia-blockchain-2.3.0rc2/chia/consensus/deficit.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/difficulty_adjustment.py` & `chia-blockchain-2.3.0rc2/chia/consensus/difficulty_adjustment.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/find_fork_point.py` & `chia-blockchain-2.3.0rc2/chia/consensus/find_fork_point.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/full_block_to_block_record.py` & `chia-blockchain-2.3.0rc2/chia/consensus/full_block_to_block_record.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/get_block_challenge.py` & `chia-blockchain-2.3.0rc2/chia/consensus/get_block_challenge.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/make_sub_epoch_summary.py` & `chia-blockchain-2.3.0rc2/chia/consensus/make_sub_epoch_summary.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/multiprocess_validation.py` & `chia-blockchain-2.3.0rc2/chia/consensus/multiprocess_validation.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/pos_quality.py` & `chia-blockchain-2.3.0rc2/chia/consensus/pos_quality.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/pot_iterations.py` & `chia-blockchain-2.3.0rc2/chia/consensus/pot_iterations.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/puzzles/chialisp_deserialisation.clsp` & `chia-blockchain-2.3.0rc2/chia/consensus/puzzles/chialisp_deserialisation.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/puzzles/chialisp_deserialisation.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/consensus/puzzles/chialisp_deserialisation.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/puzzles/rom_bootstrap_generator.clsp` & `chia-blockchain-2.3.0rc2/chia/consensus/puzzles/rom_bootstrap_generator.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/puzzles/rom_bootstrap_generator.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/consensus/puzzles/rom_bootstrap_generator.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/consensus/vdf_info_computation.py` & `chia-blockchain-2.3.0rc2/chia/consensus/vdf_info_computation.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/daemon/client.py` & `chia-blockchain-2.3.0rc2/chia/daemon/client.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/daemon/keychain_proxy.py` & `chia-blockchain-2.3.0rc2/chia/daemon/keychain_proxy.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/daemon/keychain_server.py` & `chia-blockchain-2.3.0rc2/chia/daemon/keychain_server.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/daemon/server.py` & `chia-blockchain-2.3.0rc2/chia/daemon/server.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/daemon/windows_signal.py` & `chia-blockchain-2.3.0rc2/chia/daemon/windows_signal.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/data_layer/data_layer.py` & `chia-blockchain-2.3.0rc2/chia/data_layer/data_layer.py`

 * *Files 0% similar despite different names*

```diff
@@ -196,14 +196,15 @@
         if self.config.get("log_sqlite_cmds", False):
             sql_log_path = path_from_root(self.root_path, "log/data_sql.log")
             self.log.info(f"logging SQL commands to {sql_log_path}")
 
         async with DataStore.managed(database=self.db_path, sql_log_path=sql_log_path) as self._data_store:
             self._wallet_rpc = await self.wallet_rpc_init
 
+            await self._data_store.migrate_db()
             self.periodically_manage_data_task = asyncio.create_task(self.periodically_manage_data())
             try:
                 yield
             finally:
                 # TODO: review for anything else we need to do here
                 self._shut_down = True
                 if self._wallet_rpc is not None:
@@ -813,15 +814,15 @@
                         subscription = await self.subscribe(local_id, [])
                         subscriptions.insert(0, subscription)
                     except Exception as e:
                         self.log.info(
                             f"Can't subscribe to locally stored {local_id}: {type(e)} {e} {traceback.format_exc()}"
                         )
 
-            work_queue = asyncio.Queue[Job[Subscription]]()
+            work_queue: asyncio.Queue[Job[Subscription]] = asyncio.Queue()
             async with QueuedAsyncPool.managed(
                 name="DataLayer subscription update pool",
                 worker_async_callable=self.update_subscription,
                 job_queue=work_queue,
                 target_worker_count=self.subscription_update_concurrency,
                 log=self.log,
             ):
```

### Comparing `chia-blockchain-2.3.0rc1/chia/data_layer/data_layer_api.py` & `chia-blockchain-2.3.0rc2/chia/data_layer/data_layer_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/data_layer/data_layer_errors.py` & `chia-blockchain-2.3.0rc2/chia/data_layer/data_layer_errors.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/data_layer/data_layer_server.py` & `chia-blockchain-2.3.0rc2/chia/data_layer/data_layer_server.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/data_layer/data_layer_util.py` & `chia-blockchain-2.3.0rc2/chia/data_layer/data_layer_util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/data_layer/data_layer_wallet.py` & `chia-blockchain-2.3.0rc2/chia/data_layer/data_layer_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/data_layer/data_store.py` & `chia-blockchain-2.3.0rc2/chia/data_layer/data_store.py`

 * *Files 2% similar despite different names*

```diff
@@ -153,14 +153,22 @@
                         from_wallet tinyint CHECK(from_wallet == 0 OR from_wallet == 1),
                         PRIMARY KEY(tree_id, url)
                     )
                     """
                 )
                 await writer.execute(
                     """
+                    CREATE TABLE IF NOT EXISTS schema(
+                        version_id TEXT PRIMARY KEY,
+                        applied_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
+                    )
+                    """
+                )
+                await writer.execute(
+                    """
                     CREATE INDEX IF NOT EXISTS node_hash ON root(node_hash)
                     """
                 )
                 await writer.execute(
                     """
                     CREATE INDEX IF NOT EXISTS node_key_index ON node(key)
                     """
@@ -169,14 +177,48 @@
             yield self
 
     @asynccontextmanager
     async def transaction(self) -> AsyncIterator[None]:
         async with self.db_wrapper.writer():
             yield
 
+    async def migrate_db(self) -> None:
+        async with self.db_wrapper.reader() as reader:
+            cursor = await reader.execute("SELECT * FROM schema")
+            row = await cursor.fetchone()
+            if row is not None:
+                version = row["version_id"]
+                if version != "v1.0":
+                    raise Exception("Unknown version")
+                log.info(f"Found DB schema version {version}. No migration needed.")
+                return
+
+        version = "v1.0"
+        log.info(f"Initiating migration to version {version}")
+        async with self.db_wrapper.writer(foreign_key_enforcement_enabled=False) as writer:
+            await writer.execute(
+                f"""
+                CREATE TABLE IF NOT EXISTS new_root(
+                    tree_id BLOB NOT NULL CHECK(length(tree_id) == 32),
+                    generation INTEGER NOT NULL CHECK(generation >= 0),
+                    node_hash BLOB,
+                    status INTEGER NOT NULL CHECK(
+                        {" OR ".join(f"status == {status}" for status in Status)}
+                    ),
+                    PRIMARY KEY(tree_id, generation),
+                    FOREIGN KEY(node_hash) REFERENCES node(hash)
+                )
+                """
+            )
+            await writer.execute("INSERT INTO new_root SELECT * FROM root")
+            await writer.execute("DROP TABLE root")
+            await writer.execute("ALTER TABLE new_root RENAME TO root")
+            await writer.execute("INSERT INTO schema (version_id) VALUES (?)", (version,))
+        log.info(f"Finished migrating DB to version {version}")
+
     async def _insert_root(
         self,
         tree_id: bytes32,
         node_hash: Optional[bytes32],
         status: Status,
         generation: Optional[int] = None,
     ) -> Root:
```

### Comparing `chia-blockchain-2.3.0rc1/chia/data_layer/dl_wallet_store.py` & `chia-blockchain-2.3.0rc2/chia/data_layer/dl_wallet_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/data_layer/download_data.py` & `chia-blockchain-2.3.0rc2/chia/data_layer/download_data.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/data_layer/puzzles/graftroot_dl_offers.clsp` & `chia-blockchain-2.3.0rc2/chia/data_layer/puzzles/graftroot_dl_offers.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/data_layer/puzzles/graftroot_dl_offers.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/data_layer/puzzles/graftroot_dl_offers.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/data_layer/s3_plugin_config.yml` & `chia-blockchain-2.3.0rc2/chia/data_layer/s3_plugin_config.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/data_layer/s3_plugin_service.py` & `chia-blockchain-2.3.0rc2/chia/data_layer/s3_plugin_service.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/data_layer/util/benchmark.py` & `chia-blockchain-2.3.0rc2/chia/data_layer/util/benchmark.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/farmer/farmer.py` & `chia-blockchain-2.3.0rc2/chia/farmer/farmer.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/farmer/farmer_api.py` & `chia-blockchain-2.3.0rc2/chia/farmer/farmer_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/bitcoin_fee_estimator.py` & `chia-blockchain-2.3.0rc2/chia/full_node/bitcoin_fee_estimator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/block_height_map.py` & `chia-blockchain-2.3.0rc2/chia/full_node/block_height_map.py`

 * *Files 1% similar despite different names*

```diff
@@ -242,24 +242,30 @@
     def contains_height(self, height: uint32) -> bool:
         return height * 32 < len(self.__height_to_hash)
 
     def rollback(self, fork_height: int) -> None:
         # fork height may be -1, in which case all blocks are different and we
         # should clear all sub epoch summaries
         heights_to_delete = []
-        log.log(
-            logging.WARNING if fork_height < 100 else logging.INFO,
-            f"rolling back height-to-hash and sub-epoch-summaries cache to {fork_height}",
-        )
+
         for ses_included_height in self.__sub_epoch_summaries.keys():
             if ses_included_height > fork_height:
                 heights_to_delete.append(ses_included_height)
+
         for height in heights_to_delete:
             del self.__sub_epoch_summaries[height]
+
         del self.__height_to_hash[(fork_height + 1) * 32 :]
         self.__first_dirty = min(self.__first_dirty, fork_height + 1)
 
+        if len(heights_to_delete) > 0:
+            log.log(
+                logging.WARNING if fork_height < 100 else logging.INFO,
+                f"rolling back {len(heights_to_delete)} blocks in "
+                f"height-to-hash and sub-epoch-summaries cache, to height {fork_height}",
+            )
+
     def get_ses(self, height: uint32) -> SubEpochSummary:
         return SubEpochSummary.from_bytes(self.__sub_epoch_summaries[height])
 
     def get_ses_heights(self) -> List[uint32]:
         return sorted(self.__sub_epoch_summaries.keys())
```

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/block_store.py` & `chia-blockchain-2.3.0rc2/chia/full_node/block_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/bundle_tools.py` & `chia-blockchain-2.3.0rc2/chia/full_node/bundle_tools.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/coin_store.py` & `chia-blockchain-2.3.0rc2/chia/full_node/coin_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/fee_estimate.py` & `chia-blockchain-2.3.0rc2/chia/full_node/fee_estimate.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/fee_estimate_store.py` & `chia-blockchain-2.3.0rc2/chia/full_node/fee_estimate_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/fee_estimation.py` & `chia-blockchain-2.3.0rc2/chia/full_node/fee_estimation.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/fee_estimator.py` & `chia-blockchain-2.3.0rc2/chia/full_node/fee_estimator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/fee_estimator_constants.py` & `chia-blockchain-2.3.0rc2/chia/full_node/fee_estimator_constants.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/fee_estimator_example.py` & `chia-blockchain-2.3.0rc2/chia/full_node/fee_estimator_example.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/fee_estimator_interface.py` & `chia-blockchain-2.3.0rc2/chia/full_node/fee_estimator_interface.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/fee_history.py` & `chia-blockchain-2.3.0rc2/chia/full_node/fee_history.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/fee_tracker.py` & `chia-blockchain-2.3.0rc2/chia/full_node/fee_tracker.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/full_node.py` & `chia-blockchain-2.3.0rc2/chia/full_node/full_node.py`

 * *Files 0% similar despite different names*

```diff
@@ -1536,7152 +1536,7153 @@
 00005ff0: 7276 6572 2c0a 2020 2020 2020 2020 2020  rver,.          
 00006000: 2020 2020 2020 7365 6c66 2e63 6f6e 6669        self.confi
 00006010: 675b 2274 6172 6765 745f 6f75 7462 6f75  g["target_outbou
 00006020: 6e64 5f70 6565 725f 636f 756e 7422 5d2c  nd_peer_count"],
 00006030: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00006040: 2073 656c 662e 726f 6f74 5f70 6174 6820   self.root_path 
 00006050: 2f20 5061 7468 2873 656c 662e 636f 6e66  / Path(self.conf
-00006060: 6967 5b22 7065 6572 735f 6669 6c65 5f70  ig["peers_file_p
-00006070: 6174 6822 5d29 2c0a 2020 2020 2020 2020  ath"]),.        
-00006080: 2020 2020 2020 2020 7365 6c66 2e63 6f6e          self.con
-00006090: 6669 675b 2269 6e74 726f 6475 6365 725f  fig["introducer_
-000060a0: 7065 6572 225d 2c0a 2020 2020 2020 2020  peer"],.        
-000060b0: 2020 2020 2020 2020 646e 735f 7365 7276          dns_serv
-000060c0: 6572 732c 0a20 2020 2020 2020 2020 2020  ers,.           
-000060d0: 2020 2020 2073 656c 662e 636f 6e66 6967       self.config
-000060e0: 5b22 7065 6572 5f63 6f6e 6e65 6374 5f69  ["peer_connect_i
-000060f0: 6e74 6572 7661 6c22 5d2c 0a20 2020 2020  nterval"],.     
-00006100: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00006110: 636f 6e66 6967 5b22 7365 6c65 6374 6564  config["selected
-00006120: 5f6e 6574 776f 726b 225d 2c0a 2020 2020  _network"],.    
-00006130: 2020 2020 2020 2020 2020 2020 6465 6661              defa
-00006140: 756c 745f 706f 7274 2c0a 2020 2020 2020  ult_port,.      
-00006150: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
-00006160: 6f67 2c0a 2020 2020 2020 2020 2020 2020  og,.            
-00006170: 290a 2020 2020 2020 2020 6578 6365 7074  ).        except
-00006180: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
-00006190: 0a20 2020 2020 2020 2020 2020 2065 7272  .            err
-000061a0: 6f72 5f73 7461 636b 203d 2074 7261 6365  or_stack = trace
-000061b0: 6261 636b 2e66 6f72 6d61 745f 6578 6328  back.format_exc(
-000061c0: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
-000061d0: 6c66 2e6c 6f67 2e65 7272 6f72 2866 2245  lf.log.error(f"E
-000061e0: 7863 6570 7469 6f6e 3a20 7b65 7d22 290a  xception: {e}").
-000061f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00006200: 2e6c 6f67 2e65 7272 6f72 2866 2245 7863  .log.error(f"Exc
-00006210: 6570 7469 6f6e 2069 6e20 7065 6572 2064  eption in peer d
-00006220: 6973 636f 7665 7279 3a20 7b65 7d22 290a  iscovery: {e}").
-00006230: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00006240: 2e6c 6f67 2e65 7272 6f72 2866 2245 7863  .log.error(f"Exc
-00006250: 6570 7469 6f6e 2053 7461 636b 3a20 7b65  eption Stack: {e
-00006260: 7272 6f72 5f73 7461 636b 7d22 290a 0a20  rror_stack}").. 
-00006270: 2020 2064 6566 205f 7374 6174 655f 6368     def _state_ch
-00006280: 616e 6765 6428 7365 6c66 2c20 6368 616e  anged(self, chan
-00006290: 6765 3a20 7374 722c 2063 6861 6e67 655f  ge: str, change_
-000062a0: 6461 7461 3a20 4f70 7469 6f6e 616c 5b44  data: Optional[D
-000062b0: 6963 745b 7374 722c 2041 6e79 5d5d 203d  ict[str, Any]] =
-000062c0: 204e 6f6e 6529 202d 3e20 4e6f 6e65 3a0a   None) -> None:.
-000062d0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-000062e0: 7374 6174 655f 6368 616e 6765 645f 6361  state_changed_ca
-000062f0: 6c6c 6261 636b 2069 7320 6e6f 7420 4e6f  llback is not No
-00006300: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00006310: 7365 6c66 2e73 7461 7465 5f63 6861 6e67  self.state_chang
-00006320: 6564 5f63 616c 6c62 6163 6b28 6368 616e  ed_callback(chan
-00006330: 6765 2c20 6368 616e 6765 5f64 6174 6129  ge, change_data)
-00006340: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
-00006350: 7368 6f72 745f 7379 6e63 5f62 6174 6368  short_sync_batch
-00006360: 2873 656c 662c 2070 6565 723a 2057 5343  (self, peer: WSC
-00006370: 6869 6143 6f6e 6e65 6374 696f 6e2c 2073  hiaConnection, s
-00006380: 7461 7274 5f68 6569 6768 743a 2075 696e  tart_height: uin
-00006390: 7433 322c 2074 6172 6765 745f 6865 6967  t32, target_heig
-000063a0: 6874 3a20 7569 6e74 3332 2920 2d3e 2062  ht: uint32) -> b
-000063b0: 6f6f 6c3a 0a20 2020 2020 2020 2022 2222  ool:.        """
-000063c0: 0a20 2020 2020 2020 2054 7269 6573 2074  .        Tries t
-000063d0: 6f20 7379 6e63 2074 6f20 6120 6368 6169  o sync to a chai
-000063e0: 6e20 7768 6963 6820 6973 206e 6f74 2074  n which is not t
-000063f0: 6f6f 2066 6172 2069 6e20 7468 6520 6675  oo far in the fu
-00006400: 7475 7265 2c20 6279 2064 6f77 6e6c 6f61  ture, by downloa
-00006410: 6469 6e67 2062 6174 6368 6573 206f 6620  ding batches of 
-00006420: 626c 6f63 6b73 2e20 4966 2074 6865 2066  blocks. If the f
-00006430: 6972 7374 0a20 2020 2020 2020 2062 6c6f  irst.        blo
-00006440: 636b 2074 6861 7420 7765 2064 6f77 6e6c  ck that we downl
-00006450: 6f61 6420 6973 206e 6f74 2063 6f6e 6e65  oad is not conne
-00006460: 6374 6564 2074 6f20 6f75 7220 6368 6169  cted to our chai
-00006470: 6e2c 2077 6520 7265 7475 726e 2046 616c  n, we return Fal
-00006480: 7365 2061 6e64 2064 6f20 616e 2065 7870  se and do an exp
-00006490: 656e 7369 7665 206c 6f6e 6720 7379 6e63  ensive long sync
-000064a0: 2069 6e73 7465 6164 2e0a 2020 2020 2020   instead..      
-000064b0: 2020 4c6f 6e67 2073 796e 6320 6973 206e    Long sync is n
-000064c0: 6f74 2070 7265 6665 7272 6564 2062 6563  ot preferred bec
-000064d0: 6175 7365 2069 7420 7265 7175 6972 6573  ause it requires
-000064e0: 2064 6f77 6e6c 6f61 6469 6e67 2061 6e64   downloading and
-000064f0: 2076 616c 6964 6174 696e 6720 6120 7765   validating a we
-00006500: 6967 6874 2070 726f 6f66 2e0a 0a20 2020  ight proof...   
-00006510: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
-00006520: 2020 2020 2020 2070 6565 723a 2070 6565         peer: pee
-00006530: 7220 746f 2073 796e 6320 6672 6f6d 0a20  r to sync from. 
-00006540: 2020 2020 2020 2020 2020 2073 7461 7274             start
-00006550: 5f68 6569 6768 743a 2068 6569 6768 7420  _height: height 
-00006560: 7468 6174 2077 6520 7368 6f75 6c64 2073  that we should s
-00006570: 7461 7274 2064 6f77 6e6c 6f61 6469 6e67  tart downloading
-00006580: 2061 742e 2028 4f75 7220 7065 616b 2069   at. (Our peak i
-00006590: 7320 6869 6768 6572 290a 2020 2020 2020  s higher).      
-000065a0: 2020 2020 2020 7461 7267 6574 5f68 6569        target_hei
-000065b0: 6768 743a 2074 6172 6765 7420 746f 2073  ght: target to s
-000065c0: 796e 6320 746f 0a0a 2020 2020 2020 2020  ync to..        
-000065d0: 5265 7475 726e 733a 0a20 2020 2020 2020  Returns:.       
-000065e0: 2020 2020 2046 616c 7365 2069 6620 7468       False if th
-000065f0: 6520 666f 726b 2070 6f69 6e74 2077 6173  e fork point was
-00006600: 206e 6f74 2066 6f75 6e64 2c20 616e 6420   not found, and 
-00006610: 7765 206e 6565 6420 746f 2064 6f20 6120  we need to do a 
-00006620: 6c6f 6e67 2073 796e 632e 2054 7275 6520  long sync. True 
-00006630: 6f74 6865 7277 6973 652e 0a0a 2020 2020  otherwise...    
-00006640: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00006650: 2320 446f 6e27 7420 7472 6967 6765 7220  # Don't trigger 
-00006660: 6d75 6c74 6970 6c65 2062 6174 6368 2073  multiple batch s
-00006670: 796e 6373 2074 6f20 7468 6520 7361 6d65  yncs to the same
-00006680: 2070 6565 720a 0a20 2020 2020 2020 2069   peer..        i
-00006690: 6620 7365 6c66 2e73 796e 635f 7374 6f72  f self.sync_stor
-000066a0: 652e 6973 5f62 6163 6b74 7261 636b 5f73  e.is_backtrack_s
-000066b0: 796e 6369 6e67 286e 6f64 655f 6964 3d70  yncing(node_id=p
-000066c0: 6565 722e 7065 6572 5f6e 6f64 655f 6964  eer.peer_node_id
-000066d0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-000066e0: 6574 7572 6e20 5472 7565 2020 2320 446f  eturn True  # Do
-000066f0: 6e27 7420 6261 7463 6820 7379 6e63 2c20  n't batch sync, 
-00006700: 7765 2061 7265 2061 6c72 6561 6479 2069  we are already i
-00006710: 6e20 7072 6f67 7265 7373 206f 6620 6120  n progress of a 
-00006720: 6261 636b 7472 6163 6b20 7379 6e63 0a20  backtrack sync. 
-00006730: 2020 2020 2020 2069 6620 7065 6572 2e70         if peer.p
-00006740: 6565 725f 6e6f 6465 5f69 6420 696e 2073  eer_node_id in s
-00006750: 656c 662e 7379 6e63 5f73 746f 7265 2e62  elf.sync_store.b
-00006760: 6174 6368 5f73 796e 6369 6e67 3a0a 2020  atch_syncing:.  
-00006770: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00006780: 2054 7275 6520 2023 2044 6f6e 2774 2074   True  # Don't t
-00006790: 7269 6767 6572 2061 206c 6f6e 6720 7379  rigger a long sy
-000067a0: 6e63 0a20 2020 2020 2020 2073 656c 662e  nc.        self.
-000067b0: 7379 6e63 5f73 746f 7265 2e62 6174 6368  sync_store.batch
-000067c0: 5f73 796e 6369 6e67 2e61 6464 2870 6565  _syncing.add(pee
-000067d0: 722e 7065 6572 5f6e 6f64 655f 6964 290a  r.peer_node_id).
-000067e0: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
-000067f0: 672e 696e 666f 2866 2253 7461 7274 696e  g.info(f"Startin
-00006800: 6720 6261 7463 6820 7368 6f72 7420 7379  g batch short sy
-00006810: 6e63 2066 726f 6d20 7b73 7461 7274 5f68  nc from {start_h
-00006820: 6569 6768 747d 2074 6f20 6865 6967 6874  eight} to height
-00006830: 207b 7461 7267 6574 5f68 6569 6768 747d   {target_height}
-00006840: 2229 0a20 2020 2020 2020 2069 6620 7374  ").        if st
-00006850: 6172 745f 6865 6967 6874 203e 2030 3a0a  art_height > 0:.
-00006860: 2020 2020 2020 2020 2020 2020 6669 7273              firs
-00006870: 7420 3d20 6177 6169 7420 7065 6572 2e63  t = await peer.c
-00006880: 616c 6c5f 6170 6928 0a20 2020 2020 2020  all_api(.       
-00006890: 2020 2020 2020 2020 2046 756c 6c4e 6f64           FullNod
-000068a0: 6541 5049 2e72 6571 7565 7374 5f62 6c6f  eAPI.request_blo
-000068b0: 636b 2c20 6675 6c6c 5f6e 6f64 655f 7072  ck, full_node_pr
-000068c0: 6f74 6f63 6f6c 2e52 6571 7565 7374 426c  otocol.RequestBl
-000068d0: 6f63 6b28 7569 6e74 3332 2873 7461 7274  ock(uint32(start
-000068e0: 5f68 6569 6768 7429 2c20 4661 6c73 6529  _height), False)
-000068f0: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-00006900: 2020 2020 2020 2020 2020 2069 6620 6669             if fi
-00006910: 7273 7420 6973 204e 6f6e 6520 6f72 206e  rst is None or n
-00006920: 6f74 2069 7369 6e73 7461 6e63 6528 6669  ot isinstance(fi
-00006930: 7273 742c 2066 756c 6c5f 6e6f 6465 5f70  rst, full_node_p
-00006940: 726f 746f 636f 6c2e 5265 7370 6f6e 6442  rotocol.RespondB
-00006950: 6c6f 636b 293a 0a20 2020 2020 2020 2020  lock):.         
-00006960: 2020 2020 2020 2073 656c 662e 7379 6e63         self.sync
-00006970: 5f73 746f 7265 2e62 6174 6368 5f73 796e  _store.batch_syn
-00006980: 6369 6e67 2e72 656d 6f76 6528 7065 6572  cing.remove(peer
-00006990: 2e70 6565 725f 6e6f 6465 5f69 6429 0a20  .peer_node_id). 
-000069a0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000069b0: 656c 662e 6c6f 672e 6572 726f 7228 6622  elf.log.error(f"
-000069c0: 4572 726f 7220 7368 6f72 7420 6261 7463  Error short batc
-000069d0: 6820 7379 6e63 696e 672c 2063 6f75 6c64  h syncing, could
-000069e0: 206e 6f74 2066 6574 6368 2062 6c6f 636b   not fetch block
-000069f0: 2061 7420 6865 6967 6874 207b 7374 6172   at height {star
-00006a00: 745f 6865 6967 6874 7d22 290a 2020 2020  t_height}").    
-00006a10: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00006a20: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
-00006a30: 2020 2020 2069 6620 6e6f 7420 7365 6c66       if not self
-00006a40: 2e62 6c6f 636b 6368 6169 6e2e 636f 6e74  .blockchain.cont
-00006a50: 6169 6e73 5f62 6c6f 636b 2866 6972 7374  ains_block(first
-00006a60: 2e62 6c6f 636b 2e70 7265 765f 6865 6164  .block.prev_head
-00006a70: 6572 5f68 6173 6829 3a0a 2020 2020 2020  er_hash):.      
-00006a80: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
-00006a90: 6f67 2e69 6e66 6f28 2242 6174 6368 2073  og.info("Batch s
-00006aa0: 796e 6369 6e67 2073 746f 7070 6564 2c20  yncing stopped, 
-00006ab0: 7468 6973 2069 7320 6120 6465 6570 2063  this is a deep c
-00006ac0: 6861 696e 2229 0a20 2020 2020 2020 2020  hain").         
-00006ad0: 2020 2020 2020 2073 656c 662e 7379 6e63         self.sync
-00006ae0: 5f73 746f 7265 2e62 6174 6368 5f73 796e  _store.batch_syn
-00006af0: 6369 6e67 2e72 656d 6f76 6528 7065 6572  cing.remove(peer
-00006b00: 2e70 6565 725f 6e6f 6465 5f69 6429 0a20  .peer_node_id). 
-00006b10: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00006b20: 2046 6972 7374 2073 6220 6e6f 7420 636f   First sb not co
-00006b30: 6e6e 6563 7465 6420 746f 206f 7572 2062  nnected to our b
-00006b40: 6c6f 636b 6368 6169 6e2c 2064 6f20 6120  lockchain, do a 
-00006b50: 6c6f 6e67 2073 796e 6320 696e 7374 6561  long sync instea
-00006b60: 640a 2020 2020 2020 2020 2020 2020 2020  d.              
-00006b70: 2020 7265 7475 726e 2046 616c 7365 0a0a    return False..
-00006b80: 2020 2020 2020 2020 6261 7463 685f 7369          batch_si
-00006b90: 7a65 203d 2073 656c 662e 636f 6e73 7461  ze = self.consta
-00006ba0: 6e74 732e 4d41 585f 424c 4f43 4b5f 434f  nts.MAX_BLOCK_CO
-00006bb0: 554e 545f 5045 525f 5245 5155 4553 5453  UNT_PER_REQUESTS
-00006bc0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00006bd0: 2e5f 7365 676d 656e 745f 7461 736b 2069  ._segment_task i
-00006be0: 7320 6e6f 7420 4e6f 6e65 2061 6e64 2028  s not None and (
-00006bf0: 6e6f 7420 7365 6c66 2e5f 7365 676d 656e  not self._segmen
-00006c00: 745f 7461 736b 2e64 6f6e 6528 2929 3a0a  t_task.done()):.
-00006c10: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-00006c20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006c30: 2073 656c 662e 5f73 6567 6d65 6e74 5f74   self._segment_t
-00006c40: 6173 6b2e 6361 6e63 656c 2829 0a20 2020  ask.cancel().   
-00006c50: 2020 2020 2020 2020 2065 7863 6570 7420           except 
-00006c60: 4578 6365 7074 696f 6e20 6173 2065 3a0a  Exception as e:.
-00006c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006c80: 7365 6c66 2e6c 6f67 2e77 6172 6e69 6e67  self.log.warning
-00006c90: 2866 2266 6169 6c65 6420 746f 2063 616e  (f"failed to can
-00006ca0: 6365 6c20 7365 676d 656e 7420 7461 736b  cel segment task
-00006cb0: 207b 657d 2229 0a20 2020 2020 2020 2020   {e}").         
-00006cc0: 2020 2073 656c 662e 5f73 6567 6d65 6e74     self._segment
-00006cd0: 5f74 6173 6b20 3d20 4e6f 6e65 0a0a 2020  _task = None..  
-00006ce0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-00006cf0: 2020 2020 2020 2070 6565 725f 696e 666f         peer_info
-00006d00: 203d 2070 6565 722e 6765 745f 7065 6572   = peer.get_peer
-00006d10: 5f6c 6f67 6769 6e67 2829 0a20 2020 2020  _logging().     
-00006d20: 2020 2020 2020 2066 6f72 2068 6569 6768         for heigh
-00006d30: 7420 696e 2072 616e 6765 2873 7461 7274  t in range(start
-00006d40: 5f68 6569 6768 742c 2074 6172 6765 745f  _height, target_
-00006d50: 6865 6967 6874 2c20 6261 7463 685f 7369  height, batch_si
-00006d60: 7a65 293a 0a20 2020 2020 2020 2020 2020  ze):.           
-00006d70: 2020 2020 2065 6e64 5f68 6569 6768 7420       end_height 
-00006d80: 3d20 6d69 6e28 7461 7267 6574 5f68 6569  = min(target_hei
-00006d90: 6768 742c 2068 6569 6768 7420 2b20 6261  ght, height + ba
-00006da0: 7463 685f 7369 7a65 290a 2020 2020 2020  tch_size).      
-00006db0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00006dc0: 7420 3d20 5265 7175 6573 7442 6c6f 636b  t = RequestBlock
-00006dd0: 7328 7569 6e74 3332 2868 6569 6768 7429  s(uint32(height)
-00006de0: 2c20 7569 6e74 3332 2865 6e64 5f68 6569  , uint32(end_hei
-00006df0: 6768 7429 2c20 5472 7565 290a 2020 2020  ght), True).    
-00006e00: 2020 2020 2020 2020 2020 2020 7265 7370              resp
-00006e10: 6f6e 7365 203d 2061 7761 6974 2070 6565  onse = await pee
-00006e20: 722e 6361 6c6c 5f61 7069 2846 756c 6c4e  r.call_api(FullN
-00006e30: 6f64 6541 5049 2e72 6571 7565 7374 5f62  odeAPI.request_b
-00006e40: 6c6f 636b 732c 2072 6571 7565 7374 290a  locks, request).
-00006e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006e60: 6966 206e 6f74 2072 6573 706f 6e73 653a  if not response:
-00006e70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006e80: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
-00006e90: 4572 726f 7228 6622 4572 726f 7220 7368  Error(f"Error sh
-00006ea0: 6f72 7420 6261 7463 6820 7379 6e63 696e  ort batch syncin
-00006eb0: 672c 2069 6e76 616c 6964 2f6e 6f20 7265  g, invalid/no re
-00006ec0: 7370 6f6e 7365 2066 6f72 207b 6865 6967  sponse for {heig
-00006ed0: 6874 7d2d 7b65 6e64 5f68 6569 6768 747d  ht}-{end_height}
-00006ee0: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-00006ef0: 2020 2061 7379 6e63 2077 6974 6820 7365     async with se
-00006f00: 6c66 2e62 6c6f 636b 6368 6169 6e2e 7072  lf.blockchain.pr
-00006f10: 696f 7269 7479 5f6d 7574 6578 2e61 6371  iority_mutex.acq
-00006f20: 7569 7265 2870 7269 6f72 6974 793d 426c  uire(priority=Bl
-00006f30: 6f63 6b63 6861 696e 4d75 7465 7850 7269  ockchainMutexPri
-00006f40: 6f72 6974 792e 6869 6768 293a 0a20 2020  ority.high):.   
-00006f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006f60: 2073 7461 7465 5f63 6861 6e67 655f 7375   state_change_su
-00006f70: 6d6d 6172 793a 204f 7074 696f 6e61 6c5b  mmary: Optional[
-00006f80: 5374 6174 6543 6861 6e67 6553 756d 6d61  StateChangeSumma
-00006f90: 7279 5d0a 2020 2020 2020 2020 2020 2020  ry].            
-00006fa0: 2020 2020 2020 2020 7375 6363 6573 732c          success,
-00006fb0: 2073 7461 7465 5f63 6861 6e67 655f 7375   state_change_su
-00006fc0: 6d6d 6172 792c 205f 203d 2061 7761 6974  mmary, _ = await
-00006fd0: 2073 656c 662e 6164 645f 626c 6f63 6b5f   self.add_block_
-00006fe0: 6261 7463 6828 7265 7370 6f6e 7365 2e62  batch(response.b
-00006ff0: 6c6f 636b 732c 2070 6565 725f 696e 666f  locks, peer_info
-00007000: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
-00007010: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00007020: 6f74 2073 7563 6365 7373 3a0a 2020 2020  ot success:.    
-00007030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007040: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
-00007050: 7272 6f72 2866 2245 7272 6f72 2073 686f  rror(f"Error sho
-00007060: 7274 2062 6174 6368 2073 796e 6369 6e67  rt batch syncing
-00007070: 2c20 6661 696c 6564 2074 6f20 7661 6c69  , failed to vali
-00007080: 6461 7465 2062 6c6f 636b 7320 7b68 6569  date blocks {hei
-00007090: 6768 747d 2d7b 656e 645f 6865 6967 6874  ght}-{end_height
-000070a0: 7d22 290a 2020 2020 2020 2020 2020 2020  }").            
-000070b0: 2020 2020 2020 2020 6966 2073 7461 7465          if state
-000070c0: 5f63 6861 6e67 655f 7375 6d6d 6172 7920  _change_summary 
-000070d0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-000070e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000070f0: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-00007100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007110: 2020 2020 2020 7065 616b 5f66 623a 204f        peak_fb: O
-00007120: 7074 696f 6e61 6c5b 4675 6c6c 426c 6f63  ptional[FullBloc
-00007130: 6b5d 203d 2061 7761 6974 2073 656c 662e  k] = await self.
-00007140: 626c 6f63 6b63 6861 696e 2e67 6574 5f66  blockchain.get_f
-00007150: 756c 6c5f 7065 616b 2829 0a20 2020 2020  ull_peak().     
-00007160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007170: 2020 2020 2020 2061 7373 6572 7420 7065         assert pe
-00007180: 616b 5f66 6220 6973 206e 6f74 204e 6f6e  ak_fb is not Non
-00007190: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-000071a0: 2020 2020 2020 2020 2020 2020 2020 7070                pp
-000071b0: 705f 7265 7375 6c74 3a20 5065 616b 506f  p_result: PeakPo
-000071c0: 7374 5072 6f63 6573 7369 6e67 5265 7375  stProcessingResu
-000071d0: 6c74 203d 2061 7761 6974 2073 656c 662e  lt = await self.
-000071e0: 7065 616b 5f70 6f73 745f 7072 6f63 6573  peak_post_proces
-000071f0: 7369 6e67 280a 2020 2020 2020 2020 2020  sing(.          
-00007200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007210: 2020 2020 2020 7065 616b 5f66 622c 0a20        peak_fb,. 
-00007220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007230: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00007240: 7461 7465 5f63 6861 6e67 655f 7375 6d6d  tate_change_summ
-00007250: 6172 792c 0a20 2020 2020 2020 2020 2020  ary,.           
-00007260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007270: 2020 2020 2070 6565 722c 0a20 2020 2020       peer,.     
-00007280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007290: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-000072a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000072b0: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
-000072c0: 7065 616b 5f70 6f73 745f 7072 6f63 6573  peak_post_proces
-000072d0: 7369 6e67 5f32 2870 6561 6b5f 6662 2c20  sing_2(peak_fb, 
-000072e0: 7065 6572 2c20 7374 6174 655f 6368 616e  peer, state_chan
-000072f0: 6765 5f73 756d 6d61 7279 2c20 7070 705f  ge_summary, ppp_
-00007300: 7265 7375 6c74 290a 2020 2020 2020 2020  result).        
-00007310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007320: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
-00007330: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00007340: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00007350: 5374 696c 6c20 646f 2070 6f73 7420 7072  Still do post pr
-00007360: 6f63 6573 7369 6e67 2061 6674 6572 2063  ocessing after c
-00007370: 616e 6365 6c20 286f 7220 6578 6365 7074  ancel (or except
-00007380: 696f 6e29 0a20 2020 2020 2020 2020 2020  ion).           
-00007390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000073a0: 2070 6561 6b5f 6662 203d 2061 7761 6974   peak_fb = await
-000073b0: 2073 656c 662e 626c 6f63 6b63 6861 696e   self.blockchain
-000073c0: 2e67 6574 5f66 756c 6c5f 7065 616b 2829  .get_full_peak()
-000073d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000073e0: 2020 2020 2020 2020 2020 2020 2061 7373               ass
-000073f0: 6572 7420 7065 616b 5f66 6220 6973 206e  ert peak_fb is n
-00007400: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
-00007410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007420: 2020 2020 6177 6169 7420 7365 6c66 2e70      await self.p
-00007430: 6561 6b5f 706f 7374 5f70 726f 6365 7373  eak_post_process
-00007440: 696e 6728 7065 616b 5f66 622c 2073 7461  ing(peak_fb, sta
-00007450: 7465 5f63 6861 6e67 655f 7375 6d6d 6172  te_change_summar
-00007460: 792c 2070 6565 7229 0a20 2020 2020 2020  y, peer).       
-00007470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007480: 2020 2020 2072 6169 7365 0a20 2020 2020       raise.     
-00007490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000074a0: 2020 2066 696e 616c 6c79 3a0a 2020 2020     finally:.    
-000074b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000074c0: 2020 2020 2020 2020 7365 6c66 2e6c 6f67          self.log
-000074d0: 2e69 6e66 6f28 6622 4164 6465 6420 626c  .info(f"Added bl
-000074e0: 6f63 6b73 207b 6865 6967 6874 7d2d 7b65  ocks {height}-{e
-000074f0: 6e64 5f68 6569 6768 747d 2229 0a20 2020  nd_height}").   
-00007500: 2020 2020 2065 7863 6570 7420 2861 7379       except (asy
-00007510: 6e63 696f 2e43 616e 6365 6c6c 6564 4572  ncio.CancelledEr
-00007520: 726f 722c 2045 7863 6570 7469 6f6e 293a  ror, Exception):
-00007530: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00007540: 662e 7379 6e63 5f73 746f 7265 2e62 6174  f.sync_store.bat
-00007550: 6368 5f73 796e 6369 6e67 2e72 656d 6f76  ch_syncing.remov
-00007560: 6528 7065 6572 2e70 6565 725f 6e6f 6465  e(peer.peer_node
-00007570: 5f69 6429 0a20 2020 2020 2020 2020 2020  _id).           
-00007580: 2072 6169 7365 0a20 2020 2020 2020 2073   raise.        s
-00007590: 656c 662e 7379 6e63 5f73 746f 7265 2e62  elf.sync_store.b
-000075a0: 6174 6368 5f73 796e 6369 6e67 2e72 656d  atch_syncing.rem
-000075b0: 6f76 6528 7065 6572 2e70 6565 725f 6e6f  ove(peer.peer_no
-000075c0: 6465 5f69 6429 0a20 2020 2020 2020 2072  de_id).        r
-000075d0: 6574 7572 6e20 5472 7565 0a0a 2020 2020  eturn True..    
-000075e0: 6173 796e 6320 6465 6620 7368 6f72 745f  async def short_
-000075f0: 7379 6e63 5f62 6163 6b74 7261 636b 280a  sync_backtrack(.
-00007600: 2020 2020 2020 2020 7365 6c66 2c20 7065          self, pe
-00007610: 6572 3a20 5753 4368 6961 436f 6e6e 6563  er: WSChiaConnec
-00007620: 7469 6f6e 2c20 7065 616b 5f68 6569 6768  tion, peak_heigh
-00007630: 743a 2075 696e 7433 322c 2074 6172 6765  t: uint32, targe
-00007640: 745f 6865 6967 6874 3a20 7569 6e74 3332  t_height: uint32
-00007650: 2c20 7461 7267 6574 5f75 6e66 5f68 6173  , target_unf_has
-00007660: 683a 2062 7974 6573 3332 0a20 2020 2029  h: bytes32.    )
-00007670: 202d 3e20 626f 6f6c 3a0a 2020 2020 2020   -> bool:.      
-00007680: 2020 2222 220a 2020 2020 2020 2020 5065    """.        Pe
-00007690: 7266 6f72 6d73 2061 2062 6163 6b74 7261  rforms a backtra
-000076a0: 636b 2073 796e 632c 2077 6865 7265 2062  ck sync, where b
-000076b0: 6c6f 636b 7320 6172 6520 646f 776e 6c6f  locks are downlo
-000076c0: 6164 6564 206f 6e65 2061 7420 6120 7469  aded one at a ti
-000076d0: 6d65 2066 726f 6d20 6e65 7765 7374 2074  me from newest t
-000076e0: 6f20 6f6c 6465 7374 2e20 4966 2077 6520  o oldest. If we 
-000076f0: 646f 206e 6f74 0a20 2020 2020 2020 2066  do not.        f
-00007700: 696e 6420 7468 6520 666f 726b 2070 6f69  ind the fork poi
-00007710: 6e74 2035 2064 6565 7065 7220 7468 616e  nt 5 deeper than
-00007720: 206f 7572 2070 6561 6b2c 2077 6520 7265   our peak, we re
-00007730: 7475 726e 2046 616c 7365 2061 6e64 2064  turn False and d
-00007740: 6f20 6120 6c6f 6e67 2073 796e 6320 696e  o a long sync in
-00007750: 7374 6561 642e 0a0a 2020 2020 2020 2020  stead...        
-00007760: 4172 6773 3a0a 2020 2020 2020 2020 2020  Args:.          
-00007770: 2020 7065 6572 3a20 7065 6572 2074 6f20    peer: peer to 
-00007780: 7379 6e63 2066 726f 6d0a 2020 2020 2020  sync from.      
-00007790: 2020 2020 2020 7065 616b 5f68 6569 6768        peak_heigh
-000077a0: 743a 2068 6569 6768 7420 6f66 206f 7572  t: height of our
-000077b0: 2070 6561 6b0a 2020 2020 2020 2020 2020   peak.          
-000077c0: 2020 7461 7267 6574 5f68 6569 6768 743a    target_height:
-000077d0: 2074 6172 6765 7420 6865 6967 6874 0a20   target height. 
-000077e0: 2020 2020 2020 2020 2020 2074 6172 6765             targe
-000077f0: 745f 756e 665f 6861 7368 3a20 7061 7274  t_unf_hash: part
-00007800: 6961 6c20 6861 7368 206f 6620 7468 6520  ial hash of the 
-00007810: 756e 6669 6e69 7368 6564 2062 6c6f 636b  unfinished block
-00007820: 206f 6620 7468 6520 7461 7267 6574 0a0a   of the target..
-00007830: 2020 2020 2020 2020 5265 7475 726e 733a          Returns:
-00007840: 0a20 2020 2020 2020 2020 2020 2054 7275  .            Tru
-00007850: 6520 6966 6620 7765 2066 6f75 6e64 2074  e iff we found t
-00007860: 6865 2066 6f72 6b20 706f 696e 742c 2061  he fork point, a
-00007870: 6e64 2077 6520 646f 206e 6f74 206e 6565  nd we do not nee
-00007880: 6420 746f 206c 6f6e 6720 7379 6e63 2e0a  d to long sync..
-00007890: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000078a0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-000078b0: 2020 2020 2073 656c 662e 7379 6e63 5f73       self.sync_s
-000078c0: 746f 7265 2e69 6e63 7265 6d65 6e74 5f62  tore.increment_b
-000078d0: 6163 6b74 7261 636b 5f73 796e 6369 6e67  acktrack_syncing
-000078e0: 286e 6f64 655f 6964 3d70 6565 722e 7065  (node_id=peer.pe
-000078f0: 6572 5f6e 6f64 655f 6964 290a 0a20 2020  er_node_id)..   
-00007900: 2020 2020 2020 2020 2075 6e66 696e 6973           unfinis
-00007910: 6865 645f 626c 6f63 6b3a 204f 7074 696f  hed_block: Optio
-00007920: 6e61 6c5b 556e 6669 6e69 7368 6564 426c  nal[UnfinishedBl
-00007930: 6f63 6b5d 203d 2073 656c 662e 6675 6c6c  ock] = self.full
-00007940: 5f6e 6f64 655f 7374 6f72 652e 6765 745f  _node_store.get_
-00007950: 756e 6669 6e69 7368 6564 5f62 6c6f 636b  unfinished_block
-00007960: 2874 6172 6765 745f 756e 665f 6861 7368  (target_unf_hash
-00007970: 290a 2020 2020 2020 2020 2020 2020 6375  ).            cu
-00007980: 7272 5f68 6569 6768 743a 2069 6e74 203d  rr_height: int =
-00007990: 2074 6172 6765 745f 6865 6967 6874 0a20   target_height. 
-000079a0: 2020 2020 2020 2020 2020 2066 6f75 6e64             found
-000079b0: 5f66 6f72 6b5f 706f 696e 7420 3d20 4661  _fork_point = Fa
-000079c0: 6c73 650a 2020 2020 2020 2020 2020 2020  lse.            
-000079d0: 626c 6f63 6b73 203d 205b 5d0a 2020 2020  blocks = [].    
-000079e0: 2020 2020 2020 2020 7768 696c 6520 6375          while cu
-000079f0: 7272 5f68 6569 6768 7420 3e20 7065 616b  rr_height > peak
-00007a00: 5f68 6569 6768 7420 2d20 353a 0a20 2020  _height - 5:.   
-00007a10: 2020 2020 2020 2020 2020 2020 2023 2049               # I
-00007a20: 6620 7765 2061 6c72 6561 6479 2068 6176  f we already hav
-00007a30: 6520 7468 6520 756e 6669 6e69 7368 6564  e the unfinished
-00007a40: 2062 6c6f 636b 2c20 646f 6e27 7420 6665   block, don't fe
-00007a50: 7463 6820 7468 6520 7472 616e 7361 6374  tch the transact
-00007a60: 696f 6e73 2e20 496e 2074 6865 206e 6f72  ions. In the nor
-00007a70: 6d61 6c20 6361 7365 2c20 7765 2077 696c  mal case, we wil
-00007a80: 6c0a 2020 2020 2020 2020 2020 2020 2020  l.              
-00007a90: 2020 2320 616c 7265 6164 7920 6861 7665    # already have
-00007aa0: 2074 6865 2075 6e66 696e 6973 6865 6420   the unfinished 
-00007ab0: 626c 6f63 6b2c 2066 726f 6d20 7768 656e  block, from when
-00007ac0: 2069 7420 7761 7320 6272 6f61 6463 6173   it was broadcas
-00007ad0: 742c 2073 6f20 7765 206a 7573 7420 6e65  t, so we just ne
-00007ae0: 6564 2074 6f20 646f 776e 6c6f 6164 2074  ed to download t
-00007af0: 6865 2068 6561 6465 722c 0a20 2020 2020  he header,.     
-00007b00: 2020 2020 2020 2020 2020 2023 2062 7574             # but
-00007b10: 206e 6f74 2074 6865 2074 7261 6e73 6163   not the transac
-00007b20: 7469 6f6e 730a 2020 2020 2020 2020 2020  tions.          
-00007b30: 2020 2020 2020 6665 7463 685f 7478 3a20        fetch_tx: 
-00007b40: 626f 6f6c 203d 2075 6e66 696e 6973 6865  bool = unfinishe
-00007b50: 645f 626c 6f63 6b20 6973 204e 6f6e 6520  d_block is None 
-00007b60: 6f72 2063 7572 725f 6865 6967 6874 2021  or curr_height !
-00007b70: 3d20 7461 7267 6574 5f68 6569 6768 740a  = target_height.
-00007b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007b90: 6375 7272 203d 2061 7761 6974 2070 6565  curr = await pee
-00007ba0: 722e 6361 6c6c 5f61 7069 280a 2020 2020  r.call_api(.    
-00007bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007bc0: 4675 6c6c 4e6f 6465 4150 492e 7265 7175  FullNodeAPI.requ
-00007bd0: 6573 745f 626c 6f63 6b2c 2066 756c 6c5f  est_block, full_
-00007be0: 6e6f 6465 5f70 726f 746f 636f 6c2e 5265  node_protocol.Re
-00007bf0: 7175 6573 7442 6c6f 636b 2875 696e 7433  questBlock(uint3
-00007c00: 3228 6375 7272 5f68 6569 6768 7429 2c20  2(curr_height), 
-00007c10: 6665 7463 685f 7478 290a 2020 2020 2020  fetch_tx).      
-00007c20: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00007c30: 2020 2020 2020 2020 2020 2020 6966 2063              if c
-00007c40: 7572 7220 6973 204e 6f6e 653a 0a20 2020  urr is None:.   
-00007c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007c60: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-00007c70: 7228 6622 4661 696c 6564 2074 6f20 6665  r(f"Failed to fe
-00007c80: 7463 6820 626c 6f63 6b20 7b63 7572 725f  tch block {curr_
-00007c90: 6865 6967 6874 7d20 6672 6f6d 207b 7065  height} from {pe
-00007ca0: 6572 2e67 6574 5f70 6565 725f 6c6f 6767  er.get_peer_logg
-00007cb0: 696e 6728 297d 2c20 7469 6d65 6420 6f75  ing()}, timed ou
-00007cc0: 7422 290a 2020 2020 2020 2020 2020 2020  t").            
-00007cd0: 2020 2020 6966 2063 7572 7220 6973 204e      if curr is N
-00007ce0: 6f6e 6520 6f72 206e 6f74 2069 7369 6e73  one or not isins
-00007cf0: 7461 6e63 6528 6375 7272 2c20 6675 6c6c  tance(curr, full
-00007d00: 5f6e 6f64 655f 7072 6f74 6f63 6f6c 2e52  _node_protocol.R
-00007d10: 6573 706f 6e64 426c 6f63 6b29 3a0a 2020  espondBlock):.  
-00007d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007d30: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-00007d40: 6f72 280a 2020 2020 2020 2020 2020 2020  or(.            
-00007d50: 2020 2020 2020 2020 2020 2020 6622 4661              f"Fa
-00007d60: 696c 6564 2074 6f20 6665 7463 6820 626c  iled to fetch bl
-00007d70: 6f63 6b20 7b63 7572 725f 6865 6967 6874  ock {curr_height
-00007d80: 7d20 6672 6f6d 207b 7065 6572 2e67 6574  } from {peer.get
-00007d90: 5f70 6565 725f 6c6f 6767 696e 6728 297d  _peer_logging()}
-00007da0: 2c20 7772 6f6e 6720 7479 7065 207b 7479  , wrong type {ty
-00007db0: 7065 2863 7572 7229 7d22 0a20 2020 2020  pe(curr)}".     
-00007dc0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00007dd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007de0: 2062 6c6f 636b 732e 6170 7065 6e64 2863   blocks.append(c
-00007df0: 7572 722e 626c 6f63 6b29 0a20 2020 2020  urr.block).     
-00007e00: 2020 2020 2020 2020 2020 2069 6620 7365             if se
-00007e10: 6c66 2e62 6c6f 636b 6368 6169 6e2e 636f  lf.blockchain.co
-00007e20: 6e74 6169 6e73 5f62 6c6f 636b 2863 7572  ntains_block(cur
-00007e30: 722e 626c 6f63 6b2e 7072 6576 5f68 6561  r.block.prev_hea
-00007e40: 6465 725f 6861 7368 2920 6f72 2063 7572  der_hash) or cur
-00007e50: 725f 6865 6967 6874 203d 3d20 303a 0a20  r_height == 0:. 
-00007e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007e70: 2020 2066 6f75 6e64 5f66 6f72 6b5f 706f     found_fork_po
-00007e80: 696e 7420 3d20 5472 7565 0a20 2020 2020  int = True.     
-00007e90: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-00007ea0: 7265 616b 0a20 2020 2020 2020 2020 2020  reak.           
-00007eb0: 2020 2020 2063 7572 725f 6865 6967 6874       curr_height
-00007ec0: 202d 3d20 310a 2020 2020 2020 2020 2020   -= 1.          
-00007ed0: 2020 6966 2066 6f75 6e64 5f66 6f72 6b5f    if found_fork_
-00007ee0: 706f 696e 743a 0a20 2020 2020 2020 2020  point:.         
-00007ef0: 2020 2020 2020 2066 6f72 2062 6c6f 636b         for block
-00007f00: 2069 6e20 7265 7665 7273 6564 2862 6c6f   in reversed(blo
-00007f10: 636b 7329 3a0a 2020 2020 2020 2020 2020  cks):.          
-00007f20: 2020 2020 2020 2020 2020 6177 6169 7420            await 
-00007f30: 7365 6c66 2e61 6464 5f62 6c6f 636b 2862  self.add_block(b
-00007f40: 6c6f 636b 2c20 7065 6572 290a 2020 2020  lock, peer).    
-00007f50: 2020 2020 6578 6365 7074 2028 6173 796e      except (asyn
-00007f60: 6369 6f2e 4361 6e63 656c 6c65 6445 7272  cio.CancelledErr
-00007f70: 6f72 2c20 4578 6365 7074 696f 6e29 3a0a  or, Exception):.
-00007f80: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00007f90: 2e73 796e 635f 7374 6f72 652e 6465 6372  .sync_store.decr
-00007fa0: 656d 656e 745f 6261 636b 7472 6163 6b5f  ement_backtrack_
-00007fb0: 7379 6e63 696e 6728 6e6f 6465 5f69 643d  syncing(node_id=
-00007fc0: 7065 6572 2e70 6565 725f 6e6f 6465 5f69  peer.peer_node_i
-00007fd0: 6429 0a20 2020 2020 2020 2020 2020 2072  d).            r
-00007fe0: 6169 7365 0a0a 2020 2020 2020 2020 7365  aise..        se
-00007ff0: 6c66 2e73 796e 635f 7374 6f72 652e 6465  lf.sync_store.de
-00008000: 6372 656d 656e 745f 6261 636b 7472 6163  crement_backtrac
-00008010: 6b5f 7379 6e63 696e 6728 6e6f 6465 5f69  k_syncing(node_i
-00008020: 643d 7065 6572 2e70 6565 725f 6e6f 6465  d=peer.peer_node
-00008030: 5f69 6429 0a20 2020 2020 2020 2072 6574  _id).        ret
-00008040: 7572 6e20 666f 756e 645f 666f 726b 5f70  urn found_fork_p
-00008050: 6f69 6e74 0a0a 2020 2020 6173 796e 6320  oint..    async 
-00008060: 6465 6620 5f72 6566 7265 7368 5f75 695f  def _refresh_ui_
-00008070: 636f 6e6e 6563 7469 6f6e 7328 7365 6c66  connections(self
-00008080: 2c20 736c 6565 705f 6265 666f 7265 3a20  , sleep_before: 
-00008090: 666c 6f61 7420 3d20 3029 202d 3e20 4e6f  float = 0) -> No
-000080a0: 6e65 3a0a 2020 2020 2020 2020 6966 2073  ne:.        if s
-000080b0: 6c65 6570 5f62 6566 6f72 6520 3e20 303a  leep_before > 0:
-000080c0: 0a20 2020 2020 2020 2020 2020 2061 7761  .            awa
-000080d0: 6974 2061 7379 6e63 696f 2e73 6c65 6570  it asyncio.sleep
-000080e0: 2873 6c65 6570 5f62 6566 6f72 6529 0a20  (sleep_before). 
-000080f0: 2020 2020 2020 2073 656c 662e 5f73 7461         self._sta
-00008100: 7465 5f63 6861 6e67 6564 2822 7065 6572  te_changed("peer
-00008110: 5f63 6861 6e67 6564 5f70 6561 6b22 290a  _changed_peak").
-00008120: 0a20 2020 2061 7379 6e63 2064 6566 206e  .    async def n
-00008130: 6577 5f70 6561 6b28 7365 6c66 2c20 7265  ew_peak(self, re
-00008140: 7175 6573 743a 2066 756c 6c5f 6e6f 6465  quest: full_node
-00008150: 5f70 726f 746f 636f 6c2e 4e65 7750 6561  _protocol.NewPea
-00008160: 6b2c 2070 6565 723a 2057 5343 6869 6143  k, peer: WSChiaC
-00008170: 6f6e 6e65 6374 696f 6e29 202d 3e20 4e6f  onnection) -> No
-00008180: 6e65 3a0a 2020 2020 2020 2020 2222 220a  ne:.        """.
-00008190: 2020 2020 2020 2020 5765 2068 6176 6520          We have 
-000081a0: 7265 6365 6976 6564 2061 206e 6f74 6966  received a notif
-000081b0: 6963 6174 696f 6e20 6f66 2061 206e 6577  ication of a new
-000081c0: 2070 6561 6b20 6672 6f6d 2061 2070 6565   peak from a pee
-000081d0: 722e 2054 6869 7320 6861 7070 656e 7320  r. This happens 
-000081e0: 6569 7468 6572 2077 6865 6e20 7765 2068  either when we h
-000081f0: 6176 6520 6a75 7374 2063 6f6e 6e65 6374  ave just connect
-00008200: 6564 2c0a 2020 2020 2020 2020 6f72 2077  ed,.        or w
-00008210: 6865 6e20 7468 6520 7065 6572 2068 6173  hen the peer has
-00008220: 2075 7064 6174 6564 2074 6865 6972 2070   updated their p
-00008230: 6561 6b2e 0a0a 2020 2020 2020 2020 4172  eak...        Ar
-00008240: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
-00008250: 7265 7175 6573 743a 2069 6e66 6f72 6d61  request: informa
-00008260: 7469 6f6e 2061 626f 7574 2074 6865 206e  tion about the n
-00008270: 6577 2070 6561 6b0a 2020 2020 2020 2020  ew peak.        
-00008280: 2020 2020 7065 6572 3a20 7065 6572 2074      peer: peer t
-00008290: 6861 7420 7365 6e74 2074 6865 206d 6573  hat sent the mes
-000082a0: 7361 6765 0a0a 2020 2020 2020 2020 2222  sage..        ""
-000082b0: 220a 0a20 2020 2020 2020 2074 7279 3a0a  "..        try:.
-000082c0: 2020 2020 2020 2020 2020 2020 7365 656e              seen
-000082d0: 5f68 6561 6465 725f 6861 7368 203d 2073  _header_hash = s
-000082e0: 656c 662e 7379 6e63 5f73 746f 7265 2e73  elf.sync_store.s
-000082f0: 6565 6e5f 6865 6164 6572 5f68 6173 6828  een_header_hash(
-00008300: 7265 7175 6573 742e 6865 6164 6572 5f68  request.header_h
-00008310: 6173 6829 0a20 2020 2020 2020 2020 2020  ash).           
-00008320: 2023 2055 7064 6174 6573 2068 6569 6768   # Updates heigh
-00008330: 7473 2069 6e20 7468 6520 5549 2e20 536c  ts in the UI. Sl
-00008340: 6565 7073 2031 2e35 7320 6265 666f 7265  eeps 1.5s before
-00008350: 2c20 736f 206f 7468 6572 2070 6565 7273  , so other peers
-00008360: 2068 6176 6520 7469 6d65 2074 6f20 7570   have time to up
-00008370: 6461 7465 2074 6865 6972 2070 6561 6b73  date their peaks
-00008380: 2061 7320 7765 6c6c 2e0a 2020 2020 2020   as well..      
-00008390: 2020 2020 2020 2320 4c69 6d69 7420 746f        # Limit to
-000083a0: 2033 2072 6566 7265 7368 6573 2e0a 2020   3 refreshes..  
-000083b0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-000083c0: 2073 6565 6e5f 6865 6164 6572 5f68 6173   seen_header_has
-000083d0: 6820 616e 6420 6c65 6e28 7365 6c66 2e5f  h and len(self._
-000083e0: 7569 5f74 6173 6b73 2920 3c20 333a 0a20  ui_tasks) < 3:. 
-000083f0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00008400: 656c 662e 5f75 695f 7461 736b 732e 6164  elf._ui_tasks.ad
-00008410: 6428 6173 796e 6369 6f2e 6372 6561 7465  d(asyncio.create
-00008420: 5f74 6173 6b28 7365 6c66 2e5f 7265 6672  _task(self._refr
-00008430: 6573 685f 7569 5f63 6f6e 6e65 6374 696f  esh_ui_connectio
-00008440: 6e73 2831 2e35 2929 290a 2020 2020 2020  ns(1.5))).      
-00008450: 2020 2020 2020 2320 5072 756e 6520 636f        # Prune co
-00008460: 6d70 6c65 7465 6420 636f 6e6e 6563 7420  mpleted connect 
-00008470: 7461 736b 730a 2020 2020 2020 2020 2020  tasks.          
-00008480: 2020 7365 6c66 2e5f 7569 5f74 6173 6b73    self._ui_tasks
-00008490: 203d 2073 6574 2866 696c 7465 7228 6c61   = set(filter(la
-000084a0: 6d62 6461 2074 3a20 6e6f 7420 742e 646f  mbda t: not t.do
-000084b0: 6e65 2829 2c20 7365 6c66 2e5f 7569 5f74  ne(), self._ui_t
-000084c0: 6173 6b73 2929 0a20 2020 2020 2020 2065  asks)).        e
-000084d0: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
-000084e0: 6173 2065 3a0a 2020 2020 2020 2020 2020  as e:.          
-000084f0: 2020 7365 6c66 2e6c 6f67 2e77 6172 6e69    self.log.warni
-00008500: 6e67 2866 2245 7863 6570 7469 6f6e 2055  ng(f"Exception U
-00008510: 4920 7265 6672 6573 6820 7461 736b 3a20  I refresh task: 
-00008520: 7b65 7d22 290a 0a20 2020 2020 2020 2023  {e}")..        #
-00008530: 2053 746f 7265 2074 6869 7320 7065 616b   Store this peak
-00008540: 2f70 6565 7220 636f 6d62 696e 6174 696f  /peer combinatio
-00008550: 6e20 696e 2063 6173 6520 7765 2077 616e  n in case we wan
-00008560: 7420 746f 2073 796e 6320 746f 2069 742c  t to sync to it,
-00008570: 2061 6e64 2074 6f20 6b65 6570 2074 7261   and to keep tra
-00008580: 636b 206f 6620 7065 6572 730a 2020 2020  ck of peers.    
-00008590: 2020 2020 7365 6c66 2e73 796e 635f 7374      self.sync_st
-000085a0: 6f72 652e 7065 6572 5f68 6173 5f62 6c6f  ore.peer_has_blo
-000085b0: 636b 2872 6571 7565 7374 2e68 6561 6465  ck(request.heade
-000085c0: 725f 6861 7368 2c20 7065 6572 2e70 6565  r_hash, peer.pee
-000085d0: 725f 6e6f 6465 5f69 642c 2072 6571 7565  r_node_id, reque
-000085e0: 7374 2e77 6569 6768 742c 2072 6571 7565  st.weight, reque
-000085f0: 7374 2e68 6569 6768 742c 2054 7275 6529  st.height, True)
-00008600: 0a0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
-00008610: 662e 626c 6f63 6b63 6861 696e 2e63 6f6e  f.blockchain.con
-00008620: 7461 696e 735f 626c 6f63 6b28 7265 7175  tains_block(requ
-00008630: 6573 742e 6865 6164 6572 5f68 6173 6829  est.header_hash)
-00008640: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00008650: 7475 726e 204e 6f6e 650a 0a20 2020 2020  turn None..     
-00008660: 2020 2023 204e 6f74 2069 6e74 6572 6573     # Not interes
-00008670: 7465 6420 696e 206c 6573 7320 6865 6176  ted in less heav
-00008680: 7920 7065 616b 730a 2020 2020 2020 2020  y peaks.        
-00008690: 7065 616b 3a20 4f70 7469 6f6e 616c 5b42  peak: Optional[B
-000086a0: 6c6f 636b 5265 636f 7264 5d20 3d20 7365  lockRecord] = se
-000086b0: 6c66 2e62 6c6f 636b 6368 6169 6e2e 6765  lf.blockchain.ge
-000086c0: 745f 7065 616b 2829 0a20 2020 2020 2020  t_peak().       
-000086d0: 2063 7572 725f 7065 616b 5f68 6569 6768   curr_peak_heigh
-000086e0: 7420 3d20 7569 6e74 3332 2830 2920 6966  t = uint32(0) if
-000086f0: 2070 6561 6b20 6973 204e 6f6e 6520 656c   peak is None el
-00008700: 7365 2070 6561 6b2e 6865 6967 6874 0a20  se peak.height. 
-00008710: 2020 2020 2020 2069 6620 7065 616b 2069         if peak i
-00008720: 7320 6e6f 7420 4e6f 6e65 2061 6e64 2070  s not None and p
-00008730: 6561 6b2e 7765 6967 6874 203e 2072 6571  eak.weight > req
-00008740: 7565 7374 2e77 6569 6768 743a 0a20 2020  uest.weight:.   
-00008750: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00008760: 4e6f 6e65 0a0a 2020 2020 2020 2020 6966  None..        if
-00008770: 2073 656c 662e 7379 6e63 5f73 746f 7265   self.sync_store
-00008780: 2e67 6574 5f73 796e 635f 6d6f 6465 2829  .get_sync_mode()
-00008790: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
-000087a0: 4966 2070 6565 7220 636f 6e6e 6563 7473  If peer connects
-000087b0: 2077 6869 6c65 2077 6520 6172 6520 7379   while we are sy
-000087c0: 6e63 696e 672c 2063 6865 636b 2069 6620  ncing, check if 
-000087d0: 7468 6579 2068 6176 6520 7468 6520 626c  they have the bl
-000087e0: 6f63 6b20 7765 2061 7265 2073 796e 6369  ock we are synci
-000087f0: 6e67 2074 6f77 6172 6473 0a20 2020 2020  ng towards.     
-00008800: 2020 2020 2020 2074 6172 6765 745f 7065         target_pe
-00008810: 616b 203d 2073 656c 662e 7379 6e63 5f73  ak = self.sync_s
-00008820: 746f 7265 2e74 6172 6765 745f 7065 616b  tore.target_peak
-00008830: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00008840: 7461 7267 6574 5f70 6561 6b20 6973 206e  target_peak is n
-00008850: 6f74 204e 6f6e 6520 616e 6420 7265 7175  ot None and requ
-00008860: 6573 742e 6865 6164 6572 5f68 6173 6820  est.header_hash 
-00008870: 213d 2074 6172 6765 745f 7065 616b 2e68  != target_peak.h
-00008880: 6561 6465 725f 6861 7368 3a0a 2020 2020  eader_hash:.    
-00008890: 2020 2020 2020 2020 2020 2020 7065 616b              peak
-000088a0: 5f70 6565 7273 3a20 5365 745b 6279 7465  _peers: Set[byte
-000088b0: 7333 325d 203d 2073 656c 662e 7379 6e63  s32] = self.sync
-000088c0: 5f73 746f 7265 2e67 6574 5f70 6565 7273  _store.get_peers
-000088d0: 5f74 6861 745f 6861 7665 5f70 6561 6b28  _that_have_peak(
-000088e0: 5b74 6172 6765 745f 7065 616b 2e68 6561  [target_peak.hea
-000088f0: 6465 725f 6861 7368 5d29 0a20 2020 2020  der_hash]).     
-00008900: 2020 2020 2020 2020 2020 2023 2044 6f6e             # Don
-00008910: 2774 2061 736b 2069 6620 7765 2061 6c72  't ask if we alr
-00008920: 6561 6479 206b 6e6f 7720 7468 6973 2070  eady know this p
-00008930: 6565 7220 6861 7320 7468 6520 7065 616b  eer has the peak
-00008940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008950: 2069 6620 7065 6572 2e70 6565 725f 6e6f   if peer.peer_no
-00008960: 6465 5f69 6420 6e6f 7420 696e 2070 6561  de_id not in pea
-00008970: 6b5f 7065 6572 733a 0a20 2020 2020 2020  k_peers:.       
-00008980: 2020 2020 2020 2020 2020 2020 2074 6172               tar
-00008990: 6765 745f 7065 616b 5f72 6573 706f 6e73  get_peak_respons
-000089a0: 653a 204f 7074 696f 6e61 6c5b 5265 7370  e: Optional[Resp
-000089b0: 6f6e 6442 6c6f 636b 5d20 3d20 6177 6169  ondBlock] = awai
-000089c0: 7420 7065 6572 2e63 616c 6c5f 6170 6928  t peer.call_api(
-000089d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000089e0: 2020 2020 2020 2020 2046 756c 6c4e 6f64           FullNod
-000089f0: 6541 5049 2e72 6571 7565 7374 5f62 6c6f  eAPI.request_blo
-00008a00: 636b 2c0a 2020 2020 2020 2020 2020 2020  ck,.            
-00008a10: 2020 2020 2020 2020 2020 2020 6675 6c6c              full
-00008a20: 5f6e 6f64 655f 7072 6f74 6f63 6f6c 2e52  _node_protocol.R
-00008a30: 6571 7565 7374 426c 6f63 6b28 7461 7267  equestBlock(targ
-00008a40: 6574 5f70 6561 6b2e 6865 6967 6874 2c20  et_peak.height, 
-00008a50: 4661 6c73 6529 2c0a 2020 2020 2020 2020  False),.        
-00008a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008a70: 7469 6d65 6f75 743d 3130 2c0a 2020 2020  timeout=10,.    
-00008a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008a90: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00008aa0: 2020 2020 2020 6966 2074 6172 6765 745f        if target_
-00008ab0: 7065 616b 5f72 6573 706f 6e73 6520 6973  peak_response is
-00008ac0: 206e 6f74 204e 6f6e 6520 616e 6420 6973   not None and is
-00008ad0: 696e 7374 616e 6365 2874 6172 6765 745f  instance(target_
-00008ae0: 7065 616b 5f72 6573 706f 6e73 652c 2052  peak_response, R
-00008af0: 6573 706f 6e64 426c 6f63 6b29 3a0a 2020  espondBlock):.  
-00008b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008b10: 2020 2020 2020 7365 6c66 2e73 796e 635f        self.sync_
-00008b20: 7374 6f72 652e 7065 6572 5f68 6173 5f62  store.peer_has_b
-00008b30: 6c6f 636b 280a 2020 2020 2020 2020 2020  lock(.          
-00008b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008b50: 2020 7461 7267 6574 5f70 6561 6b2e 6865    target_peak.he
-00008b60: 6164 6572 5f68 6173 682c 0a20 2020 2020  ader_hash,.     
-00008b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008b80: 2020 2020 2020 2070 6565 722e 7065 6572         peer.peer
-00008b90: 5f6e 6f64 655f 6964 2c0a 2020 2020 2020  _node_id,.      
-00008ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008bb0: 2020 2020 2020 7461 7267 6574 5f70 6561        target_pea
-00008bc0: 6b5f 7265 7370 6f6e 7365 2e62 6c6f 636b  k_response.block
-00008bd0: 2e77 6569 6768 742c 0a20 2020 2020 2020  .weight,.       
-00008be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008bf0: 2020 2020 2074 6172 6765 745f 7065 616b       target_peak
-00008c00: 2e68 6569 6768 742c 0a20 2020 2020 2020  .height,.       
-00008c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008c20: 2020 2020 2046 616c 7365 2c0a 2020 2020       False,.    
-00008c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008c40: 2020 2020 290a 2020 2020 2020 2020 656c      ).        el
-00008c50: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00008c60: 6966 2028 0a20 2020 2020 2020 2020 2020  if (.           
-00008c70: 2020 2020 2063 7572 725f 7065 616b 5f68       curr_peak_h
-00008c80: 6569 6768 7420 3c3d 2072 6571 7565 7374  eight <= request
-00008c90: 2e68 6569 6768 740a 2020 2020 2020 2020  .height.        
-00008ca0: 2020 2020 2020 2020 616e 6420 7265 7175          and requ
-00008cb0: 6573 742e 6865 6967 6874 203c 3d20 6375  est.height <= cu
-00008cc0: 7272 5f70 6561 6b5f 6865 6967 6874 202b  rr_peak_height +
-00008cd0: 2073 656c 662e 636f 6e66 6967 5b22 7368   self.config["sh
-00008ce0: 6f72 745f 7379 6e63 5f62 6c6f 636b 735f  ort_sync_blocks_
-00008cf0: 6265 6869 6e64 5f74 6872 6573 686f 6c64  behind_threshold
-00008d00: 225d 0a20 2020 2020 2020 2020 2020 2029  "].            )
-00008d10: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00008d20: 2020 2320 5468 6973 2069 7320 7468 6520    # This is the 
-00008d30: 6e6f 726d 616c 2063 6173 6520 6f66 2072  normal case of r
-00008d40: 6563 6569 7669 6e67 2074 6865 206e 6578  eceiving the nex
-00008d50: 7420 626c 6f63 6b0a 2020 2020 2020 2020  t block.        
-00008d60: 2020 2020 2020 2020 6966 2061 7761 6974          if await
-00008d70: 2073 656c 662e 7368 6f72 745f 7379 6e63   self.short_sync
-00008d80: 5f62 6163 6b74 7261 636b 280a 2020 2020  _backtrack(.    
-00008d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008da0: 7065 6572 2c20 6375 7272 5f70 6561 6b5f  peer, curr_peak_
-00008db0: 6865 6967 6874 2c20 7265 7175 6573 742e  height, request.
-00008dc0: 6865 6967 6874 2c20 7265 7175 6573 742e  height, request.
-00008dd0: 756e 6669 6e69 7368 6564 5f72 6577 6172  unfinished_rewar
-00008de0: 645f 626c 6f63 6b5f 6861 7368 0a20 2020  d_block_hash.   
-00008df0: 2020 2020 2020 2020 2020 2020 2029 3a0a               ):.
-00008e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008e10: 2020 2020 7265 7475 726e 204e 6f6e 650a      return None.
-00008e20: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00008e30: 7265 7175 6573 742e 6865 6967 6874 203c  request.height <
-00008e40: 2073 656c 662e 636f 6e73 7461 6e74 732e   self.constants.
-00008e50: 5745 4947 4854 5f50 524f 4f46 5f52 4543  WEIGHT_PROOF_REC
-00008e60: 454e 545f 424c 4f43 4b53 3a0a 2020 2020  ENT_BLOCKS:.    
-00008e70: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
-00008e80: 6973 2069 7320 7468 6520 6361 7365 206f  is is the case o
-00008e90: 6620 7379 6e63 696e 6720 7570 206d 6f72  f syncing up mor
-00008ea0: 6520 7468 616e 2061 2066 6577 2062 6c6f  e than a few blo
-00008eb0: 636b 732c 2061 7420 7468 6520 7374 6172  cks, at the star
-00008ec0: 7420 6f66 2074 6865 2063 6861 696e 0a20  t of the chain. 
-00008ed0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00008ee0: 656c 662e 6c6f 672e 6465 6275 6728 2244  elf.log.debug("D
-00008ef0: 6f69 6e67 2062 6174 6368 2073 796e 632c  oing batch sync,
-00008f00: 206e 6f20 6261 636b 7570 2229 0a20 2020   no backup").   
-00008f10: 2020 2020 2020 2020 2020 2020 2061 7761               awa
-00008f20: 6974 2073 656c 662e 7368 6f72 745f 7379  it self.short_sy
-00008f30: 6e63 5f62 6174 6368 2870 6565 722c 2075  nc_batch(peer, u
-00008f40: 696e 7433 3228 3029 2c20 7265 7175 6573  int32(0), reques
-00008f50: 742e 6865 6967 6874 290a 2020 2020 2020  t.height).      
-00008f60: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00008f70: 204e 6f6e 650a 0a20 2020 2020 2020 2020   None..         
-00008f80: 2020 2069 6620 280a 2020 2020 2020 2020     if (.        
-00008f90: 2020 2020 2020 2020 6375 7272 5f70 6561          curr_pea
-00008fa0: 6b5f 6865 6967 6874 203c 3d20 7265 7175  k_height <= requ
-00008fb0: 6573 742e 6865 6967 6874 0a20 2020 2020  est.height.     
-00008fc0: 2020 2020 2020 2020 2020 2061 6e64 2072             and r
-00008fd0: 6571 7565 7374 2e68 6569 6768 7420 3c20  equest.height < 
-00008fe0: 6375 7272 5f70 6561 6b5f 6865 6967 6874  curr_peak_height
-00008ff0: 202b 2073 656c 662e 636f 6e66 6967 5b22   + self.config["
-00009000: 7379 6e63 5f62 6c6f 636b 735f 6265 6869  sync_blocks_behi
-00009010: 6e64 5f74 6872 6573 686f 6c64 225d 0a20  nd_threshold"]. 
-00009020: 2020 2020 2020 2020 2020 2029 3a0a 2020             ):.  
-00009030: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00009040: 5468 6973 2063 6173 6520 6f66 2062 6569  This case of bei
-00009050: 6e67 2062 6568 696e 6420 6275 7420 6e6f  ng behind but no
-00009060: 7420 6279 2073 6f20 6d75 6368 0a20 2020  t by so much.   
-00009070: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00009080: 6177 6169 7420 7365 6c66 2e73 686f 7274  await self.short
-00009090: 5f73 796e 635f 6261 7463 6828 7065 6572  _sync_batch(peer
-000090a0: 2c20 7569 6e74 3332 286d 6178 2863 7572  , uint32(max(cur
-000090b0: 725f 7065 616b 5f68 6569 6768 7420 2d20  r_peak_height - 
-000090c0: 362c 2030 2929 2c20 7265 7175 6573 742e  6, 0)), request.
-000090d0: 6865 6967 6874 293a 0a20 2020 2020 2020  height):.       
-000090e0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-000090f0: 7572 6e20 4e6f 6e65 0a0a 2020 2020 2020  urn None..      
-00009100: 2020 2020 2020 2320 5468 6973 2069 7320        # This is 
-00009110: 7468 6520 6569 7468 6572 2074 6865 2063  the either the c
-00009120: 6173 6520 7768 6572 6520 7765 2077 6572  ase where we wer
-00009130: 6520 6e6f 7420 6162 6c65 2074 6f20 7379  e not able to sy
-00009140: 6e63 2073 7563 6365 7373 6675 6c6c 7920  nc successfully 
-00009150: 2866 6f72 2065 7861 6d70 6c65 2c20 6475  (for example, du
-00009160: 6520 746f 2074 6865 2066 6f72 6b0a 2020  e to the fork.  
-00009170: 2020 2020 2020 2020 2020 2320 706f 696e            # poin
-00009180: 7420 6265 696e 6720 696e 2074 6865 2070  t being in the p
-00009190: 6173 7429 2c20 6f72 2077 6520 6172 6520  ast), or we are 
-000091a0: 7665 7279 2066 6172 2062 6568 696e 642e  very far behind.
-000091b0: 2050 6572 666f 726d 7320 6120 6c6f 6e67   Performs a long
-000091c0: 2073 796e 632e 0a20 2020 2020 2020 2020   sync..         
-000091d0: 2020 2073 656c 662e 5f73 796e 635f 7461     self._sync_ta
-000091e0: 736b 203d 2061 7379 6e63 696f 2e63 7265  sk = asyncio.cre
-000091f0: 6174 655f 7461 736b 2873 656c 662e 5f73  ate_task(self._s
-00009200: 796e 6328 2929 0a0a 2020 2020 6173 796e  ync())..    asyn
-00009210: 6320 6465 6620 7365 6e64 5f70 6561 6b5f  c def send_peak_
-00009220: 746f 5f74 696d 656c 6f72 6473 280a 2020  to_timelords(.  
-00009230: 2020 2020 2020 7365 6c66 2c20 7065 616b        self, peak
-00009240: 5f62 6c6f 636b 3a20 4f70 7469 6f6e 616c  _block: Optional
-00009250: 5b46 756c 6c42 6c6f 636b 5d20 3d20 4e6f  [FullBlock] = No
-00009260: 6e65 2c20 7065 6572 3a20 4f70 7469 6f6e  ne, peer: Option
-00009270: 616c 5b57 5343 6869 6143 6f6e 6e65 6374  al[WSChiaConnect
-00009280: 696f 6e5d 203d 204e 6f6e 650a 2020 2020  ion] = None.    
-00009290: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-000092a0: 2020 2022 2222 0a20 2020 2020 2020 2053     """.        S
-000092b0: 656e 6473 2063 7572 7265 6e74 2070 6561  ends current pea
-000092c0: 6b20 746f 2074 696d 656c 6f72 6473 0a20  k to timelords. 
-000092d0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-000092e0: 2020 2069 6620 7065 616b 5f62 6c6f 636b     if peak_block
-000092f0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-00009300: 2020 2020 2020 7065 616b 5f62 6c6f 636b        peak_block
-00009310: 203d 2061 7761 6974 2073 656c 662e 626c   = await self.bl
-00009320: 6f63 6b63 6861 696e 2e67 6574 5f66 756c  ockchain.get_ful
-00009330: 6c5f 7065 616b 2829 0a20 2020 2020 2020  l_peak().       
-00009340: 2069 6620 7065 616b 5f62 6c6f 636b 2069   if peak_block i
-00009350: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00009360: 2020 2020 2020 2020 7065 616b 203d 2073          peak = s
-00009370: 656c 662e 626c 6f63 6b63 6861 696e 2e62  elf.blockchain.b
-00009380: 6c6f 636b 5f72 6563 6f72 6428 7065 616b  lock_record(peak
-00009390: 5f62 6c6f 636b 2e68 6561 6465 725f 6861  _block.header_ha
-000093a0: 7368 290a 2020 2020 2020 2020 2020 2020  sh).            
-000093b0: 6469 6666 6963 756c 7479 203d 2073 656c  difficulty = sel
-000093c0: 662e 626c 6f63 6b63 6861 696e 2e67 6574  f.blockchain.get
-000093d0: 5f6e 6578 745f 6469 6666 6963 756c 7479  _next_difficulty
-000093e0: 2870 6561 6b2e 6865 6164 6572 5f68 6173  (peak.header_has
-000093f0: 682c 2046 616c 7365 290a 2020 2020 2020  h, False).      
-00009400: 2020 2020 2020 7365 733a 204f 7074 696f        ses: Optio
-00009410: 6e61 6c5b 5375 6245 706f 6368 5375 6d6d  nal[SubEpochSumm
-00009420: 6172 795d 203d 206e 6578 745f 7375 625f  ary] = next_sub_
-00009430: 6570 6f63 685f 7375 6d6d 6172 7928 0a20  epoch_summary(. 
-00009440: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00009450: 656c 662e 636f 6e73 7461 6e74 732c 0a20  elf.constants,. 
-00009460: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00009470: 656c 662e 626c 6f63 6b63 6861 696e 2c0a  elf.blockchain,.
-00009480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009490: 7065 616b 2e72 6571 7569 7265 645f 6974  peak.required_it
-000094a0: 6572 732c 0a20 2020 2020 2020 2020 2020  ers,.           
-000094b0: 2020 2020 2070 6561 6b5f 626c 6f63 6b2c       peak_block,
-000094c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000094d0: 2054 7275 652c 0a20 2020 2020 2020 2020   True,.         
-000094e0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-000094f0: 2072 6563 656e 745f 7263 203d 2073 656c   recent_rc = sel
-00009500: 662e 626c 6f63 6b63 6861 696e 2e67 6574  f.blockchain.get
-00009510: 5f72 6563 656e 745f 7265 7761 7264 5f63  _recent_reward_c
-00009520: 6861 6c6c 656e 6765 7328 290a 0a20 2020  hallenges()..   
-00009530: 2020 2020 2020 2020 2063 7572 7220 3d20           curr = 
-00009540: 7065 616b 0a20 2020 2020 2020 2020 2020  peak.           
-00009550: 2077 6869 6c65 206e 6f74 2063 7572 722e   while not curr.
-00009560: 6973 5f63 6861 6c6c 656e 6765 5f62 6c6f  is_challenge_blo
-00009570: 636b 2873 656c 662e 636f 6e73 7461 6e74  ck(self.constant
-00009580: 7329 2061 6e64 206e 6f74 2063 7572 722e  s) and not curr.
-00009590: 6669 7273 745f 696e 5f73 7562 5f73 6c6f  first_in_sub_slo
-000095a0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-000095b0: 2020 2063 7572 7220 3d20 7365 6c66 2e62     curr = self.b
-000095c0: 6c6f 636b 6368 6169 6e2e 626c 6f63 6b5f  lockchain.block_
-000095d0: 7265 636f 7264 2863 7572 722e 7072 6576  record(curr.prev
-000095e0: 5f68 6173 6829 0a0a 2020 2020 2020 2020  _hash)..        
-000095f0: 2020 2020 6966 2063 7572 722e 6973 5f63      if curr.is_c
-00009600: 6861 6c6c 656e 6765 5f62 6c6f 636b 2873  hallenge_block(s
-00009610: 656c 662e 636f 6e73 7461 6e74 7329 3a0a  elf.constants):.
-00009620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009630: 6c61 7374 5f63 7362 5f6f 725f 656f 7320  last_csb_or_eos 
-00009640: 3d20 6375 7272 2e74 6f74 616c 5f69 7465  = curr.total_ite
-00009650: 7273 0a20 2020 2020 2020 2020 2020 2065  rs.            e
-00009660: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00009670: 2020 2020 206c 6173 745f 6373 625f 6f72       last_csb_or
-00009680: 5f65 6f73 203d 2063 7572 722e 6970 5f73  _eos = curr.ip_s
-00009690: 7562 5f73 6c6f 745f 746f 7461 6c5f 6974  ub_slot_total_it
-000096a0: 6572 7328 7365 6c66 2e63 6f6e 7374 616e  ers(self.constan
-000096b0: 7473 290a 0a20 2020 2020 2020 2020 2020  ts)..           
-000096c0: 2063 7572 7220 3d20 7065 616b 0a20 2020   curr = peak.   
-000096d0: 2020 2020 2020 2020 2070 6173 7365 645f           passed_
-000096e0: 7365 735f 6865 6967 6874 5f62 7574 5f6e  ses_height_but_n
-000096f0: 6f74 5f79 6574 5f69 6e63 6c75 6465 6420  ot_yet_included 
-00009700: 3d20 5472 7565 0a20 2020 2020 2020 2020  = True.         
-00009710: 2020 2077 6869 6c65 2028 6375 7272 2e68     while (curr.h
-00009720: 6569 6768 7420 2520 7365 6c66 2e63 6f6e  eight % self.con
-00009730: 7374 616e 7473 2e53 5542 5f45 504f 4348  stants.SUB_EPOCH
-00009740: 5f42 4c4f 434b 5329 2021 3d20 303a 0a20  _BLOCKS) != 0:. 
-00009750: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00009760: 6620 6375 7272 2e73 7562 5f65 706f 6368  f curr.sub_epoch
-00009770: 5f73 756d 6d61 7279 5f69 6e63 6c75 6465  _summary_include
-00009780: 643a 0a20 2020 2020 2020 2020 2020 2020  d:.             
-00009790: 2020 2020 2020 2070 6173 7365 645f 7365         passed_se
-000097a0: 735f 6865 6967 6874 5f62 7574 5f6e 6f74  s_height_but_not
-000097b0: 5f79 6574 5f69 6e63 6c75 6465 6420 3d20  _yet_included = 
-000097c0: 4661 6c73 650a 2020 2020 2020 2020 2020  False.          
-000097d0: 2020 2020 2020 6375 7272 203d 2073 656c        curr = sel
-000097e0: 662e 626c 6f63 6b63 6861 696e 2e62 6c6f  f.blockchain.blo
-000097f0: 636b 5f72 6563 6f72 6428 6375 7272 2e70  ck_record(curr.p
-00009800: 7265 765f 6861 7368 290a 2020 2020 2020  rev_hash).      
-00009810: 2020 2020 2020 6966 2063 7572 722e 7375        if curr.su
-00009820: 625f 6570 6f63 685f 7375 6d6d 6172 795f  b_epoch_summary_
-00009830: 696e 636c 7564 6564 206f 7220 6375 7272  included or curr
-00009840: 2e68 6569 6768 7420 3d3d 2030 3a0a 2020  .height == 0:.  
-00009850: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-00009860: 7373 6564 5f73 6573 5f68 6569 6768 745f  ssed_ses_height_
-00009870: 6275 745f 6e6f 745f 7965 745f 696e 636c  but_not_yet_incl
-00009880: 7564 6564 203d 2046 616c 7365 0a0a 2020  uded = False..  
-00009890: 2020 2020 2020 2020 2020 7469 6d65 6c6f            timelo
-000098a0: 7264 5f6e 6577 5f70 6561 6b3a 2074 696d  rd_new_peak: tim
-000098b0: 656c 6f72 645f 7072 6f74 6f63 6f6c 2e4e  elord_protocol.N
-000098c0: 6577 5065 616b 5469 6d65 6c6f 7264 203d  ewPeakTimelord =
-000098d0: 2074 696d 656c 6f72 645f 7072 6f74 6f63   timelord_protoc
-000098e0: 6f6c 2e4e 6577 5065 616b 5469 6d65 6c6f  ol.NewPeakTimelo
-000098f0: 7264 280a 2020 2020 2020 2020 2020 2020  rd(.            
-00009900: 2020 2020 7065 616b 5f62 6c6f 636b 2e72      peak_block.r
-00009910: 6577 6172 645f 6368 6169 6e5f 626c 6f63  eward_chain_bloc
-00009920: 6b2c 0a20 2020 2020 2020 2020 2020 2020  k,.             
-00009930: 2020 2064 6966 6669 6375 6c74 792c 0a20     difficulty,. 
-00009940: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00009950: 6561 6b2e 6465 6669 6369 742c 0a20 2020  eak.deficit,.   
-00009960: 2020 2020 2020 2020 2020 2020 2070 6561               pea
-00009970: 6b2e 7375 625f 736c 6f74 5f69 7465 7273  k.sub_slot_iters
-00009980: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00009990: 2020 7365 732c 0a20 2020 2020 2020 2020    ses,.         
-000099a0: 2020 2020 2020 2072 6563 656e 745f 7263         recent_rc
-000099b0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000099c0: 2020 6c61 7374 5f63 7362 5f6f 725f 656f    last_csb_or_eo
-000099d0: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
-000099e0: 2020 2070 6173 7365 645f 7365 735f 6865     passed_ses_he
-000099f0: 6967 6874 5f62 7574 5f6e 6f74 5f79 6574  ight_but_not_yet
-00009a00: 5f69 6e63 6c75 6465 642c 0a20 2020 2020  _included,.     
-00009a10: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-00009a20: 2020 2020 2020 6d73 6720 3d20 6d61 6b65        msg = make
-00009a30: 5f6d 7367 2850 726f 746f 636f 6c4d 6573  _msg(ProtocolMes
-00009a40: 7361 6765 5479 7065 732e 6e65 775f 7065  sageTypes.new_pe
-00009a50: 616b 5f74 696d 656c 6f72 642c 2074 696d  ak_timelord, tim
-00009a60: 656c 6f72 645f 6e65 775f 7065 616b 290a  elord_new_peak).
-00009a70: 2020 2020 2020 2020 2020 2020 6966 2070              if p
-00009a80: 6565 7220 6973 204e 6f6e 653a 0a20 2020  eer is None:.   
-00009a90: 2020 2020 2020 2020 2020 2020 2061 7761               awa
-00009aa0: 6974 2073 656c 662e 7365 7276 6572 2e73  it self.server.s
-00009ab0: 656e 645f 746f 5f61 6c6c 285b 6d73 675d  end_to_all([msg]
-00009ac0: 2c20 4e6f 6465 5479 7065 2e54 494d 454c  , NodeType.TIMEL
-00009ad0: 4f52 4429 0a20 2020 2020 2020 2020 2020  ORD).           
-00009ae0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00009af0: 2020 2020 2020 2061 7761 6974 2073 656c         await sel
-00009b00: 662e 7365 7276 6572 2e73 656e 645f 746f  f.server.send_to
-00009b10: 5f73 7065 6369 6669 6328 5b6d 7367 5d2c  _specific([msg],
-00009b20: 2070 6565 722e 7065 6572 5f6e 6f64 655f   peer.peer_node_
-00009b30: 6964 290a 0a20 2020 2061 7379 6e63 2064  id)..    async d
-00009b40: 6566 2073 796e 6365 6428 7365 6c66 2c20  ef synced(self, 
-00009b50: 626c 6f63 6b5f 6973 5f63 7572 7265 6e74  block_is_current
-00009b60: 5f61 743a 204f 7074 696f 6e61 6c5b 7569  _at: Optional[ui
-00009b70: 6e74 3634 5d20 3d20 4e6f 6e65 2920 2d3e  nt64] = None) ->
-00009b80: 2062 6f6f 6c3a 0a20 2020 2020 2020 2069   bool:.        i
-00009b90: 6620 626c 6f63 6b5f 6973 5f63 7572 7265  f block_is_curre
-00009ba0: 6e74 5f61 7420 6973 204e 6f6e 653a 0a20  nt_at is None:. 
-00009bb0: 2020 2020 2020 2020 2020 2062 6c6f 636b             block
-00009bc0: 5f69 735f 6375 7272 656e 745f 6174 203d  _is_current_at =
-00009bd0: 2075 696e 7436 3428 696e 7428 7469 6d65   uint64(int(time
-00009be0: 2e74 696d 6528 2920 2d20 3630 202a 2037  .time() - 60 * 7
-00009bf0: 2929 0a20 2020 2020 2020 2069 6620 2273  )).        if "s
-00009c00: 696d 756c 6174 6f72 2220 696e 2073 7472  imulator" in str
-00009c10: 2873 656c 662e 636f 6e66 6967 2e67 6574  (self.config.get
-00009c20: 2822 7365 6c65 6374 6564 5f6e 6574 776f  ("selected_netwo
-00009c30: 726b 2229 293a 0a20 2020 2020 2020 2020  rk")):.         
-00009c40: 2020 2072 6574 7572 6e20 5472 7565 2020     return True  
-00009c50: 2320 7369 6d20 6973 2061 6c77 6179 7320  # sim is always 
-00009c60: 7379 6e63 6564 2062 6563 6175 7365 2069  synced because i
-00009c70: 7420 6861 7320 6e6f 2070 6565 7273 0a20  t has no peers. 
-00009c80: 2020 2020 2020 2063 7572 723a 204f 7074         curr: Opt
-00009c90: 696f 6e61 6c5b 426c 6f63 6b52 6563 6f72  ional[BlockRecor
-00009ca0: 645d 203d 2073 656c 662e 626c 6f63 6b63  d] = self.blockc
-00009cb0: 6861 696e 2e67 6574 5f70 6561 6b28 290a  hain.get_peak().
-00009cc0: 2020 2020 2020 2020 6966 2063 7572 7220          if curr 
-00009cd0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-00009ce0: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
-00009cf0: 650a 0a20 2020 2020 2020 2077 6869 6c65  e..        while
-00009d00: 2063 7572 7220 6973 206e 6f74 204e 6f6e   curr is not Non
-00009d10: 6520 616e 6420 6e6f 7420 6375 7272 2e69  e and not curr.i
-00009d20: 735f 7472 616e 7361 6374 696f 6e5f 626c  s_transaction_bl
-00009d30: 6f63 6b3a 0a20 2020 2020 2020 2020 2020  ock:.           
-00009d40: 2063 7572 7220 3d20 7365 6c66 2e62 6c6f   curr = self.blo
-00009d50: 636b 6368 6169 6e2e 7472 795f 626c 6f63  ckchain.try_bloc
-00009d60: 6b5f 7265 636f 7264 2863 7572 722e 7072  k_record(curr.pr
-00009d70: 6576 5f68 6173 6829 0a0a 2020 2020 2020  ev_hash)..      
-00009d80: 2020 6966 2028 0a20 2020 2020 2020 2020    if (.         
-00009d90: 2020 2063 7572 7220 6973 204e 6f6e 650a     curr is None.
-00009da0: 2020 2020 2020 2020 2020 2020 6f72 2063              or c
-00009db0: 7572 722e 7469 6d65 7374 616d 7020 6973  urr.timestamp is
-00009dc0: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-00009dd0: 2020 6f72 2063 7572 722e 7469 6d65 7374    or curr.timest
-00009de0: 616d 7020 3c20 626c 6f63 6b5f 6973 5f63  amp < block_is_c
-00009df0: 7572 7265 6e74 5f61 740a 2020 2020 2020  urrent_at.      
-00009e00: 2020 2020 2020 6f72 2073 656c 662e 7379        or self.sy
-00009e10: 6e63 5f73 746f 7265 2e67 6574 5f73 796e  nc_store.get_syn
-00009e20: 635f 6d6f 6465 2829 0a20 2020 2020 2020  c_mode().       
-00009e30: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
-00009e40: 7265 7475 726e 2046 616c 7365 0a20 2020  return False.   
-00009e50: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00009e60: 2020 2020 2020 2072 6574 7572 6e20 5472         return Tr
-00009e70: 7565 0a0a 2020 2020 6173 796e 6320 6465  ue..    async de
-00009e80: 6620 6f6e 5f63 6f6e 6e65 6374 2873 656c  f on_connect(sel
-00009e90: 662c 2063 6f6e 6e65 6374 696f 6e3a 2057  f, connection: W
-00009ea0: 5343 6869 6143 6f6e 6e65 6374 696f 6e29  SChiaConnection)
-00009eb0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-00009ec0: 2020 2222 220a 2020 2020 2020 2020 5768    """.        Wh
-00009ed0: 656e 6576 6572 2077 6520 636f 6e6e 6563  enever we connec
-00009ee0: 7420 746f 2061 6e6f 7468 6572 206e 6f64  t to another nod
-00009ef0: 6520 2f20 7761 6c6c 6574 2c20 7365 6e64  e / wallet, send
-00009f00: 2074 6865 6d20 6f75 7220 6375 7272 656e   them our curren
-00009f10: 7420 6865 6164 732e 2041 6c73 6f20 7365  t heads. Also se
-00009f20: 6e64 2068 6561 6473 2074 6f20 6661 726d  nd heads to farm
-00009f30: 6572 730a 2020 2020 2020 2020 616e 6420  ers.        and 
-00009f40: 6368 616c 6c65 6e67 6573 2074 6f20 7469  challenges to ti
-00009f50: 6d65 6c6f 7264 732e 0a20 2020 2020 2020  melords..       
-00009f60: 2022 2222 0a0a 2020 2020 2020 2020 7365   """..        se
-00009f70: 6c66 2e5f 7374 6174 655f 6368 616e 6765  lf._state_change
-00009f80: 6428 2261 6464 5f63 6f6e 6e65 6374 696f  d("add_connectio
-00009f90: 6e22 290a 2020 2020 2020 2020 7365 6c66  n").        self
-00009fa0: 2e5f 7374 6174 655f 6368 616e 6765 6428  ._state_changed(
-00009fb0: 2273 796e 635f 6d6f 6465 2229 0a20 2020  "sync_mode").   
-00009fc0: 2020 2020 2069 6620 7365 6c66 2e66 756c       if self.ful
-00009fd0: 6c5f 6e6f 6465 5f70 6565 7273 2069 7320  l_node_peers is 
-00009fe0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00009ff0: 2020 2020 2020 6173 796e 6369 6f2e 6372        asyncio.cr
-0000a000: 6561 7465 5f74 6173 6b28 7365 6c66 2e66  eate_task(self.f
-0000a010: 756c 6c5f 6e6f 6465 5f70 6565 7273 2e6f  ull_node_peers.o
-0000a020: 6e5f 636f 6e6e 6563 7428 636f 6e6e 6563  n_connect(connec
-0000a030: 7469 6f6e 2929 0a0a 2020 2020 2020 2020  tion))..        
-0000a040: 6966 2073 656c 662e 696e 6974 6961 6c69  if self.initiali
-0000a050: 7a65 6420 6973 2046 616c 7365 3a0a 2020  zed is False:.  
-0000a060: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0000a070: 204e 6f6e 650a 0a20 2020 2020 2020 2069   None..        i
-0000a080: 6620 636f 6e6e 6563 7469 6f6e 2e63 6f6e  f connection.con
-0000a090: 6e65 6374 696f 6e5f 7479 7065 2069 7320  nection_type is 
-0000a0a0: 4e6f 6465 5479 7065 2e46 554c 4c5f 4e4f  NodeType.FULL_NO
-0000a0b0: 4445 3a0a 2020 2020 2020 2020 2020 2020  DE:.            
-0000a0c0: 2320 5365 6e64 2066 696c 7465 7220 746f  # Send filter to
-0000a0d0: 206e 6f64 6520 616e 6420 7265 7175 6573   node and reques
-0000a0e0: 7420 6d65 6d70 6f6f 6c20 6974 656d 7320  t mempool items 
-0000a0f0: 7468 6174 2061 7265 206e 6f74 2069 6e20  that are not in 
-0000a100: 6974 2028 4f6e 6c79 2069 6620 7765 2061  it (Only if we a
-0000a110: 7265 2063 7572 7265 6e74 6c79 2073 796e  re currently syn
-0000a120: 6365 6429 0a20 2020 2020 2020 2020 2020  ced).           
-0000a130: 2073 796e 6365 6420 3d20 6177 6169 7420   synced = await 
-0000a140: 7365 6c66 2e73 796e 6365 6428 290a 2020  self.synced().  
-0000a150: 2020 2020 2020 2020 2020 7065 616b 5f68            peak_h
-0000a160: 6569 6768 7420 3d20 7365 6c66 2e62 6c6f  eight = self.blo
-0000a170: 636b 6368 6169 6e2e 6765 745f 7065 616b  ckchain.get_peak
-0000a180: 5f68 6569 6768 7428 290a 2020 2020 2020  _height().      
-0000a190: 2020 2020 2020 6966 2073 796e 6365 6420        if synced 
-0000a1a0: 616e 6420 7065 616b 5f68 6569 6768 7420  and peak_height 
-0000a1b0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000a1c0: 2020 2020 2020 2020 2020 2020 206d 795f               my_
-0000a1d0: 6669 6c74 6572 203d 2073 656c 662e 6d65  filter = self.me
-0000a1e0: 6d70 6f6f 6c5f 6d61 6e61 6765 722e 6765  mpool_manager.ge
-0000a1f0: 745f 6669 6c74 6572 2829 0a20 2020 2020  t_filter().     
-0000a200: 2020 2020 2020 2020 2020 206d 656d 706f             mempo
-0000a210: 6f6c 5f72 6571 7565 7374 203d 2066 756c  ol_request = ful
-0000a220: 6c5f 6e6f 6465 5f70 726f 746f 636f 6c2e  l_node_protocol.
-0000a230: 5265 7175 6573 744d 656d 706f 6f6c 5472  RequestMempoolTr
-0000a240: 616e 7361 6374 696f 6e73 286d 795f 6669  ansactions(my_fi
-0000a250: 6c74 6572 290a 0a20 2020 2020 2020 2020  lter)..         
-0000a260: 2020 2020 2020 206d 7367 203d 206d 616b         msg = mak
-0000a270: 655f 6d73 6728 5072 6f74 6f63 6f6c 4d65  e_msg(ProtocolMe
-0000a280: 7373 6167 6554 7970 6573 2e72 6571 7565  ssageTypes.reque
-0000a290: 7374 5f6d 656d 706f 6f6c 5f74 7261 6e73  st_mempool_trans
-0000a2a0: 6163 7469 6f6e 732c 206d 656d 706f 6f6c  actions, mempool
-0000a2b0: 5f72 6571 7565 7374 290a 2020 2020 2020  _request).      
-0000a2c0: 2020 2020 2020 2020 2020 6177 6169 7420            await 
-0000a2d0: 636f 6e6e 6563 7469 6f6e 2e73 656e 645f  connection.send_
-0000a2e0: 6d65 7373 6167 6528 6d73 6729 0a0a 2020  message(msg)..  
-0000a2f0: 2020 2020 2020 7065 616b 5f66 756c 6c3a        peak_full:
-0000a300: 204f 7074 696f 6e61 6c5b 4675 6c6c 426c   Optional[FullBl
-0000a310: 6f63 6b5d 203d 2061 7761 6974 2073 656c  ock] = await sel
-0000a320: 662e 626c 6f63 6b63 6861 696e 2e67 6574  f.blockchain.get
-0000a330: 5f66 756c 6c5f 7065 616b 2829 0a0a 2020  _full_peak()..  
-0000a340: 2020 2020 2020 6966 2070 6561 6b5f 6675        if peak_fu
-0000a350: 6c6c 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ll is not None:.
-0000a360: 2020 2020 2020 2020 2020 2020 7065 616b              peak
-0000a370: 3a20 426c 6f63 6b52 6563 6f72 6420 3d20  : BlockRecord = 
-0000a380: 7365 6c66 2e62 6c6f 636b 6368 6169 6e2e  self.blockchain.
-0000a390: 626c 6f63 6b5f 7265 636f 7264 2870 6561  block_record(pea
-0000a3a0: 6b5f 6675 6c6c 2e68 6561 6465 725f 6861  k_full.header_ha
-0000a3b0: 7368 290a 2020 2020 2020 2020 2020 2020  sh).            
-0000a3c0: 6966 2063 6f6e 6e65 6374 696f 6e2e 636f  if connection.co
-0000a3d0: 6e6e 6563 7469 6f6e 5f74 7970 6520 6973  nnection_type is
-0000a3e0: 204e 6f64 6554 7970 652e 4655 4c4c 5f4e   NodeType.FULL_N
-0000a3f0: 4f44 453a 0a20 2020 2020 2020 2020 2020  ODE:.           
-0000a400: 2020 2020 2072 6571 7565 7374 5f6e 6f64       request_nod
-0000a410: 6520 3d20 6675 6c6c 5f6e 6f64 655f 7072  e = full_node_pr
-0000a420: 6f74 6f63 6f6c 2e4e 6577 5065 616b 280a  otocol.NewPeak(.
-0000a430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a440: 2020 2020 7065 616b 2e68 6561 6465 725f      peak.header_
-0000a450: 6861 7368 2c0a 2020 2020 2020 2020 2020  hash,.          
-0000a460: 2020 2020 2020 2020 2020 7065 616b 2e68            peak.h
-0000a470: 6569 6768 742c 0a20 2020 2020 2020 2020  eight,.         
-0000a480: 2020 2020 2020 2020 2020 2070 6561 6b2e             peak.
-0000a490: 7765 6967 6874 2c0a 2020 2020 2020 2020  weight,.        
-0000a4a0: 2020 2020 2020 2020 2020 2020 7065 616b              peak
-0000a4b0: 2e68 6569 6768 742c 0a20 2020 2020 2020  .height,.       
-0000a4c0: 2020 2020 2020 2020 2020 2020 2070 6561               pea
-0000a4d0: 6b5f 6675 6c6c 2e72 6577 6172 645f 6368  k_full.reward_ch
-0000a4e0: 6169 6e5f 626c 6f63 6b2e 6765 745f 756e  ain_block.get_un
-0000a4f0: 6669 6e69 7368 6564 2829 2e67 6574 5f68  finished().get_h
-0000a500: 6173 6828 292c 0a20 2020 2020 2020 2020  ash(),.         
-0000a510: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0000a520: 2020 2020 2020 2020 2061 7761 6974 2063           await c
-0000a530: 6f6e 6e65 6374 696f 6e2e 7365 6e64 5f6d  onnection.send_m
-0000a540: 6573 7361 6765 286d 616b 655f 6d73 6728  essage(make_msg(
-0000a550: 5072 6f74 6f63 6f6c 4d65 7373 6167 6554  ProtocolMessageT
-0000a560: 7970 6573 2e6e 6577 5f70 6561 6b2c 2072  ypes.new_peak, r
-0000a570: 6571 7565 7374 5f6e 6f64 6529 290a 0a20  equest_node)).. 
-0000a580: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0000a590: 636f 6e6e 6563 7469 6f6e 2e63 6f6e 6e65  connection.conne
-0000a5a0: 6374 696f 6e5f 7479 7065 2069 7320 4e6f  ction_type is No
-0000a5b0: 6465 5479 7065 2e57 414c 4c45 543a 0a20  deType.WALLET:. 
-0000a5c0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000a5d0: 2049 6620 636f 6e6e 6563 7465 6420 746f   If connected to
-0000a5e0: 2061 2077 616c 6c65 742c 2073 656e 6420   a wallet, send 
-0000a5f0: 7468 6520 5065 616b 0a20 2020 2020 2020  the Peak.       
-0000a600: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0000a610: 5f77 616c 6c65 7420 3d20 7761 6c6c 6574  _wallet = wallet
-0000a620: 5f70 726f 746f 636f 6c2e 4e65 7750 6561  _protocol.NewPea
-0000a630: 6b57 616c 6c65 7428 0a20 2020 2020 2020  kWallet(.       
-0000a640: 2020 2020 2020 2020 2020 2020 2070 6561               pea
-0000a650: 6b2e 6865 6164 6572 5f68 6173 682c 0a20  k.header_hash,. 
-0000a660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a670: 2020 2070 6561 6b2e 6865 6967 6874 2c0a     peak.height,.
-0000a680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a690: 2020 2020 7065 616b 2e77 6569 6768 742c      peak.weight,
-0000a6a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a6b0: 2020 2020 2070 6561 6b2e 6865 6967 6874       peak.height
-0000a6c0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0000a6d0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-0000a6e0: 2020 2020 6177 6169 7420 636f 6e6e 6563      await connec
-0000a6f0: 7469 6f6e 2e73 656e 645f 6d65 7373 6167  tion.send_messag
-0000a700: 6528 6d61 6b65 5f6d 7367 2850 726f 746f  e(make_msg(Proto
-0000a710: 636f 6c4d 6573 7361 6765 5479 7065 732e  colMessageTypes.
-0000a720: 6e65 775f 7065 616b 5f77 616c 6c65 742c  new_peak_wallet,
-0000a730: 2072 6571 7565 7374 5f77 616c 6c65 7429   request_wallet)
-0000a740: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-0000a750: 6966 2063 6f6e 6e65 6374 696f 6e2e 636f  if connection.co
-0000a760: 6e6e 6563 7469 6f6e 5f74 7970 6520 6973  nnection_type is
-0000a770: 204e 6f64 6554 7970 652e 5449 4d45 4c4f   NodeType.TIMELO
-0000a780: 5244 3a0a 2020 2020 2020 2020 2020 2020  RD:.            
-0000a790: 2020 2020 6177 6169 7420 7365 6c66 2e73      await self.s
-0000a7a0: 656e 645f 7065 616b 5f74 6f5f 7469 6d65  end_peak_to_time
-0000a7b0: 6c6f 7264 7328 290a 0a20 2020 2061 7379  lords()..    asy
-0000a7c0: 6e63 2064 6566 206f 6e5f 6469 7363 6f6e  nc def on_discon
-0000a7d0: 6e65 6374 2873 656c 662c 2063 6f6e 6e65  nect(self, conne
-0000a7e0: 6374 696f 6e3a 2057 5343 6869 6143 6f6e  ction: WSChiaCon
-0000a7f0: 6e65 6374 696f 6e29 202d 3e20 4e6f 6e65  nection) -> None
-0000a800: 3a0a 2020 2020 2020 2020 7365 6c66 2e6c  :.        self.l
-0000a810: 6f67 2e69 6e66 6f28 6622 7065 6572 2064  og.info(f"peer d
-0000a820: 6973 636f 6e6e 6563 7465 6420 7b63 6f6e  isconnected {con
-0000a830: 6e65 6374 696f 6e2e 6765 745f 7065 6572  nection.get_peer
-0000a840: 5f6c 6f67 6769 6e67 2829 7d22 290a 2020  _logging()}").  
-0000a850: 2020 2020 2020 7365 6c66 2e5f 7374 6174        self._stat
-0000a860: 655f 6368 616e 6765 6428 2263 6c6f 7365  e_changed("close
-0000a870: 5f63 6f6e 6e65 6374 696f 6e22 290a 2020  _connection").  
-0000a880: 2020 2020 2020 7365 6c66 2e5f 7374 6174        self._stat
-0000a890: 655f 6368 616e 6765 6428 2273 796e 635f  e_changed("sync_
-0000a8a0: 6d6f 6465 2229 0a20 2020 2020 2020 2069  mode").        i
-0000a8b0: 6620 7365 6c66 2e73 796e 635f 7374 6f72  f self.sync_stor
-0000a8c0: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
-0000a8d0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000a8e0: 7379 6e63 5f73 746f 7265 2e70 6565 725f  sync_store.peer_
-0000a8f0: 6469 7363 6f6e 6e65 6374 6564 2863 6f6e  disconnected(con
-0000a900: 6e65 6374 696f 6e2e 7065 6572 5f6e 6f64  nection.peer_nod
-0000a910: 655f 6964 290a 2020 2020 2020 2020 2320  e_id).        # 
-0000a920: 5265 6d6f 7665 2061 6c6c 2070 6820 7c20  Remove all ph | 
-0000a930: 636f 696e 2069 6420 7375 6273 6372 6970  coin id subscrip
-0000a940: 7469 6f6e 2066 6f72 2074 6869 7320 7065  tion for this pe
-0000a950: 6572 0a20 2020 2020 2020 2073 656c 662e  er.        self.
-0000a960: 7375 6273 6372 6970 7469 6f6e 732e 7265  subscriptions.re
-0000a970: 6d6f 7665 5f70 6565 7228 636f 6e6e 6563  move_peer(connec
-0000a980: 7469 6f6e 2e70 6565 725f 6e6f 6465 5f69  tion.peer_node_i
-0000a990: 6429 0a0a 2020 2020 6173 796e 6320 6465  d)..    async de
-0000a9a0: 6620 5f73 796e 6328 7365 6c66 2920 2d3e  f _sync(self) ->
-0000a9b0: 204e 6f6e 653a 0a20 2020 2020 2020 2022   None:.        "
-0000a9c0: 2222 0a20 2020 2020 2020 2050 6572 666f  "".        Perfo
-0000a9d0: 726d 7320 6120 6675 6c6c 2073 796e 6320  rms a full sync 
-0000a9e0: 6f66 2074 6865 2062 6c6f 636b 6368 6169  of the blockchai
-0000a9f0: 6e20 7570 2074 6f20 7468 6520 7065 616b  n up to the peak
-0000aa00: 2e0a 2020 2020 2020 2020 2020 2020 2d20  ..            - 
-0000aa10: 5761 6974 2061 2066 6577 2073 6563 6f6e  Wait a few secon
-0000aa20: 6473 2066 6f72 2070 6565 7273 2074 6f20  ds for peers to 
-0000aa30: 7365 6e64 2075 7320 7468 6569 7220 7065  send us their pe
-0000aa40: 616b 730a 2020 2020 2020 2020 2020 2020  aks.            
-0000aa50: 2d20 5365 6c65 6374 2074 6865 2068 6561  - Select the hea
-0000aa60: 7669 6573 7420 7065 616b 2c20 616e 6420  viest peak, and 
-0000aa70: 7265 7175 6573 7420 6120 7765 6967 6874  request a weight
-0000aa80: 2070 726f 6f66 2066 726f 6d20 6120 7065   proof from a pe
-0000aa90: 6572 2077 6974 6820 7468 6174 2070 6561  er with that pea
-0000aaa0: 6b0a 2020 2020 2020 2020 2020 2020 2d20  k.            - 
-0000aab0: 5661 6c69 6461 7465 2074 6865 2077 6569  Validate the wei
-0000aac0: 6768 7420 7072 6f6f 662c 2061 6e64 2064  ght proof, and d
-0000aad0: 6973 636f 6e6e 6563 7420 6672 6f6d 2074  isconnect from t
-0000aae0: 6865 2070 6565 7220 6966 2069 6e76 616c  he peer if inval
-0000aaf0: 6964 0a20 2020 2020 2020 2020 2020 202d  id.            -
-0000ab00: 2046 696e 6420 7468 6520 666f 726b 2070   Find the fork p
-0000ab10: 6f69 6e74 2074 6f20 7365 6520 7768 6572  oint to see wher
-0000ab20: 6520 746f 2073 7461 7274 2064 6f77 6e6c  e to start downl
-0000ab30: 6f61 6469 6e67 2062 6c6f 636b 730a 2020  oading blocks.  
-0000ab40: 2020 2020 2020 2020 2020 2d20 446f 776e            - Down
-0000ab50: 6c6f 6164 2062 6c6f 636b 7320 696e 2062  load blocks in b
-0000ab60: 6174 6368 2028 616e 6420 696e 2070 6172  atch (and in par
-0000ab70: 616c 6c65 6c29 2061 6e64 2076 6572 6966  allel) and verif
-0000ab80: 7920 7468 656d 206f 6e65 2061 7420 6120  y them one at a 
-0000ab90: 7469 6d65 0a20 2020 2020 2020 2020 2020  time.           
-0000aba0: 202d 2044 6973 636f 6e6e 6563 7420 7065   - Disconnect pe
-0000abb0: 6572 7320 7468 6174 2070 726f 7669 6465  ers that provide
-0000abc0: 2069 6e76 616c 6964 2062 6c6f 636b 7320   invalid blocks 
-0000abd0: 6f72 2064 6f6e 2774 2068 6176 6520 7468  or don't have th
-0000abe0: 6520 626c 6f63 6b73 0a20 2020 2020 2020  e blocks.       
-0000abf0: 2022 2222 0a20 2020 2020 2020 2023 2045   """.        # E
-0000ac00: 6e73 7572 6520 7765 2061 7265 206f 6e6c  nsure we are onl
-0000ac10: 7920 7379 6e63 696e 6720 6f6e 6365 2061  y syncing once a
-0000ac20: 6e64 206e 6f74 2064 6f75 626c 6520 6361  nd not double ca
-0000ac30: 6c6c 696e 6720 7468 6973 206d 6574 686f  lling this metho
-0000ac40: 640a 2020 2020 2020 2020 6966 2073 656c  d.        if sel
-0000ac50: 662e 7379 6e63 5f73 746f 7265 2e67 6574  f.sync_store.get
-0000ac60: 5f73 796e 635f 6d6f 6465 2829 3a0a 2020  _sync_mode():.  
-0000ac70: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0000ac80: 204e 6f6e 650a 0a20 2020 2020 2020 2069   None..        i
-0000ac90: 6620 7365 6c66 2e73 796e 635f 7374 6f72  f self.sync_stor
-0000aca0: 652e 6765 745f 6c6f 6e67 5f73 796e 6328  e.get_long_sync(
-0000acb0: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
-0000acc0: 656c 662e 6c6f 672e 6465 6275 6728 2261  elf.log.debug("a
-0000acd0: 6c72 6561 6479 2069 6e20 6c6f 6e67 2073  lready in long s
-0000ace0: 796e 6322 290a 2020 2020 2020 2020 2020  ync").          
-0000acf0: 2020 7265 7475 726e 204e 6f6e 650a 0a20    return None.. 
-0000ad00: 2020 2020 2020 2073 656c 662e 7379 6e63         self.sync
-0000ad10: 5f73 746f 7265 2e73 6574 5f6c 6f6e 675f  _store.set_long_
-0000ad20: 7379 6e63 2854 7275 6529 0a20 2020 2020  sync(True).     
-0000ad30: 2020 2073 656c 662e 6c6f 672e 6465 6275     self.log.debu
-0000ad40: 6728 226c 6f6e 6720 7379 6e63 2073 7461  g("long sync sta
-0000ad50: 7274 6564 2229 0a20 2020 2020 2020 2074  rted").        t
-0000ad60: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-0000ad70: 7365 6c66 2e6c 6f67 2e69 6e66 6f28 2253  self.log.info("S
-0000ad80: 7461 7274 696e 6720 746f 2070 6572 666f  tarting to perfo
-0000ad90: 726d 2073 796e 632e 2229 0a0a 2020 2020  rm sync.")..    
-0000ada0: 2020 2020 2020 2020 2320 5761 6974 2075          # Wait u
-0000adb0: 6e74 696c 2077 6520 6861 7665 2033 2070  ntil we have 3 p
-0000adc0: 6561 6b73 206f 7220 7570 2074 6f20 6120  eaks or up to a 
-0000add0: 6d61 7820 6f66 2033 3020 7365 636f 6e64  max of 30 second
-0000ade0: 730a 2020 2020 2020 2020 2020 2020 6d61  s.            ma
-0000adf0: 785f 6974 6572 6174 696f 6e73 203d 2069  x_iterations = i
-0000ae00: 6e74 2873 656c 662e 636f 6e66 6967 2e67  nt(self.config.g
-0000ae10: 6574 2822 6d61 785f 7379 6e63 5f77 6169  et("max_sync_wai
-0000ae20: 7422 2c20 3330 2929 202a 2031 300a 0a20  t", 30)) * 10.. 
-0000ae30: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000ae40: 6c6f 672e 696e 666f 2866 2257 6169 7469  log.info(f"Waiti
-0000ae50: 6e67 2074 6f20 7265 6365 6976 6520 7065  ng to receive pe
-0000ae60: 616b 7320 6672 6f6d 2070 6565 7273 2e20  aks from peers. 
-0000ae70: 2874 696d 656f 7574 3a20 7b6d 6178 5f69  (timeout: {max_i
-0000ae80: 7465 7261 7469 6f6e 732f 3130 7d73 2922  terations/10}s)"
-0000ae90: 290a 2020 2020 2020 2020 2020 2020 7065  ).            pe
-0000aea0: 616b 7320 3d20 5b5d 0a20 2020 2020 2020  aks = [].       
-0000aeb0: 2020 2020 2066 6f72 2069 2069 6e20 7261       for i in ra
-0000aec0: 6e67 6528 6d61 785f 6974 6572 6174 696f  nge(max_iteratio
-0000aed0: 6e73 293a 0a20 2020 2020 2020 2020 2020  ns):.           
-0000aee0: 2020 2020 2070 6561 6b73 203d 205b 7065       peaks = [pe
-0000aef0: 616b 2e68 6561 6465 725f 6861 7368 2066  ak.header_hash f
-0000af00: 6f72 2070 6561 6b20 696e 2073 656c 662e  or peak in self.
-0000af10: 7379 6e63 5f73 746f 7265 2e67 6574 5f70  sync_store.get_p
-0000af20: 6561 6b5f 6f66 5f65 6163 685f 7065 6572  eak_of_each_peer
-0000af30: 2829 2e76 616c 7565 7328 295d 0a20 2020  ().values()].   
-0000af40: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000af50: 6c65 6e28 7365 6c66 2e73 796e 635f 7374  len(self.sync_st
-0000af60: 6f72 652e 6765 745f 7065 6572 735f 7468  ore.get_peers_th
-0000af70: 6174 5f68 6176 655f 7065 616b 2870 6561  at_have_peak(pea
-0000af80: 6b73 2929 203c 2033 3a0a 2020 2020 2020  ks)) < 3:.      
-0000af90: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0000afa0: 2073 656c 662e 5f73 6875 745f 646f 776e   self._shut_down
-0000afb0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000afc0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0000afd0: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-0000afe0: 2020 2020 2020 2020 2020 6177 6169 7420            await 
-0000aff0: 6173 796e 6369 6f2e 736c 6565 7028 302e  asyncio.sleep(0.
-0000b000: 3129 0a20 2020 2020 2020 2020 2020 2020  1).             
-0000b010: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
-0000b020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b030: 6272 6561 6b0a 0a20 2020 2020 2020 2020  break..         
-0000b040: 2020 2073 656c 662e 6c6f 672e 696e 666f     self.log.info
-0000b050: 2866 2243 6f6c 6c65 6374 6564 2061 2074  (f"Collected a t
-0000b060: 6f74 616c 206f 6620 7b6c 656e 2870 6561  otal of {len(pea
-0000b070: 6b73 297d 2070 6561 6b73 2e22 290a 0a20  ks)} peaks.").. 
-0000b080: 2020 2020 2020 2020 2020 2023 2042 6173             # Bas
-0000b090: 6564 206f 6e20 7265 7370 6f6e 7365 7320  ed on responses 
-0000b0a0: 6672 6f6d 2070 6565 7273 2061 626f 7574  from peers about
-0000b0b0: 2074 6865 2063 7572 7265 6e74 2070 6561   the current pea
-0000b0c0: 6b73 2c20 7365 6520 7768 6963 6820 7065  ks, see which pe
-0000b0d0: 616b 2069 7320 7468 6520 6865 6176 6965  ak is the heavie
-0000b0e0: 7374 0a20 2020 2020 2020 2020 2020 2023  st.            #
-0000b0f0: 2028 7369 6d69 6c61 7220 746f 206c 6f6e   (similar to lon
-0000b100: 6765 7374 2063 6861 696e 2072 756c 6529  gest chain rule)
-0000b110: 2e0a 2020 2020 2020 2020 2020 2020 7461  ..            ta
-0000b120: 7267 6574 5f70 6561 6b20 3d20 7365 6c66  rget_peak = self
-0000b130: 2e73 796e 635f 7374 6f72 652e 6765 745f  .sync_store.get_
-0000b140: 6865 6176 6965 7374 5f70 6561 6b28 290a  heaviest_peak().
-0000b150: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000b160: 7461 7267 6574 5f70 6561 6b20 6973 204e  target_peak is N
-0000b170: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0000b180: 2020 2020 2072 6169 7365 2052 756e 7469       raise Runti
-0000b190: 6d65 4572 726f 7228 224e 6f74 2070 6572  meError("Not per
-0000b1a0: 666f 726d 696e 6720 7379 6e63 2c20 6e6f  forming sync, no
-0000b1b0: 2070 6561 6b73 2063 6f6c 6c65 6374 6564   peaks collected
-0000b1c0: 2229 0a0a 2020 2020 2020 2020 2020 2020  ")..            
-0000b1d0: 7365 6c66 2e73 796e 635f 7374 6f72 652e  self.sync_store.
-0000b1e0: 7461 7267 6574 5f70 6561 6b20 3d20 7461  target_peak = ta
-0000b1f0: 7267 6574 5f70 6561 6b0a 0a20 2020 2020  rget_peak..     
-0000b200: 2020 2020 2020 2073 656c 662e 6c6f 672e         self.log.
-0000b210: 696e 666f 2866 2253 656c 6563 7465 6420  info(f"Selected 
-0000b220: 7065 616b 207b 7461 7267 6574 5f70 6561  peak {target_pea
-0000b230: 6b7d 2229 0a20 2020 2020 2020 2020 2020  k}").           
-0000b240: 2023 2043 6865 636b 2077 6869 6368 2070   # Check which p
-0000b250: 6565 7273 2061 7265 2075 7064 6174 6564  eers are updated
-0000b260: 2074 6f20 7468 6973 2068 6569 6768 740a   to this height.
-0000b270: 0a20 2020 2020 2020 2020 2020 2070 6565  .            pee
-0000b280: 7273 203d 2073 656c 662e 7365 7276 6572  rs = self.server
-0000b290: 2e67 6574 5f63 6f6e 6e65 6374 696f 6e73  .get_connections
-0000b2a0: 284e 6f64 6554 7970 652e 4655 4c4c 5f4e  (NodeType.FULL_N
-0000b2b0: 4f44 4529 0a20 2020 2020 2020 2020 2020  ODE).           
-0000b2c0: 2063 6f72 6f75 7469 6e65 7320 3d20 5b5d   coroutines = []
-0000b2d0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-0000b2e0: 2070 6565 7220 696e 2070 6565 7273 3a0a   peer in peers:.
-0000b2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b300: 636f 726f 7574 696e 6573 2e61 7070 656e  coroutines.appen
-0000b310: 6428 0a20 2020 2020 2020 2020 2020 2020  d(.             
-0000b320: 2020 2020 2020 2070 6565 722e 6361 6c6c         peer.call
-0000b330: 5f61 7069 280a 2020 2020 2020 2020 2020  _api(.          
-0000b340: 2020 2020 2020 2020 2020 2020 2020 4675                Fu
-0000b350: 6c6c 4e6f 6465 4150 492e 7265 7175 6573  llNodeAPI.reques
-0000b360: 745f 626c 6f63 6b2c 0a20 2020 2020 2020  t_block,.       
-0000b370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b380: 2066 756c 6c5f 6e6f 6465 5f70 726f 746f   full_node_proto
-0000b390: 636f 6c2e 5265 7175 6573 7442 6c6f 636b  col.RequestBlock
-0000b3a0: 2874 6172 6765 745f 7065 616b 2e68 6569  (target_peak.hei
-0000b3b0: 6768 742c 2054 7275 6529 2c0a 2020 2020  ght, True),.    
-0000b3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b3d0: 2020 2020 7469 6d65 6f75 743d 3130 2c0a      timeout=10,.
-0000b3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b3f0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-0000b400: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0000b410: 2020 2020 666f 7220 692c 2074 6172 6765      for i, targe
-0000b420: 745f 7065 616b 5f72 6573 706f 6e73 6520  t_peak_response 
-0000b430: 696e 2065 6e75 6d65 7261 7465 2861 7761  in enumerate(awa
-0000b440: 6974 2061 7379 6e63 696f 2e67 6174 6865  it asyncio.gathe
-0000b450: 7228 2a63 6f72 6f75 7469 6e65 7329 293a  r(*coroutines)):
-0000b460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b470: 2069 6620 7461 7267 6574 5f70 6561 6b5f   if target_peak_
-0000b480: 7265 7370 6f6e 7365 2069 7320 6e6f 7420  response is not 
-0000b490: 4e6f 6e65 2061 6e64 2069 7369 6e73 7461  None and isinsta
-0000b4a0: 6e63 6528 7461 7267 6574 5f70 6561 6b5f  nce(target_peak_
-0000b4b0: 7265 7370 6f6e 7365 2c20 5265 7370 6f6e  response, Respon
-0000b4c0: 6442 6c6f 636b 293a 0a20 2020 2020 2020  dBlock):.       
-0000b4d0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0000b4e0: 662e 7379 6e63 5f73 746f 7265 2e70 6565  f.sync_store.pee
-0000b4f0: 725f 6861 735f 626c 6f63 6b28 0a20 2020  r_has_block(.   
-0000b500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b510: 2020 2020 2074 6172 6765 745f 7065 616b       target_peak
-0000b520: 2e68 6561 6465 725f 6861 7368 2c20 7065  .header_hash, pe
-0000b530: 6572 735b 695d 2e70 6565 725f 6e6f 6465  ers[i].peer_node
-0000b540: 5f69 642c 2074 6172 6765 745f 7065 616b  _id, target_peak
-0000b550: 2e77 6569 6768 742c 2074 6172 6765 745f  .weight, target_
-0000b560: 7065 616b 2e68 6569 6768 742c 2046 616c  peak.height, Fal
-0000b570: 7365 0a20 2020 2020 2020 2020 2020 2020  se.             
-0000b580: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0000b590: 2020 2020 2023 2054 4f44 4f3a 2064 6973       # TODO: dis
-0000b5a0: 636f 6e6e 6563 7420 6672 6f6d 2070 6565  connect from pee
-0000b5b0: 7220 7768 6963 6820 6761 7665 2075 7320  r which gave us 
-0000b5c0: 7468 6520 6865 6176 6965 7374 5f70 6561  the heaviest_pea
-0000b5d0: 6b2c 2069 6620 6e6f 626f 6479 2068 6173  k, if nobody has
-0000b5e0: 2074 6865 2070 6561 6b0a 2020 2020 2020   the peak.      
-0000b5f0: 2020 2020 2020 666f 726b 5f70 6f69 6e74        fork_point
-0000b600: 2c20 7375 6d6d 6172 6965 7320 3d20 6177  , summaries = aw
-0000b610: 6169 7420 7365 6c66 2e72 6571 7565 7374  ait self.request
-0000b620: 5f76 616c 6964 6174 655f 7770 280a 2020  _validate_wp(.  
-0000b630: 2020 2020 2020 2020 2020 2020 2020 7461                ta
-0000b640: 7267 6574 5f70 6561 6b2e 6865 6164 6572  rget_peak.header
-0000b650: 5f68 6173 682c 2074 6172 6765 745f 7065  _hash, target_pe
-0000b660: 616b 2e68 6569 6768 742c 2074 6172 6765  ak.height, targe
-0000b670: 745f 7065 616b 2e77 6569 6768 740a 2020  t_peak.weight.  
-0000b680: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-0000b690: 2020 2020 2020 2020 2320 456e 7375 7265          # Ensure
-0000b6a0: 7320 7468 6174 2074 6865 2066 6f72 6b20  s that the fork 
-0000b6b0: 706f 696e 7420 646f 6573 206e 6f74 2063  point does not c
-0000b6c0: 6861 6e67 650a 2020 2020 2020 2020 2020  hange.          
-0000b6d0: 2020 6173 796e 6320 7769 7468 2073 656c    async with sel
-0000b6e0: 662e 626c 6f63 6b63 6861 696e 2e70 7269  f.blockchain.pri
-0000b6f0: 6f72 6974 795f 6d75 7465 782e 6163 7175  ority_mutex.acqu
-0000b700: 6972 6528 7072 696f 7269 7479 3d42 6c6f  ire(priority=Blo
-0000b710: 636b 6368 6169 6e4d 7574 6578 5072 696f  ckchainMutexPrio
-0000b720: 7269 7479 2e68 6967 6829 3a0a 2020 2020  rity.high):.    
-0000b730: 2020 2020 2020 2020 2020 2020 6177 6169              awai
-0000b740: 7420 7365 6c66 2e62 6c6f 636b 6368 6169  t self.blockchai
-0000b750: 6e2e 7761 726d 7570 2866 6f72 6b5f 706f  n.warmup(fork_po
-0000b760: 696e 7429 0a20 2020 2020 2020 2020 2020  int).           
-0000b770: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
-0000b780: 7379 6e63 5f66 726f 6d5f 666f 726b 5f70  sync_from_fork_p
-0000b790: 6f69 6e74 2866 6f72 6b5f 706f 696e 742c  oint(fork_point,
-0000b7a0: 2074 6172 6765 745f 7065 616b 2e68 6569   target_peak.hei
-0000b7b0: 6768 742c 2074 6172 6765 745f 7065 616b  ght, target_peak
-0000b7c0: 2e68 6561 6465 725f 6861 7368 2c20 7375  .header_hash, su
-0000b7d0: 6d6d 6172 6965 7329 0a20 2020 2020 2020  mmaries).       
-0000b7e0: 2065 7863 6570 7420 6173 796e 6369 6f2e   except asyncio.
-0000b7f0: 4361 6e63 656c 6c65 6445 7272 6f72 3a0a  CancelledError:.
-0000b800: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000b810: 2e6c 6f67 2e77 6172 6e69 6e67 2822 5379  .log.warning("Sy
-0000b820: 6e63 696e 6720 6661 696c 6564 2c20 4361  ncing failed, Ca
-0000b830: 6e63 656c 6c65 6445 7272 6f72 2229 0a20  ncelledError"). 
-0000b840: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
-0000b850: 6365 7074 696f 6e20 6173 2065 3a0a 2020  ception as e:.  
-0000b860: 2020 2020 2020 2020 2020 7462 203d 2074            tb = t
-0000b870: 7261 6365 6261 636b 2e66 6f72 6d61 745f  raceback.format_
-0000b880: 6578 6328 290a 2020 2020 2020 2020 2020  exc().          
-0000b890: 2020 7365 6c66 2e6c 6f67 2e65 7272 6f72    self.log.error
-0000b8a0: 2866 2245 7272 6f72 2077 6974 6820 7379  (f"Error with sy
-0000b8b0: 6e63 696e 673a 207b 7479 7065 2865 297d  ncing: {type(e)}
-0000b8c0: 7b74 627d 2229 0a20 2020 2020 2020 2066  {tb}").        f
-0000b8d0: 696e 616c 6c79 3a0a 2020 2020 2020 2020  inally:.        
-0000b8e0: 2020 2020 6966 2073 656c 662e 5f73 6875      if self._shu
-0000b8f0: 745f 646f 776e 3a0a 2020 2020 2020 2020  t_down:.        
-0000b900: 2020 2020 2020 2020 7265 7475 726e 204e          return N
-0000b910: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-0000b920: 6177 6169 7420 7365 6c66 2e5f 6669 6e69  await self._fini
-0000b930: 7368 5f73 796e 6328 290a 0a20 2020 2061  sh_sync()..    a
-0000b940: 7379 6e63 2064 6566 2072 6571 7565 7374  sync def request
-0000b950: 5f76 616c 6964 6174 655f 7770 280a 2020  _validate_wp(.  
-0000b960: 2020 2020 2020 7365 6c66 2c20 7065 616b        self, peak
-0000b970: 5f68 6561 6465 725f 6861 7368 3a20 6279  _header_hash: by
-0000b980: 7465 7333 322c 2070 6561 6b5f 6865 6967  tes32, peak_heig
-0000b990: 6874 3a20 7569 6e74 3332 2c20 7065 616b  ht: uint32, peak
-0000b9a0: 5f77 6569 6768 743a 2075 696e 7431 3238  _weight: uint128
-0000b9b0: 0a20 2020 2029 202d 3e20 5475 706c 655b  .    ) -> Tuple[
-0000b9c0: 7569 6e74 3332 2c20 4c69 7374 5b53 7562  uint32, List[Sub
-0000b9d0: 4570 6f63 6853 756d 6d61 7279 5d5d 3a0a  EpochSummary]]:.
-0000b9e0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-0000b9f0: 7765 6967 6874 5f70 726f 6f66 5f68 616e  weight_proof_han
-0000ba00: 646c 6572 2069 7320 4e6f 6e65 3a0a 2020  dler is None:.  
-0000ba10: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0000ba20: 5275 6e74 696d 6545 7272 6f72 2822 5765  RuntimeError("We
-0000ba30: 6967 6874 2070 726f 6f66 2068 616e 646c  ight proof handl
-0000ba40: 6572 2069 7320 4e6f 6e65 2229 0a20 2020  er is None").   
-0000ba50: 2020 2020 2070 6565 7273 5f77 6974 685f       peers_with_
-0000ba60: 7065 616b 203d 2073 656c 662e 6765 745f  peak = self.get_
-0000ba70: 7065 6572 735f 7769 7468 5f70 6561 6b28  peers_with_peak(
-0000ba80: 7065 616b 5f68 6561 6465 725f 6861 7368  peak_header_hash
-0000ba90: 290a 2020 2020 2020 2020 2320 5265 7175  ).        # Requ
-0000baa0: 6573 7420 7765 6967 6874 2070 726f 6f66  est weight proof
-0000bab0: 2066 726f 6d20 6120 7261 6e64 6f6d 2070   from a random p
-0000bac0: 6565 720a 2020 2020 2020 2020 7365 6c66  eer.        self
-0000bad0: 2e6c 6f67 2e69 6e66 6f28 6622 546f 7461  .log.info(f"Tota
-0000bae0: 6c20 6f66 207b 6c65 6e28 7065 6572 735f  l of {len(peers_
-0000baf0: 7769 7468 5f70 6561 6b29 7d20 7065 6572  with_peak)} peer
-0000bb00: 7320 7769 7468 2070 6561 6b20 7b70 6561  s with peak {pea
-0000bb10: 6b5f 6865 6967 6874 7d22 290a 2020 2020  k_height}").    
-0000bb20: 2020 2020 7765 6967 6874 5f70 726f 6f66      weight_proof
-0000bb30: 5f70 6565 723a 2057 5343 6869 6143 6f6e  _peer: WSChiaCon
-0000bb40: 6e65 6374 696f 6e20 3d20 7261 6e64 6f6d  nection = random
-0000bb50: 2e63 686f 6963 6528 7065 6572 735f 7769  .choice(peers_wi
-0000bb60: 7468 5f70 6561 6b29 0a20 2020 2020 2020  th_peak).       
-0000bb70: 2073 656c 662e 6c6f 672e 696e 666f 280a   self.log.info(.
-0000bb80: 2020 2020 2020 2020 2020 2020 6622 5265              f"Re
-0000bb90: 7175 6573 7469 6e67 2077 6569 6768 7420  questing weight 
-0000bba0: 7072 6f6f 6620 6672 6f6d 2070 6565 7220  proof from peer 
-0000bbb0: 7b77 6569 6768 745f 7072 6f6f 665f 7065  {weight_proof_pe
-0000bbc0: 6572 2e70 6565 725f 696e 666f 2e68 6f73  er.peer_info.hos
-0000bbd0: 747d 2075 7020 746f 2068 6569 6768 7420  t} up to height 
-0000bbe0: 7b70 6561 6b5f 6865 6967 6874 7d22 0a20  {peak_height}". 
-0000bbf0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0000bc00: 2063 7572 5f70 6561 6b3a 204f 7074 696f   cur_peak: Optio
-0000bc10: 6e61 6c5b 426c 6f63 6b52 6563 6f72 645d  nal[BlockRecord]
-0000bc20: 203d 2073 656c 662e 626c 6f63 6b63 6861   = self.blockcha
-0000bc30: 696e 2e67 6574 5f70 6561 6b28 290a 2020  in.get_peak().  
-0000bc40: 2020 2020 2020 6966 2063 7572 5f70 6561        if cur_pea
-0000bc50: 6b20 6973 206e 6f74 204e 6f6e 6520 616e  k is not None an
-0000bc60: 6420 7065 616b 5f77 6569 6768 7420 3c3d  d peak_weight <=
-0000bc70: 2063 7572 5f70 6561 6b2e 7765 6967 6874   cur_peak.weight
-0000bc80: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-0000bc90: 6973 6520 5661 6c75 6545 7272 6f72 2822  ise ValueError("
-0000bca0: 4e6f 7420 7065 7266 6f72 6d69 6e67 2073  Not performing s
-0000bcb0: 796e 632c 2061 6c72 6561 6479 2063 6175  ync, already cau
-0000bcc0: 6768 7420 7570 2e22 290a 2020 2020 2020  ght up.").      
-0000bcd0: 2020 7770 5f74 696d 656f 7574 203d 2033    wp_timeout = 3
-0000bce0: 3630 0a20 2020 2020 2020 2069 6620 2277  60.        if "w
-0000bcf0: 6569 6768 745f 7072 6f6f 665f 7469 6d65  eight_proof_time
-0000bd00: 6f75 7422 2069 6e20 7365 6c66 2e63 6f6e  out" in self.con
-0000bd10: 6669 673a 0a20 2020 2020 2020 2020 2020  fig:.           
-0000bd20: 2077 705f 7469 6d65 6f75 7420 3d20 7365   wp_timeout = se
-0000bd30: 6c66 2e63 6f6e 6669 675b 2277 6569 6768  lf.config["weigh
-0000bd40: 745f 7072 6f6f 665f 7469 6d65 6f75 7422  t_proof_timeout"
-0000bd50: 5d0a 2020 2020 2020 2020 7365 6c66 2e6c  ].        self.l
-0000bd60: 6f67 2e64 6562 7567 2866 2277 6569 6768  og.debug(f"weigh
-0000bd70: 7420 7072 6f6f 6620 7469 6d65 6f75 7420  t proof timeout 
-0000bd80: 6973 207b 7770 5f74 696d 656f 7574 7d20  is {wp_timeout} 
-0000bd90: 7365 6322 290a 2020 2020 2020 2020 7265  sec").        re
-0000bda0: 7175 6573 7420 3d20 6675 6c6c 5f6e 6f64  quest = full_nod
-0000bdb0: 655f 7072 6f74 6f63 6f6c 2e52 6571 7565  e_protocol.Reque
-0000bdc0: 7374 5072 6f6f 664f 6657 6569 6768 7428  stProofOfWeight(
-0000bdd0: 7065 616b 5f68 6569 6768 742c 2070 6561  peak_height, pea
-0000bde0: 6b5f 6865 6164 6572 5f68 6173 6829 0a20  k_header_hash). 
-0000bdf0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-0000be00: 3d20 6177 6169 7420 7765 6967 6874 5f70  = await weight_p
-0000be10: 726f 6f66 5f70 6565 722e 6361 6c6c 5f61  roof_peer.call_a
-0000be20: 7069 2846 756c 6c4e 6f64 6541 5049 2e72  pi(FullNodeAPI.r
-0000be30: 6571 7565 7374 5f70 726f 6f66 5f6f 665f  equest_proof_of_
-0000be40: 7765 6967 6874 2c20 7265 7175 6573 742c  weight, request,
-0000be50: 2074 696d 656f 7574 3d77 705f 7469 6d65   timeout=wp_time
-0000be60: 6f75 7429 0a20 2020 2020 2020 2023 2044  out).        # D
-0000be70: 6973 636f 6e6e 6563 7420 6672 6f6d 2074  isconnect from t
-0000be80: 6869 7320 7065 6572 2c20 6265 6361 7573  his peer, becaus
-0000be90: 6520 7468 6579 2068 6176 6520 6e6f 7420  e they have not 
-0000bea0: 6265 6861 7665 6420 7072 6f70 6572 6c79  behaved properly
-0000beb0: 0a20 2020 2020 2020 2069 6620 7265 7370  .        if resp
-0000bec0: 6f6e 7365 2069 7320 4e6f 6e65 206f 7220  onse is None or 
-0000bed0: 6e6f 7420 6973 696e 7374 616e 6365 2872  not isinstance(r
-0000bee0: 6573 706f 6e73 652c 2066 756c 6c5f 6e6f  esponse, full_no
-0000bef0: 6465 5f70 726f 746f 636f 6c2e 5265 7370  de_protocol.Resp
-0000bf00: 6f6e 6450 726f 6f66 4f66 5765 6967 6874  ondProofOfWeight
-0000bf10: 293a 0a20 2020 2020 2020 2020 2020 2061  ):.            a
-0000bf20: 7761 6974 2077 6569 6768 745f 7072 6f6f  wait weight_proo
-0000bf30: 665f 7065 6572 2e63 6c6f 7365 2836 3030  f_peer.close(600
-0000bf40: 290a 2020 2020 2020 2020 2020 2020 7261  ).            ra
-0000bf50: 6973 6520 5275 6e74 696d 6545 7272 6f72  ise RuntimeError
-0000bf60: 2866 2257 6569 6768 7420 7072 6f6f 6620  (f"Weight proof 
-0000bf70: 6469 6420 6e6f 7420 6172 7269 7665 2069  did not arrive i
-0000bf80: 6e20 7469 6d65 2066 726f 6d20 7065 6572  n time from peer
-0000bf90: 3a20 7b77 6569 6768 745f 7072 6f6f 665f  : {weight_proof_
-0000bfa0: 7065 6572 2e70 6565 725f 696e 666f 2e68  peer.peer_info.h
-0000bfb0: 6f73 747d 2229 0a20 2020 2020 2020 2069  ost}").        i
-0000bfc0: 6620 7265 7370 6f6e 7365 2e77 702e 7265  f response.wp.re
-0000bfd0: 6365 6e74 5f63 6861 696e 5f64 6174 615b  cent_chain_data[
-0000bfe0: 2d31 5d2e 7265 7761 7264 5f63 6861 696e  -1].reward_chain
-0000bff0: 5f62 6c6f 636b 2e68 6569 6768 7420 213d  _block.height !=
-0000c000: 2070 6561 6b5f 6865 6967 6874 3a0a 2020   peak_height:.  
-0000c010: 2020 2020 2020 2020 2020 6177 6169 7420            await 
-0000c020: 7765 6967 6874 5f70 726f 6f66 5f70 6565  weight_proof_pee
-0000c030: 722e 636c 6f73 6528 3630 3029 0a20 2020  r.close(600).   
-0000c040: 2020 2020 2020 2020 2072 6169 7365 2052           raise R
-0000c050: 756e 7469 6d65 4572 726f 7228 6622 5765  untimeError(f"We
-0000c060: 6967 6874 2070 726f 6f66 2068 6164 2074  ight proof had t
-0000c070: 6865 2077 726f 6e67 2068 6569 6768 743a  he wrong height:
-0000c080: 207b 7765 6967 6874 5f70 726f 6f66 5f70   {weight_proof_p
-0000c090: 6565 722e 7065 6572 5f69 6e66 6f2e 686f  eer.peer_info.ho
-0000c0a0: 7374 7d22 290a 2020 2020 2020 2020 6966  st}").        if
-0000c0b0: 2072 6573 706f 6e73 652e 7770 2e72 6563   response.wp.rec
-0000c0c0: 656e 745f 6368 6169 6e5f 6461 7461 5b2d  ent_chain_data[-
-0000c0d0: 315d 2e72 6577 6172 645f 6368 6169 6e5f  1].reward_chain_
-0000c0e0: 626c 6f63 6b2e 7765 6967 6874 2021 3d20  block.weight != 
-0000c0f0: 7065 616b 5f77 6569 6768 743a 0a20 2020  peak_weight:.   
-0000c100: 2020 2020 2020 2020 2061 7761 6974 2077           await w
-0000c110: 6569 6768 745f 7072 6f6f 665f 7065 6572  eight_proof_peer
-0000c120: 2e63 6c6f 7365 2836 3030 290a 2020 2020  .close(600).    
-0000c130: 2020 2020 2020 2020 7261 6973 6520 5275          raise Ru
-0000c140: 6e74 696d 6545 7272 6f72 2866 2257 6569  ntimeError(f"Wei
-0000c150: 6768 7420 7072 6f6f 6620 6861 6420 7468  ght proof had th
-0000c160: 6520 7772 6f6e 6720 7765 6967 6874 3a20  e wrong weight: 
-0000c170: 7b77 6569 6768 745f 7072 6f6f 665f 7065  {weight_proof_pe
-0000c180: 6572 2e70 6565 725f 696e 666f 2e68 6f73  er.peer_info.hos
-0000c190: 747d 2229 0a20 2020 2020 2020 2069 6620  t}").        if 
-0000c1a0: 7365 6c66 2e69 6e5f 6261 645f 7065 616b  self.in_bad_peak
-0000c1b0: 5f63 6163 6865 2872 6573 706f 6e73 652e  _cache(response.
-0000c1c0: 7770 293a 0a20 2020 2020 2020 2020 2020  wp):.           
-0000c1d0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-0000c1e0: 7228 2257 6569 6768 7420 7072 6f6f 6620  r("Weight proof 
-0000c1f0: 6661 696c 6564 2062 6164 2070 6561 6b20  failed bad peak 
-0000c200: 6361 6368 6520 7661 6c69 6461 7469 6f6e  cache validation
-0000c210: 2229 0a20 2020 2020 2020 2023 2064 6f6e  ").        # don
-0000c220: 7420 7379 6e63 2074 6f20 7770 2069 6620  t sync to wp if 
-0000c230: 6c6f 6361 6c20 7065 616b 2069 7320 6865  local peak is he
-0000c240: 6176 6965 722c 0a20 2020 2020 2020 2023  avier,.        #
-0000c250: 2064 6f6e 7420 6261 6e20 7065 6572 2c20   dont ban peer, 
-0000c260: 7765 2061 736b 6564 2066 6f72 2074 6869  we asked for thi
-0000c270: 7320 7065 616b 0a20 2020 2020 2020 2063  s peak.        c
-0000c280: 7572 7265 6e74 5f70 6561 6b20 3d20 7365  urrent_peak = se
-0000c290: 6c66 2e62 6c6f 636b 6368 6169 6e2e 6765  lf.blockchain.ge
-0000c2a0: 745f 7065 616b 2829 0a20 2020 2020 2020  t_peak().       
-0000c2b0: 2069 6620 6375 7272 656e 745f 7065 616b   if current_peak
-0000c2c0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0000c2d0: 2020 2020 2020 2020 2020 6966 2072 6573            if res
-0000c2e0: 706f 6e73 652e 7770 2e72 6563 656e 745f  ponse.wp.recent_
-0000c2f0: 6368 6169 6e5f 6461 7461 5b2d 315d 2e72  chain_data[-1].r
-0000c300: 6577 6172 645f 6368 6169 6e5f 626c 6f63  eward_chain_bloc
-0000c310: 6b2e 7765 6967 6874 203c 3d20 6375 7272  k.weight <= curr
-0000c320: 656e 745f 7065 616b 2e77 6569 6768 743a  ent_peak.weight:
-0000c330: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000c340: 2072 6169 7365 2052 756e 7469 6d65 4572   raise RuntimeEr
-0000c350: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
-0000c360: 2020 2020 2020 2020 2066 2263 7572 7265           f"curre
-0000c370: 6e74 2070 6561 6b20 6973 2068 6561 7669  nt peak is heavi
-0000c380: 6572 2074 6861 6e20 5765 6967 6874 2070  er than Weight p
-0000c390: 726f 6f66 2070 6565 6b3a 207b 7765 6967  roof peek: {weig
-0000c3a0: 6874 5f70 726f 6f66 5f70 6565 722e 7065  ht_proof_peer.pe
-0000c3b0: 6572 5f69 6e66 6f2e 686f 7374 7d22 0a20  er_info.host}". 
-0000c3c0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0000c3d0: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
-0000c3e0: 2020 2020 2020 2020 2020 7661 6c69 6461            valida
-0000c3f0: 7465 642c 2066 6f72 6b5f 706f 696e 742c  ted, fork_point,
-0000c400: 2073 756d 6d61 7269 6573 203d 2061 7761   summaries = awa
-0000c410: 6974 2073 656c 662e 7765 6967 6874 5f70  it self.weight_p
-0000c420: 726f 6f66 5f68 616e 646c 6572 2e76 616c  roof_handler.val
-0000c430: 6964 6174 655f 7765 6967 6874 5f70 726f  idate_weight_pro
-0000c440: 6f66 2872 6573 706f 6e73 652e 7770 290a  of(response.wp).
-0000c450: 2020 2020 2020 2020 6578 6365 7074 2045          except E
-0000c460: 7863 6570 7469 6f6e 2061 7320 653a 0a20  xception as e:. 
-0000c470: 2020 2020 2020 2020 2020 2061 7761 6974             await
-0000c480: 2077 6569 6768 745f 7072 6f6f 665f 7065   weight_proof_pe
-0000c490: 6572 2e63 6c6f 7365 2836 3030 290a 2020  er.close(600).  
-0000c4a0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0000c4b0: 5661 6c75 6545 7272 6f72 2866 2257 6569  ValueError(f"Wei
-0000c4c0: 6768 7420 7072 6f6f 6620 7661 6c69 6461  ght proof valida
-0000c4d0: 7469 6f6e 2074 6872 6577 2061 6e20 6572  tion threw an er
-0000c4e0: 726f 7220 7b65 7d22 290a 2020 2020 2020  ror {e}").      
-0000c4f0: 2020 6966 206e 6f74 2076 616c 6964 6174    if not validat
-0000c500: 6564 3a0a 2020 2020 2020 2020 2020 2020  ed:.            
-0000c510: 6177 6169 7420 7765 6967 6874 5f70 726f  await weight_pro
-0000c520: 6f66 5f70 6565 722e 636c 6f73 6528 3630  of_peer.close(60
-0000c530: 3029 0a20 2020 2020 2020 2020 2020 2072  0).            r
-0000c540: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
-0000c550: 2257 6569 6768 7420 7072 6f6f 6620 7661  "Weight proof va
-0000c560: 6c69 6461 7469 6f6e 2066 6169 6c65 6422  lidation failed"
-0000c570: 290a 2020 2020 2020 2020 7365 6c66 2e6c  ).        self.l
-0000c580: 6f67 2e69 6e66 6f28 6622 5265 2d63 6865  og.info(f"Re-che
-0000c590: 636b 6564 2070 6565 7273 3a20 746f 7461  cked peers: tota
-0000c5a0: 6c20 6f66 207b 6c65 6e28 7065 6572 735f  l of {len(peers_
-0000c5b0: 7769 7468 5f70 6561 6b29 7d20 7065 6572  with_peak)} peer
-0000c5c0: 7320 7769 7468 2070 6561 6b20 7b70 6561  s with peak {pea
-0000c5d0: 6b5f 6865 6967 6874 7d22 290a 2020 2020  k_height}").    
-0000c5e0: 2020 2020 7365 6c66 2e73 796e 635f 7374      self.sync_st
-0000c5f0: 6f72 652e 7365 745f 7379 6e63 5f6d 6f64  ore.set_sync_mod
-0000c600: 6528 5472 7565 290a 2020 2020 2020 2020  e(True).        
-0000c610: 7365 6c66 2e5f 7374 6174 655f 6368 616e  self._state_chan
-0000c620: 6765 6428 2273 796e 635f 6d6f 6465 2229  ged("sync_mode")
-0000c630: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0000c640: 666f 726b 5f70 6f69 6e74 2c20 7375 6d6d  fork_point, summ
-0000c650: 6172 6965 730a 0a20 2020 2061 7379 6e63  aries..    async
-0000c660: 2064 6566 2073 796e 635f 6672 6f6d 5f66   def sync_from_f
-0000c670: 6f72 6b5f 706f 696e 7428 0a20 2020 2020  ork_point(.     
-0000c680: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
-0000c690: 2066 6f72 6b5f 706f 696e 745f 6865 6967   fork_point_heig
-0000c6a0: 6874 3a20 7569 6e74 3332 2c0a 2020 2020  ht: uint32,.    
-0000c6b0: 2020 2020 7461 7267 6574 5f70 6561 6b5f      target_peak_
-0000c6c0: 7362 5f68 6569 6768 743a 2075 696e 7433  sb_height: uint3
-0000c6d0: 322c 0a20 2020 2020 2020 2070 6561 6b5f  2,.        peak_
-0000c6e0: 6861 7368 3a20 6279 7465 7333 322c 0a20  hash: bytes32,. 
-0000c6f0: 2020 2020 2020 2073 756d 6d61 7269 6573         summaries
-0000c700: 3a20 4c69 7374 5b53 7562 4570 6f63 6853  : List[SubEpochS
-0000c710: 756d 6d61 7279 5d2c 0a20 2020 2029 202d  ummary],.    ) -
-0000c720: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-0000c730: 6275 6666 6572 5f73 697a 6520 3d20 340a  buffer_size = 4.
-0000c740: 2020 2020 2020 2020 7365 6c66 2e6c 6f67          self.log
-0000c750: 2e69 6e66 6f28 6622 5374 6172 7420 7379  .info(f"Start sy
-0000c760: 6e63 696e 6720 6672 6f6d 2066 6f72 6b20  ncing from fork 
-0000c770: 706f 696e 7420 6174 207b 666f 726b 5f70  point at {fork_p
-0000c780: 6f69 6e74 5f68 6569 6768 747d 2075 7020  oint_height} up 
-0000c790: 746f 207b 7461 7267 6574 5f70 6561 6b5f  to {target_peak_
-0000c7a0: 7362 5f68 6569 6768 747d 2229 0a20 2020  sb_height}").   
-0000c7b0: 2020 2020 2070 6565 7273 5f77 6974 685f       peers_with_
-0000c7c0: 7065 616b 3a20 4c69 7374 5b57 5343 6869  peak: List[WSChi
-0000c7d0: 6143 6f6e 6e65 6374 696f 6e5d 203d 2073  aConnection] = s
-0000c7e0: 656c 662e 6765 745f 7065 6572 735f 7769  elf.get_peers_wi
-0000c7f0: 7468 5f70 6561 6b28 7065 616b 5f68 6173  th_peak(peak_has
-0000c800: 6829 0a20 2020 2020 2020 2066 6f72 6b5f  h).        fork_
-0000c810: 706f 696e 745f 6865 6967 6874 203d 2061  point_height = a
-0000c820: 7761 6974 2063 6865 636b 5f66 6f72 6b5f  wait check_fork_
-0000c830: 6e65 7874 5f62 6c6f 636b 280a 2020 2020  next_block(.    
-0000c840: 2020 2020 2020 2020 7365 6c66 2e62 6c6f          self.blo
-0000c850: 636b 6368 6169 6e2c 2066 6f72 6b5f 706f  ckchain, fork_po
-0000c860: 696e 745f 6865 6967 6874 2c20 7065 6572  int_height, peer
-0000c870: 735f 7769 7468 5f70 6561 6b2c 206e 6f64  s_with_peak, nod
-0000c880: 655f 6e65 7874 5f62 6c6f 636b 5f63 6865  e_next_block_che
-0000c890: 636b 0a20 2020 2020 2020 2029 0a20 2020  ck.        ).   
-0000c8a0: 2020 2020 2062 6174 6368 5f73 697a 6520       batch_size 
-0000c8b0: 3d20 7365 6c66 2e63 6f6e 7374 616e 7473  = self.constants
-0000c8c0: 2e4d 4158 5f42 4c4f 434b 5f43 4f55 4e54  .MAX_BLOCK_COUNT
-0000c8d0: 5f50 4552 5f52 4551 5545 5354 530a 0a20  _PER_REQUESTS.. 
-0000c8e0: 2020 2020 2020 2023 206e 6f72 6d61 6c6c         # normall
-0000c8f0: 7920 2266 6f72 6b5f 706f 696e 7422 206f  y "fork_point" o
-0000c900: 7220 2266 6f72 6b5f 6865 6967 6874 2220  r "fork_height" 
-0000c910: 7265 6665 7273 2074 6f20 7468 6520 6669  refers to the fi
-0000c920: 7273 7420 636f 6d6d 6f6e 0a20 2020 2020  rst common.     
-0000c930: 2020 2023 2062 6c6f 636b 2062 6574 7765     # block betwe
-0000c940: 656e 2074 6865 206d 6169 6e20 6368 6169  en the main chai
-0000c950: 6e20 616e 6420 7468 6520 666f 726b 2e20  n and the fork. 
-0000c960: 4865 7265 2022 666f 726b 5f70 6f69 6e74  Here "fork_point
-0000c970: 5f68 6569 6768 7422 0a20 2020 2020 2020  _height".       
-0000c980: 2023 2073 6565 6d73 2074 6f20 7265 6665   # seems to refe
-0000c990: 7220 746f 2074 6865 2066 6972 7374 2064  r to the first d
-0000c9a0: 6976 6572 6769 6e67 2062 6c6f 636b 0a0a  iverging block..
-0000c9b0: 2020 2020 2020 2020 6173 796e 6320 6465          async de
-0000c9c0: 6620 6665 7463 685f 626c 6f63 6b5f 6261  f fetch_block_ba
-0000c9d0: 7463 6865 7328 0a20 2020 2020 2020 2020  tches(.         
-0000c9e0: 2020 2062 6174 6368 5f71 7565 7565 3a20     batch_queue: 
-0000c9f0: 6173 796e 6369 6f2e 5175 6575 655b 4f70  asyncio.Queue[Op
-0000ca00: 7469 6f6e 616c 5b54 7570 6c65 5b57 5343  tional[Tuple[WSC
-0000ca10: 6869 6143 6f6e 6e65 6374 696f 6e2c 204c  hiaConnection, L
-0000ca20: 6973 745b 4675 6c6c 426c 6f63 6b5d 5d5d  ist[FullBlock]]]
-0000ca30: 5d0a 2020 2020 2020 2020 2920 2d3e 204e  ].        ) -> N
-0000ca40: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0000ca50: 2073 7461 7274 5f68 6569 6768 742c 2065   start_height, e
-0000ca60: 6e64 5f68 6569 6768 7420 3d20 302c 2030  nd_height = 0, 0
-0000ca70: 0a20 2020 2020 2020 2020 2020 206e 6577  .            new
-0000ca80: 5f70 6565 7273 5f77 6974 685f 7065 616b  _peers_with_peak
-0000ca90: 3a20 4c69 7374 5b57 5343 6869 6143 6f6e  : List[WSChiaCon
-0000caa0: 6e65 6374 696f 6e5d 203d 2070 6565 7273  nection] = peers
-0000cab0: 5f77 6974 685f 7065 616b 5b3a 5d0a 2020  _with_peak[:].  
-0000cac0: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
-0000cad0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000cae0: 2062 6c6f 636b 2072 6571 7565 7374 2072   block request r
-0000caf0: 616e 6765 7320 6172 6520 2a69 6e63 6c75  anges are *inclu
-0000cb00: 7369 7665 2a2c 2074 6869 7320 7265 7175  sive*, this requ
-0000cb10: 6972 6573 2073 6f6d 650a 2020 2020 2020  ires some.      
-0000cb20: 2020 2020 2020 2020 2020 2320 6779 6d6e            # gymn
-0000cb30: 6173 7469 6373 206f 6620 7468 6973 2072  astics of this r
-0000cb40: 616e 6765 2028 2b31 2074 6f20 6d61 6b65  ange (+1 to make
-0000cb50: 2069 7420 6578 636c 7573 6976 652c 206c   it exclusive, l
-0000cb60: 696b 6520 6e6f 726d 616c 0a20 2020 2020  ike normal.     
-0000cb70: 2020 2020 2020 2020 2020 2023 2072 616e             # ran
-0000cb80: 6765 7329 2061 6e64 2074 6865 6e20 2d31  ges) and then -1
-0000cb90: 2077 6865 6e20 666f 726d 696e 6720 7468   when forming th
-0000cba0: 6520 7265 7175 6573 7420 6d65 7373 6167  e request messag
-0000cbb0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-0000cbc0: 2020 666f 7220 7374 6172 745f 6865 6967    for start_heig
-0000cbd0: 6874 2069 6e20 7261 6e67 6528 666f 726b  ht in range(fork
-0000cbe0: 5f70 6f69 6e74 5f68 6569 6768 742c 2074  _point_height, t
-0000cbf0: 6172 6765 745f 7065 616b 5f73 625f 6865  arget_peak_sb_he
-0000cc00: 6967 6874 202b 2031 2c20 6261 7463 685f  ight + 1, batch_
-0000cc10: 7369 7a65 293a 0a20 2020 2020 2020 2020  size):.         
-0000cc20: 2020 2020 2020 2020 2020 2065 6e64 5f68             end_h
-0000cc30: 6569 6768 7420 3d20 6d69 6e28 7461 7267  eight = min(targ
-0000cc40: 6574 5f70 6561 6b5f 7362 5f68 6569 6768  et_peak_sb_heigh
-0000cc50: 742c 2073 7461 7274 5f68 6569 6768 7420  t, start_height 
-0000cc60: 2b20 6261 7463 685f 7369 7a65 202d 2031  + batch_size - 1
-0000cc70: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0000cc80: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-0000cc90: 5265 7175 6573 7442 6c6f 636b 7328 7569  RequestBlocks(ui
-0000cca0: 6e74 3332 2873 7461 7274 5f68 6569 6768  nt32(start_heigh
-0000ccb0: 7429 2c20 7569 6e74 3332 2865 6e64 5f68  t), uint32(end_h
-0000ccc0: 6569 6768 7429 2c20 5472 7565 290a 2020  eight), True).  
-0000ccd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cce0: 2020 6665 7463 6865 6420 3d20 4661 6c73    fetched = Fals
-0000ccf0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-0000cd00: 2020 2020 2020 666f 7220 7065 6572 2069        for peer i
-0000cd10: 6e20 7261 6e64 6f6d 2e73 616d 706c 6528  n random.sample(
-0000cd20: 6e65 775f 7065 6572 735f 7769 7468 5f70  new_peers_with_p
-0000cd30: 6561 6b2c 206c 656e 286e 6577 5f70 6565  eak, len(new_pee
-0000cd40: 7273 5f77 6974 685f 7065 616b 2929 3a0a  rs_with_peak)):.
-0000cd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cd60: 2020 2020 2020 2020 6966 2070 6565 722e          if peer.
-0000cd70: 636c 6f73 6564 3a0a 2020 2020 2020 2020  closed:.        
-0000cd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cd90: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
-0000cda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cdb0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-0000cdc0: 6177 6169 7420 7065 6572 2e63 616c 6c5f  await peer.call_
-0000cdd0: 6170 6928 4675 6c6c 4e6f 6465 4150 492e  api(FullNodeAPI.
-0000cde0: 7265 7175 6573 745f 626c 6f63 6b73 2c20  request_blocks, 
-0000cdf0: 7265 7175 6573 742c 2074 696d 656f 7574  request, timeout
-0000ce00: 3d33 3029 0a20 2020 2020 2020 2020 2020  =30).           
-0000ce10: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000ce20: 7265 7370 6f6e 7365 2069 7320 4e6f 6e65  response is None
-0000ce30: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000ce40: 2020 2020 2020 2020 2020 2020 2020 6177                aw
-0000ce50: 6169 7420 7065 6572 2e63 6c6f 7365 2829  ait peer.close()
-0000ce60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ce70: 2020 2020 2020 2020 2065 6c69 6620 6973           elif is
-0000ce80: 696e 7374 616e 6365 2872 6573 706f 6e73  instance(respons
-0000ce90: 652c 2052 6573 706f 6e64 426c 6f63 6b73  e, RespondBlocks
-0000cea0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0000ceb0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0000cec0: 7761 6974 2062 6174 6368 5f71 7565 7565  wait batch_queue
-0000ced0: 2e70 7574 2828 7065 6572 2c20 7265 7370  .put((peer, resp
-0000cee0: 6f6e 7365 2e62 6c6f 636b 7329 290a 2020  onse.blocks)).  
-0000cef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cf00: 2020 2020 2020 2020 2020 6665 7463 6865            fetche
-0000cf10: 6420 3d20 5472 7565 0a20 2020 2020 2020  d = True.       
-0000cf20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cf30: 2020 2020 2062 7265 616b 0a20 2020 2020       break.     
-0000cf40: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000cf50: 6620 6665 7463 6865 6420 6973 2046 616c  f fetched is Fal
-0000cf60: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0000cf70: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000cf80: 2e6c 6f67 2e65 7272 6f72 2866 2266 6169  .log.error(f"fai
-0000cf90: 6c65 6420 6665 7463 6869 6e67 207b 7374  led fetching {st
-0000cfa0: 6172 745f 6865 6967 6874 7d20 746f 207b  art_height} to {
-0000cfb0: 656e 645f 6865 6967 6874 7d20 6672 6f6d  end_height} from
-0000cfc0: 2070 6565 7273 2229 0a20 2020 2020 2020   peers").       
-0000cfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cfe0: 2072 6574 7572 6e0a 2020 2020 2020 2020   return.        
-0000cff0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-0000d000: 656c 662e 7379 6e63 5f73 746f 7265 2e70  elf.sync_store.p
-0000d010: 6565 7273 5f63 6861 6e67 6564 2e69 735f  eers_changed.is_
-0000d020: 7365 7428 293a 0a20 2020 2020 2020 2020  set():.         
-0000d030: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-0000d040: 6577 5f70 6565 7273 5f77 6974 685f 7065  ew_peers_with_pe
-0000d050: 616b 203d 2073 656c 662e 6765 745f 7065  ak = self.get_pe
-0000d060: 6572 735f 7769 7468 5f70 6561 6b28 7065  ers_with_peak(pe
-0000d070: 616b 5f68 6173 6829 0a20 2020 2020 2020  ak_hash).       
-0000d080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d090: 2073 656c 662e 7379 6e63 5f73 746f 7265   self.sync_store
-0000d0a0: 2e70 6565 7273 5f63 6861 6e67 6564 2e63  .peers_changed.c
-0000d0b0: 6c65 6172 2829 0a20 2020 2020 2020 2020  lear().         
-0000d0c0: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-0000d0d0: 696f 6e20 6173 2065 3a0a 2020 2020 2020  ion as e:.      
-0000d0e0: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
-0000d0f0: 6f67 2e65 7272 6f72 2866 2245 7863 6570  og.error(f"Excep
-0000d100: 7469 6f6e 2066 6574 6368 696e 6720 7b73  tion fetching {s
-0000d110: 7461 7274 5f68 6569 6768 747d 2074 6f20  tart_height} to 
-0000d120: 7b65 6e64 5f68 6569 6768 747d 2066 726f  {end_height} fro
-0000d130: 6d20 7065 6572 207b 657d 2229 0a20 2020  m peer {e}").   
-0000d140: 2020 2020 2020 2020 2066 696e 616c 6c79           finally
-0000d150: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000d160: 2020 2320 6669 6e69 7368 6564 2073 6967    # finished sig
-0000d170: 6e61 6c20 7769 7468 204e 6f6e 650a 2020  nal with None.  
-0000d180: 2020 2020 2020 2020 2020 2020 2020 6177                aw
-0000d190: 6169 7420 6261 7463 685f 7175 6575 652e  ait batch_queue.
-0000d1a0: 7075 7428 4e6f 6e65 290a 0a20 2020 2020  put(None)..     
-0000d1b0: 2020 2061 7379 6e63 2064 6566 2076 616c     async def val
-0000d1c0: 6964 6174 655f 626c 6f63 6b5f 6261 7463  idate_block_batc
-0000d1d0: 6865 7328 0a20 2020 2020 2020 2020 2020  hes(.           
-0000d1e0: 2069 6e6e 6572 5f62 6174 6368 5f71 7565   inner_batch_que
-0000d1f0: 7565 3a20 6173 796e 6369 6f2e 5175 6575  ue: asyncio.Queu
-0000d200: 655b 4f70 7469 6f6e 616c 5b54 7570 6c65  e[Optional[Tuple
-0000d210: 5b57 5343 6869 6143 6f6e 6e65 6374 696f  [WSChiaConnectio
-0000d220: 6e2c 204c 6973 745b 4675 6c6c 426c 6f63  n, List[FullBloc
-0000d230: 6b5d 5d5d 5d0a 2020 2020 2020 2020 2920  k]]]].        ) 
-0000d240: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-0000d250: 2020 2020 2066 6f72 6b5f 696e 666f 3a20       fork_info: 
-0000d260: 4f70 7469 6f6e 616c 5b46 6f72 6b49 6e66  Optional[ForkInf
-0000d270: 6f5d 203d 204e 6f6e 650a 0a20 2020 2020  o] = None..     
-0000d280: 2020 2020 2020 2077 6869 6c65 2054 7275         while Tru
-0000d290: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0000d2a0: 2020 2072 6573 3a20 4f70 7469 6f6e 616c     res: Optional
-0000d2b0: 5b54 7570 6c65 5b57 5343 6869 6143 6f6e  [Tuple[WSChiaCon
-0000d2c0: 6e65 6374 696f 6e2c 204c 6973 745b 4675  nection, List[Fu
-0000d2d0: 6c6c 426c 6f63 6b5d 5d5d 203d 2061 7761  llBlock]]] = awa
-0000d2e0: 6974 2069 6e6e 6572 5f62 6174 6368 5f71  it inner_batch_q
-0000d2f0: 7565 7565 2e67 6574 2829 0a20 2020 2020  ueue.get().     
-0000d300: 2020 2020 2020 2020 2020 2069 6620 7265             if re
-0000d310: 7320 6973 204e 6f6e 653a 0a20 2020 2020  s is None:.     
-0000d320: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000d330: 656c 662e 6c6f 672e 6465 6275 6728 2264  elf.log.debug("d
-0000d340: 6f6e 6520 6665 7463 6869 6e67 2062 6c6f  one fetching blo
-0000d350: 636b 7322 290a 2020 2020 2020 2020 2020  cks").          
-0000d360: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0000d370: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-0000d380: 2020 2020 2020 7065 6572 2c20 626c 6f63        peer, bloc
-0000d390: 6b73 203d 2072 6573 0a20 2020 2020 2020  ks = res.       
-0000d3a0: 2020 2020 2020 2020 2073 7461 7274 5f68           start_h
-0000d3b0: 6569 6768 7420 3d20 626c 6f63 6b73 5b30  eight = blocks[0
-0000d3c0: 5d2e 6865 6967 6874 0a20 2020 2020 2020  ].height.       
-0000d3d0: 2020 2020 2020 2020 2065 6e64 5f68 6569           end_hei
-0000d3e0: 6768 7420 3d20 626c 6f63 6b73 5b2d 315d  ght = blocks[-1]
-0000d3f0: 2e68 6569 6768 740a 0a20 2020 2020 2020  .height..       
-0000d400: 2020 2020 2020 2020 2023 2069 6e20 6361           # in ca
-0000d410: 7365 2077 6527 7265 2076 616c 6964 6174  se we're validat
-0000d420: 696e 6720 6120 7265 6f72 6720 666f 726b  ing a reorg fork
-0000d430: 2028 692e 652e 206e 6f74 2065 7874 656e   (i.e. not exten
-0000d440: 6469 6e67 2074 6865 0a20 2020 2020 2020  ding the.       
-0000d450: 2020 2020 2020 2020 2023 206d 6169 6e20           # main 
-0000d460: 6368 6169 6e29 2c20 7765 206e 6565 6420  chain), we need 
-0000d470: 746f 2072 6563 6f72 6420 7468 6520 636f  to record the co
-0000d480: 696e 2073 6574 2066 726f 6d20 7468 6174  in set from that
-0000d490: 2066 6f72 6b20 696e 0a20 2020 2020 2020   fork in.       
-0000d4a0: 2020 2020 2020 2020 2023 2066 6f72 6b5f           # fork_
-0000d4b0: 696e 666f 2e20 4f74 6865 7277 6973 6520  info. Otherwise 
-0000d4c0: 7661 6c69 6461 7469 6f6e 2069 7320 7665  validation is ve
-0000d4d0: 7279 2065 7870 656e 7369 7665 2c20 6573  ry expensive, es
-0000d4e0: 7065 6369 616c 6c79 0a20 2020 2020 2020  pecially.       
-0000d4f0: 2020 2020 2020 2020 2023 2066 6f72 2064           # for d
-0000d500: 6565 7020 7265 6f72 6773 0a20 2020 2020  eep reorgs.     
-0000d510: 2020 2020 2020 2020 2020 2070 6561 6b3a             peak:
-0000d520: 204f 7074 696f 6e61 6c5b 426c 6f63 6b52   Optional[BlockR
-0000d530: 6563 6f72 645d 0a20 2020 2020 2020 2020  ecord].         
-0000d540: 2020 2020 2020 2069 6620 666f 726b 5f69         if fork_i
-0000d550: 6e66 6f20 6973 204e 6f6e 653a 0a20 2020  nfo is None:.   
-0000d560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d570: 2070 6561 6b20 3d20 7365 6c66 2e62 6c6f   peak = self.blo
-0000d580: 636b 6368 6169 6e2e 6765 745f 7065 616b  ckchain.get_peak
-0000d590: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
-0000d5a0: 2020 2020 2020 2065 7874 656e 6469 6e67         extending
-0000d5b0: 5f6d 6169 6e5f 6368 6169 6e3a 2062 6f6f  _main_chain: boo
-0000d5c0: 6c20 3d20 7065 616b 2069 7320 4e6f 6e65  l = peak is None
-0000d5d0: 206f 7220 280a 2020 2020 2020 2020 2020   or (.          
-0000d5e0: 2020 2020 2020 2020 2020 2020 2020 7065                pe
-0000d5f0: 616b 2e68 6561 6465 725f 6861 7368 203d  ak.header_hash =
-0000d600: 3d20 626c 6f63 6b73 5b30 5d2e 7072 6576  = blocks[0].prev
-0000d610: 5f68 6561 6465 725f 6861 7368 206f 7220  _header_hash or 
-0000d620: 7065 616b 2e68 6561 6465 725f 6861 7368  peak.header_hash
-0000d630: 203d 3d20 626c 6f63 6b73 5b30 5d2e 6865   == blocks[0].he
-0000d640: 6164 6572 5f68 6173 680a 2020 2020 2020  ader_hash.      
-0000d650: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+00006060: 6967 2e67 6574 2822 7065 6572 735f 6669  ig.get("peers_fi
+00006070: 6c65 5f70 6174 6822 2c20 2264 622f 7065  le_path", "db/pe
+00006080: 6572 732e 6461 7422 2929 2c0a 2020 2020  ers.dat")),.    
+00006090: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000060a0: 2e63 6f6e 6669 675b 2269 6e74 726f 6475  .config["introdu
+000060b0: 6365 725f 7065 6572 225d 2c0a 2020 2020  cer_peer"],.    
+000060c0: 2020 2020 2020 2020 2020 2020 646e 735f              dns_
+000060d0: 7365 7276 6572 732c 0a20 2020 2020 2020  servers,.       
+000060e0: 2020 2020 2020 2020 2073 656c 662e 636f           self.co
+000060f0: 6e66 6967 5b22 7065 6572 5f63 6f6e 6e65  nfig["peer_conne
+00006100: 6374 5f69 6e74 6572 7661 6c22 5d2c 0a20  ct_interval"],. 
+00006110: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00006120: 656c 662e 636f 6e66 6967 5b22 7365 6c65  elf.config["sele
+00006130: 6374 6564 5f6e 6574 776f 726b 225d 2c0a  cted_network"],.
+00006140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006150: 6465 6661 756c 745f 706f 7274 2c0a 2020  default_port,.  
+00006160: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00006170: 6c66 2e6c 6f67 2c0a 2020 2020 2020 2020  lf.log,.        
+00006180: 2020 2020 290a 2020 2020 2020 2020 6578      ).        ex
+00006190: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
+000061a0: 7320 653a 0a20 2020 2020 2020 2020 2020  s e:.           
+000061b0: 2065 7272 6f72 5f73 7461 636b 203d 2074   error_stack = t
+000061c0: 7261 6365 6261 636b 2e66 6f72 6d61 745f  raceback.format_
+000061d0: 6578 6328 290a 2020 2020 2020 2020 2020  exc().          
+000061e0: 2020 7365 6c66 2e6c 6f67 2e65 7272 6f72    self.log.error
+000061f0: 2866 2245 7863 6570 7469 6f6e 3a20 7b65  (f"Exception: {e
+00006200: 7d22 290a 2020 2020 2020 2020 2020 2020  }").            
+00006210: 7365 6c66 2e6c 6f67 2e65 7272 6f72 2866  self.log.error(f
+00006220: 2245 7863 6570 7469 6f6e 2069 6e20 7065  "Exception in pe
+00006230: 6572 2064 6973 636f 7665 7279 3a20 7b65  er discovery: {e
+00006240: 7d22 290a 2020 2020 2020 2020 2020 2020  }").            
+00006250: 7365 6c66 2e6c 6f67 2e65 7272 6f72 2866  self.log.error(f
+00006260: 2245 7863 6570 7469 6f6e 2053 7461 636b  "Exception Stack
+00006270: 3a20 7b65 7272 6f72 5f73 7461 636b 7d22  : {error_stack}"
+00006280: 290a 0a20 2020 2064 6566 205f 7374 6174  )..    def _stat
+00006290: 655f 6368 616e 6765 6428 7365 6c66 2c20  e_changed(self, 
+000062a0: 6368 616e 6765 3a20 7374 722c 2063 6861  change: str, cha
+000062b0: 6e67 655f 6461 7461 3a20 4f70 7469 6f6e  nge_data: Option
+000062c0: 616c 5b44 6963 745b 7374 722c 2041 6e79  al[Dict[str, Any
+000062d0: 5d5d 203d 204e 6f6e 6529 202d 3e20 4e6f  ]] = None) -> No
+000062e0: 6e65 3a0a 2020 2020 2020 2020 6966 2073  ne:.        if s
+000062f0: 656c 662e 7374 6174 655f 6368 616e 6765  elf.state_change
+00006300: 645f 6361 6c6c 6261 636b 2069 7320 6e6f  d_callback is no
+00006310: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00006320: 2020 2020 7365 6c66 2e73 7461 7465 5f63      self.state_c
+00006330: 6861 6e67 6564 5f63 616c 6c62 6163 6b28  hanged_callback(
+00006340: 6368 616e 6765 2c20 6368 616e 6765 5f64  change, change_d
+00006350: 6174 6129 0a0a 2020 2020 6173 796e 6320  ata)..    async 
+00006360: 6465 6620 7368 6f72 745f 7379 6e63 5f62  def short_sync_b
+00006370: 6174 6368 2873 656c 662c 2070 6565 723a  atch(self, peer:
+00006380: 2057 5343 6869 6143 6f6e 6e65 6374 696f   WSChiaConnectio
+00006390: 6e2c 2073 7461 7274 5f68 6569 6768 743a  n, start_height:
+000063a0: 2075 696e 7433 322c 2074 6172 6765 745f   uint32, target_
+000063b0: 6865 6967 6874 3a20 7569 6e74 3332 2920  height: uint32) 
+000063c0: 2d3e 2062 6f6f 6c3a 0a20 2020 2020 2020  -> bool:.       
+000063d0: 2022 2222 0a20 2020 2020 2020 2054 7269   """.        Tri
+000063e0: 6573 2074 6f20 7379 6e63 2074 6f20 6120  es to sync to a 
+000063f0: 6368 6169 6e20 7768 6963 6820 6973 206e  chain which is n
+00006400: 6f74 2074 6f6f 2066 6172 2069 6e20 7468  ot too far in th
+00006410: 6520 6675 7475 7265 2c20 6279 2064 6f77  e future, by dow
+00006420: 6e6c 6f61 6469 6e67 2062 6174 6368 6573  nloading batches
+00006430: 206f 6620 626c 6f63 6b73 2e20 4966 2074   of blocks. If t
+00006440: 6865 2066 6972 7374 0a20 2020 2020 2020  he first.       
+00006450: 2062 6c6f 636b 2074 6861 7420 7765 2064   block that we d
+00006460: 6f77 6e6c 6f61 6420 6973 206e 6f74 2063  ownload is not c
+00006470: 6f6e 6e65 6374 6564 2074 6f20 6f75 7220  onnected to our 
+00006480: 6368 6169 6e2c 2077 6520 7265 7475 726e  chain, we return
+00006490: 2046 616c 7365 2061 6e64 2064 6f20 616e   False and do an
+000064a0: 2065 7870 656e 7369 7665 206c 6f6e 6720   expensive long 
+000064b0: 7379 6e63 2069 6e73 7465 6164 2e0a 2020  sync instead..  
+000064c0: 2020 2020 2020 4c6f 6e67 2073 796e 6320        Long sync 
+000064d0: 6973 206e 6f74 2070 7265 6665 7272 6564  is not preferred
+000064e0: 2062 6563 6175 7365 2069 7420 7265 7175   because it requ
+000064f0: 6972 6573 2064 6f77 6e6c 6f61 6469 6e67  ires downloading
+00006500: 2061 6e64 2076 616c 6964 6174 696e 6720   and validating 
+00006510: 6120 7765 6967 6874 2070 726f 6f66 2e0a  a weight proof..
+00006520: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
+00006530: 2020 2020 2020 2020 2020 2070 6565 723a             peer:
+00006540: 2070 6565 7220 746f 2073 796e 6320 6672   peer to sync fr
+00006550: 6f6d 0a20 2020 2020 2020 2020 2020 2073  om.            s
+00006560: 7461 7274 5f68 6569 6768 743a 2068 6569  tart_height: hei
+00006570: 6768 7420 7468 6174 2077 6520 7368 6f75  ght that we shou
+00006580: 6c64 2073 7461 7274 2064 6f77 6e6c 6f61  ld start downloa
+00006590: 6469 6e67 2061 742e 2028 4f75 7220 7065  ding at. (Our pe
+000065a0: 616b 2069 7320 6869 6768 6572 290a 2020  ak is higher).  
+000065b0: 2020 2020 2020 2020 2020 7461 7267 6574            target
+000065c0: 5f68 6569 6768 743a 2074 6172 6765 7420  _height: target 
+000065d0: 746f 2073 796e 6320 746f 0a0a 2020 2020  to sync to..    
+000065e0: 2020 2020 5265 7475 726e 733a 0a20 2020      Returns:.   
+000065f0: 2020 2020 2020 2020 2046 616c 7365 2069           False i
+00006600: 6620 7468 6520 666f 726b 2070 6f69 6e74  f the fork point
+00006610: 2077 6173 206e 6f74 2066 6f75 6e64 2c20   was not found, 
+00006620: 616e 6420 7765 206e 6565 6420 746f 2064  and we need to d
+00006630: 6f20 6120 6c6f 6e67 2073 796e 632e 2054  o a long sync. T
+00006640: 7275 6520 6f74 6865 7277 6973 652e 0a0a  rue otherwise...
+00006650: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00006660: 2020 2020 2320 446f 6e27 7420 7472 6967      # Don't trig
+00006670: 6765 7220 6d75 6c74 6970 6c65 2062 6174  ger multiple bat
+00006680: 6368 2073 796e 6373 2074 6f20 7468 6520  ch syncs to the 
+00006690: 7361 6d65 2070 6565 720a 0a20 2020 2020  same peer..     
+000066a0: 2020 2069 6620 7365 6c66 2e73 796e 635f     if self.sync_
+000066b0: 7374 6f72 652e 6973 5f62 6163 6b74 7261  store.is_backtra
+000066c0: 636b 5f73 796e 6369 6e67 286e 6f64 655f  ck_syncing(node_
+000066d0: 6964 3d70 6565 722e 7065 6572 5f6e 6f64  id=peer.peer_nod
+000066e0: 655f 6964 293a 0a20 2020 2020 2020 2020  e_id):.         
+000066f0: 2020 2072 6574 7572 6e20 5472 7565 2020     return True  
+00006700: 2320 446f 6e27 7420 6261 7463 6820 7379  # Don't batch sy
+00006710: 6e63 2c20 7765 2061 7265 2061 6c72 6561  nc, we are alrea
+00006720: 6479 2069 6e20 7072 6f67 7265 7373 206f  dy in progress o
+00006730: 6620 6120 6261 636b 7472 6163 6b20 7379  f a backtrack sy
+00006740: 6e63 0a20 2020 2020 2020 2069 6620 7065  nc.        if pe
+00006750: 6572 2e70 6565 725f 6e6f 6465 5f69 6420  er.peer_node_id 
+00006760: 696e 2073 656c 662e 7379 6e63 5f73 746f  in self.sync_sto
+00006770: 7265 2e62 6174 6368 5f73 796e 6369 6e67  re.batch_syncing
+00006780: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00006790: 7475 726e 2054 7275 6520 2023 2044 6f6e  turn True  # Don
+000067a0: 2774 2074 7269 6767 6572 2061 206c 6f6e  't trigger a lon
+000067b0: 6720 7379 6e63 0a20 2020 2020 2020 2073  g sync.        s
+000067c0: 656c 662e 7379 6e63 5f73 746f 7265 2e62  elf.sync_store.b
+000067d0: 6174 6368 5f73 796e 6369 6e67 2e61 6464  atch_syncing.add
+000067e0: 2870 6565 722e 7065 6572 5f6e 6f64 655f  (peer.peer_node_
+000067f0: 6964 290a 0a20 2020 2020 2020 2073 656c  id)..        sel
+00006800: 662e 6c6f 672e 696e 666f 2866 2253 7461  f.log.info(f"Sta
+00006810: 7274 696e 6720 6261 7463 6820 7368 6f72  rting batch shor
+00006820: 7420 7379 6e63 2066 726f 6d20 7b73 7461  t sync from {sta
+00006830: 7274 5f68 6569 6768 747d 2074 6f20 6865  rt_height} to he
+00006840: 6967 6874 207b 7461 7267 6574 5f68 6569  ight {target_hei
+00006850: 6768 747d 2229 0a20 2020 2020 2020 2069  ght}").        i
+00006860: 6620 7374 6172 745f 6865 6967 6874 203e  f start_height >
+00006870: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
+00006880: 6669 7273 7420 3d20 6177 6169 7420 7065  first = await pe
+00006890: 6572 2e63 616c 6c5f 6170 6928 0a20 2020  er.call_api(.   
+000068a0: 2020 2020 2020 2020 2020 2020 2046 756c               Ful
+000068b0: 6c4e 6f64 6541 5049 2e72 6571 7565 7374  lNodeAPI.request
+000068c0: 5f62 6c6f 636b 2c20 6675 6c6c 5f6e 6f64  _block, full_nod
+000068d0: 655f 7072 6f74 6f63 6f6c 2e52 6571 7565  e_protocol.Reque
+000068e0: 7374 426c 6f63 6b28 7569 6e74 3332 2873  stBlock(uint32(s
+000068f0: 7461 7274 5f68 6569 6768 7429 2c20 4661  tart_height), Fa
+00006900: 6c73 6529 0a20 2020 2020 2020 2020 2020  lse).           
+00006910: 2029 0a20 2020 2020 2020 2020 2020 2069   ).            i
+00006920: 6620 6669 7273 7420 6973 204e 6f6e 6520  f first is None 
+00006930: 6f72 206e 6f74 2069 7369 6e73 7461 6e63  or not isinstanc
+00006940: 6528 6669 7273 742c 2066 756c 6c5f 6e6f  e(first, full_no
+00006950: 6465 5f70 726f 746f 636f 6c2e 5265 7370  de_protocol.Resp
+00006960: 6f6e 6442 6c6f 636b 293a 0a20 2020 2020  ondBlock):.     
+00006970: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00006980: 7379 6e63 5f73 746f 7265 2e62 6174 6368  sync_store.batch
+00006990: 5f73 796e 6369 6e67 2e72 656d 6f76 6528  _syncing.remove(
+000069a0: 7065 6572 2e70 6565 725f 6e6f 6465 5f69  peer.peer_node_i
+000069b0: 6429 0a20 2020 2020 2020 2020 2020 2020  d).             
+000069c0: 2020 2073 656c 662e 6c6f 672e 6572 726f     self.log.erro
+000069d0: 7228 6622 4572 726f 7220 7368 6f72 7420  r(f"Error short 
+000069e0: 6261 7463 6820 7379 6e63 696e 672c 2063  batch syncing, c
+000069f0: 6f75 6c64 206e 6f74 2066 6574 6368 2062  ould not fetch b
+00006a00: 6c6f 636b 2061 7420 6865 6967 6874 207b  lock at height {
+00006a10: 7374 6172 745f 6865 6967 6874 7d22 290a  start_height}").
+00006a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006a30: 7265 7475 726e 2046 616c 7365 0a20 2020  return False.   
+00006a40: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00006a50: 7365 6c66 2e62 6c6f 636b 6368 6169 6e2e  self.blockchain.
+00006a60: 636f 6e74 6169 6e73 5f62 6c6f 636b 2866  contains_block(f
+00006a70: 6972 7374 2e62 6c6f 636b 2e70 7265 765f  irst.block.prev_
+00006a80: 6865 6164 6572 5f68 6173 6829 3a0a 2020  header_hash):.  
+00006a90: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00006aa0: 6c66 2e6c 6f67 2e69 6e66 6f28 2242 6174  lf.log.info("Bat
+00006ab0: 6368 2073 796e 6369 6e67 2073 746f 7070  ch syncing stopp
+00006ac0: 6564 2c20 7468 6973 2069 7320 6120 6465  ed, this is a de
+00006ad0: 6570 2063 6861 696e 2229 0a20 2020 2020  ep chain").     
+00006ae0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00006af0: 7379 6e63 5f73 746f 7265 2e62 6174 6368  sync_store.batch
+00006b00: 5f73 796e 6369 6e67 2e72 656d 6f76 6528  _syncing.remove(
+00006b10: 7065 6572 2e70 6565 725f 6e6f 6465 5f69  peer.peer_node_i
+00006b20: 6429 0a20 2020 2020 2020 2020 2020 2020  d).             
+00006b30: 2020 2023 2046 6972 7374 2073 6220 6e6f     # First sb no
+00006b40: 7420 636f 6e6e 6563 7465 6420 746f 206f  t connected to o
+00006b50: 7572 2062 6c6f 636b 6368 6169 6e2c 2064  ur blockchain, d
+00006b60: 6f20 6120 6c6f 6e67 2073 796e 6320 696e  o a long sync in
+00006b70: 7374 6561 640a 2020 2020 2020 2020 2020  stead.          
+00006b80: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
+00006b90: 7365 0a0a 2020 2020 2020 2020 6261 7463  se..        batc
+00006ba0: 685f 7369 7a65 203d 2073 656c 662e 636f  h_size = self.co
+00006bb0: 6e73 7461 6e74 732e 4d41 585f 424c 4f43  nstants.MAX_BLOC
+00006bc0: 4b5f 434f 554e 545f 5045 525f 5245 5155  K_COUNT_PER_REQU
+00006bd0: 4553 5453 0a20 2020 2020 2020 2069 6620  ESTS.        if 
+00006be0: 7365 6c66 2e5f 7365 676d 656e 745f 7461  self._segment_ta
+00006bf0: 736b 2069 7320 6e6f 7420 4e6f 6e65 2061  sk is not None a
+00006c00: 6e64 2028 6e6f 7420 7365 6c66 2e5f 7365  nd (not self._se
+00006c10: 676d 656e 745f 7461 736b 2e64 6f6e 6528  gment_task.done(
+00006c20: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+00006c30: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+00006c40: 2020 2020 2073 656c 662e 5f73 6567 6d65       self._segme
+00006c50: 6e74 5f74 6173 6b2e 6361 6e63 656c 2829  nt_task.cancel()
+00006c60: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
+00006c70: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+00006c80: 2065 3a0a 2020 2020 2020 2020 2020 2020   e:.            
+00006c90: 2020 2020 7365 6c66 2e6c 6f67 2e77 6172      self.log.war
+00006ca0: 6e69 6e67 2866 2266 6169 6c65 6420 746f  ning(f"failed to
+00006cb0: 2063 616e 6365 6c20 7365 676d 656e 7420   cancel segment 
+00006cc0: 7461 736b 207b 657d 2229 0a20 2020 2020  task {e}").     
+00006cd0: 2020 2020 2020 2073 656c 662e 5f73 6567         self._seg
+00006ce0: 6d65 6e74 5f74 6173 6b20 3d20 4e6f 6e65  ment_task = None
+00006cf0: 0a0a 2020 2020 2020 2020 7472 793a 0a20  ..        try:. 
+00006d00: 2020 2020 2020 2020 2020 2070 6565 725f             peer_
+00006d10: 696e 666f 203d 2070 6565 722e 6765 745f  info = peer.get_
+00006d20: 7065 6572 5f6c 6f67 6769 6e67 2829 0a20  peer_logging(). 
+00006d30: 2020 2020 2020 2020 2020 2066 6f72 2068             for h
+00006d40: 6569 6768 7420 696e 2072 616e 6765 2873  eight in range(s
+00006d50: 7461 7274 5f68 6569 6768 742c 2074 6172  tart_height, tar
+00006d60: 6765 745f 6865 6967 6874 2c20 6261 7463  get_height, batc
+00006d70: 685f 7369 7a65 293a 0a20 2020 2020 2020  h_size):.       
+00006d80: 2020 2020 2020 2020 2065 6e64 5f68 6569           end_hei
+00006d90: 6768 7420 3d20 6d69 6e28 7461 7267 6574  ght = min(target
+00006da0: 5f68 6569 6768 742c 2068 6569 6768 7420  _height, height 
+00006db0: 2b20 6261 7463 685f 7369 7a65 290a 2020  + batch_size).  
+00006dc0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00006dd0: 7175 6573 7420 3d20 5265 7175 6573 7442  quest = RequestB
+00006de0: 6c6f 636b 7328 7569 6e74 3332 2868 6569  locks(uint32(hei
+00006df0: 6768 7429 2c20 7569 6e74 3332 2865 6e64  ght), uint32(end
+00006e00: 5f68 6569 6768 7429 2c20 5472 7565 290a  _height), True).
+00006e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006e20: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
+00006e30: 2070 6565 722e 6361 6c6c 5f61 7069 2846   peer.call_api(F
+00006e40: 756c 6c4e 6f64 6541 5049 2e72 6571 7565  ullNodeAPI.reque
+00006e50: 7374 5f62 6c6f 636b 732c 2072 6571 7565  st_blocks, reque
+00006e60: 7374 290a 2020 2020 2020 2020 2020 2020  st).            
+00006e70: 2020 2020 6966 206e 6f74 2072 6573 706f      if not respo
+00006e80: 6e73 653a 0a20 2020 2020 2020 2020 2020  nse:.           
+00006e90: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
+00006ea0: 616c 7565 4572 726f 7228 6622 4572 726f  alueError(f"Erro
+00006eb0: 7220 7368 6f72 7420 6261 7463 6820 7379  r short batch sy
+00006ec0: 6e63 696e 672c 2069 6e76 616c 6964 2f6e  ncing, invalid/n
+00006ed0: 6f20 7265 7370 6f6e 7365 2066 6f72 207b  o response for {
+00006ee0: 6865 6967 6874 7d2d 7b65 6e64 5f68 6569  height}-{end_hei
+00006ef0: 6768 747d 2229 0a20 2020 2020 2020 2020  ght}").         
+00006f00: 2020 2020 2020 2061 7379 6e63 2077 6974         async wit
+00006f10: 6820 7365 6c66 2e62 6c6f 636b 6368 6169  h self.blockchai
+00006f20: 6e2e 7072 696f 7269 7479 5f6d 7574 6578  n.priority_mutex
+00006f30: 2e61 6371 7569 7265 2870 7269 6f72 6974  .acquire(priorit
+00006f40: 793d 426c 6f63 6b63 6861 696e 4d75 7465  y=BlockchainMute
+00006f50: 7850 7269 6f72 6974 792e 6869 6768 293a  xPriority.high):
+00006f60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006f70: 2020 2020 2073 7461 7465 5f63 6861 6e67       state_chang
+00006f80: 655f 7375 6d6d 6172 793a 204f 7074 696f  e_summary: Optio
+00006f90: 6e61 6c5b 5374 6174 6543 6861 6e67 6553  nal[StateChangeS
+00006fa0: 756d 6d61 7279 5d0a 2020 2020 2020 2020  ummary].        
+00006fb0: 2020 2020 2020 2020 2020 2020 7375 6363              succ
+00006fc0: 6573 732c 2073 7461 7465 5f63 6861 6e67  ess, state_chang
+00006fd0: 655f 7375 6d6d 6172 792c 205f 203d 2061  e_summary, _ = a
+00006fe0: 7761 6974 2073 656c 662e 6164 645f 626c  wait self.add_bl
+00006ff0: 6f63 6b5f 6261 7463 6828 7265 7370 6f6e  ock_batch(respon
+00007000: 7365 2e62 6c6f 636b 732c 2070 6565 725f  se.blocks, peer_
+00007010: 696e 666f 2c20 4e6f 6e65 290a 2020 2020  info, None).    
+00007020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007030: 6966 206e 6f74 2073 7563 6365 7373 3a0a  if not success:.
+00007040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007050: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
+00007060: 6c75 6545 7272 6f72 2866 2245 7272 6f72  lueError(f"Error
+00007070: 2073 686f 7274 2062 6174 6368 2073 796e   short batch syn
+00007080: 6369 6e67 2c20 6661 696c 6564 2074 6f20  cing, failed to 
+00007090: 7661 6c69 6461 7465 2062 6c6f 636b 7320  validate blocks 
+000070a0: 7b68 6569 6768 747d 2d7b 656e 645f 6865  {height}-{end_he
+000070b0: 6967 6874 7d22 290a 2020 2020 2020 2020  ight}").        
+000070c0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+000070d0: 7461 7465 5f63 6861 6e67 655f 7375 6d6d  tate_change_summ
+000070e0: 6172 7920 6973 206e 6f74 204e 6f6e 653a  ary is not None:
+000070f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007100: 2020 2020 2020 2020 2074 7279 3a0a 2020           try:.  
+00007110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007120: 2020 2020 2020 2020 2020 7065 616b 5f66            peak_f
+00007130: 623a 204f 7074 696f 6e61 6c5b 4675 6c6c  b: Optional[Full
+00007140: 426c 6f63 6b5d 203d 2061 7761 6974 2073  Block] = await s
+00007150: 656c 662e 626c 6f63 6b63 6861 696e 2e67  elf.blockchain.g
+00007160: 6574 5f66 756c 6c5f 7065 616b 2829 0a20  et_full_peak(). 
+00007170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007180: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+00007190: 7420 7065 616b 5f66 6220 6973 206e 6f74  t peak_fb is not
+000071a0: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
+000071b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000071c0: 2020 7070 705f 7265 7375 6c74 3a20 5065    ppp_result: Pe
+000071d0: 616b 506f 7374 5072 6f63 6573 7369 6e67  akPostProcessing
+000071e0: 5265 7375 6c74 203d 2061 7761 6974 2073  Result = await s
+000071f0: 656c 662e 7065 616b 5f70 6f73 745f 7072  elf.peak_post_pr
+00007200: 6f63 6573 7369 6e67 280a 2020 2020 2020  ocessing(.      
+00007210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007220: 2020 2020 2020 2020 2020 7065 616b 5f66            peak_f
+00007230: 622c 0a20 2020 2020 2020 2020 2020 2020  b,.             
+00007240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007250: 2020 2073 7461 7465 5f63 6861 6e67 655f     state_change_
+00007260: 7375 6d6d 6172 792c 0a20 2020 2020 2020  summary,.       
+00007270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007280: 2020 2020 2020 2020 2070 6565 722c 0a20           peer,. 
+00007290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000072a0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+000072b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000072c0: 2020 2020 2020 2020 2061 7761 6974 2073           await s
+000072d0: 656c 662e 7065 616b 5f70 6f73 745f 7072  elf.peak_post_pr
+000072e0: 6f63 6573 7369 6e67 5f32 2870 6561 6b5f  ocessing_2(peak_
+000072f0: 6662 2c20 7065 6572 2c20 7374 6174 655f  fb, peer, state_
+00007300: 6368 616e 6765 5f73 756d 6d61 7279 2c20  change_summary, 
+00007310: 7070 705f 7265 7375 6c74 290a 2020 2020  ppp_result).    
+00007320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007330: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+00007340: 7469 6f6e 3a0a 2020 2020 2020 2020 2020  tion:.          
+00007350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007360: 2020 2320 5374 696c 6c20 646f 2070 6f73    # Still do pos
+00007370: 7420 7072 6f63 6573 7369 6e67 2061 6674  t processing aft
+00007380: 6572 2063 616e 6365 6c20 286f 7220 6578  er cancel (or ex
+00007390: 6365 7074 696f 6e29 0a20 2020 2020 2020  ception).       
+000073a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000073b0: 2020 2020 2070 6561 6b5f 6662 203d 2061       peak_fb = a
+000073c0: 7761 6974 2073 656c 662e 626c 6f63 6b63  wait self.blockc
+000073d0: 6861 696e 2e67 6574 5f66 756c 6c5f 7065  hain.get_full_pe
+000073e0: 616b 2829 0a20 2020 2020 2020 2020 2020  ak().           
+000073f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007400: 2061 7373 6572 7420 7065 616b 5f66 6220   assert peak_fb 
+00007410: 6973 206e 6f74 204e 6f6e 650a 2020 2020  is not None.    
+00007420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007430: 2020 2020 2020 2020 6177 6169 7420 7365          await se
+00007440: 6c66 2e70 6561 6b5f 706f 7374 5f70 726f  lf.peak_post_pro
+00007450: 6365 7373 696e 6728 7065 616b 5f66 622c  cessing(peak_fb,
+00007460: 2073 7461 7465 5f63 6861 6e67 655f 7375   state_change_su
+00007470: 6d6d 6172 792c 2070 6565 7229 0a20 2020  mmary, peer).   
+00007480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007490: 2020 2020 2020 2020 2072 6169 7365 0a20           raise. 
+000074a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000074b0: 2020 2020 2020 2066 696e 616c 6c79 3a0a         finally:.
+000074c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000074d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000074e0: 2e6c 6f67 2e69 6e66 6f28 6622 4164 6465  .log.info(f"Adde
+000074f0: 6420 626c 6f63 6b73 207b 6865 6967 6874  d blocks {height
+00007500: 7d2d 7b65 6e64 5f68 6569 6768 747d 2229  }-{end_height}")
+00007510: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
+00007520: 2861 7379 6e63 696f 2e43 616e 6365 6c6c  (asyncio.Cancell
+00007530: 6564 4572 726f 722c 2045 7863 6570 7469  edError, Excepti
+00007540: 6f6e 293a 0a20 2020 2020 2020 2020 2020  on):.           
+00007550: 2073 656c 662e 7379 6e63 5f73 746f 7265   self.sync_store
+00007560: 2e62 6174 6368 5f73 796e 6369 6e67 2e72  .batch_syncing.r
+00007570: 656d 6f76 6528 7065 6572 2e70 6565 725f  emove(peer.peer_
+00007580: 6e6f 6465 5f69 6429 0a20 2020 2020 2020  node_id).       
+00007590: 2020 2020 2072 6169 7365 0a20 2020 2020       raise.     
+000075a0: 2020 2073 656c 662e 7379 6e63 5f73 746f     self.sync_sto
+000075b0: 7265 2e62 6174 6368 5f73 796e 6369 6e67  re.batch_syncing
+000075c0: 2e72 656d 6f76 6528 7065 6572 2e70 6565  .remove(peer.pee
+000075d0: 725f 6e6f 6465 5f69 6429 0a20 2020 2020  r_node_id).     
+000075e0: 2020 2072 6574 7572 6e20 5472 7565 0a0a     return True..
+000075f0: 2020 2020 6173 796e 6320 6465 6620 7368      async def sh
+00007600: 6f72 745f 7379 6e63 5f62 6163 6b74 7261  ort_sync_backtra
+00007610: 636b 280a 2020 2020 2020 2020 7365 6c66  ck(.        self
+00007620: 2c20 7065 6572 3a20 5753 4368 6961 436f  , peer: WSChiaCo
+00007630: 6e6e 6563 7469 6f6e 2c20 7065 616b 5f68  nnection, peak_h
+00007640: 6569 6768 743a 2075 696e 7433 322c 2074  eight: uint32, t
+00007650: 6172 6765 745f 6865 6967 6874 3a20 7569  arget_height: ui
+00007660: 6e74 3332 2c20 7461 7267 6574 5f75 6e66  nt32, target_unf
+00007670: 5f68 6173 683a 2062 7974 6573 3332 0a20  _hash: bytes32. 
+00007680: 2020 2029 202d 3e20 626f 6f6c 3a0a 2020     ) -> bool:.  
+00007690: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+000076a0: 2020 5065 7266 6f72 6d73 2061 2062 6163    Performs a bac
+000076b0: 6b74 7261 636b 2073 796e 632c 2077 6865  ktrack sync, whe
+000076c0: 7265 2062 6c6f 636b 7320 6172 6520 646f  re blocks are do
+000076d0: 776e 6c6f 6164 6564 206f 6e65 2061 7420  wnloaded one at 
+000076e0: 6120 7469 6d65 2066 726f 6d20 6e65 7765  a time from newe
+000076f0: 7374 2074 6f20 6f6c 6465 7374 2e20 4966  st to oldest. If
+00007700: 2077 6520 646f 206e 6f74 0a20 2020 2020   we do not.     
+00007710: 2020 2066 696e 6420 7468 6520 666f 726b     find the fork
+00007720: 2070 6f69 6e74 2035 2064 6565 7065 7220   point 5 deeper 
+00007730: 7468 616e 206f 7572 2070 6561 6b2c 2077  than our peak, w
+00007740: 6520 7265 7475 726e 2046 616c 7365 2061  e return False a
+00007750: 6e64 2064 6f20 6120 6c6f 6e67 2073 796e  nd do a long syn
+00007760: 6320 696e 7374 6561 642e 0a0a 2020 2020  c instead...    
+00007770: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
+00007780: 2020 2020 2020 7065 6572 3a20 7065 6572        peer: peer
+00007790: 2074 6f20 7379 6e63 2066 726f 6d0a 2020   to sync from.  
+000077a0: 2020 2020 2020 2020 2020 7065 616b 5f68            peak_h
+000077b0: 6569 6768 743a 2068 6569 6768 7420 6f66  eight: height of
+000077c0: 206f 7572 2070 6561 6b0a 2020 2020 2020   our peak.      
+000077d0: 2020 2020 2020 7461 7267 6574 5f68 6569        target_hei
+000077e0: 6768 743a 2074 6172 6765 7420 6865 6967  ght: target heig
+000077f0: 6874 0a20 2020 2020 2020 2020 2020 2074  ht.            t
+00007800: 6172 6765 745f 756e 665f 6861 7368 3a20  arget_unf_hash: 
+00007810: 7061 7274 6961 6c20 6861 7368 206f 6620  partial hash of 
+00007820: 7468 6520 756e 6669 6e69 7368 6564 2062  the unfinished b
+00007830: 6c6f 636b 206f 6620 7468 6520 7461 7267  lock of the targ
+00007840: 6574 0a0a 2020 2020 2020 2020 5265 7475  et..        Retu
+00007850: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
+00007860: 2054 7275 6520 6966 6620 7765 2066 6f75   True iff we fou
+00007870: 6e64 2074 6865 2066 6f72 6b20 706f 696e  nd the fork poin
+00007880: 742c 2061 6e64 2077 6520 646f 206e 6f74  t, and we do not
+00007890: 206e 6565 6420 746f 206c 6f6e 6720 7379   need to long sy
+000078a0: 6e63 2e0a 2020 2020 2020 2020 2222 220a  nc..        """.
+000078b0: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+000078c0: 2020 2020 2020 2020 2073 656c 662e 7379           self.sy
+000078d0: 6e63 5f73 746f 7265 2e69 6e63 7265 6d65  nc_store.increme
+000078e0: 6e74 5f62 6163 6b74 7261 636b 5f73 796e  nt_backtrack_syn
+000078f0: 6369 6e67 286e 6f64 655f 6964 3d70 6565  cing(node_id=pee
+00007900: 722e 7065 6572 5f6e 6f64 655f 6964 290a  r.peer_node_id).
+00007910: 0a20 2020 2020 2020 2020 2020 2075 6e66  .            unf
+00007920: 696e 6973 6865 645f 626c 6f63 6b3a 204f  inished_block: O
+00007930: 7074 696f 6e61 6c5b 556e 6669 6e69 7368  ptional[Unfinish
+00007940: 6564 426c 6f63 6b5d 203d 2073 656c 662e  edBlock] = self.
+00007950: 6675 6c6c 5f6e 6f64 655f 7374 6f72 652e  full_node_store.
+00007960: 6765 745f 756e 6669 6e69 7368 6564 5f62  get_unfinished_b
+00007970: 6c6f 636b 2874 6172 6765 745f 756e 665f  lock(target_unf_
+00007980: 6861 7368 290a 2020 2020 2020 2020 2020  hash).          
+00007990: 2020 6375 7272 5f68 6569 6768 743a 2069    curr_height: i
+000079a0: 6e74 203d 2074 6172 6765 745f 6865 6967  nt = target_heig
+000079b0: 6874 0a20 2020 2020 2020 2020 2020 2066  ht.            f
+000079c0: 6f75 6e64 5f66 6f72 6b5f 706f 696e 7420  ound_fork_point 
+000079d0: 3d20 4661 6c73 650a 2020 2020 2020 2020  = False.        
+000079e0: 2020 2020 626c 6f63 6b73 203d 205b 5d0a      blocks = [].
+000079f0: 2020 2020 2020 2020 2020 2020 7768 696c              whil
+00007a00: 6520 6375 7272 5f68 6569 6768 7420 3e20  e curr_height > 
+00007a10: 7065 616b 5f68 6569 6768 7420 2d20 353a  peak_height - 5:
+00007a20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007a30: 2023 2049 6620 7765 2061 6c72 6561 6479   # If we already
+00007a40: 2068 6176 6520 7468 6520 756e 6669 6e69   have the unfini
+00007a50: 7368 6564 2062 6c6f 636b 2c20 646f 6e27  shed block, don'
+00007a60: 7420 6665 7463 6820 7468 6520 7472 616e  t fetch the tran
+00007a70: 7361 6374 696f 6e73 2e20 496e 2074 6865  sactions. In the
+00007a80: 206e 6f72 6d61 6c20 6361 7365 2c20 7765   normal case, we
+00007a90: 2077 696c 6c0a 2020 2020 2020 2020 2020   will.          
+00007aa0: 2020 2020 2020 2320 616c 7265 6164 7920        # already 
+00007ab0: 6861 7665 2074 6865 2075 6e66 696e 6973  have the unfinis
+00007ac0: 6865 6420 626c 6f63 6b2c 2066 726f 6d20  hed block, from 
+00007ad0: 7768 656e 2069 7420 7761 7320 6272 6f61  when it was broa
+00007ae0: 6463 6173 742c 2073 6f20 7765 206a 7573  dcast, so we jus
+00007af0: 7420 6e65 6564 2074 6f20 646f 776e 6c6f  t need to downlo
+00007b00: 6164 2074 6865 2068 6561 6465 722c 0a20  ad the header,. 
+00007b10: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00007b20: 2062 7574 206e 6f74 2074 6865 2074 7261   but not the tra
+00007b30: 6e73 6163 7469 6f6e 730a 2020 2020 2020  nsactions.      
+00007b40: 2020 2020 2020 2020 2020 6665 7463 685f            fetch_
+00007b50: 7478 3a20 626f 6f6c 203d 2075 6e66 696e  tx: bool = unfin
+00007b60: 6973 6865 645f 626c 6f63 6b20 6973 204e  ished_block is N
+00007b70: 6f6e 6520 6f72 2063 7572 725f 6865 6967  one or curr_heig
+00007b80: 6874 2021 3d20 7461 7267 6574 5f68 6569  ht != target_hei
+00007b90: 6768 740a 2020 2020 2020 2020 2020 2020  ght.            
+00007ba0: 2020 2020 6375 7272 203d 2061 7761 6974      curr = await
+00007bb0: 2070 6565 722e 6361 6c6c 5f61 7069 280a   peer.call_api(.
+00007bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007bd0: 2020 2020 4675 6c6c 4e6f 6465 4150 492e      FullNodeAPI.
+00007be0: 7265 7175 6573 745f 626c 6f63 6b2c 2066  request_block, f
+00007bf0: 756c 6c5f 6e6f 6465 5f70 726f 746f 636f  ull_node_protoco
+00007c00: 6c2e 5265 7175 6573 7442 6c6f 636b 2875  l.RequestBlock(u
+00007c10: 696e 7433 3228 6375 7272 5f68 6569 6768  int32(curr_heigh
+00007c20: 7429 2c20 6665 7463 685f 7478 290a 2020  t), fetch_tx).  
+00007c30: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+00007c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007c50: 6966 2063 7572 7220 6973 204e 6f6e 653a  if curr is None:
+00007c60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007c70: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
+00007c80: 4572 726f 7228 6622 4661 696c 6564 2074  Error(f"Failed t
+00007c90: 6f20 6665 7463 6820 626c 6f63 6b20 7b63  o fetch block {c
+00007ca0: 7572 725f 6865 6967 6874 7d20 6672 6f6d  urr_height} from
+00007cb0: 207b 7065 6572 2e67 6574 5f70 6565 725f   {peer.get_peer_
+00007cc0: 6c6f 6767 696e 6728 297d 2c20 7469 6d65  logging()}, time
+00007cd0: 6420 6f75 7422 290a 2020 2020 2020 2020  d out").        
+00007ce0: 2020 2020 2020 2020 6966 2063 7572 7220          if curr 
+00007cf0: 6973 204e 6f6e 6520 6f72 206e 6f74 2069  is None or not i
+00007d00: 7369 6e73 7461 6e63 6528 6375 7272 2c20  sinstance(curr, 
+00007d10: 6675 6c6c 5f6e 6f64 655f 7072 6f74 6f63  full_node_protoc
+00007d20: 6f6c 2e52 6573 706f 6e64 426c 6f63 6b29  ol.RespondBlock)
+00007d30: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00007d40: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
+00007d50: 6545 7272 6f72 280a 2020 2020 2020 2020  eError(.        
+00007d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007d70: 6622 4661 696c 6564 2074 6f20 6665 7463  f"Failed to fetc
+00007d80: 6820 626c 6f63 6b20 7b63 7572 725f 6865  h block {curr_he
+00007d90: 6967 6874 7d20 6672 6f6d 207b 7065 6572  ight} from {peer
+00007da0: 2e67 6574 5f70 6565 725f 6c6f 6767 696e  .get_peer_loggin
+00007db0: 6728 297d 2c20 7772 6f6e 6720 7479 7065  g()}, wrong type
+00007dc0: 207b 7479 7065 2863 7572 7229 7d22 0a20   {type(curr)}". 
+00007dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007de0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+00007df0: 2020 2020 2062 6c6f 636b 732e 6170 7065       blocks.appe
+00007e00: 6e64 2863 7572 722e 626c 6f63 6b29 0a20  nd(curr.block). 
+00007e10: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00007e20: 6620 7365 6c66 2e62 6c6f 636b 6368 6169  f self.blockchai
+00007e30: 6e2e 636f 6e74 6169 6e73 5f62 6c6f 636b  n.contains_block
+00007e40: 2863 7572 722e 626c 6f63 6b2e 7072 6576  (curr.block.prev
+00007e50: 5f68 6561 6465 725f 6861 7368 2920 6f72  _header_hash) or
+00007e60: 2063 7572 725f 6865 6967 6874 203d 3d20   curr_height == 
+00007e70: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
+00007e80: 2020 2020 2020 2066 6f75 6e64 5f66 6f72         found_for
+00007e90: 6b5f 706f 696e 7420 3d20 5472 7565 0a20  k_point = True. 
+00007ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007eb0: 2020 2062 7265 616b 0a20 2020 2020 2020     break.       
+00007ec0: 2020 2020 2020 2020 2063 7572 725f 6865           curr_he
+00007ed0: 6967 6874 202d 3d20 310a 2020 2020 2020  ight -= 1.      
+00007ee0: 2020 2020 2020 6966 2066 6f75 6e64 5f66        if found_f
+00007ef0: 6f72 6b5f 706f 696e 743a 0a20 2020 2020  ork_point:.     
+00007f00: 2020 2020 2020 2020 2020 2066 6f72 2062             for b
+00007f10: 6c6f 636b 2069 6e20 7265 7665 7273 6564  lock in reversed
+00007f20: 2862 6c6f 636b 7329 3a0a 2020 2020 2020  (blocks):.      
+00007f30: 2020 2020 2020 2020 2020 2020 2020 6177                aw
+00007f40: 6169 7420 7365 6c66 2e61 6464 5f62 6c6f  ait self.add_blo
+00007f50: 636b 2862 6c6f 636b 2c20 7065 6572 290a  ck(block, peer).
+00007f60: 2020 2020 2020 2020 6578 6365 7074 2028          except (
+00007f70: 6173 796e 6369 6f2e 4361 6e63 656c 6c65  asyncio.Cancelle
+00007f80: 6445 7272 6f72 2c20 4578 6365 7074 696f  dError, Exceptio
+00007f90: 6e29 3a0a 2020 2020 2020 2020 2020 2020  n):.            
+00007fa0: 7365 6c66 2e73 796e 635f 7374 6f72 652e  self.sync_store.
+00007fb0: 6465 6372 656d 656e 745f 6261 636b 7472  decrement_backtr
+00007fc0: 6163 6b5f 7379 6e63 696e 6728 6e6f 6465  ack_syncing(node
+00007fd0: 5f69 643d 7065 6572 2e70 6565 725f 6e6f  _id=peer.peer_no
+00007fe0: 6465 5f69 6429 0a20 2020 2020 2020 2020  de_id).         
+00007ff0: 2020 2072 6169 7365 0a0a 2020 2020 2020     raise..      
+00008000: 2020 7365 6c66 2e73 796e 635f 7374 6f72    self.sync_stor
+00008010: 652e 6465 6372 656d 656e 745f 6261 636b  e.decrement_back
+00008020: 7472 6163 6b5f 7379 6e63 696e 6728 6e6f  track_syncing(no
+00008030: 6465 5f69 643d 7065 6572 2e70 6565 725f  de_id=peer.peer_
+00008040: 6e6f 6465 5f69 6429 0a20 2020 2020 2020  node_id).       
+00008050: 2072 6574 7572 6e20 666f 756e 645f 666f   return found_fo
+00008060: 726b 5f70 6f69 6e74 0a0a 2020 2020 6173  rk_point..    as
+00008070: 796e 6320 6465 6620 5f72 6566 7265 7368  ync def _refresh
+00008080: 5f75 695f 636f 6e6e 6563 7469 6f6e 7328  _ui_connections(
+00008090: 7365 6c66 2c20 736c 6565 705f 6265 666f  self, sleep_befo
+000080a0: 7265 3a20 666c 6f61 7420 3d20 3029 202d  re: float = 0) -
+000080b0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+000080c0: 6966 2073 6c65 6570 5f62 6566 6f72 6520  if sleep_before 
+000080d0: 3e20 303a 0a20 2020 2020 2020 2020 2020  > 0:.           
+000080e0: 2061 7761 6974 2061 7379 6e63 696f 2e73   await asyncio.s
+000080f0: 6c65 6570 2873 6c65 6570 5f62 6566 6f72  leep(sleep_befor
+00008100: 6529 0a20 2020 2020 2020 2073 656c 662e  e).        self.
+00008110: 5f73 7461 7465 5f63 6861 6e67 6564 2822  _state_changed("
+00008120: 7065 6572 5f63 6861 6e67 6564 5f70 6561  peer_changed_pea
+00008130: 6b22 290a 0a20 2020 2061 7379 6e63 2064  k")..    async d
+00008140: 6566 206e 6577 5f70 6561 6b28 7365 6c66  ef new_peak(self
+00008150: 2c20 7265 7175 6573 743a 2066 756c 6c5f  , request: full_
+00008160: 6e6f 6465 5f70 726f 746f 636f 6c2e 4e65  node_protocol.Ne
+00008170: 7750 6561 6b2c 2070 6565 723a 2057 5343  wPeak, peer: WSC
+00008180: 6869 6143 6f6e 6e65 6374 696f 6e29 202d  hiaConnection) -
+00008190: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+000081a0: 2222 220a 2020 2020 2020 2020 5765 2068  """.        We h
+000081b0: 6176 6520 7265 6365 6976 6564 2061 206e  ave received a n
+000081c0: 6f74 6966 6963 6174 696f 6e20 6f66 2061  otification of a
+000081d0: 206e 6577 2070 6561 6b20 6672 6f6d 2061   new peak from a
+000081e0: 2070 6565 722e 2054 6869 7320 6861 7070   peer. This happ
+000081f0: 656e 7320 6569 7468 6572 2077 6865 6e20  ens either when 
+00008200: 7765 2068 6176 6520 6a75 7374 2063 6f6e  we have just con
+00008210: 6e65 6374 6564 2c0a 2020 2020 2020 2020  nected,.        
+00008220: 6f72 2077 6865 6e20 7468 6520 7065 6572  or when the peer
+00008230: 2068 6173 2075 7064 6174 6564 2074 6865   has updated the
+00008240: 6972 2070 6561 6b2e 0a0a 2020 2020 2020  ir peak...      
+00008250: 2020 4172 6773 3a0a 2020 2020 2020 2020    Args:.        
+00008260: 2020 2020 7265 7175 6573 743a 2069 6e66      request: inf
+00008270: 6f72 6d61 7469 6f6e 2061 626f 7574 2074  ormation about t
+00008280: 6865 206e 6577 2070 6561 6b0a 2020 2020  he new peak.    
+00008290: 2020 2020 2020 2020 7065 6572 3a20 7065          peer: pe
+000082a0: 6572 2074 6861 7420 7365 6e74 2074 6865  er that sent the
+000082b0: 206d 6573 7361 6765 0a0a 2020 2020 2020   message..      
+000082c0: 2020 2222 220a 0a20 2020 2020 2020 2074    """..        t
+000082d0: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+000082e0: 7365 656e 5f68 6561 6465 725f 6861 7368  seen_header_hash
+000082f0: 203d 2073 656c 662e 7379 6e63 5f73 746f   = self.sync_sto
+00008300: 7265 2e73 6565 6e5f 6865 6164 6572 5f68  re.seen_header_h
+00008310: 6173 6828 7265 7175 6573 742e 6865 6164  ash(request.head
+00008320: 6572 5f68 6173 6829 0a20 2020 2020 2020  er_hash).       
+00008330: 2020 2020 2023 2055 7064 6174 6573 2068       # Updates h
+00008340: 6569 6768 7473 2069 6e20 7468 6520 5549  eights in the UI
+00008350: 2e20 536c 6565 7073 2031 2e35 7320 6265  . Sleeps 1.5s be
+00008360: 666f 7265 2c20 736f 206f 7468 6572 2070  fore, so other p
+00008370: 6565 7273 2068 6176 6520 7469 6d65 2074  eers have time t
+00008380: 6f20 7570 6461 7465 2074 6865 6972 2070  o update their p
+00008390: 6561 6b73 2061 7320 7765 6c6c 2e0a 2020  eaks as well..  
+000083a0: 2020 2020 2020 2020 2020 2320 4c69 6d69            # Limi
+000083b0: 7420 746f 2033 2072 6566 7265 7368 6573  t to 3 refreshes
+000083c0: 2e0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+000083d0: 206e 6f74 2073 6565 6e5f 6865 6164 6572   not seen_header
+000083e0: 5f68 6173 6820 616e 6420 6c65 6e28 7365  _hash and len(se
+000083f0: 6c66 2e5f 7569 5f74 6173 6b73 2920 3c20  lf._ui_tasks) < 
+00008400: 333a 0a20 2020 2020 2020 2020 2020 2020  3:.             
+00008410: 2020 2073 656c 662e 5f75 695f 7461 736b     self._ui_task
+00008420: 732e 6164 6428 6173 796e 6369 6f2e 6372  s.add(asyncio.cr
+00008430: 6561 7465 5f74 6173 6b28 7365 6c66 2e5f  eate_task(self._
+00008440: 7265 6672 6573 685f 7569 5f63 6f6e 6e65  refresh_ui_conne
+00008450: 6374 696f 6e73 2831 2e35 2929 290a 2020  ctions(1.5))).  
+00008460: 2020 2020 2020 2020 2020 2320 5072 756e            # Prun
+00008470: 6520 636f 6d70 6c65 7465 6420 636f 6e6e  e completed conn
+00008480: 6563 7420 7461 736b 730a 2020 2020 2020  ect tasks.      
+00008490: 2020 2020 2020 7365 6c66 2e5f 7569 5f74        self._ui_t
+000084a0: 6173 6b73 203d 2073 6574 2866 696c 7465  asks = set(filte
+000084b0: 7228 6c61 6d62 6461 2074 3a20 6e6f 7420  r(lambda t: not 
+000084c0: 742e 646f 6e65 2829 2c20 7365 6c66 2e5f  t.done(), self._
+000084d0: 7569 5f74 6173 6b73 2929 0a20 2020 2020  ui_tasks)).     
+000084e0: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
+000084f0: 696f 6e20 6173 2065 3a0a 2020 2020 2020  ion as e:.      
+00008500: 2020 2020 2020 7365 6c66 2e6c 6f67 2e77        self.log.w
+00008510: 6172 6e69 6e67 2866 2245 7863 6570 7469  arning(f"Excepti
+00008520: 6f6e 2055 4920 7265 6672 6573 6820 7461  on UI refresh ta
+00008530: 736b 3a20 7b65 7d22 290a 0a20 2020 2020  sk: {e}")..     
+00008540: 2020 2023 2053 746f 7265 2074 6869 7320     # Store this 
+00008550: 7065 616b 2f70 6565 7220 636f 6d62 696e  peak/peer combin
+00008560: 6174 696f 6e20 696e 2063 6173 6520 7765  ation in case we
+00008570: 2077 616e 7420 746f 2073 796e 6320 746f   want to sync to
+00008580: 2069 742c 2061 6e64 2074 6f20 6b65 6570   it, and to keep
+00008590: 2074 7261 636b 206f 6620 7065 6572 730a   track of peers.
+000085a0: 2020 2020 2020 2020 7365 6c66 2e73 796e          self.syn
+000085b0: 635f 7374 6f72 652e 7065 6572 5f68 6173  c_store.peer_has
+000085c0: 5f62 6c6f 636b 2872 6571 7565 7374 2e68  _block(request.h
+000085d0: 6561 6465 725f 6861 7368 2c20 7065 6572  eader_hash, peer
+000085e0: 2e70 6565 725f 6e6f 6465 5f69 642c 2072  .peer_node_id, r
+000085f0: 6571 7565 7374 2e77 6569 6768 742c 2072  equest.weight, r
+00008600: 6571 7565 7374 2e68 6569 6768 742c 2054  equest.height, T
+00008610: 7275 6529 0a0a 2020 2020 2020 2020 6966  rue)..        if
+00008620: 2073 656c 662e 626c 6f63 6b63 6861 696e   self.blockchain
+00008630: 2e63 6f6e 7461 696e 735f 626c 6f63 6b28  .contains_block(
+00008640: 7265 7175 6573 742e 6865 6164 6572 5f68  request.header_h
+00008650: 6173 6829 3a0a 2020 2020 2020 2020 2020  ash):.          
+00008660: 2020 7265 7475 726e 204e 6f6e 650a 0a20    return None.. 
+00008670: 2020 2020 2020 2023 204e 6f74 2069 6e74         # Not int
+00008680: 6572 6573 7465 6420 696e 206c 6573 7320  erested in less 
+00008690: 6865 6176 7920 7065 616b 730a 2020 2020  heavy peaks.    
+000086a0: 2020 2020 7065 616b 3a20 4f70 7469 6f6e      peak: Option
+000086b0: 616c 5b42 6c6f 636b 5265 636f 7264 5d20  al[BlockRecord] 
+000086c0: 3d20 7365 6c66 2e62 6c6f 636b 6368 6169  = self.blockchai
+000086d0: 6e2e 6765 745f 7065 616b 2829 0a20 2020  n.get_peak().   
+000086e0: 2020 2020 2063 7572 725f 7065 616b 5f68       curr_peak_h
+000086f0: 6569 6768 7420 3d20 7569 6e74 3332 2830  eight = uint32(0
+00008700: 2920 6966 2070 6561 6b20 6973 204e 6f6e  ) if peak is Non
+00008710: 6520 656c 7365 2070 6561 6b2e 6865 6967  e else peak.heig
+00008720: 6874 0a20 2020 2020 2020 2069 6620 7065  ht.        if pe
+00008730: 616b 2069 7320 6e6f 7420 4e6f 6e65 2061  ak is not None a
+00008740: 6e64 2070 6561 6b2e 7765 6967 6874 203e  nd peak.weight >
+00008750: 2072 6571 7565 7374 2e77 6569 6768 743a   request.weight:
+00008760: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00008770: 7572 6e20 4e6f 6e65 0a0a 2020 2020 2020  urn None..      
+00008780: 2020 6966 2073 656c 662e 7379 6e63 5f73    if self.sync_s
+00008790: 746f 7265 2e67 6574 5f73 796e 635f 6d6f  tore.get_sync_mo
+000087a0: 6465 2829 3a0a 2020 2020 2020 2020 2020  de():.          
+000087b0: 2020 2320 4966 2070 6565 7220 636f 6e6e    # If peer conn
+000087c0: 6563 7473 2077 6869 6c65 2077 6520 6172  ects while we ar
+000087d0: 6520 7379 6e63 696e 672c 2063 6865 636b  e syncing, check
+000087e0: 2069 6620 7468 6579 2068 6176 6520 7468   if they have th
+000087f0: 6520 626c 6f63 6b20 7765 2061 7265 2073  e block we are s
+00008800: 796e 6369 6e67 2074 6f77 6172 6473 0a20  yncing towards. 
+00008810: 2020 2020 2020 2020 2020 2074 6172 6765             targe
+00008820: 745f 7065 616b 203d 2073 656c 662e 7379  t_peak = self.sy
+00008830: 6e63 5f73 746f 7265 2e74 6172 6765 745f  nc_store.target_
+00008840: 7065 616b 0a20 2020 2020 2020 2020 2020  peak.           
+00008850: 2069 6620 7461 7267 6574 5f70 6561 6b20   if target_peak 
+00008860: 6973 206e 6f74 204e 6f6e 6520 616e 6420  is not None and 
+00008870: 7265 7175 6573 742e 6865 6164 6572 5f68  request.header_h
+00008880: 6173 6820 213d 2074 6172 6765 745f 7065  ash != target_pe
+00008890: 616b 2e68 6561 6465 725f 6861 7368 3a0a  ak.header_hash:.
+000088a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000088b0: 7065 616b 5f70 6565 7273 3a20 5365 745b  peak_peers: Set[
+000088c0: 6279 7465 7333 325d 203d 2073 656c 662e  bytes32] = self.
+000088d0: 7379 6e63 5f73 746f 7265 2e67 6574 5f70  sync_store.get_p
+000088e0: 6565 7273 5f74 6861 745f 6861 7665 5f70  eers_that_have_p
+000088f0: 6561 6b28 5b74 6172 6765 745f 7065 616b  eak([target_peak
+00008900: 2e68 6561 6465 725f 6861 7368 5d29 0a20  .header_hash]). 
+00008910: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00008920: 2044 6f6e 2774 2061 736b 2069 6620 7765   Don't ask if we
+00008930: 2061 6c72 6561 6479 206b 6e6f 7720 7468   already know th
+00008940: 6973 2070 6565 7220 6861 7320 7468 6520  is peer has the 
+00008950: 7065 616b 0a20 2020 2020 2020 2020 2020  peak.           
+00008960: 2020 2020 2069 6620 7065 6572 2e70 6565       if peer.pee
+00008970: 725f 6e6f 6465 5f69 6420 6e6f 7420 696e  r_node_id not in
+00008980: 2070 6561 6b5f 7065 6572 733a 0a20 2020   peak_peers:.   
+00008990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000089a0: 2074 6172 6765 745f 7065 616b 5f72 6573   target_peak_res
+000089b0: 706f 6e73 653a 204f 7074 696f 6e61 6c5b  ponse: Optional[
+000089c0: 5265 7370 6f6e 6442 6c6f 636b 5d20 3d20  RespondBlock] = 
+000089d0: 6177 6169 7420 7065 6572 2e63 616c 6c5f  await peer.call_
+000089e0: 6170 6928 0a20 2020 2020 2020 2020 2020  api(.           
+000089f0: 2020 2020 2020 2020 2020 2020 2046 756c               Ful
+00008a00: 6c4e 6f64 6541 5049 2e72 6571 7565 7374  lNodeAPI.request
+00008a10: 5f62 6c6f 636b 2c0a 2020 2020 2020 2020  _block,.        
+00008a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008a30: 6675 6c6c 5f6e 6f64 655f 7072 6f74 6f63  full_node_protoc
+00008a40: 6f6c 2e52 6571 7565 7374 426c 6f63 6b28  ol.RequestBlock(
+00008a50: 7461 7267 6574 5f70 6561 6b2e 6865 6967  target_peak.heig
+00008a60: 6874 2c20 4661 6c73 6529 2c0a 2020 2020  ht, False),.    
+00008a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008a80: 2020 2020 7469 6d65 6f75 743d 3130 2c0a      timeout=10,.
+00008a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008aa0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+00008ab0: 2020 2020 2020 2020 2020 6966 2074 6172            if tar
+00008ac0: 6765 745f 7065 616b 5f72 6573 706f 6e73  get_peak_respons
+00008ad0: 6520 6973 206e 6f74 204e 6f6e 6520 616e  e is not None an
+00008ae0: 6420 6973 696e 7374 616e 6365 2874 6172  d isinstance(tar
+00008af0: 6765 745f 7065 616b 5f72 6573 706f 6e73  get_peak_respons
+00008b00: 652c 2052 6573 706f 6e64 426c 6f63 6b29  e, RespondBlock)
+00008b10: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00008b20: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
+00008b30: 796e 635f 7374 6f72 652e 7065 6572 5f68  ync_store.peer_h
+00008b40: 6173 5f62 6c6f 636b 280a 2020 2020 2020  as_block(.      
+00008b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008b60: 2020 2020 2020 7461 7267 6574 5f70 6561        target_pea
+00008b70: 6b2e 6865 6164 6572 5f68 6173 682c 0a20  k.header_hash,. 
+00008b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008b90: 2020 2020 2020 2020 2020 2070 6565 722e             peer.
+00008ba0: 7065 6572 5f6e 6f64 655f 6964 2c0a 2020  peer_node_id,.  
+00008bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008bc0: 2020 2020 2020 2020 2020 7461 7267 6574            target
+00008bd0: 5f70 6561 6b5f 7265 7370 6f6e 7365 2e62  _peak_response.b
+00008be0: 6c6f 636b 2e77 6569 6768 742c 0a20 2020  lock.weight,.   
+00008bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008c00: 2020 2020 2020 2020 2074 6172 6765 745f           target_
+00008c10: 7065 616b 2e68 6569 6768 742c 0a20 2020  peak.height,.   
+00008c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008c30: 2020 2020 2020 2020 2046 616c 7365 2c0a           False,.
+00008c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008c50: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00008c60: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00008c70: 2020 2020 6966 2028 0a20 2020 2020 2020      if (.       
+00008c80: 2020 2020 2020 2020 2063 7572 725f 7065           curr_pe
+00008c90: 616b 5f68 6569 6768 7420 3c3d 2072 6571  ak_height <= req
+00008ca0: 7565 7374 2e68 6569 6768 740a 2020 2020  uest.height.    
+00008cb0: 2020 2020 2020 2020 2020 2020 616e 6420              and 
+00008cc0: 7265 7175 6573 742e 6865 6967 6874 203c  request.height <
+00008cd0: 3d20 6375 7272 5f70 6561 6b5f 6865 6967  = curr_peak_heig
+00008ce0: 6874 202b 2073 656c 662e 636f 6e66 6967  ht + self.config
+00008cf0: 5b22 7368 6f72 745f 7379 6e63 5f62 6c6f  ["short_sync_blo
+00008d00: 636b 735f 6265 6869 6e64 5f74 6872 6573  cks_behind_thres
+00008d10: 686f 6c64 225d 0a20 2020 2020 2020 2020  hold"].         
+00008d20: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
+00008d30: 2020 2020 2020 2320 5468 6973 2069 7320        # This is 
+00008d40: 7468 6520 6e6f 726d 616c 2063 6173 6520  the normal case 
+00008d50: 6f66 2072 6563 6569 7669 6e67 2074 6865  of receiving the
+00008d60: 206e 6578 7420 626c 6f63 6b0a 2020 2020   next block.    
+00008d70: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+00008d80: 7761 6974 2073 656c 662e 7368 6f72 745f  wait self.short_
+00008d90: 7379 6e63 5f62 6163 6b74 7261 636b 280a  sync_backtrack(.
+00008da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008db0: 2020 2020 7065 6572 2c20 6375 7272 5f70      peer, curr_p
+00008dc0: 6561 6b5f 6865 6967 6874 2c20 7265 7175  eak_height, requ
+00008dd0: 6573 742e 6865 6967 6874 2c20 7265 7175  est.height, requ
+00008de0: 6573 742e 756e 6669 6e69 7368 6564 5f72  est.unfinished_r
+00008df0: 6577 6172 645f 626c 6f63 6b5f 6861 7368  eward_block_hash
+00008e00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008e10: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
+00008e20: 2020 2020 2020 2020 7265 7475 726e 204e          return N
+00008e30: 6f6e 650a 0a20 2020 2020 2020 2020 2020  one..           
+00008e40: 2069 6620 7265 7175 6573 742e 6865 6967   if request.heig
+00008e50: 6874 203c 2073 656c 662e 636f 6e73 7461  ht < self.consta
+00008e60: 6e74 732e 5745 4947 4854 5f50 524f 4f46  nts.WEIGHT_PROOF
+00008e70: 5f52 4543 454e 545f 424c 4f43 4b53 3a0a  _RECENT_BLOCKS:.
+00008e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008e90: 2320 5468 6973 2069 7320 7468 6520 6361  # This is the ca
+00008ea0: 7365 206f 6620 7379 6e63 696e 6720 7570  se of syncing up
+00008eb0: 206d 6f72 6520 7468 616e 2061 2066 6577   more than a few
+00008ec0: 2062 6c6f 636b 732c 2061 7420 7468 6520   blocks, at the 
+00008ed0: 7374 6172 7420 6f66 2074 6865 2063 6861  start of the cha
+00008ee0: 696e 0a20 2020 2020 2020 2020 2020 2020  in.             
+00008ef0: 2020 2073 656c 662e 6c6f 672e 6465 6275     self.log.debu
+00008f00: 6728 2244 6f69 6e67 2062 6174 6368 2073  g("Doing batch s
+00008f10: 796e 632c 206e 6f20 6261 636b 7570 2229  ync, no backup")
+00008f20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008f30: 2061 7761 6974 2073 656c 662e 7368 6f72   await self.shor
+00008f40: 745f 7379 6e63 5f62 6174 6368 2870 6565  t_sync_batch(pee
+00008f50: 722c 2075 696e 7433 3228 3029 2c20 7265  r, uint32(0), re
+00008f60: 7175 6573 742e 6865 6967 6874 290a 2020  quest.height).  
+00008f70: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00008f80: 7475 726e 204e 6f6e 650a 0a20 2020 2020  turn None..     
+00008f90: 2020 2020 2020 2069 6620 280a 2020 2020         if (.    
+00008fa0: 2020 2020 2020 2020 2020 2020 6375 7272              curr
+00008fb0: 5f70 6561 6b5f 6865 6967 6874 203c 3d20  _peak_height <= 
+00008fc0: 7265 7175 6573 742e 6865 6967 6874 0a20  request.height. 
+00008fd0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00008fe0: 6e64 2072 6571 7565 7374 2e68 6569 6768  nd request.heigh
+00008ff0: 7420 3c20 6375 7272 5f70 6561 6b5f 6865  t < curr_peak_he
+00009000: 6967 6874 202b 2073 656c 662e 636f 6e66  ight + self.conf
+00009010: 6967 5b22 7379 6e63 5f62 6c6f 636b 735f  ig["sync_blocks_
+00009020: 6265 6869 6e64 5f74 6872 6573 686f 6c64  behind_threshold
+00009030: 225d 0a20 2020 2020 2020 2020 2020 2029  "].            )
+00009040: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00009050: 2020 2320 5468 6973 2063 6173 6520 6f66    # This case of
+00009060: 2062 6569 6e67 2062 6568 696e 6420 6275   being behind bu
+00009070: 7420 6e6f 7420 6279 2073 6f20 6d75 6368  t not by so much
+00009080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009090: 2069 6620 6177 6169 7420 7365 6c66 2e73   if await self.s
+000090a0: 686f 7274 5f73 796e 635f 6261 7463 6828  hort_sync_batch(
+000090b0: 7065 6572 2c20 7569 6e74 3332 286d 6178  peer, uint32(max
+000090c0: 2863 7572 725f 7065 616b 5f68 6569 6768  (curr_peak_heigh
+000090d0: 7420 2d20 362c 2030 2929 2c20 7265 7175  t - 6, 0)), requ
+000090e0: 6573 742e 6865 6967 6874 293a 0a20 2020  est.height):.   
+000090f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009100: 2072 6574 7572 6e20 4e6f 6e65 0a0a 2020   return None..  
+00009110: 2020 2020 2020 2020 2020 2320 5468 6973            # This
+00009120: 2069 7320 7468 6520 6569 7468 6572 2074   is the either t
+00009130: 6865 2063 6173 6520 7768 6572 6520 7765  he case where we
+00009140: 2077 6572 6520 6e6f 7420 6162 6c65 2074   were not able t
+00009150: 6f20 7379 6e63 2073 7563 6365 7373 6675  o sync successfu
+00009160: 6c6c 7920 2866 6f72 2065 7861 6d70 6c65  lly (for example
+00009170: 2c20 6475 6520 746f 2074 6865 2066 6f72  , due to the for
+00009180: 6b0a 2020 2020 2020 2020 2020 2020 2320  k.            # 
+00009190: 706f 696e 7420 6265 696e 6720 696e 2074  point being in t
+000091a0: 6865 2070 6173 7429 2c20 6f72 2077 6520  he past), or we 
+000091b0: 6172 6520 7665 7279 2066 6172 2062 6568  are very far beh
+000091c0: 696e 642e 2050 6572 666f 726d 7320 6120  ind. Performs a 
+000091d0: 6c6f 6e67 2073 796e 632e 0a20 2020 2020  long sync..     
+000091e0: 2020 2020 2020 2073 656c 662e 5f73 796e         self._syn
+000091f0: 635f 7461 736b 203d 2061 7379 6e63 696f  c_task = asyncio
+00009200: 2e63 7265 6174 655f 7461 736b 2873 656c  .create_task(sel
+00009210: 662e 5f73 796e 6328 2929 0a0a 2020 2020  f._sync())..    
+00009220: 6173 796e 6320 6465 6620 7365 6e64 5f70  async def send_p
+00009230: 6561 6b5f 746f 5f74 696d 656c 6f72 6473  eak_to_timelords
+00009240: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+00009250: 7065 616b 5f62 6c6f 636b 3a20 4f70 7469  peak_block: Opti
+00009260: 6f6e 616c 5b46 756c 6c42 6c6f 636b 5d20  onal[FullBlock] 
+00009270: 3d20 4e6f 6e65 2c20 7065 6572 3a20 4f70  = None, peer: Op
+00009280: 7469 6f6e 616c 5b57 5343 6869 6143 6f6e  tional[WSChiaCon
+00009290: 6e65 6374 696f 6e5d 203d 204e 6f6e 650a  nection] = None.
+000092a0: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
+000092b0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+000092c0: 2020 2053 656e 6473 2063 7572 7265 6e74     Sends current
+000092d0: 2070 6561 6b20 746f 2074 696d 656c 6f72   peak to timelor
+000092e0: 6473 0a20 2020 2020 2020 2022 2222 0a20  ds.        """. 
+000092f0: 2020 2020 2020 2069 6620 7065 616b 5f62         if peak_b
+00009300: 6c6f 636b 2069 7320 4e6f 6e65 3a0a 2020  lock is None:.  
+00009310: 2020 2020 2020 2020 2020 7065 616b 5f62            peak_b
+00009320: 6c6f 636b 203d 2061 7761 6974 2073 656c  lock = await sel
+00009330: 662e 626c 6f63 6b63 6861 696e 2e67 6574  f.blockchain.get
+00009340: 5f66 756c 6c5f 7065 616b 2829 0a20 2020  _full_peak().   
+00009350: 2020 2020 2069 6620 7065 616b 5f62 6c6f       if peak_blo
+00009360: 636b 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ck is not None:.
+00009370: 2020 2020 2020 2020 2020 2020 7065 616b              peak
+00009380: 203d 2073 656c 662e 626c 6f63 6b63 6861   = self.blockcha
+00009390: 696e 2e62 6c6f 636b 5f72 6563 6f72 6428  in.block_record(
+000093a0: 7065 616b 5f62 6c6f 636b 2e68 6561 6465  peak_block.heade
+000093b0: 725f 6861 7368 290a 2020 2020 2020 2020  r_hash).        
+000093c0: 2020 2020 6469 6666 6963 756c 7479 203d      difficulty =
+000093d0: 2073 656c 662e 626c 6f63 6b63 6861 696e   self.blockchain
+000093e0: 2e67 6574 5f6e 6578 745f 6469 6666 6963  .get_next_diffic
+000093f0: 756c 7479 2870 6561 6b2e 6865 6164 6572  ulty(peak.header
+00009400: 5f68 6173 682c 2046 616c 7365 290a 2020  _hash, False).  
+00009410: 2020 2020 2020 2020 2020 7365 733a 204f            ses: O
+00009420: 7074 696f 6e61 6c5b 5375 6245 706f 6368  ptional[SubEpoch
+00009430: 5375 6d6d 6172 795d 203d 206e 6578 745f  Summary] = next_
+00009440: 7375 625f 6570 6f63 685f 7375 6d6d 6172  sub_epoch_summar
+00009450: 7928 0a20 2020 2020 2020 2020 2020 2020  y(.             
+00009460: 2020 2073 656c 662e 636f 6e73 7461 6e74     self.constant
+00009470: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
+00009480: 2020 2073 656c 662e 626c 6f63 6b63 6861     self.blockcha
+00009490: 696e 2c0a 2020 2020 2020 2020 2020 2020  in,.            
+000094a0: 2020 2020 7065 616b 2e72 6571 7569 7265      peak.require
+000094b0: 645f 6974 6572 732c 0a20 2020 2020 2020  d_iters,.       
+000094c0: 2020 2020 2020 2020 2070 6561 6b5f 626c           peak_bl
+000094d0: 6f63 6b2c 0a20 2020 2020 2020 2020 2020  ock,.           
+000094e0: 2020 2020 2054 7275 652c 0a20 2020 2020       True,.     
+000094f0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00009500: 2020 2020 2072 6563 656e 745f 7263 203d       recent_rc =
+00009510: 2073 656c 662e 626c 6f63 6b63 6861 696e   self.blockchain
+00009520: 2e67 6574 5f72 6563 656e 745f 7265 7761  .get_recent_rewa
+00009530: 7264 5f63 6861 6c6c 656e 6765 7328 290a  rd_challenges().
+00009540: 0a20 2020 2020 2020 2020 2020 2063 7572  .            cur
+00009550: 7220 3d20 7065 616b 0a20 2020 2020 2020  r = peak.       
+00009560: 2020 2020 2077 6869 6c65 206e 6f74 2063       while not c
+00009570: 7572 722e 6973 5f63 6861 6c6c 656e 6765  urr.is_challenge
+00009580: 5f62 6c6f 636b 2873 656c 662e 636f 6e73  _block(self.cons
+00009590: 7461 6e74 7329 2061 6e64 206e 6f74 2063  tants) and not c
+000095a0: 7572 722e 6669 7273 745f 696e 5f73 7562  urr.first_in_sub
+000095b0: 5f73 6c6f 743a 0a20 2020 2020 2020 2020  _slot:.         
+000095c0: 2020 2020 2020 2063 7572 7220 3d20 7365         curr = se
+000095d0: 6c66 2e62 6c6f 636b 6368 6169 6e2e 626c  lf.blockchain.bl
+000095e0: 6f63 6b5f 7265 636f 7264 2863 7572 722e  ock_record(curr.
+000095f0: 7072 6576 5f68 6173 6829 0a0a 2020 2020  prev_hash)..    
+00009600: 2020 2020 2020 2020 6966 2063 7572 722e          if curr.
+00009610: 6973 5f63 6861 6c6c 656e 6765 5f62 6c6f  is_challenge_blo
+00009620: 636b 2873 656c 662e 636f 6e73 7461 6e74  ck(self.constant
+00009630: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
+00009640: 2020 2020 6c61 7374 5f63 7362 5f6f 725f      last_csb_or_
+00009650: 656f 7320 3d20 6375 7272 2e74 6f74 616c  eos = curr.total
+00009660: 5f69 7465 7273 0a20 2020 2020 2020 2020  _iters.         
+00009670: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00009680: 2020 2020 2020 2020 206c 6173 745f 6373           last_cs
+00009690: 625f 6f72 5f65 6f73 203d 2063 7572 722e  b_or_eos = curr.
+000096a0: 6970 5f73 7562 5f73 6c6f 745f 746f 7461  ip_sub_slot_tota
+000096b0: 6c5f 6974 6572 7328 7365 6c66 2e63 6f6e  l_iters(self.con
+000096c0: 7374 616e 7473 290a 0a20 2020 2020 2020  stants)..       
+000096d0: 2020 2020 2063 7572 7220 3d20 7065 616b       curr = peak
+000096e0: 0a20 2020 2020 2020 2020 2020 2070 6173  .            pas
+000096f0: 7365 645f 7365 735f 6865 6967 6874 5f62  sed_ses_height_b
+00009700: 7574 5f6e 6f74 5f79 6574 5f69 6e63 6c75  ut_not_yet_inclu
+00009710: 6465 6420 3d20 5472 7565 0a20 2020 2020  ded = True.     
+00009720: 2020 2020 2020 2077 6869 6c65 2028 6375         while (cu
+00009730: 7272 2e68 6569 6768 7420 2520 7365 6c66  rr.height % self
+00009740: 2e63 6f6e 7374 616e 7473 2e53 5542 5f45  .constants.SUB_E
+00009750: 504f 4348 5f42 4c4f 434b 5329 2021 3d20  POCH_BLOCKS) != 
+00009760: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
+00009770: 2020 2069 6620 6375 7272 2e73 7562 5f65     if curr.sub_e
+00009780: 706f 6368 5f73 756d 6d61 7279 5f69 6e63  poch_summary_inc
+00009790: 6c75 6465 643a 0a20 2020 2020 2020 2020  luded:.         
+000097a0: 2020 2020 2020 2020 2020 2070 6173 7365             passe
+000097b0: 645f 7365 735f 6865 6967 6874 5f62 7574  d_ses_height_but
+000097c0: 5f6e 6f74 5f79 6574 5f69 6e63 6c75 6465  _not_yet_include
+000097d0: 6420 3d20 4661 6c73 650a 2020 2020 2020  d = False.      
+000097e0: 2020 2020 2020 2020 2020 6375 7272 203d            curr =
+000097f0: 2073 656c 662e 626c 6f63 6b63 6861 696e   self.blockchain
+00009800: 2e62 6c6f 636b 5f72 6563 6f72 6428 6375  .block_record(cu
+00009810: 7272 2e70 7265 765f 6861 7368 290a 2020  rr.prev_hash).  
+00009820: 2020 2020 2020 2020 2020 6966 2063 7572            if cur
+00009830: 722e 7375 625f 6570 6f63 685f 7375 6d6d  r.sub_epoch_summ
+00009840: 6172 795f 696e 636c 7564 6564 206f 7220  ary_included or 
+00009850: 6375 7272 2e68 6569 6768 7420 3d3d 2030  curr.height == 0
+00009860: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00009870: 2020 7061 7373 6564 5f73 6573 5f68 6569    passed_ses_hei
+00009880: 6768 745f 6275 745f 6e6f 745f 7965 745f  ght_but_not_yet_
+00009890: 696e 636c 7564 6564 203d 2046 616c 7365  included = False
+000098a0: 0a0a 2020 2020 2020 2020 2020 2020 7469  ..            ti
+000098b0: 6d65 6c6f 7264 5f6e 6577 5f70 6561 6b3a  melord_new_peak:
+000098c0: 2074 696d 656c 6f72 645f 7072 6f74 6f63   timelord_protoc
+000098d0: 6f6c 2e4e 6577 5065 616b 5469 6d65 6c6f  ol.NewPeakTimelo
+000098e0: 7264 203d 2074 696d 656c 6f72 645f 7072  rd = timelord_pr
+000098f0: 6f74 6f63 6f6c 2e4e 6577 5065 616b 5469  otocol.NewPeakTi
+00009900: 6d65 6c6f 7264 280a 2020 2020 2020 2020  melord(.        
+00009910: 2020 2020 2020 2020 7065 616b 5f62 6c6f          peak_blo
+00009920: 636b 2e72 6577 6172 645f 6368 6169 6e5f  ck.reward_chain_
+00009930: 626c 6f63 6b2c 0a20 2020 2020 2020 2020  block,.         
+00009940: 2020 2020 2020 2064 6966 6669 6375 6c74         difficult
+00009950: 792c 0a20 2020 2020 2020 2020 2020 2020  y,.             
+00009960: 2020 2070 6561 6b2e 6465 6669 6369 742c     peak.deficit,
+00009970: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009980: 2070 6561 6b2e 7375 625f 736c 6f74 5f69   peak.sub_slot_i
+00009990: 7465 7273 2c0a 2020 2020 2020 2020 2020  ters,.          
+000099a0: 2020 2020 2020 7365 732c 0a20 2020 2020        ses,.     
+000099b0: 2020 2020 2020 2020 2020 2072 6563 656e             recen
+000099c0: 745f 7263 2c0a 2020 2020 2020 2020 2020  t_rc,.          
+000099d0: 2020 2020 2020 6c61 7374 5f63 7362 5f6f        last_csb_o
+000099e0: 725f 656f 732c 0a20 2020 2020 2020 2020  r_eos,.         
+000099f0: 2020 2020 2020 2070 6173 7365 645f 7365         passed_se
+00009a00: 735f 6865 6967 6874 5f62 7574 5f6e 6f74  s_height_but_not
+00009a10: 5f79 6574 5f69 6e63 6c75 6465 642c 0a20  _yet_included,. 
+00009a20: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
+00009a30: 2020 2020 2020 2020 2020 6d73 6720 3d20            msg = 
+00009a40: 6d61 6b65 5f6d 7367 2850 726f 746f 636f  make_msg(Protoco
+00009a50: 6c4d 6573 7361 6765 5479 7065 732e 6e65  lMessageTypes.ne
+00009a60: 775f 7065 616b 5f74 696d 656c 6f72 642c  w_peak_timelord,
+00009a70: 2074 696d 656c 6f72 645f 6e65 775f 7065   timelord_new_pe
+00009a80: 616b 290a 2020 2020 2020 2020 2020 2020  ak).            
+00009a90: 6966 2070 6565 7220 6973 204e 6f6e 653a  if peer is None:
+00009aa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009ab0: 2061 7761 6974 2073 656c 662e 7365 7276   await self.serv
+00009ac0: 6572 2e73 656e 645f 746f 5f61 6c6c 285b  er.send_to_all([
+00009ad0: 6d73 675d 2c20 4e6f 6465 5479 7065 2e54  msg], NodeType.T
+00009ae0: 494d 454c 4f52 4429 0a20 2020 2020 2020  IMELORD).       
+00009af0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00009b00: 2020 2020 2020 2020 2020 2061 7761 6974             await
+00009b10: 2073 656c 662e 7365 7276 6572 2e73 656e   self.server.sen
+00009b20: 645f 746f 5f73 7065 6369 6669 6328 5b6d  d_to_specific([m
+00009b30: 7367 5d2c 2070 6565 722e 7065 6572 5f6e  sg], peer.peer_n
+00009b40: 6f64 655f 6964 290a 0a20 2020 2061 7379  ode_id)..    asy
+00009b50: 6e63 2064 6566 2073 796e 6365 6428 7365  nc def synced(se
+00009b60: 6c66 2c20 626c 6f63 6b5f 6973 5f63 7572  lf, block_is_cur
+00009b70: 7265 6e74 5f61 743a 204f 7074 696f 6e61  rent_at: Optiona
+00009b80: 6c5b 7569 6e74 3634 5d20 3d20 4e6f 6e65  l[uint64] = None
+00009b90: 2920 2d3e 2062 6f6f 6c3a 0a20 2020 2020  ) -> bool:.     
+00009ba0: 2020 2069 6620 626c 6f63 6b5f 6973 5f63     if block_is_c
+00009bb0: 7572 7265 6e74 5f61 7420 6973 204e 6f6e  urrent_at is Non
+00009bc0: 653a 0a20 2020 2020 2020 2020 2020 2062  e:.            b
+00009bd0: 6c6f 636b 5f69 735f 6375 7272 656e 745f  lock_is_current_
+00009be0: 6174 203d 2075 696e 7436 3428 696e 7428  at = uint64(int(
+00009bf0: 7469 6d65 2e74 696d 6528 2920 2d20 3630  time.time() - 60
+00009c00: 202a 2037 2929 0a20 2020 2020 2020 2069   * 7)).        i
+00009c10: 6620 2273 696d 756c 6174 6f72 2220 696e  f "simulator" in
+00009c20: 2073 7472 2873 656c 662e 636f 6e66 6967   str(self.config
+00009c30: 2e67 6574 2822 7365 6c65 6374 6564 5f6e  .get("selected_n
+00009c40: 6574 776f 726b 2229 293a 0a20 2020 2020  etwork")):.     
+00009c50: 2020 2020 2020 2072 6574 7572 6e20 5472         return Tr
+00009c60: 7565 2020 2320 7369 6d20 6973 2061 6c77  ue  # sim is alw
+00009c70: 6179 7320 7379 6e63 6564 2062 6563 6175  ays synced becau
+00009c80: 7365 2069 7420 6861 7320 6e6f 2070 6565  se it has no pee
+00009c90: 7273 0a20 2020 2020 2020 2063 7572 723a  rs.        curr:
+00009ca0: 204f 7074 696f 6e61 6c5b 426c 6f63 6b52   Optional[BlockR
+00009cb0: 6563 6f72 645d 203d 2073 656c 662e 626c  ecord] = self.bl
+00009cc0: 6f63 6b63 6861 696e 2e67 6574 5f70 6561  ockchain.get_pea
+00009cd0: 6b28 290a 2020 2020 2020 2020 6966 2063  k().        if c
+00009ce0: 7572 7220 6973 204e 6f6e 653a 0a20 2020  urr is None:.   
+00009cf0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00009d00: 4661 6c73 650a 0a20 2020 2020 2020 2077  False..        w
+00009d10: 6869 6c65 2063 7572 7220 6973 206e 6f74  hile curr is not
+00009d20: 204e 6f6e 6520 616e 6420 6e6f 7420 6375   None and not cu
+00009d30: 7272 2e69 735f 7472 616e 7361 6374 696f  rr.is_transactio
+00009d40: 6e5f 626c 6f63 6b3a 0a20 2020 2020 2020  n_block:.       
+00009d50: 2020 2020 2063 7572 7220 3d20 7365 6c66       curr = self
+00009d60: 2e62 6c6f 636b 6368 6169 6e2e 7472 795f  .blockchain.try_
+00009d70: 626c 6f63 6b5f 7265 636f 7264 2863 7572  block_record(cur
+00009d80: 722e 7072 6576 5f68 6173 6829 0a0a 2020  r.prev_hash)..  
+00009d90: 2020 2020 2020 6966 2028 0a20 2020 2020        if (.     
+00009da0: 2020 2020 2020 2063 7572 7220 6973 204e         curr is N
+00009db0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+00009dc0: 6f72 2063 7572 722e 7469 6d65 7374 616d  or curr.timestam
+00009dd0: 7020 6973 204e 6f6e 650a 2020 2020 2020  p is None.      
+00009de0: 2020 2020 2020 6f72 2063 7572 722e 7469        or curr.ti
+00009df0: 6d65 7374 616d 7020 3c20 626c 6f63 6b5f  mestamp < block_
+00009e00: 6973 5f63 7572 7265 6e74 5f61 740a 2020  is_current_at.  
+00009e10: 2020 2020 2020 2020 2020 6f72 2073 656c            or sel
+00009e20: 662e 7379 6e63 5f73 746f 7265 2e67 6574  f.sync_store.get
+00009e30: 5f73 796e 635f 6d6f 6465 2829 0a20 2020  _sync_mode().   
+00009e40: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
+00009e50: 2020 2020 7265 7475 726e 2046 616c 7365      return False
+00009e60: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00009e70: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00009e80: 6e20 5472 7565 0a0a 2020 2020 6173 796e  n True..    asyn
+00009e90: 6320 6465 6620 6f6e 5f63 6f6e 6e65 6374  c def on_connect
+00009ea0: 2873 656c 662c 2063 6f6e 6e65 6374 696f  (self, connectio
+00009eb0: 6e3a 2057 5343 6869 6143 6f6e 6e65 6374  n: WSChiaConnect
+00009ec0: 696f 6e29 202d 3e20 4e6f 6e65 3a0a 2020  ion) -> None:.  
+00009ed0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00009ee0: 2020 5768 656e 6576 6572 2077 6520 636f    Whenever we co
+00009ef0: 6e6e 6563 7420 746f 2061 6e6f 7468 6572  nnect to another
+00009f00: 206e 6f64 6520 2f20 7761 6c6c 6574 2c20   node / wallet, 
+00009f10: 7365 6e64 2074 6865 6d20 6f75 7220 6375  send them our cu
+00009f20: 7272 656e 7420 6865 6164 732e 2041 6c73  rrent heads. Als
+00009f30: 6f20 7365 6e64 2068 6561 6473 2074 6f20  o send heads to 
+00009f40: 6661 726d 6572 730a 2020 2020 2020 2020  farmers.        
+00009f50: 616e 6420 6368 616c 6c65 6e67 6573 2074  and challenges t
+00009f60: 6f20 7469 6d65 6c6f 7264 732e 0a20 2020  o timelords..   
+00009f70: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
+00009f80: 2020 7365 6c66 2e5f 7374 6174 655f 6368    self._state_ch
+00009f90: 616e 6765 6428 2261 6464 5f63 6f6e 6e65  anged("add_conne
+00009fa0: 6374 696f 6e22 290a 2020 2020 2020 2020  ction").        
+00009fb0: 7365 6c66 2e5f 7374 6174 655f 6368 616e  self._state_chan
+00009fc0: 6765 6428 2273 796e 635f 6d6f 6465 2229  ged("sync_mode")
+00009fd0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+00009fe0: 2e66 756c 6c5f 6e6f 6465 5f70 6565 7273  .full_node_peers
+00009ff0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0000a000: 2020 2020 2020 2020 2020 6173 796e 6369            asynci
+0000a010: 6f2e 6372 6561 7465 5f74 6173 6b28 7365  o.create_task(se
+0000a020: 6c66 2e66 756c 6c5f 6e6f 6465 5f70 6565  lf.full_node_pee
+0000a030: 7273 2e6f 6e5f 636f 6e6e 6563 7428 636f  rs.on_connect(co
+0000a040: 6e6e 6563 7469 6f6e 2929 0a0a 2020 2020  nnection))..    
+0000a050: 2020 2020 6966 2073 656c 662e 696e 6974      if self.init
+0000a060: 6961 6c69 7a65 6420 6973 2046 616c 7365  ialized is False
+0000a070: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0000a080: 7475 726e 204e 6f6e 650a 0a20 2020 2020  turn None..     
+0000a090: 2020 2069 6620 636f 6e6e 6563 7469 6f6e     if connection
+0000a0a0: 2e63 6f6e 6e65 6374 696f 6e5f 7479 7065  .connection_type
+0000a0b0: 2069 7320 4e6f 6465 5479 7065 2e46 554c   is NodeType.FUL
+0000a0c0: 4c5f 4e4f 4445 3a0a 2020 2020 2020 2020  L_NODE:.        
+0000a0d0: 2020 2020 2320 5365 6e64 2066 696c 7465      # Send filte
+0000a0e0: 7220 746f 206e 6f64 6520 616e 6420 7265  r to node and re
+0000a0f0: 7175 6573 7420 6d65 6d70 6f6f 6c20 6974  quest mempool it
+0000a100: 656d 7320 7468 6174 2061 7265 206e 6f74  ems that are not
+0000a110: 2069 6e20 6974 2028 4f6e 6c79 2069 6620   in it (Only if 
+0000a120: 7765 2061 7265 2063 7572 7265 6e74 6c79  we are currently
+0000a130: 2073 796e 6365 6429 0a20 2020 2020 2020   synced).       
+0000a140: 2020 2020 2073 796e 6365 6420 3d20 6177       synced = aw
+0000a150: 6169 7420 7365 6c66 2e73 796e 6365 6428  ait self.synced(
+0000a160: 290a 2020 2020 2020 2020 2020 2020 7065  ).            pe
+0000a170: 616b 5f68 6569 6768 7420 3d20 7365 6c66  ak_height = self
+0000a180: 2e62 6c6f 636b 6368 6169 6e2e 6765 745f  .blockchain.get_
+0000a190: 7065 616b 5f68 6569 6768 7428 290a 2020  peak_height().  
+0000a1a0: 2020 2020 2020 2020 2020 6966 2073 796e            if syn
+0000a1b0: 6365 6420 616e 6420 7065 616b 5f68 6569  ced and peak_hei
+0000a1c0: 6768 7420 6973 206e 6f74 204e 6f6e 653a  ght is not None:
+0000a1d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a1e0: 206d 795f 6669 6c74 6572 203d 2073 656c   my_filter = sel
+0000a1f0: 662e 6d65 6d70 6f6f 6c5f 6d61 6e61 6765  f.mempool_manage
+0000a200: 722e 6765 745f 6669 6c74 6572 2829 0a20  r.get_filter(). 
+0000a210: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0000a220: 656d 706f 6f6c 5f72 6571 7565 7374 203d  empool_request =
+0000a230: 2066 756c 6c5f 6e6f 6465 5f70 726f 746f   full_node_proto
+0000a240: 636f 6c2e 5265 7175 6573 744d 656d 706f  col.RequestMempo
+0000a250: 6f6c 5472 616e 7361 6374 696f 6e73 286d  olTransactions(m
+0000a260: 795f 6669 6c74 6572 290a 0a20 2020 2020  y_filter)..     
+0000a270: 2020 2020 2020 2020 2020 206d 7367 203d             msg =
+0000a280: 206d 616b 655f 6d73 6728 5072 6f74 6f63   make_msg(Protoc
+0000a290: 6f6c 4d65 7373 6167 6554 7970 6573 2e72  olMessageTypes.r
+0000a2a0: 6571 7565 7374 5f6d 656d 706f 6f6c 5f74  equest_mempool_t
+0000a2b0: 7261 6e73 6163 7469 6f6e 732c 206d 656d  ransactions, mem
+0000a2c0: 706f 6f6c 5f72 6571 7565 7374 290a 2020  pool_request).  
+0000a2d0: 2020 2020 2020 2020 2020 2020 2020 6177                aw
+0000a2e0: 6169 7420 636f 6e6e 6563 7469 6f6e 2e73  ait connection.s
+0000a2f0: 656e 645f 6d65 7373 6167 6528 6d73 6729  end_message(msg)
+0000a300: 0a0a 2020 2020 2020 2020 7065 616b 5f66  ..        peak_f
+0000a310: 756c 6c3a 204f 7074 696f 6e61 6c5b 4675  ull: Optional[Fu
+0000a320: 6c6c 426c 6f63 6b5d 203d 2061 7761 6974  llBlock] = await
+0000a330: 2073 656c 662e 626c 6f63 6b63 6861 696e   self.blockchain
+0000a340: 2e67 6574 5f66 756c 6c5f 7065 616b 2829  .get_full_peak()
+0000a350: 0a0a 2020 2020 2020 2020 6966 2070 6561  ..        if pea
+0000a360: 6b5f 6675 6c6c 2069 7320 6e6f 7420 4e6f  k_full is not No
+0000a370: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0000a380: 7065 616b 3a20 426c 6f63 6b52 6563 6f72  peak: BlockRecor
+0000a390: 6420 3d20 7365 6c66 2e62 6c6f 636b 6368  d = self.blockch
+0000a3a0: 6169 6e2e 626c 6f63 6b5f 7265 636f 7264  ain.block_record
+0000a3b0: 2870 6561 6b5f 6675 6c6c 2e68 6561 6465  (peak_full.heade
+0000a3c0: 725f 6861 7368 290a 2020 2020 2020 2020  r_hash).        
+0000a3d0: 2020 2020 6966 2063 6f6e 6e65 6374 696f      if connectio
+0000a3e0: 6e2e 636f 6e6e 6563 7469 6f6e 5f74 7970  n.connection_typ
+0000a3f0: 6520 6973 204e 6f64 6554 7970 652e 4655  e is NodeType.FU
+0000a400: 4c4c 5f4e 4f44 453a 0a20 2020 2020 2020  LL_NODE:.       
+0000a410: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0000a420: 5f6e 6f64 6520 3d20 6675 6c6c 5f6e 6f64  _node = full_nod
+0000a430: 655f 7072 6f74 6f63 6f6c 2e4e 6577 5065  e_protocol.NewPe
+0000a440: 616b 280a 2020 2020 2020 2020 2020 2020  ak(.            
+0000a450: 2020 2020 2020 2020 7065 616b 2e68 6561          peak.hea
+0000a460: 6465 725f 6861 7368 2c0a 2020 2020 2020  der_hash,.      
+0000a470: 2020 2020 2020 2020 2020 2020 2020 7065                pe
+0000a480: 616b 2e68 6569 6768 742c 0a20 2020 2020  ak.height,.     
+0000a490: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0000a4a0: 6561 6b2e 7765 6967 6874 2c0a 2020 2020  eak.weight,.    
+0000a4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a4c0: 7065 616b 2e68 6569 6768 742c 0a20 2020  peak.height,.   
+0000a4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a4e0: 2070 6561 6b5f 6675 6c6c 2e72 6577 6172   peak_full.rewar
+0000a4f0: 645f 6368 6169 6e5f 626c 6f63 6b2e 6765  d_chain_block.ge
+0000a500: 745f 756e 6669 6e69 7368 6564 2829 2e67  t_unfinished().g
+0000a510: 6574 5f68 6173 6828 292c 0a20 2020 2020  et_hash(),.     
+0000a520: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+0000a530: 2020 2020 2020 2020 2020 2020 2061 7761               awa
+0000a540: 6974 2063 6f6e 6e65 6374 696f 6e2e 7365  it connection.se
+0000a550: 6e64 5f6d 6573 7361 6765 286d 616b 655f  nd_message(make_
+0000a560: 6d73 6728 5072 6f74 6f63 6f6c 4d65 7373  msg(ProtocolMess
+0000a570: 6167 6554 7970 6573 2e6e 6577 5f70 6561  ageTypes.new_pea
+0000a580: 6b2c 2072 6571 7565 7374 5f6e 6f64 6529  k, request_node)
+0000a590: 290a 0a20 2020 2020 2020 2020 2020 2065  )..            e
+0000a5a0: 6c69 6620 636f 6e6e 6563 7469 6f6e 2e63  lif connection.c
+0000a5b0: 6f6e 6e65 6374 696f 6e5f 7479 7065 2069  onnection_type i
+0000a5c0: 7320 4e6f 6465 5479 7065 2e57 414c 4c45  s NodeType.WALLE
+0000a5d0: 543a 0a20 2020 2020 2020 2020 2020 2020  T:.             
+0000a5e0: 2020 2023 2049 6620 636f 6e6e 6563 7465     # If connecte
+0000a5f0: 6420 746f 2061 2077 616c 6c65 742c 2073  d to a wallet, s
+0000a600: 656e 6420 7468 6520 5065 616b 0a20 2020  end the Peak.   
+0000a610: 2020 2020 2020 2020 2020 2020 2072 6571               req
+0000a620: 7565 7374 5f77 616c 6c65 7420 3d20 7761  uest_wallet = wa
+0000a630: 6c6c 6574 5f70 726f 746f 636f 6c2e 4e65  llet_protocol.Ne
+0000a640: 7750 6561 6b57 616c 6c65 7428 0a20 2020  wPeakWallet(.   
+0000a650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a660: 2070 6561 6b2e 6865 6164 6572 5f68 6173   peak.header_has
+0000a670: 682c 0a20 2020 2020 2020 2020 2020 2020  h,.             
+0000a680: 2020 2020 2020 2070 6561 6b2e 6865 6967         peak.heig
+0000a690: 6874 2c0a 2020 2020 2020 2020 2020 2020  ht,.            
+0000a6a0: 2020 2020 2020 2020 7065 616b 2e77 6569          peak.wei
+0000a6b0: 6768 742c 0a20 2020 2020 2020 2020 2020  ght,.           
+0000a6c0: 2020 2020 2020 2020 2070 6561 6b2e 6865           peak.he
+0000a6d0: 6967 6874 2c0a 2020 2020 2020 2020 2020  ight,.          
+0000a6e0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0000a6f0: 2020 2020 2020 2020 6177 6169 7420 636f          await co
+0000a700: 6e6e 6563 7469 6f6e 2e73 656e 645f 6d65  nnection.send_me
+0000a710: 7373 6167 6528 6d61 6b65 5f6d 7367 2850  ssage(make_msg(P
+0000a720: 726f 746f 636f 6c4d 6573 7361 6765 5479  rotocolMessageTy
+0000a730: 7065 732e 6e65 775f 7065 616b 5f77 616c  pes.new_peak_wal
+0000a740: 6c65 742c 2072 6571 7565 7374 5f77 616c  let, request_wal
+0000a750: 6c65 7429 290a 2020 2020 2020 2020 2020  let)).          
+0000a760: 2020 656c 6966 2063 6f6e 6e65 6374 696f    elif connectio
+0000a770: 6e2e 636f 6e6e 6563 7469 6f6e 5f74 7970  n.connection_typ
+0000a780: 6520 6973 204e 6f64 6554 7970 652e 5449  e is NodeType.TI
+0000a790: 4d45 4c4f 5244 3a0a 2020 2020 2020 2020  MELORD:.        
+0000a7a0: 2020 2020 2020 2020 6177 6169 7420 7365          await se
+0000a7b0: 6c66 2e73 656e 645f 7065 616b 5f74 6f5f  lf.send_peak_to_
+0000a7c0: 7469 6d65 6c6f 7264 7328 290a 0a20 2020  timelords()..   
+0000a7d0: 2061 7379 6e63 2064 6566 206f 6e5f 6469   async def on_di
+0000a7e0: 7363 6f6e 6e65 6374 2873 656c 662c 2063  sconnect(self, c
+0000a7f0: 6f6e 6e65 6374 696f 6e3a 2057 5343 6869  onnection: WSChi
+0000a800: 6143 6f6e 6e65 6374 696f 6e29 202d 3e20  aConnection) -> 
+0000a810: 4e6f 6e65 3a0a 2020 2020 2020 2020 7365  None:.        se
+0000a820: 6c66 2e6c 6f67 2e69 6e66 6f28 6622 7065  lf.log.info(f"pe
+0000a830: 6572 2064 6973 636f 6e6e 6563 7465 6420  er disconnected 
+0000a840: 7b63 6f6e 6e65 6374 696f 6e2e 6765 745f  {connection.get_
+0000a850: 7065 6572 5f6c 6f67 6769 6e67 2829 7d22  peer_logging()}"
+0000a860: 290a 2020 2020 2020 2020 7365 6c66 2e5f  ).        self._
+0000a870: 7374 6174 655f 6368 616e 6765 6428 2263  state_changed("c
+0000a880: 6c6f 7365 5f63 6f6e 6e65 6374 696f 6e22  lose_connection"
+0000a890: 290a 2020 2020 2020 2020 7365 6c66 2e5f  ).        self._
+0000a8a0: 7374 6174 655f 6368 616e 6765 6428 2273  state_changed("s
+0000a8b0: 796e 635f 6d6f 6465 2229 0a20 2020 2020  ync_mode").     
+0000a8c0: 2020 2069 6620 7365 6c66 2e73 796e 635f     if self.sync_
+0000a8d0: 7374 6f72 6520 6973 206e 6f74 204e 6f6e  store is not Non
+0000a8e0: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
+0000a8f0: 656c 662e 7379 6e63 5f73 746f 7265 2e70  elf.sync_store.p
+0000a900: 6565 725f 6469 7363 6f6e 6e65 6374 6564  eer_disconnected
+0000a910: 2863 6f6e 6e65 6374 696f 6e2e 7065 6572  (connection.peer
+0000a920: 5f6e 6f64 655f 6964 290a 2020 2020 2020  _node_id).      
+0000a930: 2020 2320 5265 6d6f 7665 2061 6c6c 2070    # Remove all p
+0000a940: 6820 7c20 636f 696e 2069 6420 7375 6273  h | coin id subs
+0000a950: 6372 6970 7469 6f6e 2066 6f72 2074 6869  cription for thi
+0000a960: 7320 7065 6572 0a20 2020 2020 2020 2073  s peer.        s
+0000a970: 656c 662e 7375 6273 6372 6970 7469 6f6e  elf.subscription
+0000a980: 732e 7265 6d6f 7665 5f70 6565 7228 636f  s.remove_peer(co
+0000a990: 6e6e 6563 7469 6f6e 2e70 6565 725f 6e6f  nnection.peer_no
+0000a9a0: 6465 5f69 6429 0a0a 2020 2020 6173 796e  de_id)..    asyn
+0000a9b0: 6320 6465 6620 5f73 796e 6328 7365 6c66  c def _sync(self
+0000a9c0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+0000a9d0: 2020 2022 2222 0a20 2020 2020 2020 2050     """.        P
+0000a9e0: 6572 666f 726d 7320 6120 6675 6c6c 2073  erforms a full s
+0000a9f0: 796e 6320 6f66 2074 6865 2062 6c6f 636b  ync of the block
+0000aa00: 6368 6169 6e20 7570 2074 6f20 7468 6520  chain up to the 
+0000aa10: 7065 616b 2e0a 2020 2020 2020 2020 2020  peak..          
+0000aa20: 2020 2d20 5761 6974 2061 2066 6577 2073    - Wait a few s
+0000aa30: 6563 6f6e 6473 2066 6f72 2070 6565 7273  econds for peers
+0000aa40: 2074 6f20 7365 6e64 2075 7320 7468 6569   to send us thei
+0000aa50: 7220 7065 616b 730a 2020 2020 2020 2020  r peaks.        
+0000aa60: 2020 2020 2d20 5365 6c65 6374 2074 6865      - Select the
+0000aa70: 2068 6561 7669 6573 7420 7065 616b 2c20   heaviest peak, 
+0000aa80: 616e 6420 7265 7175 6573 7420 6120 7765  and request a we
+0000aa90: 6967 6874 2070 726f 6f66 2066 726f 6d20  ight proof from 
+0000aaa0: 6120 7065 6572 2077 6974 6820 7468 6174  a peer with that
+0000aab0: 2070 6561 6b0a 2020 2020 2020 2020 2020   peak.          
+0000aac0: 2020 2d20 5661 6c69 6461 7465 2074 6865    - Validate the
+0000aad0: 2077 6569 6768 7420 7072 6f6f 662c 2061   weight proof, a
+0000aae0: 6e64 2064 6973 636f 6e6e 6563 7420 6672  nd disconnect fr
+0000aaf0: 6f6d 2074 6865 2070 6565 7220 6966 2069  om the peer if i
+0000ab00: 6e76 616c 6964 0a20 2020 2020 2020 2020  nvalid.         
+0000ab10: 2020 202d 2046 696e 6420 7468 6520 666f     - Find the fo
+0000ab20: 726b 2070 6f69 6e74 2074 6f20 7365 6520  rk point to see 
+0000ab30: 7768 6572 6520 746f 2073 7461 7274 2064  where to start d
+0000ab40: 6f77 6e6c 6f61 6469 6e67 2062 6c6f 636b  ownloading block
+0000ab50: 730a 2020 2020 2020 2020 2020 2020 2d20  s.            - 
+0000ab60: 446f 776e 6c6f 6164 2062 6c6f 636b 7320  Download blocks 
+0000ab70: 696e 2062 6174 6368 2028 616e 6420 696e  in batch (and in
+0000ab80: 2070 6172 616c 6c65 6c29 2061 6e64 2076   parallel) and v
+0000ab90: 6572 6966 7920 7468 656d 206f 6e65 2061  erify them one a
+0000aba0: 7420 6120 7469 6d65 0a20 2020 2020 2020  t a time.       
+0000abb0: 2020 2020 202d 2044 6973 636f 6e6e 6563       - Disconnec
+0000abc0: 7420 7065 6572 7320 7468 6174 2070 726f  t peers that pro
+0000abd0: 7669 6465 2069 6e76 616c 6964 2062 6c6f  vide invalid blo
+0000abe0: 636b 7320 6f72 2064 6f6e 2774 2068 6176  cks or don't hav
+0000abf0: 6520 7468 6520 626c 6f63 6b73 0a20 2020  e the blocks.   
+0000ac00: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0000ac10: 2023 2045 6e73 7572 6520 7765 2061 7265   # Ensure we are
+0000ac20: 206f 6e6c 7920 7379 6e63 696e 6720 6f6e   only syncing on
+0000ac30: 6365 2061 6e64 206e 6f74 2064 6f75 626c  ce and not doubl
+0000ac40: 6520 6361 6c6c 696e 6720 7468 6973 206d  e calling this m
+0000ac50: 6574 686f 640a 2020 2020 2020 2020 6966  ethod.        if
+0000ac60: 2073 656c 662e 7379 6e63 5f73 746f 7265   self.sync_store
+0000ac70: 2e67 6574 5f73 796e 635f 6d6f 6465 2829  .get_sync_mode()
+0000ac80: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0000ac90: 7475 726e 204e 6f6e 650a 0a20 2020 2020  turn None..     
+0000aca0: 2020 2069 6620 7365 6c66 2e73 796e 635f     if self.sync_
+0000acb0: 7374 6f72 652e 6765 745f 6c6f 6e67 5f73  store.get_long_s
+0000acc0: 796e 6328 293a 0a20 2020 2020 2020 2020  ync():.         
+0000acd0: 2020 2073 656c 662e 6c6f 672e 6465 6275     self.log.debu
+0000ace0: 6728 2261 6c72 6561 6479 2069 6e20 6c6f  g("already in lo
+0000acf0: 6e67 2073 796e 6322 290a 2020 2020 2020  ng sync").      
+0000ad00: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
+0000ad10: 650a 0a20 2020 2020 2020 2073 656c 662e  e..        self.
+0000ad20: 7379 6e63 5f73 746f 7265 2e73 6574 5f6c  sync_store.set_l
+0000ad30: 6f6e 675f 7379 6e63 2854 7275 6529 0a20  ong_sync(True). 
+0000ad40: 2020 2020 2020 2073 656c 662e 6c6f 672e         self.log.
+0000ad50: 6465 6275 6728 226c 6f6e 6720 7379 6e63  debug("long sync
+0000ad60: 2073 7461 7274 6564 2229 0a20 2020 2020   started").     
+0000ad70: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+0000ad80: 2020 2020 7365 6c66 2e6c 6f67 2e69 6e66      self.log.inf
+0000ad90: 6f28 2253 7461 7274 696e 6720 746f 2070  o("Starting to p
+0000ada0: 6572 666f 726d 2073 796e 632e 2229 0a0a  erform sync.")..
+0000adb0: 2020 2020 2020 2020 2020 2020 2320 5761              # Wa
+0000adc0: 6974 2075 6e74 696c 2077 6520 6861 7665  it until we have
+0000add0: 2033 2070 6561 6b73 206f 7220 7570 2074   3 peaks or up t
+0000ade0: 6f20 6120 6d61 7820 6f66 2033 3020 7365  o a max of 30 se
+0000adf0: 636f 6e64 730a 2020 2020 2020 2020 2020  conds.          
+0000ae00: 2020 6d61 785f 6974 6572 6174 696f 6e73    max_iterations
+0000ae10: 203d 2069 6e74 2873 656c 662e 636f 6e66   = int(self.conf
+0000ae20: 6967 2e67 6574 2822 6d61 785f 7379 6e63  ig.get("max_sync
+0000ae30: 5f77 6169 7422 2c20 3330 2929 202a 2031  _wait", 30)) * 1
+0000ae40: 300a 0a20 2020 2020 2020 2020 2020 2073  0..            s
+0000ae50: 656c 662e 6c6f 672e 696e 666f 2866 2257  elf.log.info(f"W
+0000ae60: 6169 7469 6e67 2074 6f20 7265 6365 6976  aiting to receiv
+0000ae70: 6520 7065 616b 7320 6672 6f6d 2070 6565  e peaks from pee
+0000ae80: 7273 2e20 2874 696d 656f 7574 3a20 7b6d  rs. (timeout: {m
+0000ae90: 6178 5f69 7465 7261 7469 6f6e 732f 3130  ax_iterations/10
+0000aea0: 7d73 2922 290a 2020 2020 2020 2020 2020  }s)").          
+0000aeb0: 2020 7065 616b 7320 3d20 5b5d 0a20 2020    peaks = [].   
+0000aec0: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+0000aed0: 6e20 7261 6e67 6528 6d61 785f 6974 6572  n range(max_iter
+0000aee0: 6174 696f 6e73 293a 0a20 2020 2020 2020  ations):.       
+0000aef0: 2020 2020 2020 2020 2070 6561 6b73 203d           peaks =
+0000af00: 205b 7065 616b 2e68 6561 6465 725f 6861   [peak.header_ha
+0000af10: 7368 2066 6f72 2070 6561 6b20 696e 2073  sh for peak in s
+0000af20: 656c 662e 7379 6e63 5f73 746f 7265 2e67  elf.sync_store.g
+0000af30: 6574 5f70 6561 6b5f 6f66 5f65 6163 685f  et_peak_of_each_
+0000af40: 7065 6572 2829 2e76 616c 7565 7328 295d  peer().values()]
+0000af50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000af60: 2069 6620 6c65 6e28 7365 6c66 2e73 796e   if len(self.syn
+0000af70: 635f 7374 6f72 652e 6765 745f 7065 6572  c_store.get_peer
+0000af80: 735f 7468 6174 5f68 6176 655f 7065 616b  s_that_have_peak
+0000af90: 2870 6561 6b73 2929 203c 2033 3a0a 2020  (peaks)) < 3:.  
+0000afa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000afb0: 2020 6966 2073 656c 662e 5f73 6875 745f    if self._shut_
+0000afc0: 646f 776e 3a0a 2020 2020 2020 2020 2020  down:.          
+0000afd0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0000afe0: 7475 726e 204e 6f6e 650a 2020 2020 2020  turn None.      
+0000aff0: 2020 2020 2020 2020 2020 2020 2020 6177                aw
+0000b000: 6169 7420 6173 796e 6369 6f2e 736c 6565  ait asyncio.slee
+0000b010: 7028 302e 3129 0a20 2020 2020 2020 2020  p(0.1).         
+0000b020: 2020 2020 2020 2020 2020 2063 6f6e 7469             conti
+0000b030: 6e75 650a 2020 2020 2020 2020 2020 2020  nue.            
+0000b040: 2020 2020 6272 6561 6b0a 0a20 2020 2020      break..     
+0000b050: 2020 2020 2020 2073 656c 662e 6c6f 672e         self.log.
+0000b060: 696e 666f 2866 2243 6f6c 6c65 6374 6564  info(f"Collected
+0000b070: 2061 2074 6f74 616c 206f 6620 7b6c 656e   a total of {len
+0000b080: 2870 6561 6b73 297d 2070 6561 6b73 2e22  (peaks)} peaks."
+0000b090: 290a 0a20 2020 2020 2020 2020 2020 2023  )..            #
+0000b0a0: 2042 6173 6564 206f 6e20 7265 7370 6f6e   Based on respon
+0000b0b0: 7365 7320 6672 6f6d 2070 6565 7273 2061  ses from peers a
+0000b0c0: 626f 7574 2074 6865 2063 7572 7265 6e74  bout the current
+0000b0d0: 2070 6561 6b73 2c20 7365 6520 7768 6963   peaks, see whic
+0000b0e0: 6820 7065 616b 2069 7320 7468 6520 6865  h peak is the he
+0000b0f0: 6176 6965 7374 0a20 2020 2020 2020 2020  aviest.         
+0000b100: 2020 2023 2028 7369 6d69 6c61 7220 746f     # (similar to
+0000b110: 206c 6f6e 6765 7374 2063 6861 696e 2072   longest chain r
+0000b120: 756c 6529 2e0a 2020 2020 2020 2020 2020  ule)..          
+0000b130: 2020 7461 7267 6574 5f70 6561 6b20 3d20    target_peak = 
+0000b140: 7365 6c66 2e73 796e 635f 7374 6f72 652e  self.sync_store.
+0000b150: 6765 745f 6865 6176 6965 7374 5f70 6561  get_heaviest_pea
+0000b160: 6b28 290a 0a20 2020 2020 2020 2020 2020  k()..           
+0000b170: 2069 6620 7461 7267 6574 5f70 6561 6b20   if target_peak 
+0000b180: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+0000b190: 2020 2020 2020 2020 2072 6169 7365 2052           raise R
+0000b1a0: 756e 7469 6d65 4572 726f 7228 224e 6f74  untimeError("Not
+0000b1b0: 2070 6572 666f 726d 696e 6720 7379 6e63   performing sync
+0000b1c0: 2c20 6e6f 2070 6561 6b73 2063 6f6c 6c65  , no peaks colle
+0000b1d0: 6374 6564 2229 0a0a 2020 2020 2020 2020  cted")..        
+0000b1e0: 2020 2020 7365 6c66 2e73 796e 635f 7374      self.sync_st
+0000b1f0: 6f72 652e 7461 7267 6574 5f70 6561 6b20  ore.target_peak 
+0000b200: 3d20 7461 7267 6574 5f70 6561 6b0a 0a20  = target_peak.. 
+0000b210: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000b220: 6c6f 672e 696e 666f 2866 2253 656c 6563  log.info(f"Selec
+0000b230: 7465 6420 7065 616b 207b 7461 7267 6574  ted peak {target
+0000b240: 5f70 6561 6b7d 2229 0a20 2020 2020 2020  _peak}").       
+0000b250: 2020 2020 2023 2043 6865 636b 2077 6869       # Check whi
+0000b260: 6368 2070 6565 7273 2061 7265 2075 7064  ch peers are upd
+0000b270: 6174 6564 2074 6f20 7468 6973 2068 6569  ated to this hei
+0000b280: 6768 740a 0a20 2020 2020 2020 2020 2020  ght..           
+0000b290: 2070 6565 7273 203d 2073 656c 662e 7365   peers = self.se
+0000b2a0: 7276 6572 2e67 6574 5f63 6f6e 6e65 6374  rver.get_connect
+0000b2b0: 696f 6e73 284e 6f64 6554 7970 652e 4655  ions(NodeType.FU
+0000b2c0: 4c4c 5f4e 4f44 4529 0a20 2020 2020 2020  LL_NODE).       
+0000b2d0: 2020 2020 2063 6f72 6f75 7469 6e65 7320       coroutines 
+0000b2e0: 3d20 5b5d 0a20 2020 2020 2020 2020 2020  = [].           
+0000b2f0: 2066 6f72 2070 6565 7220 696e 2070 6565   for peer in pee
+0000b300: 7273 3a0a 2020 2020 2020 2020 2020 2020  rs:.            
+0000b310: 2020 2020 636f 726f 7574 696e 6573 2e61      coroutines.a
+0000b320: 7070 656e 6428 0a20 2020 2020 2020 2020  ppend(.         
+0000b330: 2020 2020 2020 2020 2020 2070 6565 722e             peer.
+0000b340: 6361 6c6c 5f61 7069 280a 2020 2020 2020  call_api(.      
+0000b350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b360: 2020 4675 6c6c 4e6f 6465 4150 492e 7265    FullNodeAPI.re
+0000b370: 7175 6573 745f 626c 6f63 6b2c 0a20 2020  quest_block,.   
+0000b380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b390: 2020 2020 2066 756c 6c5f 6e6f 6465 5f70       full_node_p
+0000b3a0: 726f 746f 636f 6c2e 5265 7175 6573 7442  rotocol.RequestB
+0000b3b0: 6c6f 636b 2874 6172 6765 745f 7065 616b  lock(target_peak
+0000b3c0: 2e68 6569 6768 742c 2054 7275 6529 2c0a  .height, True),.
+0000b3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b3e0: 2020 2020 2020 2020 7469 6d65 6f75 743d          timeout=
+0000b3f0: 3130 2c0a 2020 2020 2020 2020 2020 2020  10,.            
+0000b400: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0000b410: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0000b420: 2020 2020 2020 2020 666f 7220 692c 2074          for i, t
+0000b430: 6172 6765 745f 7065 616b 5f72 6573 706f  arget_peak_respo
+0000b440: 6e73 6520 696e 2065 6e75 6d65 7261 7465  nse in enumerate
+0000b450: 2861 7761 6974 2061 7379 6e63 696f 2e67  (await asyncio.g
+0000b460: 6174 6865 7228 2a63 6f72 6f75 7469 6e65  ather(*coroutine
+0000b470: 7329 293a 0a20 2020 2020 2020 2020 2020  s)):.           
+0000b480: 2020 2020 2069 6620 7461 7267 6574 5f70       if target_p
+0000b490: 6561 6b5f 7265 7370 6f6e 7365 2069 7320  eak_response is 
+0000b4a0: 6e6f 7420 4e6f 6e65 2061 6e64 2069 7369  not None and isi
+0000b4b0: 6e73 7461 6e63 6528 7461 7267 6574 5f70  nstance(target_p
+0000b4c0: 6561 6b5f 7265 7370 6f6e 7365 2c20 5265  eak_response, Re
+0000b4d0: 7370 6f6e 6442 6c6f 636b 293a 0a20 2020  spondBlock):.   
+0000b4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b4f0: 2073 656c 662e 7379 6e63 5f73 746f 7265   self.sync_store
+0000b500: 2e70 6565 725f 6861 735f 626c 6f63 6b28  .peer_has_block(
+0000b510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b520: 2020 2020 2020 2020 2074 6172 6765 745f           target_
+0000b530: 7065 616b 2e68 6561 6465 725f 6861 7368  peak.header_hash
+0000b540: 2c20 7065 6572 735b 695d 2e70 6565 725f  , peers[i].peer_
+0000b550: 6e6f 6465 5f69 642c 2074 6172 6765 745f  node_id, target_
+0000b560: 7065 616b 2e77 6569 6768 742c 2074 6172  peak.weight, tar
+0000b570: 6765 745f 7065 616b 2e68 6569 6768 742c  get_peak.height,
+0000b580: 2046 616c 7365 0a20 2020 2020 2020 2020   False.         
+0000b590: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+0000b5a0: 2020 2020 2020 2020 2023 2054 4f44 4f3a           # TODO:
+0000b5b0: 2064 6973 636f 6e6e 6563 7420 6672 6f6d   disconnect from
+0000b5c0: 2070 6565 7220 7768 6963 6820 6761 7665   peer which gave
+0000b5d0: 2075 7320 7468 6520 6865 6176 6965 7374   us the heaviest
+0000b5e0: 5f70 6561 6b2c 2069 6620 6e6f 626f 6479  _peak, if nobody
+0000b5f0: 2068 6173 2074 6865 2070 6561 6b0a 2020   has the peak.  
+0000b600: 2020 2020 2020 2020 2020 666f 726b 5f70            fork_p
+0000b610: 6f69 6e74 2c20 7375 6d6d 6172 6965 7320  oint, summaries 
+0000b620: 3d20 6177 6169 7420 7365 6c66 2e72 6571  = await self.req
+0000b630: 7565 7374 5f76 616c 6964 6174 655f 7770  uest_validate_wp
+0000b640: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0000b650: 2020 7461 7267 6574 5f70 6561 6b2e 6865    target_peak.he
+0000b660: 6164 6572 5f68 6173 682c 2074 6172 6765  ader_hash, targe
+0000b670: 745f 7065 616b 2e68 6569 6768 742c 2074  t_peak.height, t
+0000b680: 6172 6765 745f 7065 616b 2e77 6569 6768  arget_peak.weigh
+0000b690: 740a 2020 2020 2020 2020 2020 2020 290a  t.            ).
+0000b6a0: 2020 2020 2020 2020 2020 2020 2320 456e              # En
+0000b6b0: 7375 7265 7320 7468 6174 2074 6865 2066  sures that the f
+0000b6c0: 6f72 6b20 706f 696e 7420 646f 6573 206e  ork point does n
+0000b6d0: 6f74 2063 6861 6e67 650a 2020 2020 2020  ot change.      
+0000b6e0: 2020 2020 2020 6173 796e 6320 7769 7468        async with
+0000b6f0: 2073 656c 662e 626c 6f63 6b63 6861 696e   self.blockchain
+0000b700: 2e70 7269 6f72 6974 795f 6d75 7465 782e  .priority_mutex.
+0000b710: 6163 7175 6972 6528 7072 696f 7269 7479  acquire(priority
+0000b720: 3d42 6c6f 636b 6368 6169 6e4d 7574 6578  =BlockchainMutex
+0000b730: 5072 696f 7269 7479 2e68 6967 6829 3a0a  Priority.high):.
+0000b740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b750: 6177 6169 7420 7365 6c66 2e62 6c6f 636b  await self.block
+0000b760: 6368 6169 6e2e 7761 726d 7570 2866 6f72  chain.warmup(for
+0000b770: 6b5f 706f 696e 7429 0a20 2020 2020 2020  k_point).       
+0000b780: 2020 2020 2020 2020 2061 7761 6974 2073           await s
+0000b790: 656c 662e 7379 6e63 5f66 726f 6d5f 666f  elf.sync_from_fo
+0000b7a0: 726b 5f70 6f69 6e74 2866 6f72 6b5f 706f  rk_point(fork_po
+0000b7b0: 696e 742c 2074 6172 6765 745f 7065 616b  int, target_peak
+0000b7c0: 2e68 6569 6768 742c 2074 6172 6765 745f  .height, target_
+0000b7d0: 7065 616b 2e68 6561 6465 725f 6861 7368  peak.header_hash
+0000b7e0: 2c20 7375 6d6d 6172 6965 7329 0a20 2020  , summaries).   
+0000b7f0: 2020 2020 2065 7863 6570 7420 6173 796e       except asyn
+0000b800: 6369 6f2e 4361 6e63 656c 6c65 6445 7272  cio.CancelledErr
+0000b810: 6f72 3a0a 2020 2020 2020 2020 2020 2020  or:.            
+0000b820: 7365 6c66 2e6c 6f67 2e77 6172 6e69 6e67  self.log.warning
+0000b830: 2822 5379 6e63 696e 6720 6661 696c 6564  ("Syncing failed
+0000b840: 2c20 4361 6e63 656c 6c65 6445 7272 6f72  , CancelledError
+0000b850: 2229 0a20 2020 2020 2020 2065 7863 6570  ").        excep
+0000b860: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
+0000b870: 3a0a 2020 2020 2020 2020 2020 2020 7462  :.            tb
+0000b880: 203d 2074 7261 6365 6261 636b 2e66 6f72   = traceback.for
+0000b890: 6d61 745f 6578 6328 290a 2020 2020 2020  mat_exc().      
+0000b8a0: 2020 2020 2020 7365 6c66 2e6c 6f67 2e65        self.log.e
+0000b8b0: 7272 6f72 2866 2245 7272 6f72 2077 6974  rror(f"Error wit
+0000b8c0: 6820 7379 6e63 696e 673a 207b 7479 7065  h syncing: {type
+0000b8d0: 2865 297d 7b74 627d 2229 0a20 2020 2020  (e)}{tb}").     
+0000b8e0: 2020 2066 696e 616c 6c79 3a0a 2020 2020     finally:.    
+0000b8f0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+0000b900: 5f73 6875 745f 646f 776e 3a0a 2020 2020  _shut_down:.    
+0000b910: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0000b920: 726e 204e 6f6e 650a 2020 2020 2020 2020  rn None.        
+0000b930: 2020 2020 6177 6169 7420 7365 6c66 2e5f      await self._
+0000b940: 6669 6e69 7368 5f73 796e 6328 290a 0a20  finish_sync().. 
+0000b950: 2020 2061 7379 6e63 2064 6566 2072 6571     async def req
+0000b960: 7565 7374 5f76 616c 6964 6174 655f 7770  uest_validate_wp
+0000b970: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+0000b980: 7065 616b 5f68 6561 6465 725f 6861 7368  peak_header_hash
+0000b990: 3a20 6279 7465 7333 322c 2070 6561 6b5f  : bytes32, peak_
+0000b9a0: 6865 6967 6874 3a20 7569 6e74 3332 2c20  height: uint32, 
+0000b9b0: 7065 616b 5f77 6569 6768 743a 2075 696e  peak_weight: uin
+0000b9c0: 7431 3238 0a20 2020 2029 202d 3e20 5475  t128.    ) -> Tu
+0000b9d0: 706c 655b 7569 6e74 3332 2c20 4c69 7374  ple[uint32, List
+0000b9e0: 5b53 7562 4570 6f63 6853 756d 6d61 7279  [SubEpochSummary
+0000b9f0: 5d5d 3a0a 2020 2020 2020 2020 6966 2073  ]]:.        if s
+0000ba00: 656c 662e 7765 6967 6874 5f70 726f 6f66  elf.weight_proof
+0000ba10: 5f68 616e 646c 6572 2069 7320 4e6f 6e65  _handler is None
+0000ba20: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+0000ba30: 6973 6520 5275 6e74 696d 6545 7272 6f72  ise RuntimeError
+0000ba40: 2822 5765 6967 6874 2070 726f 6f66 2068  ("Weight proof h
+0000ba50: 616e 646c 6572 2069 7320 4e6f 6e65 2229  andler is None")
+0000ba60: 0a20 2020 2020 2020 2070 6565 7273 5f77  .        peers_w
+0000ba70: 6974 685f 7065 616b 203d 2073 656c 662e  ith_peak = self.
+0000ba80: 6765 745f 7065 6572 735f 7769 7468 5f70  get_peers_with_p
+0000ba90: 6561 6b28 7065 616b 5f68 6561 6465 725f  eak(peak_header_
+0000baa0: 6861 7368 290a 2020 2020 2020 2020 2320  hash).        # 
+0000bab0: 5265 7175 6573 7420 7765 6967 6874 2070  Request weight p
+0000bac0: 726f 6f66 2066 726f 6d20 6120 7261 6e64  roof from a rand
+0000bad0: 6f6d 2070 6565 720a 2020 2020 2020 2020  om peer.        
+0000bae0: 7365 6c66 2e6c 6f67 2e69 6e66 6f28 6622  self.log.info(f"
+0000baf0: 546f 7461 6c20 6f66 207b 6c65 6e28 7065  Total of {len(pe
+0000bb00: 6572 735f 7769 7468 5f70 6561 6b29 7d20  ers_with_peak)} 
+0000bb10: 7065 6572 7320 7769 7468 2070 6561 6b20  peers with peak 
+0000bb20: 7b70 6561 6b5f 6865 6967 6874 7d22 290a  {peak_height}").
+0000bb30: 2020 2020 2020 2020 7765 6967 6874 5f70          weight_p
+0000bb40: 726f 6f66 5f70 6565 723a 2057 5343 6869  roof_peer: WSChi
+0000bb50: 6143 6f6e 6e65 6374 696f 6e20 3d20 7261  aConnection = ra
+0000bb60: 6e64 6f6d 2e63 686f 6963 6528 7065 6572  ndom.choice(peer
+0000bb70: 735f 7769 7468 5f70 6561 6b29 0a20 2020  s_with_peak).   
+0000bb80: 2020 2020 2073 656c 662e 6c6f 672e 696e       self.log.in
+0000bb90: 666f 280a 2020 2020 2020 2020 2020 2020  fo(.            
+0000bba0: 6622 5265 7175 6573 7469 6e67 2077 6569  f"Requesting wei
+0000bbb0: 6768 7420 7072 6f6f 6620 6672 6f6d 2070  ght proof from p
+0000bbc0: 6565 7220 7b77 6569 6768 745f 7072 6f6f  eer {weight_proo
+0000bbd0: 665f 7065 6572 2e70 6565 725f 696e 666f  f_peer.peer_info
+0000bbe0: 2e68 6f73 747d 2075 7020 746f 2068 6569  .host} up to hei
+0000bbf0: 6768 7420 7b70 6561 6b5f 6865 6967 6874  ght {peak_height
+0000bc00: 7d22 0a20 2020 2020 2020 2029 0a20 2020  }".        ).   
+0000bc10: 2020 2020 2063 7572 5f70 6561 6b3a 204f       cur_peak: O
+0000bc20: 7074 696f 6e61 6c5b 426c 6f63 6b52 6563  ptional[BlockRec
+0000bc30: 6f72 645d 203d 2073 656c 662e 626c 6f63  ord] = self.bloc
+0000bc40: 6b63 6861 696e 2e67 6574 5f70 6561 6b28  kchain.get_peak(
+0000bc50: 290a 2020 2020 2020 2020 6966 2063 7572  ).        if cur
+0000bc60: 5f70 6561 6b20 6973 206e 6f74 204e 6f6e  _peak is not Non
+0000bc70: 6520 616e 6420 7065 616b 5f77 6569 6768  e and peak_weigh
+0000bc80: 7420 3c3d 2063 7572 5f70 6561 6b2e 7765  t <= cur_peak.we
+0000bc90: 6967 6874 3a0a 2020 2020 2020 2020 2020  ight:.          
+0000bca0: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+0000bcb0: 6f72 2822 4e6f 7420 7065 7266 6f72 6d69  or("Not performi
+0000bcc0: 6e67 2073 796e 632c 2061 6c72 6561 6479  ng sync, already
+0000bcd0: 2063 6175 6768 7420 7570 2e22 290a 2020   caught up.").  
+0000bce0: 2020 2020 2020 7770 5f74 696d 656f 7574        wp_timeout
+0000bcf0: 203d 2033 3630 0a20 2020 2020 2020 2069   = 360.        i
+0000bd00: 6620 2277 6569 6768 745f 7072 6f6f 665f  f "weight_proof_
+0000bd10: 7469 6d65 6f75 7422 2069 6e20 7365 6c66  timeout" in self
+0000bd20: 2e63 6f6e 6669 673a 0a20 2020 2020 2020  .config:.       
+0000bd30: 2020 2020 2077 705f 7469 6d65 6f75 7420       wp_timeout 
+0000bd40: 3d20 7365 6c66 2e63 6f6e 6669 675b 2277  = self.config["w
+0000bd50: 6569 6768 745f 7072 6f6f 665f 7469 6d65  eight_proof_time
+0000bd60: 6f75 7422 5d0a 2020 2020 2020 2020 7365  out"].        se
+0000bd70: 6c66 2e6c 6f67 2e64 6562 7567 2866 2277  lf.log.debug(f"w
+0000bd80: 6569 6768 7420 7072 6f6f 6620 7469 6d65  eight proof time
+0000bd90: 6f75 7420 6973 207b 7770 5f74 696d 656f  out is {wp_timeo
+0000bda0: 7574 7d20 7365 6322 290a 2020 2020 2020  ut} sec").      
+0000bdb0: 2020 7265 7175 6573 7420 3d20 6675 6c6c    request = full
+0000bdc0: 5f6e 6f64 655f 7072 6f74 6f63 6f6c 2e52  _node_protocol.R
+0000bdd0: 6571 7565 7374 5072 6f6f 664f 6657 6569  equestProofOfWei
+0000bde0: 6768 7428 7065 616b 5f68 6569 6768 742c  ght(peak_height,
+0000bdf0: 2070 6561 6b5f 6865 6164 6572 5f68 6173   peak_header_has
+0000be00: 6829 0a20 2020 2020 2020 2072 6573 706f  h).        respo
+0000be10: 6e73 6520 3d20 6177 6169 7420 7765 6967  nse = await weig
+0000be20: 6874 5f70 726f 6f66 5f70 6565 722e 6361  ht_proof_peer.ca
+0000be30: 6c6c 5f61 7069 2846 756c 6c4e 6f64 6541  ll_api(FullNodeA
+0000be40: 5049 2e72 6571 7565 7374 5f70 726f 6f66  PI.request_proof
+0000be50: 5f6f 665f 7765 6967 6874 2c20 7265 7175  _of_weight, requ
+0000be60: 6573 742c 2074 696d 656f 7574 3d77 705f  est, timeout=wp_
+0000be70: 7469 6d65 6f75 7429 0a20 2020 2020 2020  timeout).       
+0000be80: 2023 2044 6973 636f 6e6e 6563 7420 6672   # Disconnect fr
+0000be90: 6f6d 2074 6869 7320 7065 6572 2c20 6265  om this peer, be
+0000bea0: 6361 7573 6520 7468 6579 2068 6176 6520  cause they have 
+0000beb0: 6e6f 7420 6265 6861 7665 6420 7072 6f70  not behaved prop
+0000bec0: 6572 6c79 0a20 2020 2020 2020 2069 6620  erly.        if 
+0000bed0: 7265 7370 6f6e 7365 2069 7320 4e6f 6e65  response is None
+0000bee0: 206f 7220 6e6f 7420 6973 696e 7374 616e   or not isinstan
+0000bef0: 6365 2872 6573 706f 6e73 652c 2066 756c  ce(response, ful
+0000bf00: 6c5f 6e6f 6465 5f70 726f 746f 636f 6c2e  l_node_protocol.
+0000bf10: 5265 7370 6f6e 6450 726f 6f66 4f66 5765  RespondProofOfWe
+0000bf20: 6967 6874 293a 0a20 2020 2020 2020 2020  ight):.         
+0000bf30: 2020 2061 7761 6974 2077 6569 6768 745f     await weight_
+0000bf40: 7072 6f6f 665f 7065 6572 2e63 6c6f 7365  proof_peer.close
+0000bf50: 2836 3030 290a 2020 2020 2020 2020 2020  (600).          
+0000bf60: 2020 7261 6973 6520 5275 6e74 696d 6545    raise RuntimeE
+0000bf70: 7272 6f72 2866 2257 6569 6768 7420 7072  rror(f"Weight pr
+0000bf80: 6f6f 6620 6469 6420 6e6f 7420 6172 7269  oof did not arri
+0000bf90: 7665 2069 6e20 7469 6d65 2066 726f 6d20  ve in time from 
+0000bfa0: 7065 6572 3a20 7b77 6569 6768 745f 7072  peer: {weight_pr
+0000bfb0: 6f6f 665f 7065 6572 2e70 6565 725f 696e  oof_peer.peer_in
+0000bfc0: 666f 2e68 6f73 747d 2229 0a20 2020 2020  fo.host}").     
+0000bfd0: 2020 2069 6620 7265 7370 6f6e 7365 2e77     if response.w
+0000bfe0: 702e 7265 6365 6e74 5f63 6861 696e 5f64  p.recent_chain_d
+0000bff0: 6174 615b 2d31 5d2e 7265 7761 7264 5f63  ata[-1].reward_c
+0000c000: 6861 696e 5f62 6c6f 636b 2e68 6569 6768  hain_block.heigh
+0000c010: 7420 213d 2070 6561 6b5f 6865 6967 6874  t != peak_height
+0000c020: 3a0a 2020 2020 2020 2020 2020 2020 6177  :.            aw
+0000c030: 6169 7420 7765 6967 6874 5f70 726f 6f66  ait weight_proof
+0000c040: 5f70 6565 722e 636c 6f73 6528 3630 3029  _peer.close(600)
+0000c050: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+0000c060: 7365 2052 756e 7469 6d65 4572 726f 7228  se RuntimeError(
+0000c070: 6622 5765 6967 6874 2070 726f 6f66 2068  f"Weight proof h
+0000c080: 6164 2074 6865 2077 726f 6e67 2068 6569  ad the wrong hei
+0000c090: 6768 743a 207b 7765 6967 6874 5f70 726f  ght: {weight_pro
+0000c0a0: 6f66 5f70 6565 722e 7065 6572 5f69 6e66  of_peer.peer_inf
+0000c0b0: 6f2e 686f 7374 7d22 290a 2020 2020 2020  o.host}").      
+0000c0c0: 2020 6966 2072 6573 706f 6e73 652e 7770    if response.wp
+0000c0d0: 2e72 6563 656e 745f 6368 6169 6e5f 6461  .recent_chain_da
+0000c0e0: 7461 5b2d 315d 2e72 6577 6172 645f 6368  ta[-1].reward_ch
+0000c0f0: 6169 6e5f 626c 6f63 6b2e 7765 6967 6874  ain_block.weight
+0000c100: 2021 3d20 7065 616b 5f77 6569 6768 743a   != peak_weight:
+0000c110: 0a20 2020 2020 2020 2020 2020 2061 7761  .            awa
+0000c120: 6974 2077 6569 6768 745f 7072 6f6f 665f  it weight_proof_
+0000c130: 7065 6572 2e63 6c6f 7365 2836 3030 290a  peer.close(600).
+0000c140: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+0000c150: 6520 5275 6e74 696d 6545 7272 6f72 2866  e RuntimeError(f
+0000c160: 2257 6569 6768 7420 7072 6f6f 6620 6861  "Weight proof ha
+0000c170: 6420 7468 6520 7772 6f6e 6720 7765 6967  d the wrong weig
+0000c180: 6874 3a20 7b77 6569 6768 745f 7072 6f6f  ht: {weight_proo
+0000c190: 665f 7065 6572 2e70 6565 725f 696e 666f  f_peer.peer_info
+0000c1a0: 2e68 6f73 747d 2229 0a20 2020 2020 2020  .host}").       
+0000c1b0: 2069 6620 7365 6c66 2e69 6e5f 6261 645f   if self.in_bad_
+0000c1c0: 7065 616b 5f63 6163 6865 2872 6573 706f  peak_cache(respo
+0000c1d0: 6e73 652e 7770 293a 0a20 2020 2020 2020  nse.wp):.       
+0000c1e0: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
+0000c1f0: 4572 726f 7228 2257 6569 6768 7420 7072  Error("Weight pr
+0000c200: 6f6f 6620 6661 696c 6564 2062 6164 2070  oof failed bad p
+0000c210: 6561 6b20 6361 6368 6520 7661 6c69 6461  eak cache valida
+0000c220: 7469 6f6e 2229 0a20 2020 2020 2020 2023  tion").        #
+0000c230: 2064 6f6e 7420 7379 6e63 2074 6f20 7770   dont sync to wp
+0000c240: 2069 6620 6c6f 6361 6c20 7065 616b 2069   if local peak i
+0000c250: 7320 6865 6176 6965 722c 0a20 2020 2020  s heavier,.     
+0000c260: 2020 2023 2064 6f6e 7420 6261 6e20 7065     # dont ban pe
+0000c270: 6572 2c20 7765 2061 736b 6564 2066 6f72  er, we asked for
+0000c280: 2074 6869 7320 7065 616b 0a20 2020 2020   this peak.     
+0000c290: 2020 2063 7572 7265 6e74 5f70 6561 6b20     current_peak 
+0000c2a0: 3d20 7365 6c66 2e62 6c6f 636b 6368 6169  = self.blockchai
+0000c2b0: 6e2e 6765 745f 7065 616b 2829 0a20 2020  n.get_peak().   
+0000c2c0: 2020 2020 2069 6620 6375 7272 656e 745f       if current_
+0000c2d0: 7065 616b 2069 7320 6e6f 7420 4e6f 6e65  peak is not None
+0000c2e0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+0000c2f0: 2072 6573 706f 6e73 652e 7770 2e72 6563   response.wp.rec
+0000c300: 656e 745f 6368 6169 6e5f 6461 7461 5b2d  ent_chain_data[-
+0000c310: 315d 2e72 6577 6172 645f 6368 6169 6e5f  1].reward_chain_
+0000c320: 626c 6f63 6b2e 7765 6967 6874 203c 3d20  block.weight <= 
+0000c330: 6375 7272 656e 745f 7065 616b 2e77 6569  current_peak.wei
+0000c340: 6768 743a 0a20 2020 2020 2020 2020 2020  ght:.           
+0000c350: 2020 2020 2072 6169 7365 2052 756e 7469       raise Runti
+0000c360: 6d65 4572 726f 7228 0a20 2020 2020 2020  meError(.       
+0000c370: 2020 2020 2020 2020 2020 2020 2066 2263               f"c
+0000c380: 7572 7265 6e74 2070 6561 6b20 6973 2068  urrent peak is h
+0000c390: 6561 7669 6572 2074 6861 6e20 5765 6967  eavier than Weig
+0000c3a0: 6874 2070 726f 6f66 2070 6565 6b3a 207b  ht proof peek: {
+0000c3b0: 7765 6967 6874 5f70 726f 6f66 5f70 6565  weight_proof_pee
+0000c3c0: 722e 7065 6572 5f69 6e66 6f2e 686f 7374  r.peer_info.host
+0000c3d0: 7d22 0a20 2020 2020 2020 2020 2020 2020  }".             
+0000c3e0: 2020 2029 0a20 2020 2020 2020 2074 7279     ).        try
+0000c3f0: 3a0a 2020 2020 2020 2020 2020 2020 7661  :.            va
+0000c400: 6c69 6461 7465 642c 2066 6f72 6b5f 706f  lidated, fork_po
+0000c410: 696e 742c 2073 756d 6d61 7269 6573 203d  int, summaries =
+0000c420: 2061 7761 6974 2073 656c 662e 7765 6967   await self.weig
+0000c430: 6874 5f70 726f 6f66 5f68 616e 646c 6572  ht_proof_handler
+0000c440: 2e76 616c 6964 6174 655f 7765 6967 6874  .validate_weight
+0000c450: 5f70 726f 6f66 2872 6573 706f 6e73 652e  _proof(response.
+0000c460: 7770 290a 2020 2020 2020 2020 6578 6365  wp).        exce
+0000c470: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
+0000c480: 653a 0a20 2020 2020 2020 2020 2020 2061  e:.            a
+0000c490: 7761 6974 2077 6569 6768 745f 7072 6f6f  wait weight_proo
+0000c4a0: 665f 7065 6572 2e63 6c6f 7365 2836 3030  f_peer.close(600
+0000c4b0: 290a 2020 2020 2020 2020 2020 2020 7261  ).            ra
+0000c4c0: 6973 6520 5661 6c75 6545 7272 6f72 2866  ise ValueError(f
+0000c4d0: 2257 6569 6768 7420 7072 6f6f 6620 7661  "Weight proof va
+0000c4e0: 6c69 6461 7469 6f6e 2074 6872 6577 2061  lidation threw a
+0000c4f0: 6e20 6572 726f 7220 7b65 7d22 290a 2020  n error {e}").  
+0000c500: 2020 2020 2020 6966 206e 6f74 2076 616c        if not val
+0000c510: 6964 6174 6564 3a0a 2020 2020 2020 2020  idated:.        
+0000c520: 2020 2020 6177 6169 7420 7765 6967 6874      await weight
+0000c530: 5f70 726f 6f66 5f70 6565 722e 636c 6f73  _proof_peer.clos
+0000c540: 6528 3630 3029 0a20 2020 2020 2020 2020  e(600).         
+0000c550: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
+0000c560: 726f 7228 2257 6569 6768 7420 7072 6f6f  ror("Weight proo
+0000c570: 6620 7661 6c69 6461 7469 6f6e 2066 6169  f validation fai
+0000c580: 6c65 6422 290a 2020 2020 2020 2020 7365  led").        se
+0000c590: 6c66 2e6c 6f67 2e69 6e66 6f28 6622 5265  lf.log.info(f"Re
+0000c5a0: 2d63 6865 636b 6564 2070 6565 7273 3a20  -checked peers: 
+0000c5b0: 746f 7461 6c20 6f66 207b 6c65 6e28 7065  total of {len(pe
+0000c5c0: 6572 735f 7769 7468 5f70 6561 6b29 7d20  ers_with_peak)} 
+0000c5d0: 7065 6572 7320 7769 7468 2070 6561 6b20  peers with peak 
+0000c5e0: 7b70 6561 6b5f 6865 6967 6874 7d22 290a  {peak_height}").
+0000c5f0: 2020 2020 2020 2020 7365 6c66 2e73 796e          self.syn
+0000c600: 635f 7374 6f72 652e 7365 745f 7379 6e63  c_store.set_sync
+0000c610: 5f6d 6f64 6528 5472 7565 290a 2020 2020  _mode(True).    
+0000c620: 2020 2020 7365 6c66 2e5f 7374 6174 655f      self._state_
+0000c630: 6368 616e 6765 6428 2273 796e 635f 6d6f  changed("sync_mo
+0000c640: 6465 2229 0a20 2020 2020 2020 2072 6574  de").        ret
+0000c650: 7572 6e20 666f 726b 5f70 6f69 6e74 2c20  urn fork_point, 
+0000c660: 7375 6d6d 6172 6965 730a 0a20 2020 2061  summaries..    a
+0000c670: 7379 6e63 2064 6566 2073 796e 635f 6672  sync def sync_fr
+0000c680: 6f6d 5f66 6f72 6b5f 706f 696e 7428 0a20  om_fork_point(. 
+0000c690: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
+0000c6a0: 2020 2020 2066 6f72 6b5f 706f 696e 745f       fork_point_
+0000c6b0: 6865 6967 6874 3a20 7569 6e74 3332 2c0a  height: uint32,.
+0000c6c0: 2020 2020 2020 2020 7461 7267 6574 5f70          target_p
+0000c6d0: 6561 6b5f 7362 5f68 6569 6768 743a 2075  eak_sb_height: u
+0000c6e0: 696e 7433 322c 0a20 2020 2020 2020 2070  int32,.        p
+0000c6f0: 6561 6b5f 6861 7368 3a20 6279 7465 7333  eak_hash: bytes3
+0000c700: 322c 0a20 2020 2020 2020 2073 756d 6d61  2,.        summa
+0000c710: 7269 6573 3a20 4c69 7374 5b53 7562 4570  ries: List[SubEp
+0000c720: 6f63 6853 756d 6d61 7279 5d2c 0a20 2020  ochSummary],.   
+0000c730: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
+0000c740: 2020 2020 6275 6666 6572 5f73 697a 6520      buffer_size 
+0000c750: 3d20 340a 2020 2020 2020 2020 7365 6c66  = 4.        self
+0000c760: 2e6c 6f67 2e69 6e66 6f28 6622 5374 6172  .log.info(f"Star
+0000c770: 7420 7379 6e63 696e 6720 6672 6f6d 2066  t syncing from f
+0000c780: 6f72 6b20 706f 696e 7420 6174 207b 666f  ork point at {fo
+0000c790: 726b 5f70 6f69 6e74 5f68 6569 6768 747d  rk_point_height}
+0000c7a0: 2075 7020 746f 207b 7461 7267 6574 5f70   up to {target_p
+0000c7b0: 6561 6b5f 7362 5f68 6569 6768 747d 2229  eak_sb_height}")
+0000c7c0: 0a20 2020 2020 2020 2070 6565 7273 5f77  .        peers_w
+0000c7d0: 6974 685f 7065 616b 3a20 4c69 7374 5b57  ith_peak: List[W
+0000c7e0: 5343 6869 6143 6f6e 6e65 6374 696f 6e5d  SChiaConnection]
+0000c7f0: 203d 2073 656c 662e 6765 745f 7065 6572   = self.get_peer
+0000c800: 735f 7769 7468 5f70 6561 6b28 7065 616b  s_with_peak(peak
+0000c810: 5f68 6173 6829 0a20 2020 2020 2020 2066  _hash).        f
+0000c820: 6f72 6b5f 706f 696e 745f 6865 6967 6874  ork_point_height
+0000c830: 203d 2061 7761 6974 2063 6865 636b 5f66   = await check_f
+0000c840: 6f72 6b5f 6e65 7874 5f62 6c6f 636b 280a  ork_next_block(.
+0000c850: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000c860: 2e62 6c6f 636b 6368 6169 6e2c 2066 6f72  .blockchain, for
+0000c870: 6b5f 706f 696e 745f 6865 6967 6874 2c20  k_point_height, 
+0000c880: 7065 6572 735f 7769 7468 5f70 6561 6b2c  peers_with_peak,
+0000c890: 206e 6f64 655f 6e65 7874 5f62 6c6f 636b   node_next_block
+0000c8a0: 5f63 6865 636b 0a20 2020 2020 2020 2029  _check.        )
+0000c8b0: 0a20 2020 2020 2020 2062 6174 6368 5f73  .        batch_s
+0000c8c0: 697a 6520 3d20 7365 6c66 2e63 6f6e 7374  ize = self.const
+0000c8d0: 616e 7473 2e4d 4158 5f42 4c4f 434b 5f43  ants.MAX_BLOCK_C
+0000c8e0: 4f55 4e54 5f50 4552 5f52 4551 5545 5354  OUNT_PER_REQUEST
+0000c8f0: 530a 0a20 2020 2020 2020 2023 206e 6f72  S..        # nor
+0000c900: 6d61 6c6c 7920 2266 6f72 6b5f 706f 696e  mally "fork_poin
+0000c910: 7422 206f 7220 2266 6f72 6b5f 6865 6967  t" or "fork_heig
+0000c920: 6874 2220 7265 6665 7273 2074 6f20 7468  ht" refers to th
+0000c930: 6520 6669 7273 7420 636f 6d6d 6f6e 0a20  e first common. 
+0000c940: 2020 2020 2020 2023 2062 6c6f 636b 2062         # block b
+0000c950: 6574 7765 656e 2074 6865 206d 6169 6e20  etween the main 
+0000c960: 6368 6169 6e20 616e 6420 7468 6520 666f  chain and the fo
+0000c970: 726b 2e20 4865 7265 2022 666f 726b 5f70  rk. Here "fork_p
+0000c980: 6f69 6e74 5f68 6569 6768 7422 0a20 2020  oint_height".   
+0000c990: 2020 2020 2023 2073 6565 6d73 2074 6f20       # seems to 
+0000c9a0: 7265 6665 7220 746f 2074 6865 2066 6972  refer to the fir
+0000c9b0: 7374 2064 6976 6572 6769 6e67 2062 6c6f  st diverging blo
+0000c9c0: 636b 0a0a 2020 2020 2020 2020 6173 796e  ck..        asyn
+0000c9d0: 6320 6465 6620 6665 7463 685f 626c 6f63  c def fetch_bloc
+0000c9e0: 6b5f 6261 7463 6865 7328 0a20 2020 2020  k_batches(.     
+0000c9f0: 2020 2020 2020 2062 6174 6368 5f71 7565         batch_que
+0000ca00: 7565 3a20 6173 796e 6369 6f2e 5175 6575  ue: asyncio.Queu
+0000ca10: 655b 4f70 7469 6f6e 616c 5b54 7570 6c65  e[Optional[Tuple
+0000ca20: 5b57 5343 6869 6143 6f6e 6e65 6374 696f  [WSChiaConnectio
+0000ca30: 6e2c 204c 6973 745b 4675 6c6c 426c 6f63  n, List[FullBloc
+0000ca40: 6b5d 5d5d 5d0a 2020 2020 2020 2020 2920  k]]]].        ) 
+0000ca50: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+0000ca60: 2020 2020 2073 7461 7274 5f68 6569 6768       start_heigh
+0000ca70: 742c 2065 6e64 5f68 6569 6768 7420 3d20  t, end_height = 
+0000ca80: 302c 2030 0a20 2020 2020 2020 2020 2020  0, 0.           
+0000ca90: 206e 6577 5f70 6565 7273 5f77 6974 685f   new_peers_with_
+0000caa0: 7065 616b 3a20 4c69 7374 5b57 5343 6869  peak: List[WSChi
+0000cab0: 6143 6f6e 6e65 6374 696f 6e5d 203d 2070  aConnection] = p
+0000cac0: 6565 7273 5f77 6974 685f 7065 616b 5b3a  eers_with_peak[:
+0000cad0: 5d0a 2020 2020 2020 2020 2020 2020 7472  ].            tr
+0000cae0: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+0000caf0: 2020 2023 2062 6c6f 636b 2072 6571 7565     # block reque
+0000cb00: 7374 2072 616e 6765 7320 6172 6520 2a69  st ranges are *i
+0000cb10: 6e63 6c75 7369 7665 2a2c 2074 6869 7320  nclusive*, this 
+0000cb20: 7265 7175 6972 6573 2073 6f6d 650a 2020  requires some.  
+0000cb30: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000cb40: 6779 6d6e 6173 7469 6373 206f 6620 7468  gymnastics of th
+0000cb50: 6973 2072 616e 6765 2028 2b31 2074 6f20  is range (+1 to 
+0000cb60: 6d61 6b65 2069 7420 6578 636c 7573 6976  make it exclusiv
+0000cb70: 652c 206c 696b 6520 6e6f 726d 616c 0a20  e, like normal. 
+0000cb80: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000cb90: 2072 616e 6765 7329 2061 6e64 2074 6865   ranges) and the
+0000cba0: 6e20 2d31 2077 6865 6e20 666f 726d 696e  n -1 when formin
+0000cbb0: 6720 7468 6520 7265 7175 6573 7420 6d65  g the request me
+0000cbc0: 7373 6167 650a 2020 2020 2020 2020 2020  ssage.          
+0000cbd0: 2020 2020 2020 666f 7220 7374 6172 745f        for start_
+0000cbe0: 6865 6967 6874 2069 6e20 7261 6e67 6528  height in range(
+0000cbf0: 666f 726b 5f70 6f69 6e74 5f68 6569 6768  fork_point_heigh
+0000cc00: 742c 2074 6172 6765 745f 7065 616b 5f73  t, target_peak_s
+0000cc10: 625f 6865 6967 6874 202b 2031 2c20 6261  b_height + 1, ba
+0000cc20: 7463 685f 7369 7a65 293a 0a20 2020 2020  tch_size):.     
+0000cc30: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0000cc40: 6e64 5f68 6569 6768 7420 3d20 6d69 6e28  nd_height = min(
+0000cc50: 7461 7267 6574 5f70 6561 6b5f 7362 5f68  target_peak_sb_h
+0000cc60: 6569 6768 742c 2073 7461 7274 5f68 6569  eight, start_hei
+0000cc70: 6768 7420 2b20 6261 7463 685f 7369 7a65  ght + batch_size
+0000cc80: 202d 2031 290a 2020 2020 2020 2020 2020   - 1).          
+0000cc90: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0000cca0: 7420 3d20 5265 7175 6573 7442 6c6f 636b  t = RequestBlock
+0000ccb0: 7328 7569 6e74 3332 2873 7461 7274 5f68  s(uint32(start_h
+0000ccc0: 6569 6768 7429 2c20 7569 6e74 3332 2865  eight), uint32(e
+0000ccd0: 6e64 5f68 6569 6768 7429 2c20 5472 7565  nd_height), True
+0000cce0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0000ccf0: 2020 2020 2020 6665 7463 6865 6420 3d20        fetched = 
+0000cd00: 4661 6c73 650a 2020 2020 2020 2020 2020  False.          
+0000cd10: 2020 2020 2020 2020 2020 666f 7220 7065            for pe
+0000cd20: 6572 2069 6e20 7261 6e64 6f6d 2e73 616d  er in random.sam
+0000cd30: 706c 6528 6e65 775f 7065 6572 735f 7769  ple(new_peers_wi
+0000cd40: 7468 5f70 6561 6b2c 206c 656e 286e 6577  th_peak, len(new
+0000cd50: 5f70 6565 7273 5f77 6974 685f 7065 616b  _peers_with_peak
+0000cd60: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+0000cd70: 2020 2020 2020 2020 2020 2020 6966 2070              if p
+0000cd80: 6565 722e 636c 6f73 6564 3a0a 2020 2020  eer.closed:.    
+0000cd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cda0: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
+0000cdb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000cdc0: 2020 2020 2020 2020 2072 6573 706f 6e73           respons
+0000cdd0: 6520 3d20 6177 6169 7420 7065 6572 2e63  e = await peer.c
+0000cde0: 616c 6c5f 6170 6928 4675 6c6c 4e6f 6465  all_api(FullNode
+0000cdf0: 4150 492e 7265 7175 6573 745f 626c 6f63  API.request_bloc
+0000ce00: 6b73 2c20 7265 7175 6573 742c 2074 696d  ks, request, tim
+0000ce10: 656f 7574 3d33 3029 0a20 2020 2020 2020  eout=30).       
+0000ce20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ce30: 2069 6620 7265 7370 6f6e 7365 2069 7320   if response is 
+0000ce40: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0000ce50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ce60: 2020 6177 6169 7420 7065 6572 2e63 6c6f    await peer.clo
+0000ce70: 7365 2829 0a20 2020 2020 2020 2020 2020  se().           
+0000ce80: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+0000ce90: 6620 6973 696e 7374 616e 6365 2872 6573  f isinstance(res
+0000cea0: 706f 6e73 652c 2052 6573 706f 6e64 426c  ponse, RespondBl
+0000ceb0: 6f63 6b73 293a 0a20 2020 2020 2020 2020  ocks):.         
+0000cec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ced0: 2020 2061 7761 6974 2062 6174 6368 5f71     await batch_q
+0000cee0: 7565 7565 2e70 7574 2828 7065 6572 2c20  ueue.put((peer, 
+0000cef0: 7265 7370 6f6e 7365 2e62 6c6f 636b 7329  response.blocks)
+0000cf00: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0000cf10: 2020 2020 2020 2020 2020 2020 2020 6665                fe
+0000cf20: 7463 6865 6420 3d20 5472 7565 0a20 2020  tched = True.   
+0000cf30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cf40: 2020 2020 2020 2020 2062 7265 616b 0a20           break. 
+0000cf50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cf60: 2020 2069 6620 6665 7463 6865 6420 6973     if fetched is
+0000cf70: 2046 616c 7365 3a0a 2020 2020 2020 2020   False:.        
+0000cf80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cf90: 7365 6c66 2e6c 6f67 2e65 7272 6f72 2866  self.log.error(f
+0000cfa0: 2266 6169 6c65 6420 6665 7463 6869 6e67  "failed fetching
+0000cfb0: 207b 7374 6172 745f 6865 6967 6874 7d20   {start_height} 
+0000cfc0: 746f 207b 656e 645f 6865 6967 6874 7d20  to {end_height} 
+0000cfd0: 6672 6f6d 2070 6565 7273 2229 0a20 2020  from peers").   
+0000cfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cff0: 2020 2020 2072 6574 7572 6e0a 2020 2020       return.    
+0000d000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d010: 6966 2073 656c 662e 7379 6e63 5f73 746f  if self.sync_sto
+0000d020: 7265 2e70 6565 7273 5f63 6861 6e67 6564  re.peers_changed
+0000d030: 2e69 735f 7365 7428 293a 0a20 2020 2020  .is_set():.     
+0000d040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d050: 2020 206e 6577 5f70 6565 7273 5f77 6974     new_peers_wit
+0000d060: 685f 7065 616b 203d 2073 656c 662e 6765  h_peak = self.ge
+0000d070: 745f 7065 6572 735f 7769 7468 5f70 6561  t_peers_with_pea
+0000d080: 6b28 7065 616b 5f68 6173 6829 0a20 2020  k(peak_hash).   
+0000d090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d0a0: 2020 2020 2073 656c 662e 7379 6e63 5f73       self.sync_s
+0000d0b0: 746f 7265 2e70 6565 7273 5f63 6861 6e67  tore.peers_chang
+0000d0c0: 6564 2e63 6c65 6172 2829 0a20 2020 2020  ed.clear().     
+0000d0d0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+0000d0e0: 6365 7074 696f 6e20 6173 2065 3a0a 2020  ception as e:.  
+0000d0f0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0000d100: 6c66 2e6c 6f67 2e65 7272 6f72 2866 2245  lf.log.error(f"E
+0000d110: 7863 6570 7469 6f6e 2066 6574 6368 696e  xception fetchin
+0000d120: 6720 7b73 7461 7274 5f68 6569 6768 747d  g {start_height}
+0000d130: 2074 6f20 7b65 6e64 5f68 6569 6768 747d   to {end_height}
+0000d140: 2066 726f 6d20 7065 6572 207b 657d 2229   from peer {e}")
+0000d150: 0a20 2020 2020 2020 2020 2020 2066 696e  .            fin
+0000d160: 616c 6c79 3a0a 2020 2020 2020 2020 2020  ally:.          
+0000d170: 2020 2020 2020 2320 6669 6e69 7368 6564        # finished
+0000d180: 2073 6967 6e61 6c20 7769 7468 204e 6f6e   signal with Non
+0000d190: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+0000d1a0: 2020 6177 6169 7420 6261 7463 685f 7175    await batch_qu
+0000d1b0: 6575 652e 7075 7428 4e6f 6e65 290a 0a20  eue.put(None).. 
+0000d1c0: 2020 2020 2020 2061 7379 6e63 2064 6566         async def
+0000d1d0: 2076 616c 6964 6174 655f 626c 6f63 6b5f   validate_block_
+0000d1e0: 6261 7463 6865 7328 0a20 2020 2020 2020  batches(.       
+0000d1f0: 2020 2020 2069 6e6e 6572 5f62 6174 6368       inner_batch
+0000d200: 5f71 7565 7565 3a20 6173 796e 6369 6f2e  _queue: asyncio.
+0000d210: 5175 6575 655b 4f70 7469 6f6e 616c 5b54  Queue[Optional[T
+0000d220: 7570 6c65 5b57 5343 6869 6143 6f6e 6e65  uple[WSChiaConne
+0000d230: 6374 696f 6e2c 204c 6973 745b 4675 6c6c  ction, List[Full
+0000d240: 426c 6f63 6b5d 5d5d 5d0a 2020 2020 2020  Block]]]].      
+0000d250: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+0000d260: 2020 2020 2020 2020 2066 6f72 6b5f 696e           fork_in
+0000d270: 666f 3a20 4f70 7469 6f6e 616c 5b46 6f72  fo: Optional[For
+0000d280: 6b49 6e66 6f5d 203d 204e 6f6e 650a 0a20  kInfo] = None.. 
+0000d290: 2020 2020 2020 2020 2020 2077 6869 6c65             while
+0000d2a0: 2054 7275 653a 0a20 2020 2020 2020 2020   True:.         
+0000d2b0: 2020 2020 2020 2072 6573 3a20 4f70 7469         res: Opti
+0000d2c0: 6f6e 616c 5b54 7570 6c65 5b57 5343 6869  onal[Tuple[WSChi
+0000d2d0: 6143 6f6e 6e65 6374 696f 6e2c 204c 6973  aConnection, Lis
+0000d2e0: 745b 4675 6c6c 426c 6f63 6b5d 5d5d 203d  t[FullBlock]]] =
+0000d2f0: 2061 7761 6974 2069 6e6e 6572 5f62 6174   await inner_bat
+0000d300: 6368 5f71 7565 7565 2e67 6574 2829 0a20  ch_queue.get(). 
+0000d310: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0000d320: 6620 7265 7320 6973 204e 6f6e 653a 0a20  f res is None:. 
+0000d330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d340: 2020 2073 656c 662e 6c6f 672e 6465 6275     self.log.debu
+0000d350: 6728 2264 6f6e 6520 6665 7463 6869 6e67  g("done fetching
+0000d360: 2062 6c6f 636b 7322 290a 2020 2020 2020   blocks").      
+0000d370: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0000d380: 7475 726e 204e 6f6e 650a 2020 2020 2020  turn None.      
+0000d390: 2020 2020 2020 2020 2020 7065 6572 2c20            peer, 
+0000d3a0: 626c 6f63 6b73 203d 2072 6573 0a20 2020  blocks = res.   
+0000d3b0: 2020 2020 2020 2020 2020 2020 2073 7461               sta
+0000d3c0: 7274 5f68 6569 6768 7420 3d20 626c 6f63  rt_height = bloc
+0000d3d0: 6b73 5b30 5d2e 6865 6967 6874 0a20 2020  ks[0].height.   
+0000d3e0: 2020 2020 2020 2020 2020 2020 2065 6e64               end
+0000d3f0: 5f68 6569 6768 7420 3d20 626c 6f63 6b73  _height = blocks
+0000d400: 5b2d 315d 2e68 6569 6768 740a 0a20 2020  [-1].height..   
+0000d410: 2020 2020 2020 2020 2020 2020 2023 2069               # i
+0000d420: 6e20 6361 7365 2077 6527 7265 2076 616c  n case we're val
+0000d430: 6964 6174 696e 6720 6120 7265 6f72 6720  idating a reorg 
+0000d440: 666f 726b 2028 692e 652e 206e 6f74 2065  fork (i.e. not e
+0000d450: 7874 656e 6469 6e67 2074 6865 0a20 2020  xtending the.   
+0000d460: 2020 2020 2020 2020 2020 2020 2023 206d               # m
+0000d470: 6169 6e20 6368 6169 6e29 2c20 7765 206e  ain chain), we n
+0000d480: 6565 6420 746f 2072 6563 6f72 6420 7468  eed to record th
+0000d490: 6520 636f 696e 2073 6574 2066 726f 6d20  e coin set from 
+0000d4a0: 7468 6174 2066 6f72 6b20 696e 0a20 2020  that fork in.   
+0000d4b0: 2020 2020 2020 2020 2020 2020 2023 2066               # f
+0000d4c0: 6f72 6b5f 696e 666f 2e20 4f74 6865 7277  ork_info. Otherw
+0000d4d0: 6973 6520 7661 6c69 6461 7469 6f6e 2069  ise validation i
+0000d4e0: 7320 7665 7279 2065 7870 656e 7369 7665  s very expensive
+0000d4f0: 2c20 6573 7065 6369 616c 6c79 0a20 2020  , especially.   
+0000d500: 2020 2020 2020 2020 2020 2020 2023 2066               # f
+0000d510: 6f72 2064 6565 7020 7265 6f72 6773 0a20  or deep reorgs. 
+0000d520: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0000d530: 6561 6b3a 204f 7074 696f 6e61 6c5b 426c  eak: Optional[Bl
+0000d540: 6f63 6b52 6563 6f72 645d 0a20 2020 2020  ockRecord].     
+0000d550: 2020 2020 2020 2020 2020 2069 6620 666f             if fo
+0000d560: 726b 5f69 6e66 6f20 6973 204e 6f6e 653a  rk_info is None:
+0000d570: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d580: 2020 2020 2070 6561 6b20 3d20 7365 6c66       peak = self
+0000d590: 2e62 6c6f 636b 6368 6169 6e2e 6765 745f  .blockchain.get_
+0000d5a0: 7065 616b 2829 0a20 2020 2020 2020 2020  peak().         
+0000d5b0: 2020 2020 2020 2020 2020 2065 7874 656e             exten
+0000d5c0: 6469 6e67 5f6d 6169 6e5f 6368 6169 6e3a  ding_main_chain:
+0000d5d0: 2062 6f6f 6c20 3d20 7065 616b 2069 7320   bool = peak is 
+0000d5e0: 4e6f 6e65 206f 7220 280a 2020 2020 2020  None or (.      
+0000d5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d600: 2020 7065 616b 2e68 6561 6465 725f 6861    peak.header_ha
+0000d610: 7368 203d 3d20 626c 6f63 6b73 5b30 5d2e  sh == blocks[0].
+0000d620: 7072 6576 5f68 6561 6465 725f 6861 7368  prev_header_hash
+0000d630: 206f 7220 7065 616b 2e68 6561 6465 725f   or peak.header_
+0000d640: 6861 7368 203d 3d20 626c 6f63 6b73 5b30  hash == blocks[0
+0000d650: 5d2e 6865 6164 6572 5f68 6173 680a 2020  ].header_hash.  
 0000d660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d670: 2020 2020 2320 6966 2077 6527 7265 2073      # if we're s
-0000d680: 696d 706c 7920 6578 7465 6e64 696e 6720  imply extending 
-0000d690: 7468 6520 6d61 696e 2063 6861 696e 2c20  the main chain, 
-0000d6a0: 6974 2773 2069 6d70 6f72 7461 6e74 0a20  it's important. 
-0000d6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d6c0: 2020 2023 202a 6e6f 742a 2074 6f20 7061     # *not* to pa
-0000d6d0: 7373 2069 6e20 6120 466f 726b 496e 666f  ss in a ForkInfo
-0000d6e0: 206f 626a 6563 742c 2061 7320 6974 2063   object, as it c
-0000d6f0: 616e 2070 6f74 656e 7469 616c 6c79 0a20  an potentially. 
-0000d700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d710: 2020 2023 2061 6363 7275 6520 6120 6c61     # accrue a la
-0000d720: 7267 6520 7374 6174 6520 2877 6974 6820  rge state (with 
-0000d730: 6e6f 2076 616c 7565 2c20 7369 6e63 6520  no value, since 
-0000d740: 7765 2063 616e 2076 616c 6964 6174 650a  we can validate.
-0000d750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d760: 2020 2020 2320 6167 6169 6e73 7420 7468      # against th
-0000d770: 6520 436f 696e 5374 6f72 6529 0a20 2020  e CoinStore).   
-0000d780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d790: 2069 6620 6e6f 7420 6578 7465 6e64 696e   if not extendin
-0000d7a0: 675f 6d61 696e 5f63 6861 696e 3a0a 2020  g_main_chain:.  
-0000d7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d7c0: 2020 2020 2020 6966 2066 6f72 6b5f 706f        if fork_po
-0000d7d0: 696e 745f 6865 6967 6874 203d 3d20 303a  int_height == 0:
-0000d7e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d7f0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-0000d800: 6b5f 696e 666f 203d 2046 6f72 6b49 6e66  k_info = ForkInf
-0000d810: 6f28 2d31 2c20 2d31 2c20 7365 6c66 2e63  o(-1, -1, self.c
-0000d820: 6f6e 7374 616e 7473 2e47 454e 4553 4953  onstants.GENESIS
-0000d830: 5f43 4841 4c4c 454e 4745 290a 2020 2020  _CHALLENGE).    
-0000d840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d850: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0000d860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d870: 2020 2020 2020 666f 726b 5f68 6173 6820        fork_hash 
-0000d880: 3d20 7365 6c66 2e62 6c6f 636b 6368 6169  = self.blockchai
-0000d890: 6e2e 6865 6967 6874 5f74 6f5f 6861 7368  n.height_to_hash
-0000d8a0: 2875 696e 7433 3228 666f 726b 5f70 6f69  (uint32(fork_poi
-0000d8b0: 6e74 5f68 6569 6768 7420 2d20 3129 290a  nt_height - 1)).
-0000d8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d8d0: 2020 2020 2020 2020 2020 2020 6173 7365              asse
-0000d8e0: 7274 2066 6f72 6b5f 6861 7368 2069 7320  rt fork_hash is 
-0000d8f0: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
-0000d900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d910: 2020 2020 2066 6f72 6b5f 696e 666f 203d       fork_info =
-0000d920: 2046 6f72 6b49 6e66 6f28 666f 726b 5f70   ForkInfo(fork_p
-0000d930: 6f69 6e74 5f68 6569 6768 7420 2d20 312c  oint_height - 1,
-0000d940: 2066 6f72 6b5f 706f 696e 745f 6865 6967   fork_point_heig
-0000d950: 6874 202d 2031 2c20 666f 726b 5f68 6173  ht - 1, fork_has
-0000d960: 6829 0a0a 2020 2020 2020 2020 2020 2020  h)..            
-0000d970: 2020 2020 7375 6363 6573 732c 2073 7461      success, sta
-0000d980: 7465 5f63 6861 6e67 655f 7375 6d6d 6172  te_change_summar
-0000d990: 792c 2065 7272 203d 2061 7761 6974 2073  y, err = await s
-0000d9a0: 656c 662e 6164 645f 626c 6f63 6b5f 6261  elf.add_block_ba
-0000d9b0: 7463 6828 0a20 2020 2020 2020 2020 2020  tch(.           
-0000d9c0: 2020 2020 2020 2020 2062 6c6f 636b 732c           blocks,
-0000d9d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d9e0: 2020 2020 2070 6565 722e 6765 745f 7065       peer.get_pe
-0000d9f0: 6572 5f6c 6f67 6769 6e67 2829 2c0a 2020  er_logging(),.  
-0000da00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000da10: 2020 666f 726b 5f69 6e66 6f2c 0a20 2020    fork_info,.   
-0000da20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000da30: 2073 756d 6d61 7269 6573 2c0a 2020 2020   summaries,.    
-0000da40: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-0000da50: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0000da60: 2073 7563 6365 7373 2069 7320 4661 6c73   success is Fals
-0000da70: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0000da80: 2020 2020 2020 2061 7761 6974 2070 6565         await pee
-0000da90: 722e 636c 6f73 6528 3630 3029 0a20 2020  r.close(600).   
-0000daa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dab0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-0000dac0: 7228 6622 4661 696c 6564 2074 6f20 7661  r(f"Failed to va
-0000dad0: 6c69 6461 7465 2062 6c6f 636b 2062 6174  lidate block bat
-0000dae0: 6368 207b 7374 6172 745f 6865 6967 6874  ch {start_height
-0000daf0: 7d20 746f 207b 656e 645f 6865 6967 6874  } to {end_height
-0000db00: 7d22 290a 2020 2020 2020 2020 2020 2020  }").            
-0000db10: 2020 2020 7365 6c66 2e6c 6f67 2e69 6e66      self.log.inf
-0000db20: 6f28 6622 4164 6465 6420 626c 6f63 6b73  o(f"Added blocks
-0000db30: 207b 7374 6172 745f 6865 6967 6874 7d20   {start_height} 
-0000db40: 746f 207b 656e 645f 6865 6967 6874 7d22  to {end_height}"
-0000db50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0000db60: 2020 7065 616b 203d 2073 656c 662e 626c    peak = self.bl
-0000db70: 6f63 6b63 6861 696e 2e67 6574 5f70 6561  ockchain.get_pea
-0000db80: 6b28 290a 2020 2020 2020 2020 2020 2020  k().            
-0000db90: 2020 2020 6966 2073 7461 7465 5f63 6861      if state_cha
-0000dba0: 6e67 655f 7375 6d6d 6172 7920 6973 206e  nge_summary is n
-0000dbb0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0000dbc0: 2020 2020 2020 2020 2020 2020 2061 7373               ass
-0000dbd0: 6572 7420 7065 616b 2069 7320 6e6f 7420  ert peak is not 
-0000dbe0: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-0000dbf0: 2020 2020 2020 2020 2023 2048 696e 7473           # Hints
-0000dc00: 206d 7573 7420 6265 2061 6464 6564 2074   must be added t
-0000dc10: 6f20 7468 6520 4442 2e20 5468 6520 6f74  o the DB. The ot
-0000dc20: 6865 7220 706f 7374 2d70 726f 6365 7373  her post-process
-0000dc30: 696e 6720 7461 736b 7320 6172 6520 6e6f  ing tasks are no
-0000dc40: 7420 7265 7175 6972 6564 2077 6865 6e20  t required when 
-0000dc50: 7379 6e63 696e 670a 2020 2020 2020 2020  syncing.        
-0000dc60: 2020 2020 2020 2020 2020 2020 6869 6e74              hint
-0000dc70: 735f 746f 5f61 6464 2c20 5f20 3d20 6765  s_to_add, _ = ge
-0000dc80: 745f 6869 6e74 735f 616e 645f 7375 6273  t_hints_and_subs
-0000dc90: 6372 6970 7469 6f6e 5f63 6f69 6e5f 6964  cription_coin_id
-0000dca0: 7328 0a20 2020 2020 2020 2020 2020 2020  s(.             
-0000dcb0: 2020 2020 2020 2020 2020 2073 7461 7465             state
-0000dcc0: 5f63 6861 6e67 655f 7375 6d6d 6172 792c  _change_summary,
-0000dcd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000dce0: 2020 2020 2020 2020 2073 656c 662e 7375           self.su
-0000dcf0: 6273 6372 6970 7469 6f6e 732e 6861 735f  bscriptions.has_
-0000dd00: 636f 696e 5f73 7562 7363 7269 7074 696f  coin_subscriptio
-0000dd10: 6e2c 0a20 2020 2020 2020 2020 2020 2020  n,.             
-0000dd20: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000dd30: 7375 6273 6372 6970 7469 6f6e 732e 6861  subscriptions.ha
-0000dd40: 735f 7075 7a7a 6c65 5f73 7562 7363 7269  s_puzzle_subscri
-0000dd50: 7074 696f 6e2c 0a20 2020 2020 2020 2020  ption,.         
-0000dd60: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-0000dd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dd80: 2061 7761 6974 2073 656c 662e 6869 6e74   await self.hint
-0000dd90: 5f73 746f 7265 2e61 6464 5f68 696e 7473  _store.add_hints
-0000dda0: 2868 696e 7473 5f74 6f5f 6164 6429 0a20  (hints_to_add). 
-0000ddb0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000ddc0: 204e 6f74 6520 7468 6174 2065 6e64 5f68   Note that end_h
-0000ddd0: 6569 6768 7420 6973 206e 6f74 206e 6563  eight is not nec
-0000dde0: 6573 7361 7269 6c79 2074 6865 2070 6561  essarily the pea
-0000ddf0: 6b20 6174 2074 6869 730a 2020 2020 2020  k at this.      
-0000de00: 2020 2020 2020 2020 2020 2320 706f 696e            # poin
-0000de10: 742e 2049 6e20 6361 7365 206f 6620 6120  t. In case of a 
-0000de20: 7265 2d6f 7267 2c20 6974 206d 6179 2065  re-org, it may e
-0000de30: 7665 6e20 6265 2073 6967 6e69 6669 6361  ven be significa
-0000de40: 6e74 6c79 0a20 2020 2020 2020 2020 2020  ntly.           
-0000de50: 2020 2020 2023 2068 6967 6865 7220 7468       # higher th
-0000de60: 616e 205f 7065 616b 5f68 6569 6768 742c  an _peak_height,
-0000de70: 2061 6e64 2073 7469 6c6c 206e 6f74 2062   and still not b
-0000de80: 6520 7468 6520 7065 616b 2e0a 2020 2020  e the peak..    
-0000de90: 2020 2020 2020 2020 2020 2020 2320 636c              # cl
-0000dea0: 6561 6e5f 626c 6f63 6b5f 7265 636f 7264  ean_block_record
-0000deb0: 2829 2077 696c 6c20 6e6f 7420 6e65 6365  () will not nece
-0000dec0: 7373 6172 696c 7920 686f 6e6f 7220 7468  ssarily honor th
-0000ded0: 6973 2063 7574 2d6f 6666 0a20 2020 2020  is cut-off.     
-0000dee0: 2020 2020 2020 2020 2020 2023 2068 6569             # hei
-0000def0: 6768 742c 2069 6e20 7468 6174 2063 6173  ght, in that cas
-0000df00: 652e 0a20 2020 2020 2020 2020 2020 2020  e..             
-0000df10: 2020 2073 656c 662e 626c 6f63 6b63 6861     self.blockcha
-0000df20: 696e 2e63 6c65 616e 5f62 6c6f 636b 5f72  in.clean_block_r
-0000df30: 6563 6f72 6428 656e 645f 6865 6967 6874  ecord(end_height
-0000df40: 202d 2073 656c 662e 636f 6e73 7461 6e74   - self.constant
-0000df50: 732e 424c 4f43 4b53 5f43 4143 4845 5f53  s.BLOCKS_CACHE_S
-0000df60: 495a 4529 0a0a 2020 2020 2020 2020 6261  IZE)..        ba
-0000df70: 7463 685f 7175 6575 655f 696e 7075 743a  tch_queue_input:
-0000df80: 2061 7379 6e63 696f 2e51 7565 7565 5b4f   asyncio.Queue[O
-0000df90: 7074 696f 6e61 6c5b 5475 706c 655b 5753  ptional[Tuple[WS
-0000dfa0: 4368 6961 436f 6e6e 6563 7469 6f6e 2c20  ChiaConnection, 
-0000dfb0: 4c69 7374 5b46 756c 6c42 6c6f 636b 5d5d  List[FullBlock]]
-0000dfc0: 5d5d 203d 2061 7379 6e63 696f 2e51 7565  ]] = asyncio.Que
-0000dfd0: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
-0000dfe0: 6d61 7873 697a 653d 6275 6666 6572 5f73  maxsize=buffer_s
-0000dff0: 697a 650a 2020 2020 2020 2020 290a 2020  ize.        ).  
-0000e000: 2020 2020 2020 6665 7463 685f 7461 736b        fetch_task
-0000e010: 203d 2061 7379 6e63 696f 2e54 6173 6b28   = asyncio.Task(
-0000e020: 6665 7463 685f 626c 6f63 6b5f 6261 7463  fetch_block_batc
-0000e030: 6865 7328 6261 7463 685f 7175 6575 655f  hes(batch_queue_
-0000e040: 696e 7075 7429 290a 2020 2020 2020 2020  input)).        
-0000e050: 7661 6c69 6461 7465 5f74 6173 6b20 3d20  validate_task = 
-0000e060: 6173 796e 6369 6f2e 5461 736b 2876 616c  asyncio.Task(val
-0000e070: 6964 6174 655f 626c 6f63 6b5f 6261 7463  idate_block_batc
-0000e080: 6865 7328 6261 7463 685f 7175 6575 655f  hes(batch_queue_
-0000e090: 696e 7075 7429 290a 2020 2020 2020 2020  input)).        
-0000e0a0: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-0000e0b0: 2077 6974 6820 6c6f 675f 6578 6365 7074   with log_except
-0000e0c0: 696f 6e73 286c 6f67 3d73 656c 662e 6c6f  ions(log=self.lo
-0000e0d0: 672c 206d 6573 7361 6765 3d22 7379 6e63  g, message="sync
-0000e0e0: 2066 726f 6d20 666f 726b 2070 6f69 6e74   from fork point
-0000e0f0: 2066 6169 6c65 6422 293a 0a20 2020 2020   failed"):.     
-0000e100: 2020 2020 2020 2020 2020 2061 7761 6974             await
-0000e110: 2061 7379 6e63 696f 2e67 6174 6865 7228   asyncio.gather(
-0000e120: 6665 7463 685f 7461 736b 2c20 7661 6c69  fetch_task, vali
-0000e130: 6461 7465 5f74 6173 6b29 0a20 2020 2020  date_task).     
-0000e140: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-0000e150: 696f 6e3a 0a20 2020 2020 2020 2020 2020  ion:.           
-0000e160: 2061 7373 6572 7420 7661 6c69 6461 7465   assert validate
-0000e170: 5f74 6173 6b2e 646f 6e65 2829 0a20 2020  _task.done().   
-0000e180: 2020 2020 2020 2020 2066 6574 6368 5f74           fetch_t
-0000e190: 6173 6b2e 6361 6e63 656c 2829 2020 2320  ask.cancel()  # 
-0000e1a0: 6e6f 206e 6565 6420 746f 2063 616e 6365  no need to cance
-0000e1b0: 6c20 7661 6c69 6461 7465 5f74 6173 6b2c  l validate_task,
-0000e1c0: 2069 6620 7765 2065 6e64 2075 7020 6865   if we end up he
-0000e1d0: 7265 2076 616c 6964 6174 655f 7461 736b  re validate_task
-0000e1e0: 2069 7320 616c 7265 6164 7920 646f 6e65   is already done
-0000e1f0: 0a0a 2020 2020 6465 6620 6765 745f 7065  ..    def get_pe
-0000e200: 6572 735f 7769 7468 5f70 6561 6b28 7365  ers_with_peak(se
-0000e210: 6c66 2c20 7065 616b 5f68 6173 683a 2062  lf, peak_hash: b
-0000e220: 7974 6573 3332 2920 2d3e 204c 6973 745b  ytes32) -> List[
-0000e230: 5753 4368 6961 436f 6e6e 6563 7469 6f6e  WSChiaConnection
-0000e240: 5d3a 0a20 2020 2020 2020 2070 6565 725f  ]:.        peer_
-0000e250: 6964 733a 2053 6574 5b62 7974 6573 3332  ids: Set[bytes32
-0000e260: 5d20 3d20 7365 6c66 2e73 796e 635f 7374  ] = self.sync_st
-0000e270: 6f72 652e 6765 745f 7065 6572 735f 7468  ore.get_peers_th
-0000e280: 6174 5f68 6176 655f 7065 616b 285b 7065  at_have_peak([pe
-0000e290: 616b 5f68 6173 685d 290a 2020 2020 2020  ak_hash]).      
-0000e2a0: 2020 6966 206c 656e 2870 6565 725f 6964    if len(peer_id
-0000e2b0: 7329 203d 3d20 303a 0a20 2020 2020 2020  s) == 0:.       
-0000e2c0: 2020 2020 2073 656c 662e 6c6f 672e 7761       self.log.wa
-0000e2d0: 726e 696e 6728 6622 4e6f 7420 7379 6e63  rning(f"Not sync
-0000e2e0: 696e 672c 206e 6f20 7065 6572 7320 7769  ing, no peers wi
-0000e2f0: 7468 2068 6561 6465 725f 6861 7368 207b  th header_hash {
-0000e300: 7065 616b 5f68 6173 687d 2022 290a 2020  peak_hash} ").  
-0000e310: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0000e320: 205b 5d0a 2020 2020 2020 2020 7265 7475   [].        retu
-0000e330: 726e 205b 6320 666f 7220 6320 696e 2073  rn [c for c in s
-0000e340: 656c 662e 7365 7276 6572 2e61 6c6c 5f63  elf.server.all_c
-0000e350: 6f6e 6e65 6374 696f 6e73 2e76 616c 7565  onnections.value
-0000e360: 7328 2920 6966 2063 2e70 6565 725f 6e6f  s() if c.peer_no
-0000e370: 6465 5f69 6420 696e 2070 6565 725f 6964  de_id in peer_id
-0000e380: 735d 0a0a 2020 2020 6173 796e 6320 6465  s]..    async de
-0000e390: 6620 5f77 616c 6c65 7473 5f73 796e 635f  f _wallets_sync_
-0000e3a0: 7461 736b 5f68 616e 646c 6572 2873 656c  task_handler(sel
-0000e3b0: 6629 202d 3e20 4e6f 6e65 3a0a 2020 2020  f) -> None:.    
-0000e3c0: 2020 2020 7768 696c 6520 6e6f 7420 7365      while not se
-0000e3d0: 6c66 2e5f 7368 7574 5f64 6f77 6e3a 0a20  lf._shut_down:. 
-0000e3e0: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
-0000e3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e400: 7761 6c6c 6574 5f75 7064 6174 6520 3d20  wallet_update = 
-0000e410: 6177 6169 7420 7365 6c66 2e77 616c 6c65  await self.walle
-0000e420: 745f 7379 6e63 5f71 7565 7565 2e67 6574  t_sync_queue.get
-0000e430: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
-0000e440: 2020 2061 7761 6974 2073 656c 662e 7570     await self.up
-0000e450: 6461 7465 5f77 616c 6c65 7473 2877 616c  date_wallets(wal
-0000e460: 6c65 745f 7570 6461 7465 290a 2020 2020  let_update).    
-0000e470: 2020 2020 2020 2020 6578 6365 7074 2045          except E
-0000e480: 7863 6570 7469 6f6e 3a0a 2020 2020 2020  xception:.      
-0000e490: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
-0000e4a0: 6f67 2e65 7863 6570 7469 6f6e 2822 5761  og.exception("Wa
-0000e4b0: 6c6c 6574 2073 796e 6320 7461 736b 2066  llet sync task f
-0000e4c0: 6169 6c75 7265 2229 0a20 2020 2020 2020  ailure").       
-0000e4d0: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
-0000e4e0: 650a 0a20 2020 2061 7379 6e63 2064 6566  e..    async def
-0000e4f0: 2075 7064 6174 655f 7761 6c6c 6574 7328   update_wallets(
-0000e500: 7365 6c66 2c20 7761 6c6c 6574 5f75 7064  self, wallet_upd
-0000e510: 6174 653a 2057 616c 6c65 7455 7064 6174  ate: WalletUpdat
-0000e520: 6529 202d 3e20 4e6f 6e65 3a0a 2020 2020  e) -> None:.    
-0000e530: 2020 2020 7365 6c66 2e6c 6f67 2e64 6562      self.log.deb
-0000e540: 7567 280a 2020 2020 2020 2020 2020 2020  ug(.            
-0000e550: 6622 7570 6461 7465 5f77 616c 6c65 7473  f"update_wallets
-0000e560: 202d 2066 6f72 6b5f 6865 6967 6874 3a20   - fork_height: 
-0000e570: 7b77 616c 6c65 745f 7570 6461 7465 2e66  {wallet_update.f
-0000e580: 6f72 6b5f 6865 6967 6874 7d2c 2070 6561  ork_height}, pea
-0000e590: 6b5f 6865 6967 6874 3a20 7b77 616c 6c65  k_height: {walle
-0000e5a0: 745f 7570 6461 7465 2e70 6561 6b2e 6865  t_update.peak.he
-0000e5b0: 6967 6874 7d22 0a20 2020 2020 2020 2029  ight}".        )
-0000e5c0: 0a20 2020 2020 2020 2063 6861 6e67 6573  .        changes
-0000e5d0: 5f66 6f72 5f70 6565 723a 2044 6963 745b  _for_peer: Dict[
-0000e5e0: 6279 7465 7333 322c 2053 6574 5b43 6f69  bytes32, Set[Coi
-0000e5f0: 6e53 7461 7465 5d5d 203d 207b 7d0a 2020  nState]] = {}.  
-0000e600: 2020 2020 2020 666f 7220 636f 696e 5f72        for coin_r
-0000e610: 6563 6f72 6420 696e 2077 616c 6c65 745f  ecord in wallet_
-0000e620: 7570 6461 7465 2e63 6f69 6e5f 7265 636f  update.coin_reco
-0000e630: 7264 733a 0a20 2020 2020 2020 2020 2020  rds:.           
-0000e640: 2063 6f69 6e5f 6964 203d 2063 6f69 6e5f   coin_id = coin_
-0000e650: 7265 636f 7264 2e6e 616d 650a 2020 2020  record.name.    
-0000e660: 2020 2020 2020 2020 7375 6273 6372 6962          subscrib
-0000e670: 6564 5f70 6565 7273 203d 2073 656c 662e  ed_peers = self.
-0000e680: 7375 6273 6372 6970 7469 6f6e 732e 7065  subscriptions.pe
-0000e690: 6572 735f 666f 725f 636f 696e 5f69 6428  ers_for_coin_id(
-0000e6a0: 636f 696e 5f69 6429 0a20 2020 2020 2020  coin_id).       
-0000e6b0: 2020 2020 2073 7562 7363 7269 6265 645f       subscribed_
-0000e6c0: 7065 6572 732e 7570 6461 7465 2873 656c  peers.update(sel
-0000e6d0: 662e 7375 6273 6372 6970 7469 6f6e 732e  f.subscriptions.
-0000e6e0: 7065 6572 735f 666f 725f 7075 7a7a 6c65  peers_for_puzzle
-0000e6f0: 5f68 6173 6828 636f 696e 5f72 6563 6f72  _hash(coin_recor
-0000e700: 642e 636f 696e 2e70 757a 7a6c 655f 6861  d.coin.puzzle_ha
-0000e710: 7368 2929 0a20 2020 2020 2020 2020 2020  sh)).           
-0000e720: 2068 696e 7420 3d20 7761 6c6c 6574 5f75   hint = wallet_u
-0000e730: 7064 6174 652e 6869 6e74 732e 6765 7428  pdate.hints.get(
-0000e740: 636f 696e 5f69 6429 0a20 2020 2020 2020  coin_id).       
-0000e750: 2020 2020 2069 6620 6869 6e74 2069 7320       if hint is 
-0000e760: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000e770: 2020 2020 2020 2020 2020 7375 6273 6372            subscr
-0000e780: 6962 6564 5f70 6565 7273 2e75 7064 6174  ibed_peers.updat
-0000e790: 6528 7365 6c66 2e73 7562 7363 7269 7074  e(self.subscript
-0000e7a0: 696f 6e73 2e70 6565 7273 5f66 6f72 5f70  ions.peers_for_p
-0000e7b0: 757a 7a6c 655f 6861 7368 2868 696e 7429  uzzle_hash(hint)
-0000e7c0: 290a 2020 2020 2020 2020 2020 2020 666f  ).            fo
-0000e7d0: 7220 7065 6572 2069 6e20 7375 6273 6372  r peer in subscr
-0000e7e0: 6962 6564 5f70 6565 7273 3a0a 2020 2020  ibed_peers:.    
-0000e7f0: 2020 2020 2020 2020 2020 2020 6368 616e              chan
-0000e800: 6765 735f 666f 725f 7065 6572 2e73 6574  ges_for_peer.set
-0000e810: 6465 6661 756c 7428 7065 6572 2c20 7365  default(peer, se
-0000e820: 7428 2929 2e61 6464 2863 6f69 6e5f 7265  t()).add(coin_re
-0000e830: 636f 7264 2e63 6f69 6e5f 7374 6174 6529  cord.coin_state)
-0000e840: 0a0a 2020 2020 2020 2020 666f 7220 7065  ..        for pe
-0000e850: 6572 2c20 6368 616e 6765 7320 696e 2063  er, changes in c
-0000e860: 6861 6e67 6573 5f66 6f72 5f70 6565 722e  hanges_for_peer.
-0000e870: 6974 656d 7328 293a 0a20 2020 2020 2020  items():.       
-0000e880: 2020 2020 2063 6f6e 6e65 6374 696f 6e20       connection 
-0000e890: 3d20 7365 6c66 2e73 6572 7665 722e 616c  = self.server.al
-0000e8a0: 6c5f 636f 6e6e 6563 7469 6f6e 732e 6765  l_connections.ge
-0000e8b0: 7428 7065 6572 290a 2020 2020 2020 2020  t(peer).        
-0000e8c0: 2020 2020 6966 2063 6f6e 6e65 6374 696f      if connectio
-0000e8d0: 6e20 6973 206e 6f74 204e 6f6e 653a 0a20  n is not None:. 
-0000e8e0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000e8f0: 7461 7465 203d 2043 6f69 6e53 7461 7465  tate = CoinState
-0000e900: 5570 6461 7465 280a 2020 2020 2020 2020  Update(.        
-0000e910: 2020 2020 2020 2020 2020 2020 7761 6c6c              wall
-0000e920: 6574 5f75 7064 6174 652e 7065 616b 2e68  et_update.peak.h
-0000e930: 6569 6768 742c 0a20 2020 2020 2020 2020  eight,.         
-0000e940: 2020 2020 2020 2020 2020 2077 616c 6c65             walle
-0000e950: 745f 7570 6461 7465 2e66 6f72 6b5f 6865  t_update.fork_he
-0000e960: 6967 6874 2c0a 2020 2020 2020 2020 2020  ight,.          
-0000e970: 2020 2020 2020 2020 2020 7761 6c6c 6574            wallet
-0000e980: 5f75 7064 6174 652e 7065 616b 2e68 6561  _update.peak.hea
-0000e990: 6465 725f 6861 7368 2c0a 2020 2020 2020  der_hash,.      
-0000e9a0: 2020 2020 2020 2020 2020 2020 2020 6c69                li
-0000e9b0: 7374 2863 6861 6e67 6573 292c 0a20 2020  st(changes),.   
-0000e9c0: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-0000e9d0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0000e9e0: 7761 6974 2063 6f6e 6e65 6374 696f 6e2e  wait connection.
-0000e9f0: 7365 6e64 5f6d 6573 7361 6765 286d 616b  send_message(mak
-0000ea00: 655f 6d73 6728 5072 6f74 6f63 6f6c 4d65  e_msg(ProtocolMe
-0000ea10: 7373 6167 6554 7970 6573 2e63 6f69 6e5f  ssageTypes.coin_
-0000ea20: 7374 6174 655f 7570 6461 7465 2c20 7374  state_update, st
-0000ea30: 6174 6529 290a 0a20 2020 2020 2020 2023  ate))..        #
-0000ea40: 2054 656c 6c20 7761 6c6c 6574 7320 6162   Tell wallets ab
-0000ea50: 6f75 7420 7468 6520 6e65 7720 7065 616b  out the new peak
-0000ea60: 0a20 2020 2020 2020 206e 6577 5f70 6561  .        new_pea
-0000ea70: 6b5f 6d65 7373 6167 6520 3d20 6d61 6b65  k_message = make
-0000ea80: 5f6d 7367 280a 2020 2020 2020 2020 2020  _msg(.          
-0000ea90: 2020 5072 6f74 6f63 6f6c 4d65 7373 6167    ProtocolMessag
-0000eaa0: 6554 7970 6573 2e6e 6577 5f70 6561 6b5f  eTypes.new_peak_
-0000eab0: 7761 6c6c 6574 2c0a 2020 2020 2020 2020  wallet,.        
-0000eac0: 2020 2020 7761 6c6c 6574 5f70 726f 746f      wallet_proto
-0000ead0: 636f 6c2e 4e65 7750 6561 6b57 616c 6c65  col.NewPeakWalle
-0000eae0: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
-0000eaf0: 2020 2077 616c 6c65 745f 7570 6461 7465     wallet_update
-0000eb00: 2e70 6561 6b2e 6865 6164 6572 5f68 6173  .peak.header_has
-0000eb10: 682c 0a20 2020 2020 2020 2020 2020 2020  h,.             
-0000eb20: 2020 2077 616c 6c65 745f 7570 6461 7465     wallet_update
-0000eb30: 2e70 6561 6b2e 6865 6967 6874 2c0a 2020  .peak.height,.  
-0000eb40: 2020 2020 2020 2020 2020 2020 2020 7761                wa
-0000eb50: 6c6c 6574 5f75 7064 6174 652e 7065 616b  llet_update.peak
-0000eb60: 2e77 6569 6768 742c 0a20 2020 2020 2020  .weight,.       
-0000eb70: 2020 2020 2020 2020 2077 616c 6c65 745f           wallet_
-0000eb80: 7570 6461 7465 2e66 6f72 6b5f 6865 6967  update.fork_heig
-0000eb90: 6874 2c0a 2020 2020 2020 2020 2020 2020  ht,.            
-0000eba0: 292c 0a20 2020 2020 2020 2029 0a20 2020  ),.        ).   
-0000ebb0: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
-0000ebc0: 7365 7276 6572 2e73 656e 645f 746f 5f61  server.send_to_a
-0000ebd0: 6c6c 285b 6e65 775f 7065 616b 5f6d 6573  ll([new_peak_mes
-0000ebe0: 7361 6765 5d2c 204e 6f64 6554 7970 652e  sage], NodeType.
-0000ebf0: 5741 4c4c 4554 290a 0a20 2020 2061 7379  WALLET)..    asy
-0000ec00: 6e63 2064 6566 2061 6464 5f62 6c6f 636b  nc def add_block
-0000ec10: 5f62 6174 6368 280a 2020 2020 2020 2020  _batch(.        
-0000ec20: 7365 6c66 2c0a 2020 2020 2020 2020 616c  self,.        al
-0000ec30: 6c5f 626c 6f63 6b73 3a20 4c69 7374 5b46  l_blocks: List[F
-0000ec40: 756c 6c42 6c6f 636b 5d2c 0a20 2020 2020  ullBlock],.     
-0000ec50: 2020 2070 6565 725f 696e 666f 3a20 5065     peer_info: Pe
-0000ec60: 6572 496e 666f 2c0a 2020 2020 2020 2020  erInfo,.        
-0000ec70: 666f 726b 5f69 6e66 6f3a 204f 7074 696f  fork_info: Optio
-0000ec80: 6e61 6c5b 466f 726b 496e 666f 5d2c 0a20  nal[ForkInfo],. 
-0000ec90: 2020 2020 2020 2077 705f 7375 6d6d 6172         wp_summar
-0000eca0: 6965 733a 204f 7074 696f 6e61 6c5b 4c69  ies: Optional[Li
-0000ecb0: 7374 5b53 7562 4570 6f63 6853 756d 6d61  st[SubEpochSumma
-0000ecc0: 7279 5d5d 203d 204e 6f6e 652c 0a20 2020  ry]] = None,.   
-0000ecd0: 2029 202d 3e20 5475 706c 655b 626f 6f6c   ) -> Tuple[bool
-0000ece0: 2c20 4f70 7469 6f6e 616c 5b53 7461 7465  , Optional[State
-0000ecf0: 4368 616e 6765 5375 6d6d 6172 795d 2c20  ChangeSummary], 
-0000ed00: 4f70 7469 6f6e 616c 5b45 7272 5d5d 3a0a  Optional[Err]]:.
-0000ed10: 2020 2020 2020 2020 2320 5072 6563 6f6e          # Precon
-0000ed20: 6469 7469 6f6e 3a20 416c 6c20 626c 6f63  dition: All bloc
-0000ed30: 6b73 206d 7573 7420 6265 2063 6f6e 7469  ks must be conti
-0000ed40: 6775 6f75 7320 626c 6f63 6b73 2c20 696e  guous blocks, in
-0000ed50: 6465 7820 692b 3120 6d75 7374 2062 6520  dex i+1 must be 
-0000ed60: 7468 6520 7061 7265 6e74 206f 6620 696e  the parent of in
-0000ed70: 6465 7820 690a 2020 2020 2020 2020 2320  dex i.        # 
-0000ed80: 5265 7475 726e 7320 6120 626f 6f6c 2066  Returns a bool f
-0000ed90: 6f72 2073 7563 6365 7373 2c20 6173 2077  or success, as w
-0000eda0: 656c 6c20 6173 2061 2053 7461 7465 4368  ell as a StateCh
-0000edb0: 616e 6765 5375 6d6d 6172 7920 6966 2074  angeSummary if t
-0000edc0: 6865 2070 6561 6b20 7761 7320 6164 7661  he peak was adva
-0000edd0: 6e63 6564 0a0a 2020 2020 2020 2020 626c  nced..        bl
-0000ede0: 6f63 6b5f 6469 6374 3a20 4469 6374 5b62  ock_dict: Dict[b
-0000edf0: 7974 6573 3332 2c20 4675 6c6c 426c 6f63  ytes32, FullBloc
-0000ee00: 6b5d 203d 207b 7d0a 2020 2020 2020 2020  k] = {}.        
-0000ee10: 666f 7220 626c 6f63 6b20 696e 2061 6c6c  for block in all
-0000ee20: 5f62 6c6f 636b 733a 0a20 2020 2020 2020  _blocks:.       
-0000ee30: 2020 2020 2062 6c6f 636b 5f64 6963 745b       block_dict[
-0000ee40: 626c 6f63 6b2e 6865 6164 6572 5f68 6173  block.header_has
-0000ee50: 685d 203d 2062 6c6f 636b 0a0a 2020 2020  h] = block..    
-0000ee60: 2020 2020 626c 6f63 6b73 5f74 6f5f 7661      blocks_to_va
-0000ee70: 6c69 6461 7465 3a20 4c69 7374 5b46 756c  lidate: List[Ful
-0000ee80: 6c42 6c6f 636b 5d20 3d20 5b5d 0a20 2020  lBlock] = [].   
-0000ee90: 2020 2020 2066 6f72 2069 2c20 626c 6f63       for i, bloc
-0000eea0: 6b20 696e 2065 6e75 6d65 7261 7465 2861  k in enumerate(a
-0000eeb0: 6c6c 5f62 6c6f 636b 7329 3a0a 2020 2020  ll_blocks):.    
-0000eec0: 2020 2020 2020 2020 6865 6164 6572 5f68          header_h
-0000eed0: 6173 6820 3d20 626c 6f63 6b2e 6865 6164  ash = block.head
-0000eee0: 6572 5f68 6173 680a 2020 2020 2020 2020  er_hash.        
-0000eef0: 2020 2020 6966 206e 6f74 2061 7761 6974      if not await
-0000ef00: 2073 656c 662e 626c 6f63 6b63 6861 696e   self.blockchain
-0000ef10: 2e63 6f6e 7461 696e 735f 626c 6f63 6b5f  .contains_block_
-0000ef20: 6672 6f6d 5f64 6228 6865 6164 6572 5f68  from_db(header_h
-0000ef30: 6173 6829 3a0a 2020 2020 2020 2020 2020  ash):.          
-0000ef40: 2020 2020 2020 626c 6f63 6b73 5f74 6f5f        blocks_to_
-0000ef50: 7661 6c69 6461 7465 203d 2061 6c6c 5f62  validate = all_b
-0000ef60: 6c6f 636b 735b 693a 5d0a 2020 2020 2020  locks[i:].      
-0000ef70: 2020 2020 2020 2020 2020 6272 6561 6b0a            break.
-0000ef80: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000ef90: 666f 726b 5f69 6e66 6f20 6973 204e 6f6e  fork_info is Non
-0000efa0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0000efb0: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
-0000efc0: 2020 2020 2020 2020 2320 7468 6520 6265          # the be
-0000efd0: 6c6f 7720 7365 6374 696f 6e20 7570 6461  low section upda
-0000efe0: 7465 7320 7468 6520 666f 726b 5f69 6e66  tes the fork_inf
-0000eff0: 6f20 6f62 6a65 6374 2c20 6966 0a20 2020  o object, if.   
-0000f000: 2020 2020 2020 2020 2023 2074 6865 7265           # there
-0000f010: 2069 7320 6f6e 652e 0a0a 2020 2020 2020   is one...      
-0000f020: 2020 2020 2020 2320 544f 444f 3a20 6974        # TODO: it
-0000f030: 2073 6565 6d73 2075 6e6e 6563 6573 7361   seems unnecessa
-0000f040: 7279 2074 6f20 7265 7175 6573 7420 6f76  ry to request ov
-0000f050: 6572 6c61 7070 696e 6720 626c 6f63 6b20  erlapping block 
-0000f060: 7261 6e67 6573 0a20 2020 2020 2020 2020  ranges.         
-0000f070: 2020 2023 2077 6865 6e20 7379 6e63 696e     # when syncin
-0000f080: 670a 2020 2020 2020 2020 2020 2020 6966  g.            if
-0000f090: 2062 6c6f 636b 2e68 6569 6768 7420 3c3d   block.height <=
-0000f0a0: 2066 6f72 6b5f 696e 666f 2e70 6561 6b5f   fork_info.peak_
-0000f0b0: 6865 6967 6874 3a0a 2020 2020 2020 2020  height:.        
-0000f0c0: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
-0000f0d0: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0000f0e0: 7765 2068 6176 6520 616c 7265 6164 7920  we have already 
-0000f0f0: 7661 6c69 6461 7465 6420 7468 6973 2062  validated this b
-0000f100: 6c6f 636b 206f 6e63 652c 206e 6f20 6e65  lock once, no ne
-0000f110: 6564 2074 6f20 646f 2069 7420 6167 6169  ed to do it agai
-0000f120: 6e2e 0a20 2020 2020 2020 2020 2020 2023  n..            #
-0000f130: 2068 6f77 6576 6572 2c20 6966 2074 6869   however, if thi
-0000f140: 7320 626c 6f63 6b20 6973 206e 6f74 2070  s block is not p
-0000f150: 6172 7420 6f66 2074 6865 206d 6169 6e20  art of the main 
-0000f160: 6368 6169 6e2c 2077 6520 6e65 6564 2074  chain, we need t
-0000f170: 6f0a 2020 2020 2020 2020 2020 2020 2320  o.            # 
-0000f180: 7570 6461 7465 2074 6865 2066 6f72 6b20  update the fork 
-0000f190: 636f 6e74 6578 7420 7769 7468 2069 7473  context with its
-0000f1a0: 2061 6464 6974 696f 6e73 2061 6e64 2072   additions and r
-0000f1b0: 656d 6f76 616c 730a 2020 2020 2020 2020  emovals.        
-0000f1c0: 2020 2020 6966 2073 656c 662e 626c 6f63      if self.bloc
-0000f1d0: 6b63 6861 696e 2e68 6569 6768 745f 746f  kchain.height_to
-0000f1e0: 5f68 6173 6828 626c 6f63 6b2e 6865 6967  _hash(block.heig
-0000f1f0: 6874 2920 3d3d 2068 6561 6465 725f 6861  ht) == header_ha
-0000f200: 7368 3a0a 2020 2020 2020 2020 2020 2020  sh:.            
-0000f210: 2020 2020 2320 7765 2772 6520 6f6e 2074      # we're on t
-0000f220: 6865 206d 6169 6e20 6368 6169 6e2c 206a  he main chain, j
-0000f230: 7573 7420 6661 7374 2d66 6f72 7761 7264  ust fast-forward
-0000f240: 2074 6865 2066 6f72 6b20 6865 6967 6874   the fork height
-0000f250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000f260: 2066 6f72 6b5f 696e 666f 2e72 6573 6574   fork_info.reset
-0000f270: 2862 6c6f 636b 2e68 6569 6768 742c 2068  (block.height, h
-0000f280: 6561 6465 725f 6861 7368 290a 2020 2020  eader_hash).    
-0000f290: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0000f2a0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000f2b0: 5765 2068 6176 6520 616c 7265 6164 7920  We have already 
-0000f2c0: 7661 6c69 6461 7465 6420 7468 6520 626c  validated the bl
-0000f2d0: 6f63 6b2c 2062 7574 2069 6620 6974 2773  ock, but if it's
-0000f2e0: 206e 6f74 2070 6172 7420 6f66 2074 6865   not part of the
-0000f2f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000f300: 2023 206d 6169 6e20 6368 6169 6e2c 2077   # main chain, w
-0000f310: 6520 7374 696c 6c20 6e65 6564 2074 6f20  e still need to 
-0000f320: 7265 2d72 756e 2069 7420 746f 2075 7064  re-run it to upd
-0000f330: 6174 6520 7468 6520 6164 6469 7469 6f6e  ate the addition
-0000f340: 7320 616e 640a 2020 2020 2020 2020 2020  s and.          
-0000f350: 2020 2020 2020 2320 7265 6d6f 7661 6c73        # removals
-0000f360: 2069 6e20 666f 726b 5f69 6e66 6f2e 0a20   in fork_info.. 
-0000f370: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0000f380: 7761 6974 2073 656c 662e 626c 6f63 6b63  wait self.blockc
-0000f390: 6861 696e 2e61 6476 616e 6365 5f66 6f72  hain.advance_for
-0000f3a0: 6b5f 696e 666f 2862 6c6f 636b 2c20 666f  k_info(block, fo
-0000f3b0: 726b 5f69 6e66 6f2c 2062 6c6f 636b 5f64  rk_info, block_d
-0000f3c0: 6963 7429 0a20 2020 2020 2020 2020 2020  ict).           
-0000f3d0: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
-0000f3e0: 626c 6f63 6b63 6861 696e 2e72 756e 5f73  blockchain.run_s
-0000f3f0: 696e 676c 655f 626c 6f63 6b28 626c 6f63  ingle_block(bloc
-0000f400: 6b2c 2066 6f72 6b5f 696e 666f 2c20 626c  k, fork_info, bl
-0000f410: 6f63 6b5f 6469 6374 290a 0a20 2020 2020  ock_dict)..     
-0000f420: 2020 2069 6620 6c65 6e28 626c 6f63 6b73     if len(blocks
-0000f430: 5f74 6f5f 7661 6c69 6461 7465 2920 3d3d  _to_validate) ==
-0000f440: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-0000f450: 7265 7475 726e 2054 7275 652c 204e 6f6e  return True, Non
-0000f460: 652c 204e 6f6e 650a 0a20 2020 2020 2020  e, None..       
-0000f470: 2023 2056 616c 6964 6174 6573 2073 6967   # Validates sig
-0000f480: 6e61 7475 7265 7320 696e 206d 756c 7469  natures in multi
-0000f490: 7072 6f63 6573 7369 6e67 2073 696e 6365  processing since
-0000f4a0: 2074 6865 7920 7461 6b65 2061 2077 6869   they take a whi
-0000f4b0: 6c65 2c20 616e 6420 7765 2064 6f6e 2774  le, and we don't
-0000f4c0: 2068 6176 6520 6361 6368 6564 2074 7261   have cached tra
-0000f4d0: 6e73 6163 7469 6f6e 730a 2020 2020 2020  nsactions.      
-0000f4e0: 2020 2320 666f 7220 7468 6573 6520 626c    # for these bl
-0000f4f0: 6f63 6b73 2028 756e 6c69 6b65 2064 7572  ocks (unlike dur
-0000f500: 696e 6720 6e6f 726d 616c 206f 7065 7261  ing normal opera
-0000f510: 7469 6f6e 2077 6865 7265 2077 6520 7661  tion where we va
-0000f520: 6c69 6461 7465 206f 6e65 2061 7420 6120  lidate one at a 
-0000f530: 7469 6d65 290a 2020 2020 2020 2020 7072  time).        pr
-0000f540: 655f 7661 6c69 6461 7465 5f73 7461 7274  e_validate_start
-0000f550: 203d 2074 696d 652e 6d6f 6e6f 746f 6e69   = time.monotoni
-0000f560: 6328 290a 2020 2020 2020 2020 7072 655f  c().        pre_
-0000f570: 7661 6c69 6461 7469 6f6e 5f72 6573 756c  validation_resul
-0000f580: 7473 3a20 4c69 7374 5b50 7265 5661 6c69  ts: List[PreVali
-0000f590: 6461 7469 6f6e 5265 7375 6c74 5d20 3d20  dationResult] = 
-0000f5a0: 6177 6169 7420 7365 6c66 2e62 6c6f 636b  await self.block
-0000f5b0: 6368 6169 6e2e 7072 655f 7661 6c69 6461  chain.pre_valida
-0000f5c0: 7465 5f62 6c6f 636b 735f 6d75 6c74 6970  te_blocks_multip
-0000f5d0: 726f 6365 7373 696e 6728 0a20 2020 2020  rocessing(.     
-0000f5e0: 2020 2020 2020 2062 6c6f 636b 735f 746f         blocks_to
-0000f5f0: 5f76 616c 6964 6174 652c 207b 7d2c 2077  _validate, {}, w
-0000f600: 705f 7375 6d6d 6172 6965 733d 7770 5f73  p_summaries=wp_s
-0000f610: 756d 6d61 7269 6573 2c20 7661 6c69 6461  ummaries, valida
-0000f620: 7465 5f73 6967 6e61 7475 7265 733d 5472  te_signatures=Tr
-0000f630: 7565 0a20 2020 2020 2020 2029 0a20 2020  ue.        ).   
-0000f640: 2020 2020 2070 7265 5f76 616c 6964 6174       pre_validat
-0000f650: 655f 656e 6420 3d20 7469 6d65 2e6d 6f6e  e_end = time.mon
-0000f660: 6f74 6f6e 6963 2829 0a20 2020 2020 2020  otonic().       
-0000f670: 2070 7265 5f76 616c 6964 6174 655f 7469   pre_validate_ti
-0000f680: 6d65 203d 2070 7265 5f76 616c 6964 6174  me = pre_validat
-0000f690: 655f 656e 6420 2d20 7072 655f 7661 6c69  e_end - pre_vali
-0000f6a0: 6461 7465 5f73 7461 7274 0a0a 2020 2020  date_start..    
-0000f6b0: 2020 2020 7365 6c66 2e6c 6f67 2e6c 6f67      self.log.log
-0000f6c0: 280a 2020 2020 2020 2020 2020 2020 6c6f  (.            lo
-0000f6d0: 6767 696e 672e 5741 524e 494e 4720 6966  gging.WARNING if
-0000f6e0: 2070 7265 5f76 616c 6964 6174 655f 7469   pre_validate_ti
-0000f6f0: 6d65 203e 2031 3020 656c 7365 206c 6f67  me > 10 else log
-0000f700: 6769 6e67 2e44 4542 5547 2c0a 2020 2020  ging.DEBUG,.    
-0000f710: 2020 2020 2020 2020 6622 426c 6f63 6b20          f"Block 
-0000f720: 7072 652d 7661 6c69 6461 7469 6f6e 3a20  pre-validation: 
-0000f730: 7b70 7265 5f76 616c 6964 6174 655f 656e  {pre_validate_en
-0000f740: 6420 2d20 7072 655f 7661 6c69 6461 7465  d - pre_validate
-0000f750: 5f73 7461 7274 3a30 2e32 667d 7320 220a  _start:0.2f}s ".
-0000f760: 2020 2020 2020 2020 2020 2020 6622 434c              f"CL
-0000f770: 564d 3a20 7b73 756d 285b 7076 722e 7469  VM: {sum([pvr.ti
-0000f780: 6d69 6e67 2f31 3030 302e 3020 666f 7220  ming/1000.0 for 
-0000f790: 7076 7220 696e 2070 7265 5f76 616c 6964  pvr in pre_valid
-0000f7a0: 6174 696f 6e5f 7265 7375 6c74 735d 293a  ation_results]):
-0000f7b0: 302e 3266 7d73 2022 0a20 2020 2020 2020  0.2f}s ".       
-0000f7c0: 2020 2020 2066 2228 7b6c 656e 2862 6c6f       f"({len(blo
-0000f7d0: 636b 735f 746f 5f76 616c 6964 6174 6529  cks_to_validate)
-0000f7e0: 7d20 626c 6f63 6b73 2c20 7374 6172 7420  } blocks, start 
-0000f7f0: 6865 6967 6874 3a20 7b62 6c6f 636b 735f  height: {blocks_
-0000f800: 746f 5f76 616c 6964 6174 655b 305d 2e68  to_validate[0].h
-0000f810: 6569 6768 747d 2922 2c0a 2020 2020 2020  eight})",.      
-0000f820: 2020 290a 2020 2020 2020 2020 666f 7220    ).        for 
-0000f830: 692c 2062 6c6f 636b 2069 6e20 656e 756d  i, block in enum
-0000f840: 6572 6174 6528 626c 6f63 6b73 5f74 6f5f  erate(blocks_to_
-0000f850: 7661 6c69 6461 7465 293a 0a20 2020 2020  validate):.     
-0000f860: 2020 2020 2020 2069 6620 7072 655f 7661         if pre_va
-0000f870: 6c69 6461 7469 6f6e 5f72 6573 756c 7473  lidation_results
-0000f880: 5b69 5d2e 6572 726f 7220 6973 206e 6f74  [i].error is not
-0000f890: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0000f8a0: 2020 2020 2020 2073 656c 662e 6c6f 672e         self.log.
-0000f8b0: 6572 726f 7228 6622 496e 7661 6c69 6420  error(f"Invalid 
-0000f8c0: 626c 6f63 6b20 6672 6f6d 2070 6565 723a  block from peer:
-0000f8d0: 207b 7065 6572 5f69 6e66 6f7d 207b 4572   {peer_info} {Er
-0000f8e0: 7228 7072 655f 7661 6c69 6461 7469 6f6e  r(pre_validation
-0000f8f0: 5f72 6573 756c 7473 5b69 5d2e 6572 726f  _results[i].erro
-0000f900: 7229 7d22 290a 2020 2020 2020 2020 2020  r)}").          
-0000f910: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
-0000f920: 7365 2c20 4e6f 6e65 2c20 4572 7228 7072  se, None, Err(pr
-0000f930: 655f 7661 6c69 6461 7469 6f6e 5f72 6573  e_validation_res
-0000f940: 756c 7473 5b69 5d2e 6572 726f 7229 0a0a  ults[i].error)..
-0000f950: 2020 2020 2020 2020 6167 675f 7374 6174          agg_stat
-0000f960: 655f 6368 616e 6765 5f73 756d 6d61 7279  e_change_summary
-0000f970: 3a20 4f70 7469 6f6e 616c 5b53 7461 7465  : Optional[State
-0000f980: 4368 616e 6765 5375 6d6d 6172 795d 203d  ChangeSummary] =
-0000f990: 204e 6f6e 650a 0a20 2020 2020 2020 2066   None..        f
-0000f9a0: 6f72 2069 2c20 626c 6f63 6b20 696e 2065  or i, block in e
-0000f9b0: 6e75 6d65 7261 7465 2862 6c6f 636b 735f  numerate(blocks_
-0000f9c0: 746f 5f76 616c 6964 6174 6529 3a0a 2020  to_validate):.  
-0000f9d0: 2020 2020 2020 2020 2020 6173 7365 7274            assert
-0000f9e0: 2070 7265 5f76 616c 6964 6174 696f 6e5f   pre_validation_
-0000f9f0: 7265 7375 6c74 735b 695d 2e72 6571 7569  results[i].requi
-0000fa00: 7265 645f 6974 6572 7320 6973 206e 6f74  red_iters is not
-0000fa10: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-0000fa20: 2020 7374 6174 655f 6368 616e 6765 5f73    state_change_s
-0000fa30: 756d 6d61 7279 3a20 4f70 7469 6f6e 616c  ummary: Optional
-0000fa40: 5b53 7461 7465 4368 616e 6765 5375 6d6d  [StateChangeSumm
-0000fa50: 6172 795d 0a20 2020 2020 2020 2020 2020  ary].           
-0000fa60: 2072 6573 756c 742c 2065 7272 6f72 2c20   result, error, 
-0000fa70: 7374 6174 655f 6368 616e 6765 5f73 756d  state_change_sum
-0000fa80: 6d61 7279 203d 2061 7761 6974 2073 656c  mary = await sel
-0000fa90: 662e 626c 6f63 6b63 6861 696e 2e61 6464  f.blockchain.add
-0000faa0: 5f62 6c6f 636b 280a 2020 2020 2020 2020  _block(.        
-0000fab0: 2020 2020 2020 2020 626c 6f63 6b2c 2070          block, p
-0000fac0: 7265 5f76 616c 6964 6174 696f 6e5f 7265  re_validation_re
-0000fad0: 7375 6c74 735b 695d 2c20 666f 726b 5f69  sults[i], fork_i
-0000fae0: 6e66 6f0a 2020 2020 2020 2020 2020 2020  nfo.            
-0000faf0: 290a 0a20 2020 2020 2020 2020 2020 2069  )..            i
-0000fb00: 6620 7265 7375 6c74 203d 3d20 4164 6442  f result == AddB
-0000fb10: 6c6f 636b 5265 7375 6c74 2e4e 4557 5f50  lockResult.NEW_P
-0000fb20: 4541 4b3a 0a20 2020 2020 2020 2020 2020  EAK:.           
-0000fb30: 2020 2020 2023 2073 696e 6365 2074 6869       # since thi
-0000fb40: 7320 626c 6f63 6b20 6a75 7374 2061 6464  s block just add
-0000fb50: 6564 2061 206e 6577 2070 6561 6b2c 2077  ed a new peak, w
-0000fb60: 6527 7665 2064 6f6e 2774 206e 6565 6420  e've don't need 
-0000fb70: 616e 790a 2020 2020 2020 2020 2020 2020  any.            
-0000fb80: 2020 2020 2320 666f 726b 2068 6973 746f      # fork histo
-0000fb90: 7279 2066 726f 6d20 666f 726b 5f69 6e66  ry from fork_inf
-0000fba0: 6f20 616e 796d 6f72 650a 2020 2020 2020  o anymore.      
-0000fbb0: 2020 2020 2020 2020 2020 6966 2066 6f72            if for
-0000fbc0: 6b5f 696e 666f 2069 7320 6e6f 7420 4e6f  k_info is not No
-0000fbd0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0000fbe0: 2020 2020 2020 2020 666f 726b 5f69 6e66          fork_inf
-0000fbf0: 6f2e 7265 7365 7428 626c 6f63 6b2e 6865  o.reset(block.he
-0000fc00: 6967 6874 2c20 626c 6f63 6b2e 6865 6164  ight, block.head
-0000fc10: 6572 5f68 6173 6829 0a20 2020 2020 2020  er_hash).       
-0000fc20: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
-0000fc30: 7374 6174 655f 6368 616e 6765 5f73 756d  state_change_sum
-0000fc40: 6d61 7279 2069 7320 6e6f 7420 4e6f 6e65  mary is not None
-0000fc50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000fc60: 2023 2053 696e 6365 2061 6c6c 2062 6c6f   # Since all blo
-0000fc70: 636b 7320 6172 6520 636f 6e74 6967 756f  cks are contiguo
-0000fc80: 7573 2c20 7765 2063 616e 2073 696d 706c  us, we can simpl
-0000fc90: 7920 6170 7065 6e64 2074 6865 2072 6f6c  y append the rol
-0000fca0: 6c62 6163 6b20 6368 616e 6765 7320 616e  lback changes an
-0000fcb0: 6420 6e70 6320 7265 7375 6c74 730a 2020  d npc results.  
-0000fcc0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0000fcd0: 2061 6767 5f73 7461 7465 5f63 6861 6e67   agg_state_chang
-0000fce0: 655f 7375 6d6d 6172 7920 6973 204e 6f6e  e_summary is Non
-0000fcf0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0000fd00: 2020 2020 2020 2061 6767 5f73 7461 7465         agg_state
-0000fd10: 5f63 6861 6e67 655f 7375 6d6d 6172 7920  _change_summary 
-0000fd20: 3d20 7374 6174 655f 6368 616e 6765 5f73  = state_change_s
-0000fd30: 756d 6d61 7279 0a20 2020 2020 2020 2020  ummary.         
-0000fd40: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0000fd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fd60: 2023 204b 6565 7073 2074 6865 206f 6c64   # Keeps the old
-0000fd70: 2c20 6f72 6967 696e 616c 2066 6f72 6b5f  , original fork_
-0000fd80: 6865 6967 6874 2c20 7369 6e63 6520 7468  height, since th
-0000fd90: 6520 6e65 7874 2062 6c6f 636b 7320 7769  e next blocks wi
-0000fda0: 6c6c 2068 6176 6520 666f 726b 2068 6569  ll have fork hei
-0000fdb0: 6768 7420 682d 310a 2020 2020 2020 2020  ght h-1.        
-0000fdc0: 2020 2020 2020 2020 2020 2020 2320 4772              # Gr
-0000fdd0: 6f75 7073 2075 7020 616c 6c20 7374 6174  oups up all stat
-0000fde0: 6520 6368 616e 6765 7320 696e 746f 206f  e changes into o
-0000fdf0: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
-0000fe00: 2020 2020 2020 2061 6767 5f73 7461 7465         agg_state
-0000fe10: 5f63 6861 6e67 655f 7375 6d6d 6172 7920  _change_summary 
-0000fe20: 3d20 5374 6174 6543 6861 6e67 6553 756d  = StateChangeSum
-0000fe30: 6d61 7279 280a 2020 2020 2020 2020 2020  mary(.          
-0000fe40: 2020 2020 2020 2020 2020 2020 2020 7374                st
-0000fe50: 6174 655f 6368 616e 6765 5f73 756d 6d61  ate_change_summa
-0000fe60: 7279 2e70 6561 6b2c 0a20 2020 2020 2020  ry.peak,.       
-0000fe70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fe80: 2061 6767 5f73 7461 7465 5f63 6861 6e67   agg_state_chang
-0000fe90: 655f 7375 6d6d 6172 792e 666f 726b 5f68  e_summary.fork_h
-0000fea0: 6569 6768 742c 0a20 2020 2020 2020 2020  eight,.         
-0000feb0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0000fec0: 6767 5f73 7461 7465 5f63 6861 6e67 655f  gg_state_change_
-0000fed0: 7375 6d6d 6172 792e 726f 6c6c 6564 5f62  summary.rolled_b
-0000fee0: 6163 6b5f 7265 636f 7264 7320 2b20 7374  ack_records + st
-0000fef0: 6174 655f 6368 616e 6765 5f73 756d 6d61  ate_change_summa
-0000ff00: 7279 2e72 6f6c 6c65 645f 6261 636b 5f72  ry.rolled_back_r
-0000ff10: 6563 6f72 6473 2c0a 2020 2020 2020 2020  ecords,.        
-0000ff20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ff30: 6167 675f 7374 6174 655f 6368 616e 6765  agg_state_change
-0000ff40: 5f73 756d 6d61 7279 2e72 656d 6f76 616c  _summary.removal
-0000ff50: 7320 2b20 7374 6174 655f 6368 616e 6765  s + state_change
-0000ff60: 5f73 756d 6d61 7279 2e72 656d 6f76 616c  _summary.removal
-0000ff70: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
-0000ff80: 2020 2020 2020 2020 2020 2061 6767 5f73             agg_s
-0000ff90: 7461 7465 5f63 6861 6e67 655f 7375 6d6d  tate_change_summ
-0000ffa0: 6172 792e 6164 6469 7469 6f6e 7320 2b20  ary.additions + 
-0000ffb0: 7374 6174 655f 6368 616e 6765 5f73 756d  state_change_sum
-0000ffc0: 6d61 7279 2e61 6464 6974 696f 6e73 2c0a  mary.additions,.
-0000ffd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ffe0: 2020 2020 2020 2020 6167 675f 7374 6174          agg_stat
-0000fff0: 655f 6368 616e 6765 5f73 756d 6d61 7279  e_change_summary
-00010000: 2e6e 6577 5f72 6577 6172 6473 202b 2073  .new_rewards + s
-00010010: 7461 7465 5f63 6861 6e67 655f 7375 6d6d  tate_change_summ
-00010020: 6172 792e 6e65 775f 7265 7761 7264 732c  ary.new_rewards,
-00010030: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010040: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-00010050: 2020 2065 6c69 6620 7265 7375 6c74 203d     elif result =
-00010060: 3d20 4164 6442 6c6f 636b 5265 7375 6c74  = AddBlockResult
-00010070: 2e49 4e56 414c 4944 5f42 4c4f 434b 206f  .INVALID_BLOCK o
-00010080: 7220 7265 7375 6c74 203d 3d20 4164 6442  r result == AddB
-00010090: 6c6f 636b 5265 7375 6c74 2e44 4953 434f  lockResult.DISCO
-000100a0: 4e4e 4543 5445 445f 424c 4f43 4b3a 0a20  NNECTED_BLOCK:. 
-000100b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000100c0: 6620 6572 726f 7220 6973 206e 6f74 204e  f error is not N
-000100d0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-000100e0: 2020 2020 2020 2020 2073 656c 662e 6c6f           self.lo
-000100f0: 672e 6572 726f 7228 6622 4572 726f 723a  g.error(f"Error:
-00010100: 207b 6572 726f 727d 2c20 496e 7661 6c69   {error}, Invali
-00010110: 6420 626c 6f63 6b20 6672 6f6d 2070 6565  d block from pee
-00010120: 723a 207b 7065 6572 5f69 6e66 6f7d 2022  r: {peer_info} "
-00010130: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00010140: 2020 7265 7475 726e 2046 616c 7365 2c20    return False, 
-00010150: 6167 675f 7374 6174 655f 6368 616e 6765  agg_state_change
-00010160: 5f73 756d 6d61 7279 2c20 6572 726f 720a  _summary, error.
-00010170: 2020 2020 2020 2020 2020 2020 626c 6f63              bloc
-00010180: 6b5f 7265 636f 7264 203d 2061 7761 6974  k_record = await
-00010190: 2073 656c 662e 626c 6f63 6b63 6861 696e   self.blockchain
-000101a0: 2e67 6574 5f62 6c6f 636b 5f72 6563 6f72  .get_block_recor
-000101b0: 645f 6672 6f6d 5f64 6228 626c 6f63 6b2e  d_from_db(block.
-000101c0: 6865 6164 6572 5f68 6173 6829 0a20 2020  header_hash).   
-000101d0: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
-000101e0: 626c 6f63 6b5f 7265 636f 7264 2069 7320  block_record is 
-000101f0: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
-00010200: 2020 2020 2069 6620 626c 6f63 6b5f 7265       if block_re
-00010210: 636f 7264 2e73 7562 5f65 706f 6368 5f73  cord.sub_epoch_s
-00010220: 756d 6d61 7279 5f69 6e63 6c75 6465 6420  ummary_included 
-00010230: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00010240: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00010250: 7365 6c66 2e77 6569 6768 745f 7072 6f6f  self.weight_proo
-00010260: 665f 6861 6e64 6c65 7220 6973 206e 6f74  f_handler is not
-00010270: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00010280: 2020 2020 2020 2020 2020 2061 7761 6974             await
-00010290: 2073 656c 662e 7765 6967 6874 5f70 726f   self.weight_pro
-000102a0: 6f66 5f68 616e 646c 6572 2e63 7265 6174  of_handler.creat
-000102b0: 655f 7072 6576 5f73 7562 5f65 706f 6368  e_prev_sub_epoch
-000102c0: 5f73 6567 6d65 6e74 7328 290a 2020 2020  _segments().    
-000102d0: 2020 2020 6966 2061 6767 5f73 7461 7465      if agg_state
-000102e0: 5f63 6861 6e67 655f 7375 6d6d 6172 7920  _change_summary 
-000102f0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00010300: 2020 2020 2020 2020 2073 656c 662e 5f73           self._s
-00010310: 7461 7465 5f63 6861 6e67 6564 2822 6e65  tate_changed("ne
-00010320: 775f 7065 616b 2229 0a20 2020 2020 2020  w_peak").       
-00010330: 2020 2020 2073 656c 662e 6c6f 672e 6465       self.log.de
-00010340: 6275 6728 0a20 2020 2020 2020 2020 2020  bug(.           
-00010350: 2020 2020 2066 2254 6f74 616c 2074 696d       f"Total tim
-00010360: 6520 666f 7220 7b6c 656e 2862 6c6f 636b  e for {len(block
-00010370: 735f 746f 5f76 616c 6964 6174 6529 7d20  s_to_validate)} 
-00010380: 626c 6f63 6b73 3a20 7b74 696d 652e 6d6f  blocks: {time.mo
-00010390: 6e6f 746f 6e69 6328 2920 2d20 7072 655f  notonic() - pre_
-000103a0: 7661 6c69 6461 7465 5f73 7461 7274 7d2c  validate_start},
-000103b0: 2022 0a20 2020 2020 2020 2020 2020 2020   ".             
-000103c0: 2020 2066 2261 6476 616e 6365 643a 2054     f"advanced: T
-000103d0: 7275 6522 0a20 2020 2020 2020 2020 2020  rue".           
-000103e0: 2029 0a20 2020 2020 2020 2072 6574 7572   ).        retur
-000103f0: 6e20 5472 7565 2c20 6167 675f 7374 6174  n True, agg_stat
-00010400: 655f 6368 616e 6765 5f73 756d 6d61 7279  e_change_summary
-00010410: 2c20 4e6f 6e65 0a0a 2020 2020 6173 796e  , None..    asyn
-00010420: 6320 6465 6620 5f66 696e 6973 685f 7379  c def _finish_sy
-00010430: 6e63 2873 656c 6629 202d 3e20 4e6f 6e65  nc(self) -> None
-00010440: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00010450: 2020 2020 2020 4669 6e61 6c69 7a65 2073        Finalize s
-00010460: 796e 6320 6279 2073 6574 7469 6e67 2073  ync by setting s
-00010470: 796e 6320 6d6f 6465 2074 6f20 4661 6c73  ync mode to Fals
-00010480: 652c 2063 6c65 6172 696e 6720 616c 6c20  e, clearing all 
-00010490: 7379 6e63 2069 6e66 6f72 6d61 7469 6f6e  sync information
-000104a0: 2c20 616e 6420 6164 6469 6e67 2061 6e79  , and adding any
-000104b0: 2066 696e 616c 0a20 2020 2020 2020 2062   final.        b
-000104c0: 6c6f 636b 7320 7468 6174 2077 6520 6861  locks that we ha
-000104d0: 7665 2066 696e 616c 697a 6564 2072 6563  ve finalized rec
-000104e0: 656e 746c 792e 0a20 2020 2020 2020 2022  ently..        "
-000104f0: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
-00010500: 6c6f 672e 696e 666f 2822 6c6f 6e67 2073  log.info("long s
-00010510: 796e 6320 646f 6e65 2229 0a20 2020 2020  ync done").     
-00010520: 2020 2073 656c 662e 7379 6e63 5f73 746f     self.sync_sto
-00010530: 7265 2e73 6574 5f6c 6f6e 675f 7379 6e63  re.set_long_sync
-00010540: 2846 616c 7365 290a 2020 2020 2020 2020  (False).        
-00010550: 7365 6c66 2e73 796e 635f 7374 6f72 652e  self.sync_store.
-00010560: 7365 745f 7379 6e63 5f6d 6f64 6528 4661  set_sync_mode(Fa
-00010570: 6c73 6529 0a20 2020 2020 2020 2073 656c  lse).        sel
-00010580: 662e 5f73 7461 7465 5f63 6861 6e67 6564  f._state_changed
-00010590: 2822 7379 6e63 5f6d 6f64 6522 290a 2020  ("sync_mode").  
-000105a0: 2020 2020 2020 6966 2073 656c 662e 5f73        if self._s
-000105b0: 6572 7665 7220 6973 204e 6f6e 653a 0a20  erver is None:. 
-000105c0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000105d0: 6e20 4e6f 6e65 0a0a 2020 2020 2020 2020  n None..        
-000105e0: 6173 796e 6320 7769 7468 2073 656c 662e  async with self.
-000105f0: 626c 6f63 6b63 6861 696e 2e70 7269 6f72  blockchain.prior
-00010600: 6974 795f 6d75 7465 782e 6163 7175 6972  ity_mutex.acquir
-00010610: 6528 7072 696f 7269 7479 3d42 6c6f 636b  e(priority=Block
-00010620: 6368 6169 6e4d 7574 6578 5072 696f 7269  chainMutexPriori
-00010630: 7479 2e68 6967 6829 3a0a 2020 2020 2020  ty.high):.      
-00010640: 2020 2020 2020 7065 616b 3a20 4f70 7469        peak: Opti
-00010650: 6f6e 616c 5b42 6c6f 636b 5265 636f 7264  onal[BlockRecord
-00010660: 5d20 3d20 7365 6c66 2e62 6c6f 636b 6368  ] = self.blockch
-00010670: 6169 6e2e 6765 745f 7065 616b 2829 0a20  ain.get_peak(). 
-00010680: 2020 2020 2020 2020 2020 2070 6561 6b5f             peak_
-00010690: 6662 3a20 4f70 7469 6f6e 616c 5b46 756c  fb: Optional[Ful
-000106a0: 6c42 6c6f 636b 5d20 3d20 6177 6169 7420  lBlock] = await 
-000106b0: 7365 6c66 2e62 6c6f 636b 6368 6169 6e2e  self.blockchain.
-000106c0: 6765 745f 6675 6c6c 5f70 6561 6b28 290a  get_full_peak().
-000106d0: 2020 2020 2020 2020 2020 2020 6966 2070              if p
-000106e0: 6561 6b5f 6662 2069 7320 6e6f 7420 4e6f  eak_fb is not No
-000106f0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00010700: 2020 2020 6173 7365 7274 2070 6561 6b20      assert peak 
-00010710: 6973 206e 6f74 204e 6f6e 650a 2020 2020  is not None.    
-00010720: 2020 2020 2020 2020 2020 2020 7374 6174              stat
-00010730: 655f 6368 616e 6765 5f73 756d 6d61 7279  e_change_summary
-00010740: 203d 2053 7461 7465 4368 616e 6765 5375   = StateChangeSu
-00010750: 6d6d 6172 7928 7065 616b 2c20 7569 6e74  mmary(peak, uint
-00010760: 3332 286d 6178 2870 6561 6b2e 6865 6967  32(max(peak.heig
-00010770: 6874 202d 2031 2c20 3029 292c 205b 5d2c  ht - 1, 0)), [],
-00010780: 205b 5d2c 205b 5d2c 205b 5d29 0a20 2020   [], [], []).   
-00010790: 2020 2020 2020 2020 2020 2020 2070 7070               ppp
-000107a0: 5f72 6573 756c 743a 2050 6561 6b50 6f73  _result: PeakPos
-000107b0: 7450 726f 6365 7373 696e 6752 6573 756c  tProcessingResul
-000107c0: 7420 3d20 6177 6169 7420 7365 6c66 2e70  t = await self.p
-000107d0: 6561 6b5f 706f 7374 5f70 726f 6365 7373  eak_post_process
-000107e0: 696e 6728 0a20 2020 2020 2020 2020 2020  ing(.           
-000107f0: 2020 2020 2020 2020 2070 6561 6b5f 6662           peak_fb
-00010800: 2c20 7374 6174 655f 6368 616e 6765 5f73  , state_change_s
-00010810: 756d 6d61 7279 2c20 4e6f 6e65 0a20 2020  ummary, None.   
-00010820: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-00010830: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00010840: 7761 6974 2073 656c 662e 7065 616b 5f70  wait self.peak_p
-00010850: 6f73 745f 7072 6f63 6573 7369 6e67 5f32  ost_processing_2
-00010860: 2870 6561 6b5f 6662 2c20 4e6f 6e65 2c20  (peak_fb, None, 
-00010870: 7374 6174 655f 6368 616e 6765 5f73 756d  state_change_sum
-00010880: 6d61 7279 2c20 7070 705f 7265 7375 6c74  mary, ppp_result
-00010890: 290a 0a20 2020 2020 2020 2069 6620 7065  )..        if pe
-000108a0: 616b 2069 7320 6e6f 7420 4e6f 6e65 2061  ak is not None a
-000108b0: 6e64 2073 656c 662e 7765 6967 6874 5f70  nd self.weight_p
-000108c0: 726f 6f66 5f68 616e 646c 6572 2069 7320  roof_handler is 
-000108d0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-000108e0: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
-000108f0: 2e77 6569 6768 745f 7072 6f6f 665f 6861  .weight_proof_ha
-00010900: 6e64 6c65 722e 6765 745f 7072 6f6f 665f  ndler.get_proof_
-00010910: 6f66 5f77 6569 6768 7428 7065 616b 2e68  of_weight(peak.h
-00010920: 6561 6465 725f 6861 7368 290a 2020 2020  eader_hash).    
-00010930: 2020 2020 2020 2020 7365 6c66 2e5f 7374          self._st
-00010940: 6174 655f 6368 616e 6765 6428 2262 6c6f  ate_changed("blo
-00010950: 636b 2229 0a0a 2020 2020 6465 6620 6861  ck")..    def ha
-00010960: 735f 7661 6c69 645f 706f 6f6c 5f73 6967  s_valid_pool_sig
-00010970: 2873 656c 662c 2062 6c6f 636b 3a20 556e  (self, block: Un
-00010980: 696f 6e5b 556e 6669 6e69 7368 6564 426c  ion[UnfinishedBl
-00010990: 6f63 6b2c 2046 756c 6c42 6c6f 636b 5d29  ock, FullBlock])
-000109a0: 202d 3e20 626f 6f6c 3a0a 2020 2020 2020   -> bool:.      
-000109b0: 2020 6966 2028 0a20 2020 2020 2020 2020    if (.         
-000109c0: 2020 2062 6c6f 636b 2e66 6f6c 6961 6765     block.foliage
-000109d0: 2e66 6f6c 6961 6765 5f62 6c6f 636b 5f64  .foliage_block_d
-000109e0: 6174 612e 706f 6f6c 5f74 6172 6765 740a  ata.pool_target.
-000109f0: 2020 2020 2020 2020 2020 2020 3d3d 2050              == P
-00010a00: 6f6f 6c54 6172 6765 7428 7365 6c66 2e63  oolTarget(self.c
-00010a10: 6f6e 7374 616e 7473 2e47 454e 4553 4953  onstants.GENESIS
-00010a20: 5f50 5245 5f46 4152 4d5f 504f 4f4c 5f50  _PRE_FARM_POOL_P
-00010a30: 555a 5a4c 455f 4841 5348 2c20 7569 6e74  UZZLE_HASH, uint
-00010a40: 3332 2830 2929 0a20 2020 2020 2020 2020  32(0)).         
-00010a50: 2020 2061 6e64 2062 6c6f 636b 2e66 6f6c     and block.fol
-00010a60: 6961 6765 2e70 7265 765f 626c 6f63 6b5f  iage.prev_block_
-00010a70: 6861 7368 2021 3d20 7365 6c66 2e63 6f6e  hash != self.con
-00010a80: 7374 616e 7473 2e47 454e 4553 4953 5f43  stants.GENESIS_C
-00010a90: 4841 4c4c 454e 4745 0a20 2020 2020 2020  HALLENGE.       
-00010aa0: 2020 2020 2061 6e64 2062 6c6f 636b 2e72       and block.r
-00010ab0: 6577 6172 645f 6368 6169 6e5f 626c 6f63  eward_chain_bloc
-00010ac0: 6b2e 7072 6f6f 665f 6f66 5f73 7061 6365  k.proof_of_space
-00010ad0: 2e70 6f6f 6c5f 7075 626c 6963 5f6b 6579  .pool_public_key
-00010ae0: 2069 7320 6e6f 7420 4e6f 6e65 0a20 2020   is not None.   
-00010af0: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
-00010b00: 2020 2020 6173 7365 7274 2062 6c6f 636b      assert block
-00010b10: 2e66 6f6c 6961 6765 2e66 6f6c 6961 6765  .foliage.foliage
-00010b20: 5f62 6c6f 636b 5f64 6174 612e 706f 6f6c  _block_data.pool
-00010b30: 5f73 6967 6e61 7475 7265 2069 7320 6e6f  _signature is no
-00010b40: 7420 4e6f 6e65 0a20 2020 2020 2020 2020  t None.         
-00010b50: 2020 2069 6620 6e6f 7420 4175 6753 6368     if not AugSch
-00010b60: 656d 654d 504c 2e76 6572 6966 7928 0a20  emeMPL.verify(. 
-00010b70: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-00010b80: 6c6f 636b 2e72 6577 6172 645f 6368 6169  lock.reward_chai
-00010b90: 6e5f 626c 6f63 6b2e 7072 6f6f 665f 6f66  n_block.proof_of
-00010ba0: 5f73 7061 6365 2e70 6f6f 6c5f 7075 626c  _space.pool_publ
-00010bb0: 6963 5f6b 6579 2c0a 2020 2020 2020 2020  ic_key,.        
-00010bc0: 2020 2020 2020 2020 6279 7465 7328 626c          bytes(bl
-00010bd0: 6f63 6b2e 666f 6c69 6167 652e 666f 6c69  ock.foliage.foli
-00010be0: 6167 655f 626c 6f63 6b5f 6461 7461 2e70  age_block_data.p
-00010bf0: 6f6f 6c5f 7461 7267 6574 292c 0a20 2020  ool_target),.   
-00010c00: 2020 2020 2020 2020 2020 2020 2062 6c6f               blo
-00010c10: 636b 2e66 6f6c 6961 6765 2e66 6f6c 6961  ck.foliage.folia
-00010c20: 6765 5f62 6c6f 636b 5f64 6174 612e 706f  ge_block_data.po
-00010c30: 6f6c 5f73 6967 6e61 7475 7265 2c0a 2020  ol_signature,.  
-00010c40: 2020 2020 2020 2020 2020 293a 0a20 2020            ):.   
-00010c50: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00010c60: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
-00010c70: 2020 7265 7475 726e 2054 7275 650a 0a20    return True.. 
-00010c80: 2020 2061 7379 6e63 2064 6566 2073 6967     async def sig
-00010c90: 6e61 6765 5f70 6f69 6e74 5f70 6f73 745f  nage_point_post_
-00010ca0: 7072 6f63 6573 7369 6e67 280a 2020 2020  processing(.    
-00010cb0: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
-00010cc0: 2020 7265 7175 6573 743a 2066 756c 6c5f    request: full_
-00010cd0: 6e6f 6465 5f70 726f 746f 636f 6c2e 5265  node_protocol.Re
-00010ce0: 7370 6f6e 6453 6967 6e61 6765 506f 696e  spondSignagePoin
-00010cf0: 742c 0a20 2020 2020 2020 2070 6565 723a  t,.        peer:
-00010d00: 2057 5343 6869 6143 6f6e 6e65 6374 696f   WSChiaConnectio
-00010d10: 6e2c 0a20 2020 2020 2020 2069 705f 7375  n,.        ip_su
-00010d20: 625f 736c 6f74 3a20 4f70 7469 6f6e 616c  b_slot: Optional
-00010d30: 5b45 6e64 4f66 5375 6253 6c6f 7442 756e  [EndOfSubSlotBun
-00010d40: 646c 655d 2c0a 2020 2020 2920 2d3e 204e  dle],.    ) -> N
-00010d50: 6f6e 653a 0a20 2020 2020 2020 2073 656c  one:.        sel
-00010d60: 662e 6c6f 672e 696e 666f 280a 2020 2020  f.log.info(.    
-00010d70: 2020 2020 2020 2020 6622 e28f b2ef b88f          f"......
-00010d80: 2020 4669 6e69 7368 6564 2073 6967 6e61    Finished signa
-00010d90: 6765 2070 6f69 6e74 207b 7265 7175 6573  ge point {reques
-00010da0: 742e 696e 6465 785f 6672 6f6d 5f63 6861  t.index_from_cha
-00010db0: 6c6c 656e 6765 7d2f 220a 2020 2020 2020  llenge}/".      
-00010dc0: 2020 2020 2020 6622 7b73 656c 662e 636f        f"{self.co
-00010dd0: 6e73 7461 6e74 732e 4e55 4d5f 5350 535f  nstants.NUM_SPS_
-00010de0: 5355 425f 534c 4f54 7d3a 2022 0a20 2020  SUB_SLOT}: ".   
-00010df0: 2020 2020 2020 2020 2066 2243 433a 207b           f"CC: {
-00010e00: 7265 7175 6573 742e 6368 616c 6c65 6e67  request.challeng
-00010e10: 655f 6368 6169 6e5f 7664 662e 6f75 7470  e_chain_vdf.outp
-00010e20: 7574 2e67 6574 5f68 6173 6828 292e 6865  ut.get_hash().he
-00010e30: 7828 297d 2022 0a20 2020 2020 2020 2020  x()} ".         
-00010e40: 2020 2066 2252 433a 207b 7265 7175 6573     f"RC: {reques
-00010e50: 742e 7265 7761 7264 5f63 6861 696e 5f76  t.reward_chain_v
-00010e60: 6466 2e6f 7574 7075 742e 6765 745f 6861  df.output.get_ha
-00010e70: 7368 2829 2e68 6578 2829 7d20 220a 2020  sh().hex()} ".  
-00010e80: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00010e90: 7365 6c66 2e73 6967 6e61 6765 5f70 6f69  self.signage_poi
-00010ea0: 6e74 5f74 696d 6573 5b72 6571 7565 7374  nt_times[request
-00010eb0: 2e69 6e64 6578 5f66 726f 6d5f 6368 616c  .index_from_chal
-00010ec0: 6c65 6e67 655d 203d 2074 696d 652e 7469  lenge] = time.ti
-00010ed0: 6d65 2829 0a20 2020 2020 2020 2073 7562  me().        sub
-00010ee0: 5f73 6c6f 745f 7475 706c 6520 3d20 7365  _slot_tuple = se
-00010ef0: 6c66 2e66 756c 6c5f 6e6f 6465 5f73 746f  lf.full_node_sto
-00010f00: 7265 2e67 6574 5f73 7562 5f73 6c6f 7428  re.get_sub_slot(
-00010f10: 7265 7175 6573 742e 6368 616c 6c65 6e67  request.challeng
-00010f20: 655f 6368 6169 6e5f 7664 662e 6368 616c  e_chain_vdf.chal
-00010f30: 6c65 6e67 6529 0a20 2020 2020 2020 2070  lenge).        p
-00010f40: 7265 765f 6368 616c 6c65 6e67 653a 204f  rev_challenge: O
-00010f50: 7074 696f 6e61 6c5b 6279 7465 7333 325d  ptional[bytes32]
-00010f60: 0a20 2020 2020 2020 2069 6620 7375 625f  .        if sub_
-00010f70: 736c 6f74 5f74 7570 6c65 2069 7320 6e6f  slot_tuple is no
-00010f80: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00010f90: 2020 2020 7072 6576 5f63 6861 6c6c 656e      prev_challen
-00010fa0: 6765 203d 2073 7562 5f73 6c6f 745f 7475  ge = sub_slot_tu
-00010fb0: 706c 655b 305d 2e63 6861 6c6c 656e 6765  ple[0].challenge
-00010fc0: 5f63 6861 696e 2e63 6861 6c6c 656e 6765  _chain.challenge
-00010fd0: 5f63 6861 696e 5f65 6e64 5f6f 665f 736c  _chain_end_of_sl
-00010fe0: 6f74 5f76 6466 2e63 6861 6c6c 656e 6765  ot_vdf.challenge
-00010ff0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00011000: 2020 2020 2020 2020 2020 2070 7265 765f             prev_
-00011010: 6368 616c 6c65 6e67 6520 3d20 4e6f 6e65  challenge = None
-00011020: 0a0a 2020 2020 2020 2020 2320 4e6f 7469  ..        # Noti
-00011030: 6679 206e 6f64 6573 206f 6620 7468 6520  fy nodes of the 
-00011040: 6e65 7720 7369 676e 6167 6520 706f 696e  new signage poin
-00011050: 740a 2020 2020 2020 2020 6272 6f61 6463  t.        broadc
-00011060: 6173 7420 3d20 6675 6c6c 5f6e 6f64 655f  ast = full_node_
-00011070: 7072 6f74 6f63 6f6c 2e4e 6577 5369 676e  protocol.NewSign
-00011080: 6167 6550 6f69 6e74 4f72 456e 644f 6653  agePointOrEndOfS
-00011090: 7562 536c 6f74 280a 2020 2020 2020 2020  ubSlot(.        
-000110a0: 2020 2020 7072 6576 5f63 6861 6c6c 656e      prev_challen
-000110b0: 6765 2c0a 2020 2020 2020 2020 2020 2020  ge,.            
-000110c0: 7265 7175 6573 742e 6368 616c 6c65 6e67  request.challeng
-000110d0: 655f 6368 6169 6e5f 7664 662e 6368 616c  e_chain_vdf.chal
-000110e0: 6c65 6e67 652c 0a20 2020 2020 2020 2020  lenge,.         
-000110f0: 2020 2072 6571 7565 7374 2e69 6e64 6578     request.index
-00011100: 5f66 726f 6d5f 6368 616c 6c65 6e67 652c  _from_challenge,
-00011110: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00011120: 7565 7374 2e72 6577 6172 645f 6368 6169  uest.reward_chai
-00011130: 6e5f 7664 662e 6368 616c 6c65 6e67 652c  n_vdf.challenge,
-00011140: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00011150: 2020 206d 7367 203d 206d 616b 655f 6d73     msg = make_ms
-00011160: 6728 5072 6f74 6f63 6f6c 4d65 7373 6167  g(ProtocolMessag
-00011170: 6554 7970 6573 2e6e 6577 5f73 6967 6e61  eTypes.new_signa
-00011180: 6765 5f70 6f69 6e74 5f6f 725f 656e 645f  ge_point_or_end_
-00011190: 6f66 5f73 7562 5f73 6c6f 742c 2062 726f  of_sub_slot, bro
-000111a0: 6164 6361 7374 290a 2020 2020 2020 2020  adcast).        
-000111b0: 6177 6169 7420 7365 6c66 2e73 6572 7665  await self.serve
-000111c0: 722e 7365 6e64 5f74 6f5f 616c 6c28 5b6d  r.send_to_all([m
-000111d0: 7367 5d2c 204e 6f64 6554 7970 652e 4655  sg], NodeType.FU
-000111e0: 4c4c 5f4e 4f44 452c 2070 6565 722e 7065  LL_NODE, peer.pe
-000111f0: 6572 5f6e 6f64 655f 6964 290a 0a20 2020  er_node_id)..   
-00011200: 2020 2020 2070 6561 6b20 3d20 7365 6c66       peak = self
-00011210: 2e62 6c6f 636b 6368 6169 6e2e 6765 745f  .blockchain.get_
-00011220: 7065 616b 2829 0a20 2020 2020 2020 2069  peak().        i
-00011230: 6620 7065 616b 2069 7320 6e6f 7420 4e6f  f peak is not No
-00011240: 6e65 2061 6e64 2070 6561 6b2e 6865 6967  ne and peak.heig
-00011250: 6874 203e 2073 656c 662e 636f 6e73 7461  ht > self.consta
-00011260: 6e74 732e 4d41 585f 5355 425f 534c 4f54  nts.MAX_SUB_SLOT
-00011270: 5f42 4c4f 434b 533a 0a20 2020 2020 2020  _BLOCKS:.       
-00011280: 2020 2020 2073 7562 5f73 6c6f 745f 6974       sub_slot_it
-00011290: 6572 7320 3d20 7065 616b 2e73 7562 5f73  ers = peak.sub_s
-000112a0: 6c6f 745f 6974 6572 730a 2020 2020 2020  lot_iters.      
-000112b0: 2020 2020 2020 6469 6666 6963 756c 7479        difficulty
-000112c0: 203d 2075 696e 7436 3428 7065 616b 2e77   = uint64(peak.w
-000112d0: 6569 6768 7420 2d20 7365 6c66 2e62 6c6f  eight - self.blo
-000112e0: 636b 6368 6169 6e2e 626c 6f63 6b5f 7265  ckchain.block_re
-000112f0: 636f 7264 2870 6561 6b2e 7072 6576 5f68  cord(peak.prev_h
-00011300: 6173 6829 2e77 6569 6768 7429 0a20 2020  ash).weight).   
-00011310: 2020 2020 2020 2020 2023 204d 616b 6573           # Makes
-00011320: 2073 7572 6520 746f 2070 6f74 656e 7469   sure to potenti
-00011330: 616c 6c79 2075 7064 6174 6520 7468 6520  ally update the 
-00011340: 6469 6666 6963 756c 7479 2069 6620 7765  difficulty if we
-00011350: 2061 7265 2070 6173 7420 7468 6520 7065   are past the pe
-00011360: 616b 2028 696e 746f 2061 206e 6577 2073  ak (into a new s
-00011370: 7562 2d73 6c6f 7429 0a20 2020 2020 2020  ub-slot).       
-00011380: 2020 2020 2061 7373 6572 7420 6970 5f73       assert ip_s
-00011390: 7562 5f73 6c6f 7420 6973 206e 6f74 204e  ub_slot is not N
-000113a0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-000113b0: 6966 2072 6571 7565 7374 2e63 6861 6c6c  if request.chall
-000113c0: 656e 6765 5f63 6861 696e 5f76 6466 2e63  enge_chain_vdf.c
-000113d0: 6861 6c6c 656e 6765 2021 3d20 6970 5f73  hallenge != ip_s
-000113e0: 7562 5f73 6c6f 742e 6368 616c 6c65 6e67  ub_slot.challeng
-000113f0: 655f 6368 6169 6e2e 6765 745f 6861 7368  e_chain.get_hash
-00011400: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
-00011410: 2020 2020 6e65 7874 5f64 6966 6669 6375      next_difficu
-00011420: 6c74 7920 3d20 7365 6c66 2e62 6c6f 636b  lty = self.block
-00011430: 6368 6169 6e2e 6765 745f 6e65 7874 5f64  chain.get_next_d
-00011440: 6966 6669 6375 6c74 7928 7065 616b 2e68  ifficulty(peak.h
-00011450: 6561 6465 725f 6861 7368 2c20 5472 7565  eader_hash, True
-00011460: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00011470: 2020 6e65 7874 5f73 7562 5f73 6c6f 745f    next_sub_slot_
-00011480: 6974 6572 7320 3d20 7365 6c66 2e62 6c6f  iters = self.blo
-00011490: 636b 6368 6169 6e2e 6765 745f 6e65 7874  ckchain.get_next
-000114a0: 5f73 6c6f 745f 6974 6572 7328 7065 616b  _slot_iters(peak
-000114b0: 2e68 6561 6465 725f 6861 7368 2c20 5472  .header_hash, Tr
-000114c0: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
-000114d0: 2020 2020 6469 6666 6963 756c 7479 203d      difficulty =
-000114e0: 206e 6578 745f 6469 6666 6963 756c 7479   next_difficulty
-000114f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011500: 2073 7562 5f73 6c6f 745f 6974 6572 7320   sub_slot_iters 
-00011510: 3d20 6e65 7874 5f73 7562 5f73 6c6f 745f  = next_sub_slot_
-00011520: 6974 6572 730a 2020 2020 2020 2020 656c  iters.        el
-00011530: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00011540: 6469 6666 6963 756c 7479 203d 2073 656c  difficulty = sel
-00011550: 662e 636f 6e73 7461 6e74 732e 4449 4646  f.constants.DIFF
-00011560: 4943 554c 5459 5f53 5441 5254 494e 470a  ICULTY_STARTING.
-00011570: 2020 2020 2020 2020 2020 2020 7375 625f              sub_
-00011580: 736c 6f74 5f69 7465 7273 203d 2073 656c  slot_iters = sel
-00011590: 662e 636f 6e73 7461 6e74 732e 5355 425f  f.constants.SUB_
-000115a0: 534c 4f54 5f49 5445 5253 5f53 5441 5254  SLOT_ITERS_START
-000115b0: 494e 470a 0a20 2020 2020 2020 2023 204e  ING..        # N
-000115c0: 6f74 6966 7920 6661 726d 6572 7320 6f66  otify farmers of
-000115d0: 2074 6865 206e 6577 2073 6967 6e61 6765   the new signage
-000115e0: 2070 6f69 6e74 0a20 2020 2020 2020 2062   point.        b
-000115f0: 726f 6164 6361 7374 5f66 6172 6d65 7220  roadcast_farmer 
-00011600: 3d20 6661 726d 6572 5f70 726f 746f 636f  = farmer_protoco
-00011610: 6c2e 4e65 7753 6967 6e61 6765 506f 696e  l.NewSignagePoin
-00011620: 7428 0a20 2020 2020 2020 2020 2020 2072  t(.            r
-00011630: 6571 7565 7374 2e63 6861 6c6c 656e 6765  equest.challenge
-00011640: 5f63 6861 696e 5f76 6466 2e63 6861 6c6c  _chain_vdf.chall
-00011650: 656e 6765 2c0a 2020 2020 2020 2020 2020  enge,.          
-00011660: 2020 7265 7175 6573 742e 6368 616c 6c65    request.challe
-00011670: 6e67 655f 6368 6169 6e5f 7664 662e 6f75  nge_chain_vdf.ou
-00011680: 7470 7574 2e67 6574 5f68 6173 6828 292c  tput.get_hash(),
-00011690: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-000116a0: 7565 7374 2e72 6577 6172 645f 6368 6169  uest.reward_chai
-000116b0: 6e5f 7664 662e 6f75 7470 7574 2e67 6574  n_vdf.output.get
-000116c0: 5f68 6173 6828 292c 0a20 2020 2020 2020  _hash(),.       
-000116d0: 2020 2020 2064 6966 6669 6375 6c74 792c       difficulty,
-000116e0: 0a20 2020 2020 2020 2020 2020 2073 7562  .            sub
-000116f0: 5f73 6c6f 745f 6974 6572 732c 0a20 2020  _slot_iters,.   
-00011700: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00011710: 2e69 6e64 6578 5f66 726f 6d5f 6368 616c  .index_from_chal
-00011720: 6c65 6e67 652c 0a20 2020 2020 2020 2020  lenge,.         
-00011730: 2020 2075 696e 7433 3228 3029 2069 6620     uint32(0) if 
-00011740: 7065 616b 2069 7320 4e6f 6e65 2065 6c73  peak is None els
-00011750: 6520 7065 616b 2e68 6569 6768 742c 0a20  e peak.height,. 
-00011760: 2020 2020 2020 2020 2020 2073 705f 736f             sp_so
-00011770: 7572 6365 5f64 6174 613d 5369 676e 6167  urce_data=Signag
-00011780: 6550 6f69 6e74 536f 7572 6365 4461 7461  ePointSourceData
-00011790: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-000117a0: 2020 7664 665f 6461 7461 3d53 5056 4446    vdf_data=SPVDF
-000117b0: 536f 7572 6365 4461 7461 2872 6571 7565  SourceData(reque
-000117c0: 7374 2e63 6861 6c6c 656e 6765 5f63 6861  st.challenge_cha
-000117d0: 696e 5f76 6466 2e6f 7574 7075 742c 2072  in_vdf.output, r
-000117e0: 6571 7565 7374 2e72 6577 6172 645f 6368  equest.reward_ch
-000117f0: 6169 6e5f 7664 662e 6f75 7470 7574 290a  ain_vdf.output).
-00011800: 2020 2020 2020 2020 2020 2020 292c 0a20              ),. 
-00011810: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00011820: 206d 7367 203d 206d 616b 655f 6d73 6728   msg = make_msg(
-00011830: 5072 6f74 6f63 6f6c 4d65 7373 6167 6554  ProtocolMessageT
-00011840: 7970 6573 2e6e 6577 5f73 6967 6e61 6765  ypes.new_signage
-00011850: 5f70 6f69 6e74 2c20 6272 6f61 6463 6173  _point, broadcas
-00011860: 745f 6661 726d 6572 290a 2020 2020 2020  t_farmer).      
-00011870: 2020 6177 6169 7420 7365 6c66 2e73 6572    await self.ser
-00011880: 7665 722e 7365 6e64 5f74 6f5f 616c 6c28  ver.send_to_all(
-00011890: 5b6d 7367 5d2c 204e 6f64 6554 7970 652e  [msg], NodeType.
-000118a0: 4641 524d 4552 290a 0a20 2020 2020 2020  FARMER)..       
-000118b0: 2073 656c 662e 5f73 7461 7465 5f63 6861   self._state_cha
-000118c0: 6e67 6564 2822 7369 676e 6167 655f 706f  nged("signage_po
-000118d0: 696e 7422 2c20 7b22 6272 6f61 6463 6173  int", {"broadcas
-000118e0: 745f 6661 726d 6572 223a 2062 726f 6164  t_farmer": broad
-000118f0: 6361 7374 5f66 6172 6d65 727d 290a 0a20  cast_farmer}).. 
-00011900: 2020 2061 7379 6e63 2064 6566 2070 6561     async def pea
-00011910: 6b5f 706f 7374 5f70 726f 6365 7373 696e  k_post_processin
-00011920: 6728 0a20 2020 2020 2020 2073 656c 662c  g(.        self,
-00011930: 0a20 2020 2020 2020 2062 6c6f 636b 3a20  .        block: 
-00011940: 4675 6c6c 426c 6f63 6b2c 0a20 2020 2020  FullBlock,.     
-00011950: 2020 2073 7461 7465 5f63 6861 6e67 655f     state_change_
-00011960: 7375 6d6d 6172 793a 2053 7461 7465 4368  summary: StateCh
-00011970: 616e 6765 5375 6d6d 6172 792c 0a20 2020  angeSummary,.   
-00011980: 2020 2020 2070 6565 723a 204f 7074 696f       peer: Optio
-00011990: 6e61 6c5b 5753 4368 6961 436f 6e6e 6563  nal[WSChiaConnec
-000119a0: 7469 6f6e 5d2c 0a20 2020 2029 202d 3e20  tion],.    ) -> 
-000119b0: 5065 616b 506f 7374 5072 6f63 6573 7369  PeakPostProcessi
-000119c0: 6e67 5265 7375 6c74 3a0a 2020 2020 2020  ngResult:.      
-000119d0: 2020 2222 220a 2020 2020 2020 2020 4d75    """.        Mu
-000119e0: 7374 2062 6520 6361 6c6c 6564 2075 6e64  st be called und
-000119f0: 6572 2073 656c 662e 626c 6f63 6b63 6861  er self.blockcha
-00011a00: 696e 2e70 7269 6f72 6974 795f 6d75 7465  in.priority_mute
-00011a10: 782e 2054 6869 7320 7570 6461 7465 7320  x. This updates 
-00011a20: 7468 6520 696e 7465 726e 616c 2073 7461  the internal sta
-00011a30: 7465 206f 6620 7468 6520 6675 6c6c 206e  te of the full n
-00011a40: 6f64 6520 7769 7468 2074 6865 0a20 2020  ode with the.   
-00011a50: 2020 2020 206c 6174 6573 7420 7065 616b       latest peak
-00011a60: 2069 6e66 6f72 6d61 7469 6f6e 2e20 4974   information. It
-00011a70: 2061 6c73 6f20 6e6f 7469 6669 6573 2070   also notifies p
-00011a80: 6565 7273 2061 626f 7574 2074 6865 206e  eers about the n
-00011a90: 6577 2070 6561 6b2e 0a20 2020 2020 2020  ew peak..       
-00011aa0: 2022 2222 0a0a 2020 2020 2020 2020 7265   """..        re
-00011ab0: 636f 7264 203d 2073 7461 7465 5f63 6861  cord = state_cha
-00011ac0: 6e67 655f 7375 6d6d 6172 792e 7065 616b  nge_summary.peak
-00011ad0: 0a20 2020 2020 2020 2064 6966 6669 6375  .        difficu
-00011ae0: 6c74 7920 3d20 7365 6c66 2e62 6c6f 636b  lty = self.block
-00011af0: 6368 6169 6e2e 6765 745f 6e65 7874 5f64  chain.get_next_d
-00011b00: 6966 6669 6375 6c74 7928 7265 636f 7264  ifficulty(record
-00011b10: 2e68 6561 6465 725f 6861 7368 2c20 4661  .header_hash, Fa
-00011b20: 6c73 6529 0a20 2020 2020 2020 2073 7562  lse).        sub
-00011b30: 5f73 6c6f 745f 6974 6572 7320 3d20 7365  _slot_iters = se
-00011b40: 6c66 2e62 6c6f 636b 6368 6169 6e2e 6765  lf.blockchain.ge
-00011b50: 745f 6e65 7874 5f73 6c6f 745f 6974 6572  t_next_slot_iter
-00011b60: 7328 7265 636f 7264 2e68 6561 6465 725f  s(record.header_
-00011b70: 6861 7368 2c20 4661 6c73 6529 0a0a 2020  hash, False)..  
-00011b80: 2020 2020 2020 7365 6c66 2e6c 6f67 2e69        self.log.i
-00011b90: 6e66 6f28 0a20 2020 2020 2020 2020 2020  nfo(.           
-00011ba0: 2066 22f0 9f8c b120 5570 6461 7465 6420   f".... Updated 
-00011bb0: 7065 616b 2074 6f20 6865 6967 6874 207b  peak to height {
-00011bc0: 7265 636f 7264 2e68 6569 6768 747d 2c20  record.height}, 
-00011bd0: 7765 6967 6874 207b 7265 636f 7264 2e77  weight {record.w
-00011be0: 6569 6768 747d 2c20 220a 2020 2020 2020  eight}, ".      
-00011bf0: 2020 2020 2020 6622 6868 207b 7265 636f        f"hh {reco
-00011c00: 7264 2e68 6561 6465 725f 6861 7368 2e68  rd.header_hash.h
-00011c10: 6578 2829 7d2c 2022 0a20 2020 2020 2020  ex()}, ".       
-00011c20: 2020 2020 2066 2266 6f72 6b65 6420 6174       f"forked at
-00011c30: 207b 7374 6174 655f 6368 616e 6765 5f73   {state_change_s
-00011c40: 756d 6d61 7279 2e66 6f72 6b5f 6865 6967  ummary.fork_heig
-00011c50: 6874 7d2c 2072 683a 207b 7265 636f 7264  ht}, rh: {record
-00011c60: 2e72 6577 6172 645f 696e 6675 7369 6f6e  .reward_infusion
-00011c70: 5f6e 6577 5f63 6861 6c6c 656e 6765 2e68  _new_challenge.h
-00011c80: 6578 2829 7d2c 2022 0a20 2020 2020 2020  ex()}, ".       
-00011c90: 2020 2020 2066 2274 6f74 616c 2069 7465       f"total ite
-00011ca0: 7273 3a20 7b72 6563 6f72 642e 746f 7461  rs: {record.tota
-00011cb0: 6c5f 6974 6572 737d 2c20 220a 2020 2020  l_iters}, ".    
-00011cc0: 2020 2020 2020 2020 6622 6f76 6572 666c          f"overfl
-00011cd0: 6f77 3a20 7b72 6563 6f72 642e 6f76 6572  ow: {record.over
-00011ce0: 666c 6f77 7d2c 2022 0a20 2020 2020 2020  flow}, ".       
-00011cf0: 2020 2020 2066 2264 6566 6963 6974 3a20       f"deficit: 
-00011d00: 7b72 6563 6f72 642e 6465 6669 6369 747d  {record.deficit}
-00011d10: 2c20 220a 2020 2020 2020 2020 2020 2020  , ".            
-00011d20: 6622 6469 6666 6963 756c 7479 3a20 7b64  f"difficulty: {d
-00011d30: 6966 6669 6375 6c74 797d 2c20 220a 2020  ifficulty}, ".  
-00011d40: 2020 2020 2020 2020 2020 6622 7375 6220            f"sub 
-00011d50: 736c 6f74 2069 7465 7273 3a20 7b73 7562  slot iters: {sub
-00011d60: 5f73 6c6f 745f 6974 6572 737d 2c20 220a  _slot_iters}, ".
-00011d70: 2020 2020 2020 2020 2020 2020 6622 4765              f"Ge
-00011d80: 6e65 7261 746f 7220 7369 7a65 3a20 220a  nerator size: ".
-00011d90: 2020 2020 2020 2020 2020 2020 6622 7b6c              f"{l
-00011da0: 656e 2862 7974 6573 2862 6c6f 636b 2e74  en(bytes(block.t
-00011db0: 7261 6e73 6163 7469 6f6e 735f 6765 6e65  ransactions_gene
-00011dc0: 7261 746f 7229 2920 6966 2062 6c6f 636b  rator)) if block
-00011dd0: 2e74 7261 6e73 6163 7469 6f6e 735f 6765  .transactions_ge
-00011de0: 6e65 7261 746f 7220 656c 7365 2027 4e6f  nerator else 'No
-00011df0: 2074 7827 7d2c 2022 0a20 2020 2020 2020   tx'}, ".       
-00011e00: 2020 2020 2066 2247 656e 6572 6174 6f72       f"Generator
-00011e10: 2072 6566 206c 6973 7420 7369 7a65 3a20   ref list size: 
-00011e20: 220a 2020 2020 2020 2020 2020 2020 6622  ".            f"
-00011e30: 7b6c 656e 2862 6c6f 636b 2e74 7261 6e73  {len(block.trans
-00011e40: 6163 7469 6f6e 735f 6765 6e65 7261 746f  actions_generato
-00011e50: 725f 7265 665f 6c69 7374 2920 6966 2062  r_ref_list) if b
-00011e60: 6c6f 636b 2e74 7261 6e73 6163 7469 6f6e  lock.transaction
-00011e70: 735f 6765 6e65 7261 746f 7220 656c 7365  s_generator else
-00011e80: 2027 4e6f 2074 7827 7d22 0a20 2020 2020   'No tx'}".     
-00011e90: 2020 2029 0a0a 2020 2020 2020 2020 6966     )..        if
-00011ea0: 2028 0a20 2020 2020 2020 2020 2020 2073   (.            s
-00011eb0: 656c 662e 6675 6c6c 5f6e 6f64 655f 7374  elf.full_node_st
-00011ec0: 6f72 652e 7072 6576 696f 7573 5f67 656e  ore.previous_gen
-00011ed0: 6572 6174 6f72 2069 7320 6e6f 7420 4e6f  erator is not No
-00011ee0: 6e65 0a20 2020 2020 2020 2020 2020 2061  ne.            a
-00011ef0: 6e64 2073 7461 7465 5f63 6861 6e67 655f  nd state_change_
-00011f00: 7375 6d6d 6172 792e 666f 726b 5f68 6569  summary.fork_hei
-00011f10: 6768 7420 3c20 7365 6c66 2e66 756c 6c5f  ght < self.full_
-00011f20: 6e6f 6465 5f73 746f 7265 2e70 7265 7669  node_store.previ
-00011f30: 6f75 735f 6765 6e65 7261 746f 722e 626c  ous_generator.bl
-00011f40: 6f63 6b5f 6865 6967 6874 0a20 2020 2020  ock_height.     
-00011f50: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-00011f60: 2020 7365 6c66 2e66 756c 6c5f 6e6f 6465    self.full_node
-00011f70: 5f73 746f 7265 2e70 7265 7669 6f75 735f  _store.previous_
-00011f80: 6765 6e65 7261 746f 7220 3d20 4e6f 6e65  generator = None
-00011f90: 0a0a 2020 2020 2020 2020 6869 6e74 735f  ..        hints_
-00011fa0: 746f 5f61 6464 2c20 6c6f 6f6b 7570 5f63  to_add, lookup_c
-00011fb0: 6f69 6e5f 6964 7320 3d20 6765 745f 6869  oin_ids = get_hi
-00011fc0: 6e74 735f 616e 645f 7375 6273 6372 6970  nts_and_subscrip
-00011fd0: 7469 6f6e 5f63 6f69 6e5f 6964 7328 0a20  tion_coin_ids(. 
-00011fe0: 2020 2020 2020 2020 2020 2073 7461 7465             state
-00011ff0: 5f63 6861 6e67 655f 7375 6d6d 6172 792c  _change_summary,
-00012000: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00012010: 662e 7375 6273 6372 6970 7469 6f6e 732e  f.subscriptions.
-00012020: 6861 735f 636f 696e 5f73 7562 7363 7269  has_coin_subscri
-00012030: 7074 696f 6e2c 0a20 2020 2020 2020 2020  ption,.         
-00012040: 2020 2073 656c 662e 7375 6273 6372 6970     self.subscrip
-00012050: 7469 6f6e 732e 6861 735f 7075 7a7a 6c65  tions.has_puzzle
-00012060: 5f73 7562 7363 7269 7074 696f 6e2c 0a20  _subscription,. 
-00012070: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00012080: 2061 7761 6974 2073 656c 662e 6869 6e74   await self.hint
-00012090: 5f73 746f 7265 2e61 6464 5f68 696e 7473  _store.add_hints
-000120a0: 2868 696e 7473 5f74 6f5f 6164 6429 0a0a  (hints_to_add)..
-000120b0: 2020 2020 2020 2020 7375 625f 736c 6f74          sub_slot
-000120c0: 7320 3d20 6177 6169 7420 7365 6c66 2e62  s = await self.b
-000120d0: 6c6f 636b 6368 6169 6e2e 6765 745f 7370  lockchain.get_sp
-000120e0: 5f61 6e64 5f69 705f 7375 625f 736c 6f74  _and_ip_sub_slot
-000120f0: 7328 7265 636f 7264 2e68 6561 6465 725f  s(record.header_
-00012100: 6861 7368 290a 2020 2020 2020 2020 6173  hash).        as
-00012110: 7365 7274 2073 7562 5f73 6c6f 7473 2069  sert sub_slots i
-00012120: 7320 6e6f 7420 4e6f 6e65 0a0a 2020 2020  s not None..    
-00012130: 2020 2020 6966 206e 6f74 2073 656c 662e      if not self.
-00012140: 7379 6e63 5f73 746f 7265 2e67 6574 5f73  sync_store.get_s
-00012150: 796e 635f 6d6f 6465 2829 3a0a 2020 2020  ync_mode():.    
-00012160: 2020 2020 2020 2020 7365 6c66 2e62 6c6f          self.blo
-00012170: 636b 6368 6169 6e2e 636c 6561 6e5f 626c  ckchain.clean_bl
-00012180: 6f63 6b5f 7265 636f 7264 7328 290a 0a20  ock_records().. 
-00012190: 2020 2020 2020 2066 6f72 6b5f 626c 6f63         fork_bloc
-000121a0: 6b3a 204f 7074 696f 6e61 6c5b 426c 6f63  k: Optional[Bloc
-000121b0: 6b52 6563 6f72 645d 203d 204e 6f6e 650a  kRecord] = None.
-000121c0: 2020 2020 2020 2020 6966 2073 7461 7465          if state
-000121d0: 5f63 6861 6e67 655f 7375 6d6d 6172 792e  _change_summary.
-000121e0: 666f 726b 5f68 6569 6768 7420 213d 2062  fork_height != b
-000121f0: 6c6f 636b 2e68 6569 6768 7420 2d20 3120  lock.height - 1 
-00012200: 616e 6420 626c 6f63 6b2e 6865 6967 6874  and block.height
-00012210: 2021 3d20 303a 0a20 2020 2020 2020 2020   != 0:.         
-00012220: 2020 2023 2054 6869 7320 6973 2061 2072     # This is a r
-00012230: 656f 7267 0a20 2020 2020 2020 2020 2020  eorg.           
-00012240: 2066 6f72 6b5f 6861 7368 3a20 4f70 7469   fork_hash: Opti
-00012250: 6f6e 616c 5b62 7974 6573 3332 5d20 3d20  onal[bytes32] = 
-00012260: 7365 6c66 2e62 6c6f 636b 6368 6169 6e2e  self.blockchain.
-00012270: 6865 6967 6874 5f74 6f5f 6861 7368 2873  height_to_hash(s
-00012280: 7461 7465 5f63 6861 6e67 655f 7375 6d6d  tate_change_summ
-00012290: 6172 792e 666f 726b 5f68 6569 6768 7429  ary.fork_height)
-000122a0: 0a20 2020 2020 2020 2020 2020 2061 7373  .            ass
-000122b0: 6572 7420 666f 726b 5f68 6173 6820 6973  ert fork_hash is
-000122c0: 206e 6f74 204e 6f6e 650a 2020 2020 2020   not None.      
-000122d0: 2020 2020 2020 666f 726b 5f62 6c6f 636b        fork_block
-000122e0: 203d 2061 7761 6974 2073 656c 662e 626c   = await self.bl
-000122f0: 6f63 6b63 6861 696e 2e67 6574 5f62 6c6f  ockchain.get_blo
-00012300: 636b 5f72 6563 6f72 645f 6672 6f6d 5f64  ck_record_from_d
-00012310: 6228 666f 726b 5f68 6173 6829 0a0a 2020  b(fork_hash)..  
-00012320: 2020 2020 2020 666e 735f 7065 616b 5f72        fns_peak_r
-00012330: 6573 756c 743a 2046 756c 6c4e 6f64 6553  esult: FullNodeS
-00012340: 746f 7265 5065 616b 5265 7375 6c74 203d  torePeakResult =
-00012350: 2073 656c 662e 6675 6c6c 5f6e 6f64 655f   self.full_node_
-00012360: 7374 6f72 652e 6e65 775f 7065 616b 280a  store.new_peak(.
-00012370: 2020 2020 2020 2020 2020 2020 7265 636f              reco
-00012380: 7264 2c0a 2020 2020 2020 2020 2020 2020  rd,.            
-00012390: 626c 6f63 6b2c 0a20 2020 2020 2020 2020  block,.         
-000123a0: 2020 2073 7562 5f73 6c6f 7473 5b30 5d2c     sub_slots[0],
-000123b0: 0a20 2020 2020 2020 2020 2020 2073 7562  .            sub
-000123c0: 5f73 6c6f 7473 5b31 5d2c 0a20 2020 2020  _slots[1],.     
-000123d0: 2020 2020 2020 2066 6f72 6b5f 626c 6f63         fork_bloc
-000123e0: 6b2c 0a20 2020 2020 2020 2020 2020 2073  k,.            s
-000123f0: 656c 662e 626c 6f63 6b63 6861 696e 2c0a  elf.blockchain,.
-00012400: 2020 2020 2020 2020 2020 2020 7375 625f              sub_
-00012410: 736c 6f74 5f69 7465 7273 2c0a 2020 2020  slot_iters,.    
-00012420: 2020 2020 2020 2020 6469 6666 6963 756c          difficul
-00012430: 7479 2c0a 2020 2020 2020 2020 290a 0a20  ty,.        ).. 
-00012440: 2020 2020 2020 2069 6620 666e 735f 7065         if fns_pe
-00012450: 616b 5f72 6573 756c 742e 6e65 775f 7369  ak_result.new_si
-00012460: 676e 6167 655f 706f 696e 7473 2069 7320  gnage_points is 
-00012470: 6e6f 7420 4e6f 6e65 2061 6e64 2070 6565  not None and pee
-00012480: 7220 6973 206e 6f74 204e 6f6e 653a 0a20  r is not None:. 
-00012490: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-000124a0: 6e64 6578 2c20 7370 2069 6e20 666e 735f  ndex, sp in fns_
-000124b0: 7065 616b 5f72 6573 756c 742e 6e65 775f  peak_result.new_
-000124c0: 7369 676e 6167 655f 706f 696e 7473 3a0a  signage_points:.
-000124d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000124e0: 6173 7365 7274 2028 0a20 2020 2020 2020  assert (.       
-000124f0: 2020 2020 2020 2020 2020 2020 2073 702e               sp.
-00012500: 6363 5f76 6466 2069 7320 6e6f 7420 4e6f  cc_vdf is not No
-00012510: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
-00012520: 2020 2020 2020 2061 6e64 2073 702e 6363         and sp.cc
-00012530: 5f70 726f 6f66 2069 7320 6e6f 7420 4e6f  _proof is not No
-00012540: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
-00012550: 2020 2020 2020 2061 6e64 2073 702e 7263         and sp.rc
-00012560: 5f76 6466 2069 7320 6e6f 7420 4e6f 6e65  _vdf is not None
-00012570: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012580: 2020 2020 2061 6e64 2073 702e 7263 5f70       and sp.rc_p
-00012590: 726f 6f66 2069 7320 6e6f 7420 4e6f 6e65  roof is not None
-000125a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000125b0: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
-000125c0: 2020 2061 7761 6974 2073 656c 662e 7369     await self.si
-000125d0: 676e 6167 655f 706f 696e 745f 706f 7374  gnage_point_post
-000125e0: 5f70 726f 6365 7373 696e 6728 0a20 2020  _processing(.   
-000125f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012600: 2052 6573 706f 6e64 5369 676e 6167 6550   RespondSignageP
-00012610: 6f69 6e74 2869 6e64 6578 2c20 7370 2e63  oint(index, sp.c
-00012620: 635f 7664 662c 2073 702e 6363 5f70 726f  c_vdf, sp.cc_pro
-00012630: 6f66 2c20 7370 2e72 635f 7664 662c 2073  of, sp.rc_vdf, s
-00012640: 702e 7263 5f70 726f 6f66 292c 2070 6565  p.rc_proof), pee
-00012650: 722c 2073 7562 5f73 6c6f 7473 5b31 5d0a  r, sub_slots[1].
-00012660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012670: 290a 0a20 2020 2020 2020 2069 6620 7375  )..        if su
-00012680: 625f 736c 6f74 735b 315d 2069 7320 4e6f  b_slots[1] is No
-00012690: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-000126a0: 6173 7365 7274 2072 6563 6f72 642e 6970  assert record.ip
-000126b0: 5f73 7562 5f73 6c6f 745f 746f 7461 6c5f  _sub_slot_total_
-000126c0: 6974 6572 7328 7365 6c66 2e63 6f6e 7374  iters(self.const
-000126d0: 616e 7473 2920 3d3d 2030 0a20 2020 2020  ants) == 0.     
-000126e0: 2020 2023 2045 6e73 7572 6520 7468 6520     # Ensure the 
-000126f0: 7369 676e 6167 6520 706f 696e 7420 6973  signage point is
-00012700: 2061 6c73 6f20 696e 2074 6865 2073 746f   also in the sto
-00012710: 7265 2c20 666f 7220 636f 6e73 6973 7465  re, for consiste
-00012720: 6e63 790a 2020 2020 2020 2020 7365 6c66  ncy.        self
-00012730: 2e66 756c 6c5f 6e6f 6465 5f73 746f 7265  .full_node_store
-00012740: 2e6e 6577 5f73 6967 6e61 6765 5f70 6f69  .new_signage_poi
-00012750: 6e74 280a 2020 2020 2020 2020 2020 2020  nt(.            
-00012760: 7265 636f 7264 2e73 6967 6e61 6765 5f70  record.signage_p
-00012770: 6f69 6e74 5f69 6e64 6578 2c0a 2020 2020  oint_index,.    
-00012780: 2020 2020 2020 2020 7365 6c66 2e62 6c6f          self.blo
-00012790: 636b 6368 6169 6e2c 0a20 2020 2020 2020  ckchain,.       
-000127a0: 2020 2020 2072 6563 6f72 642c 0a20 2020       record,.   
-000127b0: 2020 2020 2020 2020 2072 6563 6f72 642e           record.
-000127c0: 7375 625f 736c 6f74 5f69 7465 7273 2c0a  sub_slot_iters,.
-000127d0: 2020 2020 2020 2020 2020 2020 5369 676e              Sign
-000127e0: 6167 6550 6f69 6e74 280a 2020 2020 2020  agePoint(.      
-000127f0: 2020 2020 2020 2020 2020 626c 6f63 6b2e            block.
-00012800: 7265 7761 7264 5f63 6861 696e 5f62 6c6f  reward_chain_blo
-00012810: 636b 2e63 6861 6c6c 656e 6765 5f63 6861  ck.challenge_cha
-00012820: 696e 5f73 705f 7664 662c 0a20 2020 2020  in_sp_vdf,.     
-00012830: 2020 2020 2020 2020 2020 2062 6c6f 636b             block
-00012840: 2e63 6861 6c6c 656e 6765 5f63 6861 696e  .challenge_chain
-00012850: 5f73 705f 7072 6f6f 662c 0a20 2020 2020  _sp_proof,.     
-00012860: 2020 2020 2020 2020 2020 2062 6c6f 636b             block
-00012870: 2e72 6577 6172 645f 6368 6169 6e5f 626c  .reward_chain_bl
-00012880: 6f63 6b2e 7265 7761 7264 5f63 6861 696e  ock.reward_chain
-00012890: 5f73 705f 7664 662c 0a20 2020 2020 2020  _sp_vdf,.       
-000128a0: 2020 2020 2020 2020 2062 6c6f 636b 2e72           block.r
-000128b0: 6577 6172 645f 6368 6169 6e5f 7370 5f70  eward_chain_sp_p
-000128c0: 726f 6f66 2c0a 2020 2020 2020 2020 2020  roof,.          
-000128d0: 2020 292c 0a20 2020 2020 2020 2020 2020    ),.           
-000128e0: 2073 6b69 705f 7664 665f 7661 6c69 6461   skip_vdf_valida
-000128f0: 7469 6f6e 3d54 7275 652c 0a20 2020 2020  tion=True,.     
-00012900: 2020 2029 0a0a 2020 2020 2020 2020 2320     )..        # 
-00012910: 5570 6461 7465 2074 6865 206d 656d 706f  Update the mempo
-00012920: 6f6c 2028 7265 7475 726e 7320 7375 6363  ol (returns succ
-00012930: 6573 7366 756c 2070 656e 6469 6e67 2074  essful pending t
-00012940: 7261 6e73 6163 7469 6f6e 7320 6164 6465  ransactions adde
-00012950: 6420 746f 2074 6865 206d 656d 706f 6f6c  d to the mempool
-00012960: 290a 2020 2020 2020 2020 7370 656e 745f  ).        spent_
-00012970: 636f 696e 733a 204c 6973 745b 6279 7465  coins: List[byte
-00012980: 7333 325d 203d 205b 636f 696e 5f69 6420  s32] = [coin_id 
-00012990: 666f 7220 636f 696e 5f69 642c 205f 2069  for coin_id, _ i
-000129a0: 6e20 7374 6174 655f 6368 616e 6765 5f73  n state_change_s
-000129b0: 756d 6d61 7279 2e72 656d 6f76 616c 735d  ummary.removals]
-000129c0: 0a20 2020 2020 2020 206d 656d 706f 6f6c  .        mempool
-000129d0: 5f6e 6577 5f70 6561 6b5f 7265 7375 6c74  _new_peak_result
-000129e0: 3a20 4c69 7374 5b54 7570 6c65 5b53 7065  : List[Tuple[Spe
-000129f0: 6e64 4275 6e64 6c65 2c20 4e50 4352 6573  ndBundle, NPCRes
-00012a00: 756c 742c 2062 7974 6573 3332 5d5d 0a20  ult, bytes32]]. 
-00012a10: 2020 2020 2020 206d 656d 706f 6f6c 5f6e         mempool_n
-00012a20: 6577 5f70 6561 6b5f 7265 7375 6c74 203d  ew_peak_result =
-00012a30: 2061 7761 6974 2073 656c 662e 6d65 6d70   await self.memp
-00012a40: 6f6f 6c5f 6d61 6e61 6765 722e 6e65 775f  ool_manager.new_
-00012a50: 7065 616b 2873 656c 662e 626c 6f63 6b63  peak(self.blockc
-00012a60: 6861 696e 2e67 6574 5f74 785f 7065 616b  hain.get_tx_peak
-00012a70: 2829 2c20 7370 656e 745f 636f 696e 7329  (), spent_coins)
-00012a80: 0a0a 2020 2020 2020 2020 2320 4368 6563  ..        # Chec
-00012a90: 6b20 6966 2077 6520 6465 7465 6374 6564  k if we detected
-00012aa0: 2061 2073 7065 6e74 2074 7261 6e73 6163   a spent transac
-00012ab0: 7469 6f6e 2c20 746f 206c 6f61 6420 7570  tion, to load up
-00012ac0: 206f 7572 2067 656e 6572 6174 6f72 2063   our generator c
-00012ad0: 6163 6865 0a20 2020 2020 2020 2069 6620  ache.        if 
-00012ae0: 626c 6f63 6b2e 7472 616e 7361 6374 696f  block.transactio
-00012af0: 6e73 5f67 656e 6572 6174 6f72 2069 7320  ns_generator is 
-00012b00: 6e6f 7420 4e6f 6e65 2061 6e64 2073 656c  not None and sel
-00012b10: 662e 6675 6c6c 5f6e 6f64 655f 7374 6f72  f.full_node_stor
-00012b20: 652e 7072 6576 696f 7573 5f67 656e 6572  e.previous_gener
-00012b30: 6174 6f72 2069 7320 4e6f 6e65 3a0a 2020  ator is None:.  
-00012b40: 2020 2020 2020 2020 2020 6765 6e65 7261            genera
-00012b50: 746f 725f 6172 6720 3d20 6465 7465 6374  tor_arg = detect
-00012b60: 5f70 6f74 656e 7469 616c 5f74 656d 706c  _potential_templ
-00012b70: 6174 655f 6765 6e65 7261 746f 7228 626c  ate_generator(bl
-00012b80: 6f63 6b2e 6865 6967 6874 2c20 626c 6f63  ock.height, bloc
-00012b90: 6b2e 7472 616e 7361 6374 696f 6e73 5f67  k.transactions_g
-00012ba0: 656e 6572 6174 6f72 290a 2020 2020 2020  enerator).      
-00012bb0: 2020 2020 2020 6966 2067 656e 6572 6174        if generat
-00012bc0: 6f72 5f61 7267 3a0a 2020 2020 2020 2020  or_arg:.        
-00012bd0: 2020 2020 2020 2020 7365 6c66 2e6c 6f67          self.log
-00012be0: 2e69 6e66 6f28 6622 5361 7669 6e67 2070  .info(f"Saving p
-00012bf0: 7265 7669 6f75 7320 6765 6e65 7261 746f  revious generato
-00012c00: 7220 666f 7220 6865 6967 6874 207b 626c  r for height {bl
-00012c10: 6f63 6b2e 6865 6967 6874 7d22 290a 2020  ock.height}").  
-00012c20: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00012c30: 6c66 2e66 756c 6c5f 6e6f 6465 5f73 746f  lf.full_node_sto
-00012c40: 7265 2e70 7265 7669 6f75 735f 6765 6e65  re.previous_gene
-00012c50: 7261 746f 7220 3d20 6765 6e65 7261 746f  rator = generato
-00012c60: 725f 6172 670a 0a20 2020 2020 2020 2072  r_arg..        r
-00012c70: 6574 7572 6e20 5065 616b 506f 7374 5072  eturn PeakPostPr
-00012c80: 6f63 6573 7369 6e67 5265 7375 6c74 286d  ocessingResult(m
-00012c90: 656d 706f 6f6c 5f6e 6577 5f70 6561 6b5f  empool_new_peak_
-00012ca0: 7265 7375 6c74 2c20 666e 735f 7065 616b  result, fns_peak
-00012cb0: 5f72 6573 756c 742c 2068 696e 7473 5f74  _result, hints_t
-00012cc0: 6f5f 6164 642c 206c 6f6f 6b75 705f 636f  o_add, lookup_co
-00012cd0: 696e 5f69 6473 290a 0a20 2020 2061 7379  in_ids)..    asy
-00012ce0: 6e63 2064 6566 2070 6561 6b5f 706f 7374  nc def peak_post
-00012cf0: 5f70 726f 6365 7373 696e 675f 3228 0a20  _processing_2(. 
-00012d00: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
-00012d10: 2020 2020 2062 6c6f 636b 3a20 4675 6c6c       block: Full
-00012d20: 426c 6f63 6b2c 0a20 2020 2020 2020 2070  Block,.        p
-00012d30: 6565 723a 204f 7074 696f 6e61 6c5b 5753  eer: Optional[WS
-00012d40: 4368 6961 436f 6e6e 6563 7469 6f6e 5d2c  ChiaConnection],
-00012d50: 0a20 2020 2020 2020 2073 7461 7465 5f63  .        state_c
-00012d60: 6861 6e67 655f 7375 6d6d 6172 793a 2053  hange_summary: S
-00012d70: 7461 7465 4368 616e 6765 5375 6d6d 6172  tateChangeSummar
-00012d80: 792c 0a20 2020 2020 2020 2070 7070 5f72  y,.        ppp_r
-00012d90: 6573 756c 743a 2050 6561 6b50 6f73 7450  esult: PeakPostP
-00012da0: 726f 6365 7373 696e 6752 6573 756c 742c  rocessingResult,
-00012db0: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-00012dc0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00012dd0: 2020 2020 446f 6573 204e 4f54 206e 6565      Does NOT nee
-00012de0: 6420 746f 2062 6520 6361 6c6c 6564 2075  d to be called u
-00012df0: 6e64 6572 2074 6865 2062 6c6f 636b 6368  nder the blockch
-00012e00: 6169 6e20 6c6f 636b 2e20 4861 6e64 6c65  ain lock. Handle
-00012e10: 206f 7468 6572 2070 6172 7473 206f 6620   other parts of 
-00012e20: 706f 7374 2070 726f 6365 7373 696e 6720  post processing 
-00012e30: 6c69 6b65 2063 6f6d 6d75 6e69 6361 7469  like communicati
-00012e40: 6e67 0a20 2020 2020 2020 2077 6974 6820  ng.        with 
-00012e50: 7065 6572 730a 2020 2020 2020 2020 2222  peers.        ""
-00012e60: 220a 2020 2020 2020 2020 7265 636f 7264  ".        record
-00012e70: 203d 2073 7461 7465 5f63 6861 6e67 655f   = state_change_
-00012e80: 7375 6d6d 6172 792e 7065 616b 0a20 2020  summary.peak.   
-00012e90: 2020 2020 2066 6f72 2062 756e 646c 652c       for bundle,
-00012ea0: 2072 6573 756c 742c 2073 7065 6e64 5f6e   result, spend_n
-00012eb0: 616d 6520 696e 2070 7070 5f72 6573 756c  ame in ppp_resul
-00012ec0: 742e 6d65 6d70 6f6f 6c5f 7065 616b 5f72  t.mempool_peak_r
-00012ed0: 6573 756c 743a 0a20 2020 2020 2020 2020  esult:.         
-00012ee0: 2020 2073 656c 662e 6c6f 672e 6465 6275     self.log.debu
-00012ef0: 6728 6622 4164 6465 6420 7472 616e 7361  g(f"Added transa
-00012f00: 6374 696f 6e20 746f 206d 656d 706f 6f6c  ction to mempool
-00012f10: 3a20 7b73 7065 6e64 5f6e 616d 657d 2229  : {spend_name}")
-00012f20: 0a20 2020 2020 2020 2020 2020 206d 656d  .            mem
-00012f30: 706f 6f6c 5f69 7465 6d20 3d20 7365 6c66  pool_item = self
-00012f40: 2e6d 656d 706f 6f6c 5f6d 616e 6167 6572  .mempool_manager
-00012f50: 2e67 6574 5f6d 656d 706f 6f6c 5f69 7465  .get_mempool_ite
-00012f60: 6d28 7370 656e 645f 6e61 6d65 290a 2020  m(spend_name).  
-00012f70: 2020 2020 2020 2020 2020 6173 7365 7274            assert
-00012f80: 206d 656d 706f 6f6c 5f69 7465 6d20 6973   mempool_item is
-00012f90: 206e 6f74 204e 6f6e 650a 2020 2020 2020   not None.      
-00012fa0: 2020 2020 2020 6665 6573 203d 206d 656d        fees = mem
-00012fb0: 706f 6f6c 5f69 7465 6d2e 6665 650a 2020  pool_item.fee.  
-00012fc0: 2020 2020 2020 2020 2020 6173 7365 7274            assert
-00012fd0: 2066 6565 7320 3e3d 2030 0a20 2020 2020   fees >= 0.     
-00012fe0: 2020 2020 2020 2061 7373 6572 7420 6d65         assert me
-00012ff0: 6d70 6f6f 6c5f 6974 656d 2e63 6f73 7420  mpool_item.cost 
-00013000: 6973 206e 6f74 204e 6f6e 650a 2020 2020  is not None.    
-00013010: 2020 2020 2020 2020 6e65 775f 7478 203d          new_tx =
-00013020: 2066 756c 6c5f 6e6f 6465 5f70 726f 746f   full_node_proto
-00013030: 636f 6c2e 4e65 7754 7261 6e73 6163 7469  col.NewTransacti
-00013040: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
-00013050: 2020 2020 7370 656e 645f 6e61 6d65 2c0a      spend_name,.
-00013060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013070: 6d65 6d70 6f6f 6c5f 6974 656d 2e63 6f73  mempool_item.cos
-00013080: 742c 0a20 2020 2020 2020 2020 2020 2020  t,.             
-00013090: 2020 2066 6565 732c 0a20 2020 2020 2020     fees,.       
-000130a0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-000130b0: 2020 206d 7367 203d 206d 616b 655f 6d73     msg = make_ms
-000130c0: 6728 5072 6f74 6f63 6f6c 4d65 7373 6167  g(ProtocolMessag
-000130d0: 6554 7970 6573 2e6e 6577 5f74 7261 6e73  eTypes.new_trans
-000130e0: 6163 7469 6f6e 2c20 6e65 775f 7478 290a  action, new_tx).
-000130f0: 2020 2020 2020 2020 2020 2020 6177 6169              awai
-00013100: 7420 7365 6c66 2e73 6572 7665 722e 7365  t self.server.se
-00013110: 6e64 5f74 6f5f 616c 6c28 5b6d 7367 5d2c  nd_to_all([msg],
-00013120: 204e 6f64 6554 7970 652e 4655 4c4c 5f4e   NodeType.FULL_N
-00013130: 4f44 4529 0a0a 2020 2020 2020 2020 2320  ODE)..        # 
-00013140: 4966 2074 6865 7265 2077 6572 6520 7065  If there were pe
-00013150: 6e64 696e 6720 656e 6420 6f66 2073 6c6f  nding end of slo
-00013160: 7473 2074 6861 7420 6861 7070 656e 2061  ts that happen a
-00013170: 6674 6572 2074 6869 7320 7065 616b 2c20  fter this peak, 
-00013180: 6272 6f61 6463 6173 7420 7468 656d 2069  broadcast them i
-00013190: 6620 7468 6579 2061 7265 2061 6464 6564  f they are added
-000131a0: 0a20 2020 2020 2020 2069 6620 7070 705f  .        if ppp_
-000131b0: 7265 7375 6c74 2e66 6e73 5f70 6561 6b5f  result.fns_peak_
-000131c0: 7265 7375 6c74 2e61 6464 6564 5f65 6f73  result.added_eos
-000131d0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-000131e0: 2020 2020 2020 2020 2020 6272 6f61 6463            broadc
-000131f0: 6173 7420 3d20 6675 6c6c 5f6e 6f64 655f  ast = full_node_
-00013200: 7072 6f74 6f63 6f6c 2e4e 6577 5369 676e  protocol.NewSign
-00013210: 6167 6550 6f69 6e74 4f72 456e 644f 6653  agePointOrEndOfS
-00013220: 7562 536c 6f74 280a 2020 2020 2020 2020  ubSlot(.        
-00013230: 2020 2020 2020 2020 7070 705f 7265 7375          ppp_resu
-00013240: 6c74 2e66 6e73 5f70 6561 6b5f 7265 7375  lt.fns_peak_resu
-00013250: 6c74 2e61 6464 6564 5f65 6f73 2e63 6861  lt.added_eos.cha
-00013260: 6c6c 656e 6765 5f63 6861 696e 2e63 6861  llenge_chain.cha
-00013270: 6c6c 656e 6765 5f63 6861 696e 5f65 6e64  llenge_chain_end
-00013280: 5f6f 665f 736c 6f74 5f76 6466 2e63 6861  _of_slot_vdf.cha
-00013290: 6c6c 656e 6765 2c0a 2020 2020 2020 2020  llenge,.        
-000132a0: 2020 2020 2020 2020 7070 705f 7265 7375          ppp_resu
-000132b0: 6c74 2e66 6e73 5f70 6561 6b5f 7265 7375  lt.fns_peak_resu
-000132c0: 6c74 2e61 6464 6564 5f65 6f73 2e63 6861  lt.added_eos.cha
-000132d0: 6c6c 656e 6765 5f63 6861 696e 2e67 6574  llenge_chain.get
-000132e0: 5f68 6173 6828 292c 0a20 2020 2020 2020  _hash(),.       
-000132f0: 2020 2020 2020 2020 2075 696e 7438 2830           uint8(0
-00013300: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
-00013310: 2020 2070 7070 5f72 6573 756c 742e 666e     ppp_result.fn
-00013320: 735f 7065 616b 5f72 6573 756c 742e 6164  s_peak_result.ad
-00013330: 6465 645f 656f 732e 7265 7761 7264 5f63  ded_eos.reward_c
-00013340: 6861 696e 2e65 6e64 5f6f 665f 736c 6f74  hain.end_of_slot
-00013350: 5f76 6466 2e63 6861 6c6c 656e 6765 2c0a  _vdf.challenge,.
-00013360: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-00013370: 2020 2020 2020 2020 2020 6d73 6720 3d20            msg = 
-00013380: 6d61 6b65 5f6d 7367 2850 726f 746f 636f  make_msg(Protoco
-00013390: 6c4d 6573 7361 6765 5479 7065 732e 6e65  lMessageTypes.ne
-000133a0: 775f 7369 676e 6167 655f 706f 696e 745f  w_signage_point_
-000133b0: 6f72 5f65 6e64 5f6f 665f 7375 625f 736c  or_end_of_sub_sl
-000133c0: 6f74 2c20 6272 6f61 6463 6173 7429 0a20  ot, broadcast). 
-000133d0: 2020 2020 2020 2020 2020 2061 7761 6974             await
-000133e0: 2073 656c 662e 7365 7276 6572 2e73 656e   self.server.sen
-000133f0: 645f 746f 5f61 6c6c 285b 6d73 675d 2c20  d_to_all([msg], 
-00013400: 4e6f 6465 5479 7065 2e46 554c 4c5f 4e4f  NodeType.FULL_NO
-00013410: 4445 290a 0a20 2020 2020 2020 2023 2054  DE)..        # T
-00013420: 4f44 4f3a 206d 6179 6265 2061 6464 2061  ODO: maybe add a
-00013430: 6e64 2062 726f 6164 6361 7374 206e 6577  nd broadcast new
-00013440: 2049 5073 2061 7320 7765 6c6c 0a0a 2020   IPs as well..  
-00013450: 2020 2020 2020 6966 2072 6563 6f72 642e        if record.
-00013460: 6865 6967 6874 2025 2031 3030 3020 3d3d  height % 1000 ==
-00013470: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-00013480: 2320 4f63 6361 7369 6f6e 616c 6c79 2063  # Occasionally c
-00013490: 6c65 6172 2064 6174 6120 696e 2066 756c  lear data in ful
-000134a0: 6c20 6e6f 6465 2073 746f 7265 2074 6f20  l node store to 
-000134b0: 6b65 6570 206d 656d 6f72 7920 7573 6167  keep memory usag
-000134c0: 6520 736d 616c 6c0a 2020 2020 2020 2020  e small.        
-000134d0: 2020 2020 7365 6c66 2e66 756c 6c5f 6e6f      self.full_no
-000134e0: 6465 5f73 746f 7265 2e63 6c65 6172 5f6f  de_store.clear_o
-000134f0: 6c64 5f63 6163 6865 5f65 6e74 7269 6573  ld_cache_entries
-00013500: 2829 0a0a 2020 2020 2020 2020 6966 2073  ()..        if s
-00013510: 656c 662e 7379 6e63 5f73 746f 7265 2e67  elf.sync_store.g
-00013520: 6574 5f73 796e 635f 6d6f 6465 2829 2069  et_sync_mode() i
-00013530: 7320 4661 6c73 653a 0a20 2020 2020 2020  s False:.       
-00013540: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
-00013550: 7365 6e64 5f70 6561 6b5f 746f 5f74 696d  send_peak_to_tim
-00013560: 656c 6f72 6473 2862 6c6f 636b 290a 0a20  elords(block).. 
-00013570: 2020 2020 2020 2020 2020 2023 2054 656c             # Tel
-00013580: 6c20 6675 6c6c 206e 6f64 6573 2061 626f  l full nodes abo
-00013590: 7574 2074 6865 206e 6577 2070 6561 6b0a  ut the new peak.
-000135a0: 2020 2020 2020 2020 2020 2020 6d73 6720              msg 
-000135b0: 3d20 6d61 6b65 5f6d 7367 280a 2020 2020  = make_msg(.    
-000135c0: 2020 2020 2020 2020 2020 2020 5072 6f74              Prot
-000135d0: 6f63 6f6c 4d65 7373 6167 6554 7970 6573  ocolMessageTypes
-000135e0: 2e6e 6577 5f70 6561 6b2c 0a20 2020 2020  .new_peak,.     
-000135f0: 2020 2020 2020 2020 2020 2066 756c 6c5f             full_
-00013600: 6e6f 6465 5f70 726f 746f 636f 6c2e 4e65  node_protocol.Ne
-00013610: 7750 6561 6b28 0a20 2020 2020 2020 2020  wPeak(.         
-00013620: 2020 2020 2020 2020 2020 2072 6563 6f72             recor
-00013630: 642e 6865 6164 6572 5f68 6173 682c 0a20  d.header_hash,. 
-00013640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013650: 2020 2072 6563 6f72 642e 6865 6967 6874     record.height
-00013660: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00013670: 2020 2020 2020 7265 636f 7264 2e77 6569        record.wei
-00013680: 6768 742c 0a20 2020 2020 2020 2020 2020  ght,.           
-00013690: 2020 2020 2020 2020 2073 7461 7465 5f63           state_c
-000136a0: 6861 6e67 655f 7375 6d6d 6172 792e 666f  hange_summary.fo
-000136b0: 726b 5f68 6569 6768 742c 0a20 2020 2020  rk_height,.     
-000136c0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-000136d0: 6c6f 636b 2e72 6577 6172 645f 6368 6169  lock.reward_chai
-000136e0: 6e5f 626c 6f63 6b2e 6765 745f 756e 6669  n_block.get_unfi
-000136f0: 6e69 7368 6564 2829 2e67 6574 5f68 6173  nished().get_has
-00013700: 6828 292c 0a20 2020 2020 2020 2020 2020  h(),.           
-00013710: 2020 2020 2029 2c0a 2020 2020 2020 2020       ),.        
-00013720: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-00013730: 2020 6966 2070 6565 7220 6973 206e 6f74    if peer is not
-00013740: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00013750: 2020 2020 2020 2061 7761 6974 2073 656c         await sel
-00013760: 662e 7365 7276 6572 2e73 656e 645f 746f  f.server.send_to
-00013770: 5f61 6c6c 285b 6d73 675d 2c20 4e6f 6465  _all([msg], Node
-00013780: 5479 7065 2e46 554c 4c5f 4e4f 4445 2c20  Type.FULL_NODE, 
-00013790: 7065 6572 2e70 6565 725f 6e6f 6465 5f69  peer.peer_node_i
-000137a0: 6429 0a20 2020 2020 2020 2020 2020 2065  d).            e
-000137b0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000137c0: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
-000137d0: 7365 7276 6572 2e73 656e 645f 746f 5f61  server.send_to_a
-000137e0: 6c6c 285b 6d73 675d 2c20 4e6f 6465 5479  ll([msg], NodeTy
-000137f0: 7065 2e46 554c 4c5f 4e4f 4445 290a 0a20  pe.FULL_NODE).. 
-00013800: 2020 2020 2020 2063 6f69 6e5f 6869 6e74         coin_hint
-00013810: 733a 2044 6963 745b 6279 7465 7333 322c  s: Dict[bytes32,
-00013820: 2062 7974 6573 3332 5d20 3d20 7b0a 2020   bytes32] = {.  
-00013830: 2020 2020 2020 2020 2020 636f 696e 5f69            coin_i
-00013840: 643a 2062 7974 6573 3332 2868 696e 7429  d: bytes32(hint)
-00013850: 2066 6f72 2063 6f69 6e5f 6964 2c20 6869   for coin_id, hi
-00013860: 6e74 2069 6e20 7070 705f 7265 7375 6c74  nt in ppp_result
-00013870: 2e68 696e 7473 2069 6620 6c65 6e28 6869  .hints if len(hi
-00013880: 6e74 2920 3d3d 2033 320a 2020 2020 2020  nt) == 32.      
-00013890: 2020 7d0a 0a20 2020 2020 2020 2070 6561    }..        pea
-000138a0: 6b20 3d20 5065 616b 280a 2020 2020 2020  k = Peak(.      
-000138b0: 2020 2020 2020 7374 6174 655f 6368 616e        state_chan
-000138c0: 6765 5f73 756d 6d61 7279 2e70 6561 6b2e  ge_summary.peak.
-000138d0: 6865 6164 6572 5f68 6173 682c 2073 7461  header_hash, sta
-000138e0: 7465 5f63 6861 6e67 655f 7375 6d6d 6172  te_change_summar
-000138f0: 792e 7065 616b 2e68 6569 6768 742c 2073  y.peak.height, s
-00013900: 7461 7465 5f63 6861 6e67 655f 7375 6d6d  tate_change_summ
-00013910: 6172 792e 7065 616b 2e77 6569 6768 740a  ary.peak.weight.
-00013920: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-00013930: 2020 2023 204c 6f6f 6b73 2075 7020 636f     # Looks up co
-00013940: 696e 2072 6563 6f72 6473 2069 6e20 4442  in records in DB
-00013950: 2066 6f72 2074 6865 2063 6f69 6e73 2074   for the coins t
-00013960: 6861 7420 7761 6c6c 6574 7320 6172 6520  hat wallets are 
-00013970: 696e 7465 7265 7374 6564 2069 6e0a 2020  interested in.  
-00013980: 2020 2020 2020 6e65 775f 7374 6174 6573        new_states
-00013990: 203d 2061 7761 6974 2073 656c 662e 636f   = await self.co
-000139a0: 696e 5f73 746f 7265 2e67 6574 5f63 6f69  in_store.get_coi
-000139b0: 6e5f 7265 636f 7264 7328 7070 705f 7265  n_records(ppp_re
-000139c0: 7375 6c74 2e6c 6f6f 6b75 705f 636f 696e  sult.lookup_coin
-000139d0: 5f69 6473 290a 0a20 2020 2020 2020 2061  _ids)..        a
-000139e0: 7761 6974 2073 656c 662e 7761 6c6c 6574  wait self.wallet
-000139f0: 5f73 796e 635f 7175 6575 652e 7075 7428  _sync_queue.put(
-00013a00: 0a20 2020 2020 2020 2020 2020 2057 616c  .            Wal
-00013a10: 6c65 7455 7064 6174 6528 0a20 2020 2020  letUpdate(.     
-00013a20: 2020 2020 2020 2020 2020 2073 7461 7465             state
-00013a30: 5f63 6861 6e67 655f 7375 6d6d 6172 792e  _change_summary.
-00013a40: 666f 726b 5f68 6569 6768 742c 0a20 2020  fork_height,.   
-00013a50: 2020 2020 2020 2020 2020 2020 2070 6561               pea
-00013a60: 6b2c 0a20 2020 2020 2020 2020 2020 2020  k,.             
-00013a70: 2020 2073 7461 7465 5f63 6861 6e67 655f     state_change_
-00013a80: 7375 6d6d 6172 792e 726f 6c6c 6564 5f62  summary.rolled_b
-00013a90: 6163 6b5f 7265 636f 7264 7320 2b20 6e65  ack_records + ne
-00013aa0: 775f 7374 6174 6573 2c0a 2020 2020 2020  w_states,.      
-00013ab0: 2020 2020 2020 2020 2020 636f 696e 5f68            coin_h
-00013ac0: 696e 7473 2c0a 2020 2020 2020 2020 2020  ints,.          
-00013ad0: 2020 290a 2020 2020 2020 2020 290a 0a20    ).        ).. 
-00013ae0: 2020 2020 2020 2073 656c 662e 5f73 7461         self._sta
-00013af0: 7465 5f63 6861 6e67 6564 2822 6e65 775f  te_changed("new_
-00013b00: 7065 616b 2229 0a0a 2020 2020 6173 796e  peak")..    asyn
-00013b10: 6320 6465 6620 6164 645f 626c 6f63 6b28  c def add_block(
-00013b20: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
-00013b30: 2020 2020 2020 2062 6c6f 636b 3a20 4675         block: Fu
-00013b40: 6c6c 426c 6f63 6b2c 0a20 2020 2020 2020  llBlock,.       
-00013b50: 2070 6565 723a 204f 7074 696f 6e61 6c5b   peer: Optional[
-00013b60: 5753 4368 6961 436f 6e6e 6563 7469 6f6e  WSChiaConnection
-00013b70: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 2020  ] = None,.      
-00013b80: 2020 7261 6973 655f 6f6e 5f64 6973 636f    raise_on_disco
-00013b90: 6e6e 6563 7465 643a 2062 6f6f 6c20 3d20  nnected: bool = 
-00013ba0: 4661 6c73 652c 0a20 2020 2020 2020 2066  False,.        f
-00013bb0: 6f72 6b5f 696e 666f 3a20 4f70 7469 6f6e  ork_info: Option
-00013bc0: 616c 5b46 6f72 6b49 6e66 6f5d 203d 204e  al[ForkInfo] = N
-00013bd0: 6f6e 652c 0a20 2020 2029 202d 3e20 4f70  one,.    ) -> Op
-00013be0: 7469 6f6e 616c 5b4d 6573 7361 6765 5d3a  tional[Message]:
-00013bf0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00013c00: 2020 2020 2041 6464 2061 2066 756c 6c20       Add a full 
-00013c10: 626c 6f63 6b20 6672 6f6d 2061 2070 6565  block from a pee
-00013c20: 7220 6675 6c6c 206e 6f64 6520 286f 7220  r full node (or 
-00013c30: 6f75 7273 656c 7665 7329 2e0a 2020 2020  ourselves)..    
-00013c40: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00013c50: 6966 2073 656c 662e 7379 6e63 5f73 746f  if self.sync_sto
-00013c60: 7265 2e67 6574 5f73 796e 635f 6d6f 6465  re.get_sync_mode
-00013c70: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
-00013c80: 7265 7475 726e 204e 6f6e 650a 0a20 2020  return None..   
-00013c90: 2020 2020 2023 2041 6464 7320 7468 6520       # Adds the 
-00013ca0: 626c 6f63 6b20 746f 2073 6565 6e2c 2061  block to seen, a
-00013cb0: 6e64 2063 6865 636b 2069 6620 6974 2773  nd check if it's
-00013cc0: 2073 6565 6e20 6265 666f 7265 2028 7768   seen before (wh
-00013cd0: 6963 6820 6d65 616e 7320 6865 6164 6572  ich means header
-00013ce0: 2069 7320 696e 206d 656d 6f72 7929 0a20   is in memory). 
-00013cf0: 2020 2020 2020 2068 6561 6465 725f 6861         header_ha
-00013d00: 7368 203d 2062 6c6f 636b 2e68 6561 6465  sh = block.heade
-00013d10: 725f 6861 7368 0a20 2020 2020 2020 2069  r_hash.        i
-00013d20: 6620 7365 6c66 2e62 6c6f 636b 6368 6169  f self.blockchai
-00013d30: 6e2e 636f 6e74 6169 6e73 5f62 6c6f 636b  n.contains_block
-00013d40: 2868 6561 6465 725f 6861 7368 293a 0a20  (header_hash):. 
-00013d50: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00013d60: 6e20 4e6f 6e65 0a0a 2020 2020 2020 2020  n None..        
-00013d70: 7072 655f 7661 6c69 6461 7469 6f6e 5f72  pre_validation_r
-00013d80: 6573 756c 743a 204f 7074 696f 6e61 6c5b  esult: Optional[
-00013d90: 5072 6556 616c 6964 6174 696f 6e52 6573  PreValidationRes
-00013da0: 756c 745d 203d 204e 6f6e 650a 2020 2020  ult] = None.    
-00013db0: 2020 2020 6966 2028 0a20 2020 2020 2020      if (.       
-00013dc0: 2020 2020 2062 6c6f 636b 2e69 735f 7472       block.is_tr
-00013dd0: 616e 7361 6374 696f 6e5f 626c 6f63 6b28  ansaction_block(
-00013de0: 290a 2020 2020 2020 2020 2020 2020 616e  ).            an
-00013df0: 6420 626c 6f63 6b2e 7472 616e 7361 6374  d block.transact
-00013e00: 696f 6e73 5f69 6e66 6f20 6973 206e 6f74  ions_info is not
-00013e10: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-00013e20: 2020 616e 6420 626c 6f63 6b2e 7472 616e    and block.tran
-00013e30: 7361 6374 696f 6e73 5f69 6e66 6f2e 6765  sactions_info.ge
-00013e40: 6e65 7261 746f 725f 726f 6f74 2021 3d20  nerator_root != 
-00013e50: 6279 7465 7328 5b30 5d20 2a20 3332 290a  bytes([0] * 32).
-00013e60: 2020 2020 2020 2020 2020 2020 616e 6420              and 
-00013e70: 626c 6f63 6b2e 7472 616e 7361 6374 696f  block.transactio
-00013e80: 6e73 5f67 656e 6572 6174 6f72 2069 7320  ns_generator is 
-00013e90: 4e6f 6e65 0a20 2020 2020 2020 2029 3a0a  None.        ):.
-00013ea0: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
-00013eb0: 6973 2069 7320 7468 6520 6361 7365 2077  is is the case w
-00013ec0: 6865 7265 2077 6520 616c 7265 6164 7920  here we already 
-00013ed0: 6861 6420 7468 6520 756e 6669 6e69 7368  had the unfinish
-00013ee0: 6564 2062 6c6f 636b 2c20 616e 6420 6173  ed block, and as
-00013ef0: 6b65 6420 666f 7220 7468 6973 2062 6c6f  ked for this blo
-00013f00: 636b 2077 6974 686f 7574 0a20 2020 2020  ck without.     
-00013f10: 2020 2020 2020 2023 2074 6865 2074 7261         # the tra
-00013f20: 6e73 6163 7469 6f6e 7320 2873 696e 6365  nsactions (since
-00013f30: 2077 6520 616c 7265 6164 7920 6861 6420   we already had 
-00013f40: 7468 656d 292e 2054 6865 7265 666f 7265  them). Therefore
-00013f50: 2c20 6865 7265 2077 6520 6164 6420 7468  , here we add th
-00013f60: 6520 7472 616e 7361 6374 696f 6e73 2e0a  e transactions..
-00013f70: 2020 2020 2020 2020 2020 2020 756e 6669              unfi
-00013f80: 6e69 7368 6564 5f72 683a 2062 7974 6573  nished_rh: bytes
-00013f90: 3332 203d 2062 6c6f 636b 2e72 6577 6172  32 = block.rewar
-00013fa0: 645f 6368 6169 6e5f 626c 6f63 6b2e 6765  d_chain_block.ge
-00013fb0: 745f 756e 6669 6e69 7368 6564 2829 2e67  t_unfinished().g
-00013fc0: 6574 5f68 6173 6828 290a 2020 2020 2020  et_hash().      
-00013fd0: 2020 2020 2020 666f 6c69 6167 655f 6861        foliage_ha
-00013fe0: 7368 3a20 4f70 7469 6f6e 616c 5b62 7974  sh: Optional[byt
-00013ff0: 6573 3332 5d20 3d20 626c 6f63 6b2e 666f  es32] = block.fo
-00014000: 6c69 6167 652e 666f 6c69 6167 655f 7472  liage.foliage_tr
-00014010: 616e 7361 6374 696f 6e5f 626c 6f63 6b5f  ansaction_block_
-00014020: 6861 7368 0a20 2020 2020 2020 2020 2020  hash.           
-00014030: 2061 7373 6572 7420 666f 6c69 6167 655f   assert foliage_
-00014040: 6861 7368 2069 7320 6e6f 7420 4e6f 6e65  hash is not None
-00014050: 0a20 2020 2020 2020 2020 2020 2075 6e66  .            unf
-00014060: 5f65 6e74 7279 3a20 4f70 7469 6f6e 616c  _entry: Optional
-00014070: 5b55 6e66 696e 6973 6865 6442 6c6f 636b  [UnfinishedBlock
-00014080: 456e 7472 795d 203d 2073 656c 662e 6675  Entry] = self.fu
-00014090: 6c6c 5f6e 6f64 655f 7374 6f72 652e 6765  ll_node_store.ge
-000140a0: 745f 756e 6669 6e69 7368 6564 5f62 6c6f  t_unfinished_blo
-000140b0: 636b 5f72 6573 756c 7428 0a20 2020 2020  ck_result(.     
-000140c0: 2020 2020 2020 2020 2020 2075 6e66 696e             unfin
-000140d0: 6973 6865 645f 7268 2c20 666f 6c69 6167  ished_rh, foliag
-000140e0: 655f 6861 7368 0a20 2020 2020 2020 2020  e_hash.         
-000140f0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-00014100: 2069 6620 280a 2020 2020 2020 2020 2020   if (.          
-00014110: 2020 2020 2020 756e 665f 656e 7472 7920        unf_entry 
-00014120: 6973 206e 6f74 204e 6f6e 650a 2020 2020  is not None.    
-00014130: 2020 2020 2020 2020 2020 2020 616e 6420              and 
-00014140: 756e 665f 656e 7472 792e 756e 6669 6e69  unf_entry.unfini
-00014150: 7368 6564 5f62 6c6f 636b 2069 7320 6e6f  shed_block is no
-00014160: 7420 4e6f 6e65 0a20 2020 2020 2020 2020  t None.         
-00014170: 2020 2020 2020 2061 6e64 2075 6e66 5f65         and unf_e
-00014180: 6e74 7279 2e75 6e66 696e 6973 6865 645f  ntry.unfinished_
-00014190: 626c 6f63 6b2e 7472 616e 7361 6374 696f  block.transactio
-000141a0: 6e73 5f67 656e 6572 6174 6f72 2069 7320  ns_generator is 
-000141b0: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
-000141c0: 2020 2020 2020 2020 2061 6e64 2075 6e66           and unf
-000141d0: 5f65 6e74 7279 2e75 6e66 696e 6973 6865  _entry.unfinishe
-000141e0: 645f 626c 6f63 6b2e 666f 6c69 6167 655f  d_block.foliage_
-000141f0: 7472 616e 7361 6374 696f 6e5f 626c 6f63  transaction_bloc
-00014200: 6b20 3d3d 2062 6c6f 636b 2e66 6f6c 6961  k == block.folia
-00014210: 6765 5f74 7261 6e73 6163 7469 6f6e 5f62  ge_transaction_b
-00014220: 6c6f 636b 0a20 2020 2020 2020 2020 2020  lock.           
-00014230: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
-00014240: 2020 2020 2320 5765 2063 6865 636b 6564      # We checked
-00014250: 2074 6861 7420 7468 6520 7472 616e 7361   that the transa
-00014260: 6374 696f 6e20 626c 6f63 6b20 6973 2074  ction block is t
-00014270: 6865 2073 616d 652c 2074 6865 7265 666f  he same, therefo
-00014280: 7265 2061 6c6c 2074 7261 6e73 6163 7469  re all transacti
-00014290: 6f6e 7320 616e 6420 7468 6520 7369 676e  ons and the sign
-000142a0: 6174 7572 650a 2020 2020 2020 2020 2020  ature.          
-000142b0: 2020 2020 2020 2320 6d75 7374 2062 6520        # must be 
-000142c0: 6964 656e 7469 6361 6c20 696e 2074 6865  identical in the
-000142d0: 2075 6e66 696e 6973 6865 6420 616e 6420   unfinished and 
-000142e0: 6669 6e69 7368 6564 2062 6c6f 636b 732e  finished blocks.
-000142f0: 2057 6520 6361 6e20 7468 6572 6566 6f72   We can therefor
-00014300: 6520 7573 6520 7468 6520 6361 6368 652e  e use the cache.
-00014310: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00014320: 2020 2320 7468 6973 2069 7320 6120 7472    # this is a tr
-00014330: 616e 7361 6374 696f 6e20 626c 6f63 6b2c  ansaction block,
-00014340: 2074 6865 2066 6f6c 6961 6765 2068 6173   the foliage has
-00014350: 6820 7368 6f75 6c64 2062 6520 7365 740a  h should be set.
-00014360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014370: 6173 7365 7274 2066 6f6c 6961 6765 5f68  assert foliage_h
-00014380: 6173 6820 6973 206e 6f74 204e 6f6e 650a  ash is not None.
-00014390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000143a0: 7072 655f 7661 6c69 6461 7469 6f6e 5f72  pre_validation_r
-000143b0: 6573 756c 7420 3d20 756e 665f 656e 7472  esult = unf_entr
-000143c0: 792e 7265 7375 6c74 0a20 2020 2020 2020  y.result.       
-000143d0: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
-000143e0: 7072 655f 7661 6c69 6461 7469 6f6e 5f72  pre_validation_r
-000143f0: 6573 756c 7420 6973 206e 6f74 204e 6f6e  esult is not Non
-00014400: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00014410: 2020 626c 6f63 6b20 3d20 626c 6f63 6b2e    block = block.
-00014420: 7265 706c 6163 6528 0a20 2020 2020 2020  replace(.       
-00014430: 2020 2020 2020 2020 2020 2020 2074 7261               tra
-00014440: 6e73 6163 7469 6f6e 735f 6765 6e65 7261  nsactions_genera
-00014450: 746f 723d 756e 665f 656e 7472 792e 756e  tor=unf_entry.un
-00014460: 6669 6e69 7368 6564 5f62 6c6f 636b 2e74  finished_block.t
-00014470: 7261 6e73 6163 7469 6f6e 735f 6765 6e65  ransactions_gene
-00014480: 7261 746f 722c 0a20 2020 2020 2020 2020  rator,.         
-00014490: 2020 2020 2020 2020 2020 2074 7261 6e73             trans
-000144a0: 6163 7469 6f6e 735f 6765 6e65 7261 746f  actions_generato
-000144b0: 725f 7265 665f 6c69 7374 3d75 6e66 5f65  r_ref_list=unf_e
-000144c0: 6e74 7279 2e75 6e66 696e 6973 6865 645f  ntry.unfinished_
-000144d0: 626c 6f63 6b2e 7472 616e 7361 6374 696f  block.transactio
-000144e0: 6e73 5f67 656e 6572 6174 6f72 5f72 6566  ns_generator_ref
-000144f0: 5f6c 6973 742c 0a20 2020 2020 2020 2020  _list,.         
-00014500: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00014510: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00014520: 2020 2020 2020 2020 2020 2023 2057 6520             # We 
-00014530: 7374 696c 6c20 646f 206e 6f74 2068 6176  still do not hav
-00014540: 6520 7468 6520 636f 7272 6563 7420 696e  e the correct in
-00014550: 666f 726d 6174 696f 6e20 666f 7220 7468  formation for th
-00014560: 6973 2062 6c6f 636b 2c20 7065 7268 6170  is block, perhap
-00014570: 7320 7468 6572 6520 6973 2061 2064 7570  s there is a dup
-00014580: 6c69 6361 7465 2062 6c6f 636b 0a20 2020  licate block.   
-00014590: 2020 2020 2020 2020 2020 2020 2023 2077               # w
-000145a0: 6974 6820 7468 6520 7361 6d65 2075 6e66  ith the same unf
-000145b0: 696e 6973 6865 6420 626c 6f63 6b20 6861  inished block ha
-000145c0: 7368 2069 6e20 7468 6520 6361 6368 652c  sh in the cache,
-000145d0: 2073 6f20 7765 206e 6565 6420 746f 2066   so we need to f
-000145e0: 6574 6368 2074 6865 2063 6f72 7265 6374  etch the correct
-000145f0: 206f 6e65 0a20 2020 2020 2020 2020 2020   one.           
-00014600: 2020 2020 2069 6620 7065 6572 2069 7320       if peer is 
-00014610: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00014620: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00014630: 204e 6f6e 650a 0a20 2020 2020 2020 2020   None..         
-00014640: 2020 2020 2020 2062 6c6f 636b 5f72 6573         block_res
-00014650: 706f 6e73 653a 204f 7074 696f 6e61 6c5b  ponse: Optional[
-00014660: 416e 795d 203d 2061 7761 6974 2070 6565  Any] = await pee
-00014670: 722e 6361 6c6c 5f61 7069 280a 2020 2020  r.call_api(.    
-00014680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014690: 4675 6c6c 4e6f 6465 4150 492e 7265 7175  FullNodeAPI.requ
-000146a0: 6573 745f 626c 6f63 6b2c 2066 756c 6c5f  est_block, full_
-000146b0: 6e6f 6465 5f70 726f 746f 636f 6c2e 5265  node_protocol.Re
-000146c0: 7175 6573 7442 6c6f 636b 2862 6c6f 636b  questBlock(block
-000146d0: 2e68 6569 6768 742c 2054 7275 6529 0a20  .height, True). 
-000146e0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-000146f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014700: 2069 6620 626c 6f63 6b5f 7265 7370 6f6e   if block_respon
-00014710: 7365 2069 7320 4e6f 6e65 206f 7220 6e6f  se is None or no
-00014720: 7420 6973 696e 7374 616e 6365 2862 6c6f  t isinstance(blo
-00014730: 636b 5f72 6573 706f 6e73 652c 2066 756c  ck_response, ful
-00014740: 6c5f 6e6f 6465 5f70 726f 746f 636f 6c2e  l_node_protocol.
-00014750: 5265 7370 6f6e 6442 6c6f 636b 293a 0a20  RespondBlock):. 
-00014760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014770: 2020 2073 656c 662e 6c6f 672e 7761 726e     self.log.warn
-00014780: 696e 6728 0a20 2020 2020 2020 2020 2020  ing(.           
-00014790: 2020 2020 2020 2020 2020 2020 2066 2257               f"W
-000147a0: 6173 206e 6f74 2061 626c 6520 746f 2066  as not able to f
-000147b0: 6574 6368 2074 6865 2063 6f72 7265 6374  etch the correct
-000147c0: 2062 6c6f 636b 2066 6f72 2068 6569 6768   block for heigh
-000147d0: 7420 7b62 6c6f 636b 2e68 6569 6768 747d  t {block.height}
-000147e0: 207b 626c 6f63 6b5f 7265 7370 6f6e 7365   {block_response
-000147f0: 7d22 0a20 2020 2020 2020 2020 2020 2020  }".             
-00014800: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00014810: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00014820: 7572 6e20 4e6f 6e65 0a20 2020 2020 2020  urn None.       
-00014830: 2020 2020 2020 2020 206e 6577 5f62 6c6f           new_blo
-00014840: 636b 3a20 4675 6c6c 426c 6f63 6b20 3d20  ck: FullBlock = 
-00014850: 626c 6f63 6b5f 7265 7370 6f6e 7365 2e62  block_response.b
-00014860: 6c6f 636b 0a20 2020 2020 2020 2020 2020  lock.           
-00014870: 2020 2020 2069 6620 6e65 775f 626c 6f63       if new_bloc
-00014880: 6b2e 666f 6c69 6167 655f 7472 616e 7361  k.foliage_transa
-00014890: 6374 696f 6e5f 626c 6f63 6b20 213d 2062  ction_block != b
-000148a0: 6c6f 636b 2e66 6f6c 6961 6765 5f74 7261  lock.foliage_tra
-000148b0: 6e73 6163 7469 6f6e 5f62 6c6f 636b 3a0a  nsaction_block:.
-000148c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000148d0: 2020 2020 7365 6c66 2e6c 6f67 2e77 6172      self.log.war
-000148e0: 6e69 6e67 280a 2020 2020 2020 2020 2020  ning(.          
-000148f0: 2020 2020 2020 2020 2020 2020 2020 6622                f"
-00014900: 5265 6365 6976 6564 2074 6865 2077 726f  Received the wro
-00014910: 6e67 2062 6c6f 636b 2066 6f72 2068 6569  ng block for hei
-00014920: 6768 7420 7b62 6c6f 636b 2e68 6569 6768  ght {block.heigh
-00014930: 747d 207b 6e65 775f 626c 6f63 6b2e 6865  t} {new_block.he
-00014940: 6164 6572 5f68 6173 682e 6865 7828 297d  ader_hash.hex()}
-00014950: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-00014960: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00014970: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00014980: 726e 204e 6f6e 650a 2020 2020 2020 2020  rn None.        
-00014990: 2020 2020 2020 2020 6173 7365 7274 206e          assert n
-000149a0: 6577 5f62 6c6f 636b 2e74 7261 6e73 6163  ew_block.transac
-000149b0: 7469 6f6e 735f 6765 6e65 7261 746f 7220  tions_generator 
-000149c0: 6973 206e 6f74 204e 6f6e 650a 0a20 2020  is not None..   
-000149d0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-000149e0: 662e 6c6f 672e 6465 6275 6728 0a20 2020  f.log.debug(.   
-000149f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014a00: 2066 2257 726f 6e67 2069 6e66 6f20 696e   f"Wrong info in
-00014a10: 2074 6865 2063 6163 6865 2066 6f72 2062   the cache for b
-00014a20: 6820 7b6e 6577 5f62 6c6f 636b 2e68 6561  h {new_block.hea
-00014a30: 6465 725f 6861 7368 2e68 6578 2829 7d2c  der_hash.hex()},
-00014a40: 2022 0a20 2020 2020 2020 2020 2020 2020   ".             
-00014a50: 2020 2020 2020 2066 2274 6865 7265 206d         f"there m
-00014a60: 6967 6874 2062 6520 6d75 6c74 6970 6c65  ight be multiple
-00014a70: 2062 6c6f 636b 7320 6672 6f6d 2074 6865   blocks from the
-00014a80: 2022 0a20 2020 2020 2020 2020 2020 2020   ".             
-00014a90: 2020 2020 2020 2066 2273 616d 6520 6661         f"same fa
-00014aa0: 726d 6572 2077 6974 6820 7468 6520 7361  rmer with the sa
-00014ab0: 6d65 2070 6f73 7061 6365 2e22 0a20 2020  me pospace.".   
-00014ac0: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-00014ad0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00014ae0: 2054 6869 7320 7265 6375 7273 696f 6e20   This recursion 
-00014af0: 656e 6473 2068 6572 652c 2077 6520 6361  ends here, we ca
-00014b00: 6e6e 6f74 2072 6563 7572 7365 2061 6761  nnot recurse aga
-00014b10: 696e 2062 6563 6175 7365 2074 7261 6e73  in because trans
-00014b20: 6163 7469 6f6e 735f 6765 6e65 7261 746f  actions_generato
-00014b30: 7220 6973 206e 6f74 204e 6f6e 650a 2020  r is not None.  
-00014b40: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00014b50: 7475 726e 2061 7761 6974 2073 656c 662e  turn await self.
-00014b60: 6164 645f 626c 6f63 6b28 6e65 775f 626c  add_block(new_bl
-00014b70: 6f63 6b2c 2070 6565 7229 0a20 2020 2020  ock, peer).     
-00014b80: 2020 2073 7461 7465 5f63 6861 6e67 655f     state_change_
-00014b90: 7375 6d6d 6172 793a 204f 7074 696f 6e61  summary: Optiona
-00014ba0: 6c5b 5374 6174 6543 6861 6e67 6553 756d  l[StateChangeSum
-00014bb0: 6d61 7279 5d20 3d20 4e6f 6e65 0a20 2020  mary] = None.   
-00014bc0: 2020 2020 2070 7070 5f72 6573 756c 743a       ppp_result:
-00014bd0: 204f 7074 696f 6e61 6c5b 5065 616b 506f   Optional[PeakPo
-00014be0: 7374 5072 6f63 6573 7369 6e67 5265 7375  stProcessingResu
-00014bf0: 6c74 5d20 3d20 4e6f 6e65 0a20 2020 2020  lt] = None.     
-00014c00: 2020 2061 7379 6e63 2077 6974 6820 7365     async with se
-00014c10: 6c66 2e62 6c6f 636b 6368 6169 6e2e 7072  lf.blockchain.pr
-00014c20: 696f 7269 7479 5f6d 7574 6578 2e61 6371  iority_mutex.acq
-00014c30: 7569 7265 2870 7269 6f72 6974 793d 426c  uire(priority=Bl
-00014c40: 6f63 6b63 6861 696e 4d75 7465 7850 7269  ockchainMutexPri
-00014c50: 6f72 6974 792e 6869 6768 292c 2065 6e61  ority.high), ena
-00014c60: 626c 655f 7072 6f66 696c 6572 280a 2020  ble_profiler(.  
-00014c70: 2020 2020 2020 2020 2020 7365 6c66 2e70            self.p
-00014c80: 726f 6669 6c65 5f62 6c6f 636b 5f76 616c  rofile_block_val
-00014c90: 6964 6174 696f 6e0a 2020 2020 2020 2020  idation.        
-00014ca0: 2920 6173 2070 723a 0a20 2020 2020 2020  ) as pr:.       
-00014cb0: 2020 2020 2023 2041 6674 6572 2061 6371       # After acq
-00014cc0: 7569 7269 6e67 2074 6865 206c 6f63 6b2c  uiring the lock,
-00014cd0: 2063 6865 636b 2061 6761 696e 2c20 6265   check again, be
-00014ce0: 6361 7573 6520 616e 6f74 6865 7220 6173  cause another as
-00014cf0: 796e 6369 6f20 7468 7265 6164 206d 6967  yncio thread mig
-00014d00: 6874 2068 6176 6520 6164 6465 6420 6974  ht have added it
-00014d10: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00014d20: 7365 6c66 2e62 6c6f 636b 6368 6169 6e2e  self.blockchain.
-00014d30: 636f 6e74 6169 6e73 5f62 6c6f 636b 2868  contains_block(h
-00014d40: 6561 6465 725f 6861 7368 293a 0a20 2020  eader_hash):.   
-00014d50: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00014d60: 7572 6e20 4e6f 6e65 0a20 2020 2020 2020  urn None.       
-00014d70: 2020 2020 2076 616c 6964 6174 696f 6e5f       validation_
-00014d80: 7374 6172 7420 3d20 7469 6d65 2e6d 6f6e  start = time.mon
-00014d90: 6f74 6f6e 6963 2829 0a20 2020 2020 2020  otonic().       
-00014da0: 2020 2020 2023 2054 7269 6573 2074 6f20       # Tries to 
-00014db0: 6164 6420 7468 6520 626c 6f63 6b20 746f  add the block to
-00014dc0: 2074 6865 2062 6c6f 636b 6368 6169 6e2c   the blockchain,
-00014dd0: 2069 6620 7765 2061 6c72 6561 6479 2076   if we already v
-00014de0: 616c 6964 6174 6564 2074 7261 6e73 6163  alidated transac
-00014df0: 7469 6f6e 732c 2064 6f6e 2774 2064 6f20  tions, don't do 
-00014e00: 6974 2061 6761 696e 0a20 2020 2020 2020  it again.       
-00014e10: 2020 2020 206e 7063 5f72 6573 756c 7473       npc_results
-00014e20: 203d 207b 7d0a 2020 2020 2020 2020 2020   = {}.          
-00014e30: 2020 6966 2070 7265 5f76 616c 6964 6174    if pre_validat
-00014e40: 696f 6e5f 7265 7375 6c74 2069 7320 6e6f  ion_result is no
-00014e50: 7420 4e6f 6e65 2061 6e64 2070 7265 5f76  t None and pre_v
-00014e60: 616c 6964 6174 696f 6e5f 7265 7375 6c74  alidation_result
-00014e70: 2e6e 7063 5f72 6573 756c 7420 6973 206e  .npc_result is n
-00014e80: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00014e90: 2020 2020 2020 2020 206e 7063 5f72 6573           npc_res
-00014ea0: 756c 7473 5b62 6c6f 636b 2e68 6569 6768  ults[block.heigh
-00014eb0: 745d 203d 2070 7265 5f76 616c 6964 6174  t] = pre_validat
-00014ec0: 696f 6e5f 7265 7375 6c74 2e6e 7063 5f72  ion_result.npc_r
-00014ed0: 6573 756c 740a 0a20 2020 2020 2020 2020  esult..         
-00014ee0: 2020 2023 2044 6f6e 2774 2076 616c 6964     # Don't valid
-00014ef0: 6174 6520 7369 676e 6174 7572 6573 2062  ate signatures b
-00014f00: 6563 6175 7365 2077 6520 7761 6e74 2074  ecause we want t
-00014f10: 6f20 7661 6c69 6461 7465 2074 6865 6d20  o validate them 
-00014f20: 696e 2074 6865 206d 6169 6e20 7468 7265  in the main thre
-00014f30: 6164 206c 6174 6572 2c20 7369 6e63 6520  ad later, since 
-00014f40: 7765 2068 6176 6520 610a 2020 2020 2020  we have a.      
-00014f50: 2020 2020 2020 2320 6361 6368 6520 6176        # cache av
-00014f60: 6169 6c61 626c 650a 2020 2020 2020 2020  ailable.        
-00014f70: 2020 2020 7072 655f 7661 6c69 6461 7469      pre_validati
-00014f80: 6f6e 5f72 6573 756c 7473 203d 2061 7761  on_results = awa
-00014f90: 6974 2073 656c 662e 626c 6f63 6b63 6861  it self.blockcha
-00014fa0: 696e 2e70 7265 5f76 616c 6964 6174 655f  in.pre_validate_
-00014fb0: 626c 6f63 6b73 5f6d 756c 7469 7072 6f63  blocks_multiproc
-00014fc0: 6573 7369 6e67 280a 2020 2020 2020 2020  essing(.        
-00014fd0: 2020 2020 2020 2020 5b62 6c6f 636b 5d2c          [block],
-00014fe0: 206e 7063 5f72 6573 756c 7473 2c20 7661   npc_results, va
-00014ff0: 6c69 6461 7465 5f73 6967 6e61 7475 7265  lidate_signature
-00015000: 733d 4661 6c73 650a 2020 2020 2020 2020  s=False.        
-00015010: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-00015020: 2020 6164 6465 643a 204f 7074 696f 6e61    added: Optiona
-00015030: 6c5b 4164 6442 6c6f 636b 5265 7375 6c74  l[AddBlockResult
-00015040: 5d20 3d20 4e6f 6e65 0a20 2020 2020 2020  ] = None.       
-00015050: 2020 2020 2070 7265 5f76 616c 6964 6174       pre_validat
-00015060: 696f 6e5f 7469 6d65 203d 2074 696d 652e  ion_time = time.
-00015070: 6d6f 6e6f 746f 6e69 6328 2920 2d20 7661  monotonic() - va
-00015080: 6c69 6461 7469 6f6e 5f73 7461 7274 0a20  lidation_start. 
-00015090: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
-000150a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000150b0: 6966 206c 656e 2870 7265 5f76 616c 6964  if len(pre_valid
-000150c0: 6174 696f 6e5f 7265 7375 6c74 7329 203c  ation_results) <
-000150d0: 2031 3a0a 2020 2020 2020 2020 2020 2020   1:.            
-000150e0: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-000150f0: 6c75 6545 7272 6f72 2866 2246 6169 6c65  lueError(f"Faile
-00015100: 6420 746f 2076 616c 6964 6174 6520 626c  d to validate bl
-00015110: 6f63 6b20 7b68 6561 6465 725f 6861 7368  ock {header_hash
-00015120: 7d20 6865 6967 6874 207b 626c 6f63 6b2e  } height {block.
-00015130: 6865 6967 6874 7d22 290a 2020 2020 2020  height}").      
-00015140: 2020 2020 2020 2020 2020 6966 2070 7265            if pre
-00015150: 5f76 616c 6964 6174 696f 6e5f 7265 7375  _validation_resu
-00015160: 6c74 735b 305d 2e65 7272 6f72 2069 7320  lts[0].error is 
-00015170: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00015180: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00015190: 2045 7272 2870 7265 5f76 616c 6964 6174   Err(pre_validat
-000151a0: 696f 6e5f 7265 7375 6c74 735b 305d 2e65  ion_results[0].e
-000151b0: 7272 6f72 2920 3d3d 2045 7272 2e49 4e56  rror) == Err.INV
-000151c0: 414c 4944 5f50 5245 565f 424c 4f43 4b5f  ALID_PREV_BLOCK_
-000151d0: 4841 5348 3a0a 2020 2020 2020 2020 2020  HASH:.          
-000151e0: 2020 2020 2020 2020 2020 2020 2020 6164                ad
-000151f0: 6465 6420 3d20 4164 6442 6c6f 636b 5265  ded = AddBlockRe
-00015200: 7375 6c74 2e44 4953 434f 4e4e 4543 5445  sult.DISCONNECTE
-00015210: 445f 424c 4f43 4b0a 2020 2020 2020 2020  D_BLOCK.        
-00015220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015230: 6572 726f 725f 636f 6465 3a20 4f70 7469  error_code: Opti
-00015240: 6f6e 616c 5b45 7272 5d20 3d20 4572 722e  onal[Err] = Err.
-00015250: 494e 5641 4c49 445f 5052 4556 5f42 4c4f  INVALID_PREV_BLO
-00015260: 434b 5f48 4153 480a 2020 2020 2020 2020  CK_HASH.        
-00015270: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00015280: 2045 7272 2870 7265 5f76 616c 6964 6174   Err(pre_validat
-00015290: 696f 6e5f 7265 7375 6c74 735b 305d 2e65  ion_results[0].e
-000152a0: 7272 6f72 2920 3d3d 2045 7272 2e54 494d  rror) == Err.TIM
-000152b0: 4553 5441 4d50 5f54 4f4f 5f46 4152 5f49  ESTAMP_TOO_FAR_I
-000152c0: 4e5f 4655 5455 5245 3a0a 2020 2020 2020  N_FUTURE:.      
-000152d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000152e0: 2020 7261 6973 6520 5469 6d65 7374 616d    raise Timestam
-000152f0: 7045 7272 6f72 2829 0a20 2020 2020 2020  pError().       
-00015300: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00015310: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00015320: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00015330: 2056 616c 7565 4572 726f 7228 0a20 2020   ValueError(.   
-00015340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015350: 2020 2020 2020 2020 2066 2246 6169 6c65           f"Faile
-00015360: 6420 746f 2076 616c 6964 6174 6520 626c  d to validate bl
-00015370: 6f63 6b20 7b68 6561 6465 725f 6861 7368  ock {header_hash
-00015380: 7d20 6865 6967 6874 2022 0a20 2020 2020  } height ".     
-00015390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000153a0: 2020 2020 2020 2066 227b 626c 6f63 6b2e         f"{block.
-000153b0: 6865 6967 6874 7d3a 207b 4572 7228 7072  height}: {Err(pr
-000153c0: 655f 7661 6c69 6461 7469 6f6e 5f72 6573  e_validation_res
-000153d0: 756c 7473 5b30 5d2e 6572 726f 7229 2e6e  ults[0].error).n
-000153e0: 616d 657d 220a 2020 2020 2020 2020 2020  ame}".          
-000153f0: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+0000d670: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+0000d680: 2020 2020 2020 2020 2320 6966 2077 6527          # if we'
+0000d690: 7265 2073 696d 706c 7920 6578 7465 6e64  re simply extend
+0000d6a0: 696e 6720 7468 6520 6d61 696e 2063 6861  ing the main cha
+0000d6b0: 696e 2c20 6974 2773 2069 6d70 6f72 7461  in, it's importa
+0000d6c0: 6e74 0a20 2020 2020 2020 2020 2020 2020  nt.             
+0000d6d0: 2020 2020 2020 2023 202a 6e6f 742a 2074         # *not* t
+0000d6e0: 6f20 7061 7373 2069 6e20 6120 466f 726b  o pass in a Fork
+0000d6f0: 496e 666f 206f 626a 6563 742c 2061 7320  Info object, as 
+0000d700: 6974 2063 616e 2070 6f74 656e 7469 616c  it can potential
+0000d710: 6c79 0a20 2020 2020 2020 2020 2020 2020  ly.             
+0000d720: 2020 2020 2020 2023 2061 6363 7275 6520         # accrue 
+0000d730: 6120 6c61 7267 6520 7374 6174 6520 2877  a large state (w
+0000d740: 6974 6820 6e6f 2076 616c 7565 2c20 7369  ith no value, si
+0000d750: 6e63 6520 7765 2063 616e 2076 616c 6964  nce we can valid
+0000d760: 6174 650a 2020 2020 2020 2020 2020 2020  ate.            
+0000d770: 2020 2020 2020 2020 2320 6167 6169 6e73          # agains
+0000d780: 7420 7468 6520 436f 696e 5374 6f72 6529  t the CoinStore)
+0000d790: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d7a0: 2020 2020 2069 6620 6e6f 7420 6578 7465       if not exte
+0000d7b0: 6e64 696e 675f 6d61 696e 5f63 6861 696e  nding_main_chain
+0000d7c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000d7d0: 2020 2020 2020 2020 2020 6966 2066 6f72            if for
+0000d7e0: 6b5f 706f 696e 745f 6865 6967 6874 203d  k_point_height =
+0000d7f0: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
+0000d800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d810: 2066 6f72 6b5f 696e 666f 203d 2046 6f72   fork_info = For
+0000d820: 6b49 6e66 6f28 2d31 2c20 2d31 2c20 7365  kInfo(-1, -1, se
+0000d830: 6c66 2e63 6f6e 7374 616e 7473 2e47 454e  lf.constants.GEN
+0000d840: 4553 4953 5f43 4841 4c4c 454e 4745 290a  ESIS_CHALLENGE).
+0000d850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d860: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0000d870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d880: 2020 2020 2020 2020 2020 666f 726b 5f68            fork_h
+0000d890: 6173 6820 3d20 7365 6c66 2e62 6c6f 636b  ash = self.block
+0000d8a0: 6368 6169 6e2e 6865 6967 6874 5f74 6f5f  chain.height_to_
+0000d8b0: 6861 7368 2875 696e 7433 3228 666f 726b  hash(uint32(fork
+0000d8c0: 5f70 6f69 6e74 5f68 6569 6768 7420 2d20  _point_height - 
+0000d8d0: 3129 290a 2020 2020 2020 2020 2020 2020  1)).            
+0000d8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d8f0: 6173 7365 7274 2066 6f72 6b5f 6861 7368  assert fork_hash
+0000d900: 2069 7320 6e6f 7420 4e6f 6e65 0a20 2020   is not None.   
+0000d910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d920: 2020 2020 2020 2020 2066 6f72 6b5f 696e           fork_in
+0000d930: 666f 203d 2046 6f72 6b49 6e66 6f28 666f  fo = ForkInfo(fo
+0000d940: 726b 5f70 6f69 6e74 5f68 6569 6768 7420  rk_point_height 
+0000d950: 2d20 312c 2066 6f72 6b5f 706f 696e 745f  - 1, fork_point_
+0000d960: 6865 6967 6874 202d 2031 2c20 666f 726b  height - 1, fork
+0000d970: 5f68 6173 6829 0a0a 2020 2020 2020 2020  _hash)..        
+0000d980: 2020 2020 2020 2020 7375 6363 6573 732c          success,
+0000d990: 2073 7461 7465 5f63 6861 6e67 655f 7375   state_change_su
+0000d9a0: 6d6d 6172 792c 2065 7272 203d 2061 7761  mmary, err = awa
+0000d9b0: 6974 2073 656c 662e 6164 645f 626c 6f63  it self.add_bloc
+0000d9c0: 6b5f 6261 7463 6828 0a20 2020 2020 2020  k_batch(.       
+0000d9d0: 2020 2020 2020 2020 2020 2020 2062 6c6f               blo
+0000d9e0: 636b 732c 0a20 2020 2020 2020 2020 2020  cks,.           
+0000d9f0: 2020 2020 2020 2020 2070 6565 722e 6765           peer.ge
+0000da00: 745f 7065 6572 5f6c 6f67 6769 6e67 2829  t_peer_logging()
+0000da10: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0000da20: 2020 2020 2020 666f 726b 5f69 6e66 6f2c        fork_info,
+0000da30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000da40: 2020 2020 2073 756d 6d61 7269 6573 2c0a       summaries,.
+0000da50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000da60: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0000da70: 2020 6966 2073 7563 6365 7373 2069 7320    if success is 
+0000da80: 4661 6c73 653a 0a20 2020 2020 2020 2020  False:.         
+0000da90: 2020 2020 2020 2020 2020 2061 7761 6974             await
+0000daa0: 2070 6565 722e 636c 6f73 6528 3630 3029   peer.close(600)
+0000dab0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000dac0: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
+0000dad0: 4572 726f 7228 6622 4661 696c 6564 2074  Error(f"Failed t
+0000dae0: 6f20 7661 6c69 6461 7465 2062 6c6f 636b  o validate block
+0000daf0: 2062 6174 6368 207b 7374 6172 745f 6865   batch {start_he
+0000db00: 6967 6874 7d20 746f 207b 656e 645f 6865  ight} to {end_he
+0000db10: 6967 6874 7d22 290a 2020 2020 2020 2020  ight}").        
+0000db20: 2020 2020 2020 2020 7365 6c66 2e6c 6f67          self.log
+0000db30: 2e69 6e66 6f28 6622 4164 6465 6420 626c  .info(f"Added bl
+0000db40: 6f63 6b73 207b 7374 6172 745f 6865 6967  ocks {start_heig
+0000db50: 6874 7d20 746f 207b 656e 645f 6865 6967  ht} to {end_heig
+0000db60: 6874 7d22 290a 2020 2020 2020 2020 2020  ht}").          
+0000db70: 2020 2020 2020 7065 616b 203d 2073 656c        peak = sel
+0000db80: 662e 626c 6f63 6b63 6861 696e 2e67 6574  f.blockchain.get
+0000db90: 5f70 6561 6b28 290a 2020 2020 2020 2020  _peak().        
+0000dba0: 2020 2020 2020 2020 6966 2073 7461 7465          if state
+0000dbb0: 5f63 6861 6e67 655f 7375 6d6d 6172 7920  _change_summary 
+0000dbc0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0000dbd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dbe0: 2061 7373 6572 7420 7065 616b 2069 7320   assert peak is 
+0000dbf0: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
+0000dc00: 2020 2020 2020 2020 2020 2020 2023 2048               # H
+0000dc10: 696e 7473 206d 7573 7420 6265 2061 6464  ints must be add
+0000dc20: 6564 2074 6f20 7468 6520 4442 2e20 5468  ed to the DB. Th
+0000dc30: 6520 6f74 6865 7220 706f 7374 2d70 726f  e other post-pro
+0000dc40: 6365 7373 696e 6720 7461 736b 7320 6172  cessing tasks ar
+0000dc50: 6520 6e6f 7420 7265 7175 6972 6564 2077  e not required w
+0000dc60: 6865 6e20 7379 6e63 696e 670a 2020 2020  hen syncing.    
+0000dc70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dc80: 6869 6e74 735f 746f 5f61 6464 2c20 5f20  hints_to_add, _ 
+0000dc90: 3d20 6765 745f 6869 6e74 735f 616e 645f  = get_hints_and_
+0000dca0: 7375 6273 6372 6970 7469 6f6e 5f63 6f69  subscription_coi
+0000dcb0: 6e5f 6964 7328 0a20 2020 2020 2020 2020  n_ids(.         
+0000dcc0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000dcd0: 7461 7465 5f63 6861 6e67 655f 7375 6d6d  tate_change_summ
+0000dce0: 6172 792c 0a20 2020 2020 2020 2020 2020  ary,.           
+0000dcf0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000dd00: 662e 7375 6273 6372 6970 7469 6f6e 732e  f.subscriptions.
+0000dd10: 6861 735f 636f 696e 5f73 7562 7363 7269  has_coin_subscri
+0000dd20: 7074 696f 6e2c 0a20 2020 2020 2020 2020  ption,.         
+0000dd30: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000dd40: 656c 662e 7375 6273 6372 6970 7469 6f6e  elf.subscription
+0000dd50: 732e 6861 735f 7075 7a7a 6c65 5f73 7562  s.has_puzzle_sub
+0000dd60: 7363 7269 7074 696f 6e2c 0a20 2020 2020  scription,.     
+0000dd70: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0000dd80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000dd90: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
+0000dda0: 6869 6e74 5f73 746f 7265 2e61 6464 5f68  hint_store.add_h
+0000ddb0: 696e 7473 2868 696e 7473 5f74 6f5f 6164  ints(hints_to_ad
+0000ddc0: 6429 0a20 2020 2020 2020 2020 2020 2020  d).             
+0000ddd0: 2020 2023 204e 6f74 6520 7468 6174 2065     # Note that e
+0000dde0: 6e64 5f68 6569 6768 7420 6973 206e 6f74  nd_height is not
+0000ddf0: 206e 6563 6573 7361 7269 6c79 2074 6865   necessarily the
+0000de00: 2070 6561 6b20 6174 2074 6869 730a 2020   peak at this.  
+0000de10: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000de20: 706f 696e 742e 2049 6e20 6361 7365 206f  point. In case o
+0000de30: 6620 6120 7265 2d6f 7267 2c20 6974 206d  f a re-org, it m
+0000de40: 6179 2065 7665 6e20 6265 2073 6967 6e69  ay even be signi
+0000de50: 6669 6361 6e74 6c79 0a20 2020 2020 2020  ficantly.       
+0000de60: 2020 2020 2020 2020 2023 2068 6967 6865           # highe
+0000de70: 7220 7468 616e 205f 7065 616b 5f68 6569  r than _peak_hei
+0000de80: 6768 742c 2061 6e64 2073 7469 6c6c 206e  ght, and still n
+0000de90: 6f74 2062 6520 7468 6520 7065 616b 2e0a  ot be the peak..
+0000dea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000deb0: 2320 636c 6561 6e5f 626c 6f63 6b5f 7265  # clean_block_re
+0000dec0: 636f 7264 2829 2077 696c 6c20 6e6f 7420  cord() will not 
+0000ded0: 6e65 6365 7373 6172 696c 7920 686f 6e6f  necessarily hono
+0000dee0: 7220 7468 6973 2063 7574 2d6f 6666 0a20  r this cut-off. 
+0000def0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000df00: 2068 6569 6768 742c 2069 6e20 7468 6174   height, in that
+0000df10: 2063 6173 652e 0a20 2020 2020 2020 2020   case..         
+0000df20: 2020 2020 2020 2073 656c 662e 626c 6f63         self.bloc
+0000df30: 6b63 6861 696e 2e63 6c65 616e 5f62 6c6f  kchain.clean_blo
+0000df40: 636b 5f72 6563 6f72 6428 656e 645f 6865  ck_record(end_he
+0000df50: 6967 6874 202d 2073 656c 662e 636f 6e73  ight - self.cons
+0000df60: 7461 6e74 732e 424c 4f43 4b53 5f43 4143  tants.BLOCKS_CAC
+0000df70: 4845 5f53 495a 4529 0a0a 2020 2020 2020  HE_SIZE)..      
+0000df80: 2020 6261 7463 685f 7175 6575 655f 696e    batch_queue_in
+0000df90: 7075 743a 2061 7379 6e63 696f 2e51 7565  put: asyncio.Que
+0000dfa0: 7565 5b4f 7074 696f 6e61 6c5b 5475 706c  ue[Optional[Tupl
+0000dfb0: 655b 5753 4368 6961 436f 6e6e 6563 7469  e[WSChiaConnecti
+0000dfc0: 6f6e 2c20 4c69 7374 5b46 756c 6c42 6c6f  on, List[FullBlo
+0000dfd0: 636b 5d5d 5d5d 203d 2061 7379 6e63 696f  ck]]]] = asyncio
+0000dfe0: 2e51 7565 7565 280a 2020 2020 2020 2020  .Queue(.        
+0000dff0: 2020 2020 6d61 7873 697a 653d 6275 6666      maxsize=buff
+0000e000: 6572 5f73 697a 650a 2020 2020 2020 2020  er_size.        
+0000e010: 290a 2020 2020 2020 2020 6665 7463 685f  ).        fetch_
+0000e020: 7461 736b 203d 2061 7379 6e63 696f 2e54  task = asyncio.T
+0000e030: 6173 6b28 6665 7463 685f 626c 6f63 6b5f  ask(fetch_block_
+0000e040: 6261 7463 6865 7328 6261 7463 685f 7175  batches(batch_qu
+0000e050: 6575 655f 696e 7075 7429 290a 2020 2020  eue_input)).    
+0000e060: 2020 2020 7661 6c69 6461 7465 5f74 6173      validate_tas
+0000e070: 6b20 3d20 6173 796e 6369 6f2e 5461 736b  k = asyncio.Task
+0000e080: 2876 616c 6964 6174 655f 626c 6f63 6b5f  (validate_block_
+0000e090: 6261 7463 6865 7328 6261 7463 685f 7175  batches(batch_qu
+0000e0a0: 6575 655f 696e 7075 7429 290a 2020 2020  eue_input)).    
+0000e0b0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+0000e0c0: 2020 2020 2077 6974 6820 6c6f 675f 6578       with log_ex
+0000e0d0: 6365 7074 696f 6e73 286c 6f67 3d73 656c  ceptions(log=sel
+0000e0e0: 662e 6c6f 672c 206d 6573 7361 6765 3d22  f.log, message="
+0000e0f0: 7379 6e63 2066 726f 6d20 666f 726b 2070  sync from fork p
+0000e100: 6f69 6e74 2066 6169 6c65 6422 293a 0a20  oint failed"):. 
+0000e110: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0000e120: 7761 6974 2061 7379 6e63 696f 2e67 6174  wait asyncio.gat
+0000e130: 6865 7228 6665 7463 685f 7461 736b 2c20  her(fetch_task, 
+0000e140: 7661 6c69 6461 7465 5f74 6173 6b29 0a20  validate_task). 
+0000e150: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+0000e160: 6365 7074 696f 6e3a 0a20 2020 2020 2020  ception:.       
+0000e170: 2020 2020 2061 7373 6572 7420 7661 6c69       assert vali
+0000e180: 6461 7465 5f74 6173 6b2e 646f 6e65 2829  date_task.done()
+0000e190: 0a20 2020 2020 2020 2020 2020 2066 6574  .            fet
+0000e1a0: 6368 5f74 6173 6b2e 6361 6e63 656c 2829  ch_task.cancel()
+0000e1b0: 2020 2320 6e6f 206e 6565 6420 746f 2063    # no need to c
+0000e1c0: 616e 6365 6c20 7661 6c69 6461 7465 5f74  ancel validate_t
+0000e1d0: 6173 6b2c 2069 6620 7765 2065 6e64 2075  ask, if we end u
+0000e1e0: 7020 6865 7265 2076 616c 6964 6174 655f  p here validate_
+0000e1f0: 7461 736b 2069 7320 616c 7265 6164 7920  task is already 
+0000e200: 646f 6e65 0a0a 2020 2020 6465 6620 6765  done..    def ge
+0000e210: 745f 7065 6572 735f 7769 7468 5f70 6561  t_peers_with_pea
+0000e220: 6b28 7365 6c66 2c20 7065 616b 5f68 6173  k(self, peak_has
+0000e230: 683a 2062 7974 6573 3332 2920 2d3e 204c  h: bytes32) -> L
+0000e240: 6973 745b 5753 4368 6961 436f 6e6e 6563  ist[WSChiaConnec
+0000e250: 7469 6f6e 5d3a 0a20 2020 2020 2020 2070  tion]:.        p
+0000e260: 6565 725f 6964 733a 2053 6574 5b62 7974  eer_ids: Set[byt
+0000e270: 6573 3332 5d20 3d20 7365 6c66 2e73 796e  es32] = self.syn
+0000e280: 635f 7374 6f72 652e 6765 745f 7065 6572  c_store.get_peer
+0000e290: 735f 7468 6174 5f68 6176 655f 7065 616b  s_that_have_peak
+0000e2a0: 285b 7065 616b 5f68 6173 685d 290a 2020  ([peak_hash]).  
+0000e2b0: 2020 2020 2020 6966 206c 656e 2870 6565        if len(pee
+0000e2c0: 725f 6964 7329 203d 3d20 303a 0a20 2020  r_ids) == 0:.   
+0000e2d0: 2020 2020 2020 2020 2073 656c 662e 6c6f           self.lo
+0000e2e0: 672e 7761 726e 696e 6728 6622 4e6f 7420  g.warning(f"Not 
+0000e2f0: 7379 6e63 696e 672c 206e 6f20 7065 6572  syncing, no peer
+0000e300: 7320 7769 7468 2068 6561 6465 725f 6861  s with header_ha
+0000e310: 7368 207b 7065 616b 5f68 6173 687d 2022  sh {peak_hash} "
+0000e320: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
+0000e330: 7475 726e 205b 5d0a 2020 2020 2020 2020  turn [].        
+0000e340: 7265 7475 726e 205b 6320 666f 7220 6320  return [c for c 
+0000e350: 696e 2073 656c 662e 7365 7276 6572 2e61  in self.server.a
+0000e360: 6c6c 5f63 6f6e 6e65 6374 696f 6e73 2e76  ll_connections.v
+0000e370: 616c 7565 7328 2920 6966 2063 2e70 6565  alues() if c.pee
+0000e380: 725f 6e6f 6465 5f69 6420 696e 2070 6565  r_node_id in pee
+0000e390: 725f 6964 735d 0a0a 2020 2020 6173 796e  r_ids]..    asyn
+0000e3a0: 6320 6465 6620 5f77 616c 6c65 7473 5f73  c def _wallets_s
+0000e3b0: 796e 635f 7461 736b 5f68 616e 646c 6572  ync_task_handler
+0000e3c0: 2873 656c 6629 202d 3e20 4e6f 6e65 3a0a  (self) -> None:.
+0000e3d0: 2020 2020 2020 2020 7768 696c 6520 6e6f          while no
+0000e3e0: 7420 7365 6c66 2e5f 7368 7574 5f64 6f77  t self._shut_dow
+0000e3f0: 6e3a 0a20 2020 2020 2020 2020 2020 2074  n:.            t
+0000e400: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+0000e410: 2020 2020 7761 6c6c 6574 5f75 7064 6174      wallet_updat
+0000e420: 6520 3d20 6177 6169 7420 7365 6c66 2e77  e = await self.w
+0000e430: 616c 6c65 745f 7379 6e63 5f71 7565 7565  allet_sync_queue
+0000e440: 2e67 6574 2829 0a20 2020 2020 2020 2020  .get().         
+0000e450: 2020 2020 2020 2061 7761 6974 2073 656c         await sel
+0000e460: 662e 7570 6461 7465 5f77 616c 6c65 7473  f.update_wallets
+0000e470: 2877 616c 6c65 745f 7570 6461 7465 290a  (wallet_update).
+0000e480: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+0000e490: 7074 2045 7863 6570 7469 6f6e 3a0a 2020  pt Exception:.  
+0000e4a0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0000e4b0: 6c66 2e6c 6f67 2e65 7863 6570 7469 6f6e  lf.log.exception
+0000e4c0: 2822 5761 6c6c 6574 2073 796e 6320 7461  ("Wallet sync ta
+0000e4d0: 736b 2066 6169 6c75 7265 2229 0a20 2020  sk failure").   
+0000e4e0: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+0000e4f0: 7469 6e75 650a 0a20 2020 2061 7379 6e63  tinue..    async
+0000e500: 2064 6566 2075 7064 6174 655f 7761 6c6c   def update_wall
+0000e510: 6574 7328 7365 6c66 2c20 7761 6c6c 6574  ets(self, wallet
+0000e520: 5f75 7064 6174 653a 2057 616c 6c65 7455  _update: WalletU
+0000e530: 7064 6174 6529 202d 3e20 4e6f 6e65 3a0a  pdate) -> None:.
+0000e540: 2020 2020 2020 2020 7365 6c66 2e6c 6f67          self.log
+0000e550: 2e64 6562 7567 280a 2020 2020 2020 2020  .debug(.        
+0000e560: 2020 2020 6622 7570 6461 7465 5f77 616c      f"update_wal
+0000e570: 6c65 7473 202d 2066 6f72 6b5f 6865 6967  lets - fork_heig
+0000e580: 6874 3a20 7b77 616c 6c65 745f 7570 6461  ht: {wallet_upda
+0000e590: 7465 2e66 6f72 6b5f 6865 6967 6874 7d2c  te.fork_height},
+0000e5a0: 2070 6561 6b5f 6865 6967 6874 3a20 7b77   peak_height: {w
+0000e5b0: 616c 6c65 745f 7570 6461 7465 2e70 6561  allet_update.pea
+0000e5c0: 6b2e 6865 6967 6874 7d22 0a20 2020 2020  k.height}".     
+0000e5d0: 2020 2029 0a20 2020 2020 2020 2063 6861     ).        cha
+0000e5e0: 6e67 6573 5f66 6f72 5f70 6565 723a 2044  nges_for_peer: D
+0000e5f0: 6963 745b 6279 7465 7333 322c 2053 6574  ict[bytes32, Set
+0000e600: 5b43 6f69 6e53 7461 7465 5d5d 203d 207b  [CoinState]] = {
+0000e610: 7d0a 2020 2020 2020 2020 666f 7220 636f  }.        for co
+0000e620: 696e 5f72 6563 6f72 6420 696e 2077 616c  in_record in wal
+0000e630: 6c65 745f 7570 6461 7465 2e63 6f69 6e5f  let_update.coin_
+0000e640: 7265 636f 7264 733a 0a20 2020 2020 2020  records:.       
+0000e650: 2020 2020 2063 6f69 6e5f 6964 203d 2063       coin_id = c
+0000e660: 6f69 6e5f 7265 636f 7264 2e6e 616d 650a  oin_record.name.
+0000e670: 2020 2020 2020 2020 2020 2020 7375 6273              subs
+0000e680: 6372 6962 6564 5f70 6565 7273 203d 2073  cribed_peers = s
+0000e690: 656c 662e 7375 6273 6372 6970 7469 6f6e  elf.subscription
+0000e6a0: 732e 7065 6572 735f 666f 725f 636f 696e  s.peers_for_coin
+0000e6b0: 5f69 6428 636f 696e 5f69 6429 0a20 2020  _id(coin_id).   
+0000e6c0: 2020 2020 2020 2020 2073 7562 7363 7269           subscri
+0000e6d0: 6265 645f 7065 6572 732e 7570 6461 7465  bed_peers.update
+0000e6e0: 2873 656c 662e 7375 6273 6372 6970 7469  (self.subscripti
+0000e6f0: 6f6e 732e 7065 6572 735f 666f 725f 7075  ons.peers_for_pu
+0000e700: 7a7a 6c65 5f68 6173 6828 636f 696e 5f72  zzle_hash(coin_r
+0000e710: 6563 6f72 642e 636f 696e 2e70 757a 7a6c  ecord.coin.puzzl
+0000e720: 655f 6861 7368 2929 0a20 2020 2020 2020  e_hash)).       
+0000e730: 2020 2020 2068 696e 7420 3d20 7761 6c6c       hint = wall
+0000e740: 6574 5f75 7064 6174 652e 6869 6e74 732e  et_update.hints.
+0000e750: 6765 7428 636f 696e 5f69 6429 0a20 2020  get(coin_id).   
+0000e760: 2020 2020 2020 2020 2069 6620 6869 6e74           if hint
+0000e770: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0000e780: 2020 2020 2020 2020 2020 2020 2020 7375                su
+0000e790: 6273 6372 6962 6564 5f70 6565 7273 2e75  bscribed_peers.u
+0000e7a0: 7064 6174 6528 7365 6c66 2e73 7562 7363  pdate(self.subsc
+0000e7b0: 7269 7074 696f 6e73 2e70 6565 7273 5f66  riptions.peers_f
+0000e7c0: 6f72 5f70 757a 7a6c 655f 6861 7368 2868  or_puzzle_hash(h
+0000e7d0: 696e 7429 290a 2020 2020 2020 2020 2020  int)).          
+0000e7e0: 2020 666f 7220 7065 6572 2069 6e20 7375    for peer in su
+0000e7f0: 6273 6372 6962 6564 5f70 6565 7273 3a0a  bscribed_peers:.
+0000e800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e810: 6368 616e 6765 735f 666f 725f 7065 6572  changes_for_peer
+0000e820: 2e73 6574 6465 6661 756c 7428 7065 6572  .setdefault(peer
+0000e830: 2c20 7365 7428 2929 2e61 6464 2863 6f69  , set()).add(coi
+0000e840: 6e5f 7265 636f 7264 2e63 6f69 6e5f 7374  n_record.coin_st
+0000e850: 6174 6529 0a0a 2020 2020 2020 2020 666f  ate)..        fo
+0000e860: 7220 7065 6572 2c20 6368 616e 6765 7320  r peer, changes 
+0000e870: 696e 2063 6861 6e67 6573 5f66 6f72 5f70  in changes_for_p
+0000e880: 6565 722e 6974 656d 7328 293a 0a20 2020  eer.items():.   
+0000e890: 2020 2020 2020 2020 2063 6f6e 6e65 6374           connect
+0000e8a0: 696f 6e20 3d20 7365 6c66 2e73 6572 7665  ion = self.serve
+0000e8b0: 722e 616c 6c5f 636f 6e6e 6563 7469 6f6e  r.all_connection
+0000e8c0: 732e 6765 7428 7065 6572 290a 2020 2020  s.get(peer).    
+0000e8d0: 2020 2020 2020 2020 6966 2063 6f6e 6e65          if conne
+0000e8e0: 6374 696f 6e20 6973 206e 6f74 204e 6f6e  ction is not Non
+0000e8f0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0000e900: 2020 2073 7461 7465 203d 2043 6f69 6e53     state = CoinS
+0000e910: 7461 7465 5570 6461 7465 280a 2020 2020  tateUpdate(.    
+0000e920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e930: 7761 6c6c 6574 5f75 7064 6174 652e 7065  wallet_update.pe
+0000e940: 616b 2e68 6569 6768 742c 0a20 2020 2020  ak.height,.     
+0000e950: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+0000e960: 616c 6c65 745f 7570 6461 7465 2e66 6f72  allet_update.for
+0000e970: 6b5f 6865 6967 6874 2c0a 2020 2020 2020  k_height,.      
+0000e980: 2020 2020 2020 2020 2020 2020 2020 7761                wa
+0000e990: 6c6c 6574 5f75 7064 6174 652e 7065 616b  llet_update.peak
+0000e9a0: 2e68 6561 6465 725f 6861 7368 2c0a 2020  .header_hash,.  
+0000e9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e9c0: 2020 6c69 7374 2863 6861 6e67 6573 292c    list(changes),
+0000e9d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000e9e0: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+0000e9f0: 2020 2061 7761 6974 2063 6f6e 6e65 6374     await connect
+0000ea00: 696f 6e2e 7365 6e64 5f6d 6573 7361 6765  ion.send_message
+0000ea10: 286d 616b 655f 6d73 6728 5072 6f74 6f63  (make_msg(Protoc
+0000ea20: 6f6c 4d65 7373 6167 6554 7970 6573 2e63  olMessageTypes.c
+0000ea30: 6f69 6e5f 7374 6174 655f 7570 6461 7465  oin_state_update
+0000ea40: 2c20 7374 6174 6529 290a 0a20 2020 2020  , state))..     
+0000ea50: 2020 2023 2054 656c 6c20 7761 6c6c 6574     # Tell wallet
+0000ea60: 7320 6162 6f75 7420 7468 6520 6e65 7720  s about the new 
+0000ea70: 7065 616b 0a20 2020 2020 2020 206e 6577  peak.        new
+0000ea80: 5f70 6561 6b5f 6d65 7373 6167 6520 3d20  _peak_message = 
+0000ea90: 6d61 6b65 5f6d 7367 280a 2020 2020 2020  make_msg(.      
+0000eaa0: 2020 2020 2020 5072 6f74 6f63 6f6c 4d65        ProtocolMe
+0000eab0: 7373 6167 6554 7970 6573 2e6e 6577 5f70  ssageTypes.new_p
+0000eac0: 6561 6b5f 7761 6c6c 6574 2c0a 2020 2020  eak_wallet,.    
+0000ead0: 2020 2020 2020 2020 7761 6c6c 6574 5f70          wallet_p
+0000eae0: 726f 746f 636f 6c2e 4e65 7750 6561 6b57  rotocol.NewPeakW
+0000eaf0: 616c 6c65 7428 0a20 2020 2020 2020 2020  allet(.         
+0000eb00: 2020 2020 2020 2077 616c 6c65 745f 7570         wallet_up
+0000eb10: 6461 7465 2e70 6561 6b2e 6865 6164 6572  date.peak.header
+0000eb20: 5f68 6173 682c 0a20 2020 2020 2020 2020  _hash,.         
+0000eb30: 2020 2020 2020 2077 616c 6c65 745f 7570         wallet_up
+0000eb40: 6461 7465 2e70 6561 6b2e 6865 6967 6874  date.peak.height
+0000eb50: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0000eb60: 2020 7761 6c6c 6574 5f75 7064 6174 652e    wallet_update.
+0000eb70: 7065 616b 2e77 6569 6768 742c 0a20 2020  peak.weight,.   
+0000eb80: 2020 2020 2020 2020 2020 2020 2077 616c               wal
+0000eb90: 6c65 745f 7570 6461 7465 2e66 6f72 6b5f  let_update.fork_
+0000eba0: 6865 6967 6874 2c0a 2020 2020 2020 2020  height,.        
+0000ebb0: 2020 2020 292c 0a20 2020 2020 2020 2029      ),.        )
+0000ebc0: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
+0000ebd0: 656c 662e 7365 7276 6572 2e73 656e 645f  elf.server.send_
+0000ebe0: 746f 5f61 6c6c 285b 6e65 775f 7065 616b  to_all([new_peak
+0000ebf0: 5f6d 6573 7361 6765 5d2c 204e 6f64 6554  _message], NodeT
+0000ec00: 7970 652e 5741 4c4c 4554 290a 0a20 2020  ype.WALLET)..   
+0000ec10: 2061 7379 6e63 2064 6566 2061 6464 5f62   async def add_b
+0000ec20: 6c6f 636b 5f62 6174 6368 280a 2020 2020  lock_batch(.    
+0000ec30: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
+0000ec40: 2020 616c 6c5f 626c 6f63 6b73 3a20 4c69    all_blocks: Li
+0000ec50: 7374 5b46 756c 6c42 6c6f 636b 5d2c 0a20  st[FullBlock],. 
+0000ec60: 2020 2020 2020 2070 6565 725f 696e 666f         peer_info
+0000ec70: 3a20 5065 6572 496e 666f 2c0a 2020 2020  : PeerInfo,.    
+0000ec80: 2020 2020 666f 726b 5f69 6e66 6f3a 204f      fork_info: O
+0000ec90: 7074 696f 6e61 6c5b 466f 726b 496e 666f  ptional[ForkInfo
+0000eca0: 5d2c 0a20 2020 2020 2020 2077 705f 7375  ],.        wp_su
+0000ecb0: 6d6d 6172 6965 733a 204f 7074 696f 6e61  mmaries: Optiona
+0000ecc0: 6c5b 4c69 7374 5b53 7562 4570 6f63 6853  l[List[SubEpochS
+0000ecd0: 756d 6d61 7279 5d5d 203d 204e 6f6e 652c  ummary]] = None,
+0000ece0: 0a20 2020 2029 202d 3e20 5475 706c 655b  .    ) -> Tuple[
+0000ecf0: 626f 6f6c 2c20 4f70 7469 6f6e 616c 5b53  bool, Optional[S
+0000ed00: 7461 7465 4368 616e 6765 5375 6d6d 6172  tateChangeSummar
+0000ed10: 795d 2c20 4f70 7469 6f6e 616c 5b45 7272  y], Optional[Err
+0000ed20: 5d5d 3a0a 2020 2020 2020 2020 2320 5072  ]]:.        # Pr
+0000ed30: 6563 6f6e 6469 7469 6f6e 3a20 416c 6c20  econdition: All 
+0000ed40: 626c 6f63 6b73 206d 7573 7420 6265 2063  blocks must be c
+0000ed50: 6f6e 7469 6775 6f75 7320 626c 6f63 6b73  ontiguous blocks
+0000ed60: 2c20 696e 6465 7820 692b 3120 6d75 7374  , index i+1 must
+0000ed70: 2062 6520 7468 6520 7061 7265 6e74 206f   be the parent o
+0000ed80: 6620 696e 6465 7820 690a 2020 2020 2020  f index i.      
+0000ed90: 2020 2320 5265 7475 726e 7320 6120 626f    # Returns a bo
+0000eda0: 6f6c 2066 6f72 2073 7563 6365 7373 2c20  ol for success, 
+0000edb0: 6173 2077 656c 6c20 6173 2061 2053 7461  as well as a Sta
+0000edc0: 7465 4368 616e 6765 5375 6d6d 6172 7920  teChangeSummary 
+0000edd0: 6966 2074 6865 2070 6561 6b20 7761 7320  if the peak was 
+0000ede0: 6164 7661 6e63 6564 0a0a 2020 2020 2020  advanced..      
+0000edf0: 2020 626c 6f63 6b5f 6469 6374 3a20 4469    block_dict: Di
+0000ee00: 6374 5b62 7974 6573 3332 2c20 4675 6c6c  ct[bytes32, Full
+0000ee10: 426c 6f63 6b5d 203d 207b 7d0a 2020 2020  Block] = {}.    
+0000ee20: 2020 2020 666f 7220 626c 6f63 6b20 696e      for block in
+0000ee30: 2061 6c6c 5f62 6c6f 636b 733a 0a20 2020   all_blocks:.   
+0000ee40: 2020 2020 2020 2020 2062 6c6f 636b 5f64           block_d
+0000ee50: 6963 745b 626c 6f63 6b2e 6865 6164 6572  ict[block.header
+0000ee60: 5f68 6173 685d 203d 2062 6c6f 636b 0a0a  _hash] = block..
+0000ee70: 2020 2020 2020 2020 626c 6f63 6b73 5f74          blocks_t
+0000ee80: 6f5f 7661 6c69 6461 7465 3a20 4c69 7374  o_validate: List
+0000ee90: 5b46 756c 6c42 6c6f 636b 5d20 3d20 5b5d  [FullBlock] = []
+0000eea0: 0a20 2020 2020 2020 2066 6f72 2069 2c20  .        for i, 
+0000eeb0: 626c 6f63 6b20 696e 2065 6e75 6d65 7261  block in enumera
+0000eec0: 7465 2861 6c6c 5f62 6c6f 636b 7329 3a0a  te(all_blocks):.
+0000eed0: 2020 2020 2020 2020 2020 2020 6865 6164              head
+0000eee0: 6572 5f68 6173 6820 3d20 626c 6f63 6b2e  er_hash = block.
+0000eef0: 6865 6164 6572 5f68 6173 680a 2020 2020  header_hash.    
+0000ef00: 2020 2020 2020 2020 6966 206e 6f74 2061          if not a
+0000ef10: 7761 6974 2073 656c 662e 626c 6f63 6b63  wait self.blockc
+0000ef20: 6861 696e 2e63 6f6e 7461 696e 735f 626c  hain.contains_bl
+0000ef30: 6f63 6b5f 6672 6f6d 5f64 6228 6865 6164  ock_from_db(head
+0000ef40: 6572 5f68 6173 6829 3a0a 2020 2020 2020  er_hash):.      
+0000ef50: 2020 2020 2020 2020 2020 626c 6f63 6b73            blocks
+0000ef60: 5f74 6f5f 7661 6c69 6461 7465 203d 2061  _to_validate = a
+0000ef70: 6c6c 5f62 6c6f 636b 735b 693a 5d0a 2020  ll_blocks[i:].  
+0000ef80: 2020 2020 2020 2020 2020 2020 2020 6272                br
+0000ef90: 6561 6b0a 0a20 2020 2020 2020 2020 2020  eak..           
+0000efa0: 2069 6620 666f 726b 5f69 6e66 6f20 6973   if fork_info is
+0000efb0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0000efc0: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
+0000efd0: 2020 2020 2020 2020 2020 2020 2320 7468              # th
+0000efe0: 6520 6265 6c6f 7720 7365 6374 696f 6e20  e below section 
+0000eff0: 7570 6461 7465 7320 7468 6520 666f 726b  updates the fork
+0000f000: 5f69 6e66 6f20 6f62 6a65 6374 2c20 6966  _info object, if
+0000f010: 0a20 2020 2020 2020 2020 2020 2023 2074  .            # t
+0000f020: 6865 7265 2069 7320 6f6e 652e 0a0a 2020  here is one...  
+0000f030: 2020 2020 2020 2020 2020 2320 544f 444f            # TODO
+0000f040: 3a20 6974 2073 6565 6d73 2075 6e6e 6563  : it seems unnec
+0000f050: 6573 7361 7279 2074 6f20 7265 7175 6573  essary to reques
+0000f060: 7420 6f76 6572 6c61 7070 696e 6720 626c  t overlapping bl
+0000f070: 6f63 6b20 7261 6e67 6573 0a20 2020 2020  ock ranges.     
+0000f080: 2020 2020 2020 2023 2077 6865 6e20 7379         # when sy
+0000f090: 6e63 696e 670a 2020 2020 2020 2020 2020  ncing.          
+0000f0a0: 2020 6966 2062 6c6f 636b 2e68 6569 6768    if block.heigh
+0000f0b0: 7420 3c3d 2066 6f72 6b5f 696e 666f 2e70  t <= fork_info.p
+0000f0c0: 6561 6b5f 6865 6967 6874 3a0a 2020 2020  eak_height:.    
+0000f0d0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+0000f0e0: 696e 7565 0a0a 2020 2020 2020 2020 2020  inue..          
+0000f0f0: 2020 2320 7765 2068 6176 6520 616c 7265    # we have alre
+0000f100: 6164 7920 7661 6c69 6461 7465 6420 7468  ady validated th
+0000f110: 6973 2062 6c6f 636b 206f 6e63 652c 206e  is block once, n
+0000f120: 6f20 6e65 6564 2074 6f20 646f 2069 7420  o need to do it 
+0000f130: 6167 6169 6e2e 0a20 2020 2020 2020 2020  again..         
+0000f140: 2020 2023 2068 6f77 6576 6572 2c20 6966     # however, if
+0000f150: 2074 6869 7320 626c 6f63 6b20 6973 206e   this block is n
+0000f160: 6f74 2070 6172 7420 6f66 2074 6865 206d  ot part of the m
+0000f170: 6169 6e20 6368 6169 6e2c 2077 6520 6e65  ain chain, we ne
+0000f180: 6564 2074 6f0a 2020 2020 2020 2020 2020  ed to.          
+0000f190: 2020 2320 7570 6461 7465 2074 6865 2066    # update the f
+0000f1a0: 6f72 6b20 636f 6e74 6578 7420 7769 7468  ork context with
+0000f1b0: 2069 7473 2061 6464 6974 696f 6e73 2061   its additions a
+0000f1c0: 6e64 2072 656d 6f76 616c 730a 2020 2020  nd removals.    
+0000f1d0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+0000f1e0: 626c 6f63 6b63 6861 696e 2e68 6569 6768  blockchain.heigh
+0000f1f0: 745f 746f 5f68 6173 6828 626c 6f63 6b2e  t_to_hash(block.
+0000f200: 6865 6967 6874 2920 3d3d 2068 6561 6465  height) == heade
+0000f210: 725f 6861 7368 3a0a 2020 2020 2020 2020  r_hash:.        
+0000f220: 2020 2020 2020 2020 2320 7765 2772 6520          # we're 
+0000f230: 6f6e 2074 6865 206d 6169 6e20 6368 6169  on the main chai
+0000f240: 6e2c 206a 7573 7420 6661 7374 2d66 6f72  n, just fast-for
+0000f250: 7761 7264 2074 6865 2066 6f72 6b20 6865  ward the fork he
+0000f260: 6967 6874 0a20 2020 2020 2020 2020 2020  ight.           
+0000f270: 2020 2020 2066 6f72 6b5f 696e 666f 2e72       fork_info.r
+0000f280: 6573 6574 2862 6c6f 636b 2e68 6569 6768  eset(block.heigh
+0000f290: 742c 2068 6561 6465 725f 6861 7368 290a  t, header_hash).
+0000f2a0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0000f2b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000f2c0: 2020 2320 5765 2068 6176 6520 616c 7265    # We have alre
+0000f2d0: 6164 7920 7661 6c69 6461 7465 6420 7468  ady validated th
+0000f2e0: 6520 626c 6f63 6b2c 2062 7574 2069 6620  e block, but if 
+0000f2f0: 6974 2773 206e 6f74 2070 6172 7420 6f66  it's not part of
+0000f300: 2074 6865 0a20 2020 2020 2020 2020 2020   the.           
+0000f310: 2020 2020 2023 206d 6169 6e20 6368 6169       # main chai
+0000f320: 6e2c 2077 6520 7374 696c 6c20 6e65 6564  n, we still need
+0000f330: 2074 6f20 7265 2d72 756e 2069 7420 746f   to re-run it to
+0000f340: 2075 7064 6174 6520 7468 6520 6164 6469   update the addi
+0000f350: 7469 6f6e 7320 616e 640a 2020 2020 2020  tions and.      
+0000f360: 2020 2020 2020 2020 2020 2320 7265 6d6f            # remo
+0000f370: 7661 6c73 2069 6e20 666f 726b 5f69 6e66  vals in fork_inf
+0000f380: 6f2e 0a20 2020 2020 2020 2020 2020 2020  o..             
+0000f390: 2020 2061 7761 6974 2073 656c 662e 626c     await self.bl
+0000f3a0: 6f63 6b63 6861 696e 2e61 6476 616e 6365  ockchain.advance
+0000f3b0: 5f66 6f72 6b5f 696e 666f 2862 6c6f 636b  _fork_info(block
+0000f3c0: 2c20 666f 726b 5f69 6e66 6f2c 2062 6c6f  , fork_info, blo
+0000f3d0: 636b 5f64 6963 7429 0a20 2020 2020 2020  ck_dict).       
+0000f3e0: 2020 2020 2020 2020 2061 7761 6974 2073           await s
+0000f3f0: 656c 662e 626c 6f63 6b63 6861 696e 2e72  elf.blockchain.r
+0000f400: 756e 5f73 696e 676c 655f 626c 6f63 6b28  un_single_block(
+0000f410: 626c 6f63 6b2c 2066 6f72 6b5f 696e 666f  block, fork_info
+0000f420: 2c20 626c 6f63 6b5f 6469 6374 290a 0a20  , block_dict).. 
+0000f430: 2020 2020 2020 2069 6620 6c65 6e28 626c         if len(bl
+0000f440: 6f63 6b73 5f74 6f5f 7661 6c69 6461 7465  ocks_to_validate
+0000f450: 2920 3d3d 2030 3a0a 2020 2020 2020 2020  ) == 0:.        
+0000f460: 2020 2020 7265 7475 726e 2054 7275 652c      return True,
+0000f470: 204e 6f6e 652c 204e 6f6e 650a 0a20 2020   None, None..   
+0000f480: 2020 2020 2023 2056 616c 6964 6174 6573       # Validates
+0000f490: 2073 6967 6e61 7475 7265 7320 696e 206d   signatures in m
+0000f4a0: 756c 7469 7072 6f63 6573 7369 6e67 2073  ultiprocessing s
+0000f4b0: 696e 6365 2074 6865 7920 7461 6b65 2061  ince they take a
+0000f4c0: 2077 6869 6c65 2c20 616e 6420 7765 2064   while, and we d
+0000f4d0: 6f6e 2774 2068 6176 6520 6361 6368 6564  on't have cached
+0000f4e0: 2074 7261 6e73 6163 7469 6f6e 730a 2020   transactions.  
+0000f4f0: 2020 2020 2020 2320 666f 7220 7468 6573        # for thes
+0000f500: 6520 626c 6f63 6b73 2028 756e 6c69 6b65  e blocks (unlike
+0000f510: 2064 7572 696e 6720 6e6f 726d 616c 206f   during normal o
+0000f520: 7065 7261 7469 6f6e 2077 6865 7265 2077  peration where w
+0000f530: 6520 7661 6c69 6461 7465 206f 6e65 2061  e validate one a
+0000f540: 7420 6120 7469 6d65 290a 2020 2020 2020  t a time).      
+0000f550: 2020 7072 655f 7661 6c69 6461 7465 5f73    pre_validate_s
+0000f560: 7461 7274 203d 2074 696d 652e 6d6f 6e6f  tart = time.mono
+0000f570: 746f 6e69 6328 290a 2020 2020 2020 2020  tonic().        
+0000f580: 7072 655f 7661 6c69 6461 7469 6f6e 5f72  pre_validation_r
+0000f590: 6573 756c 7473 3a20 4c69 7374 5b50 7265  esults: List[Pre
+0000f5a0: 5661 6c69 6461 7469 6f6e 5265 7375 6c74  ValidationResult
+0000f5b0: 5d20 3d20 6177 6169 7420 7365 6c66 2e62  ] = await self.b
+0000f5c0: 6c6f 636b 6368 6169 6e2e 7072 655f 7661  lockchain.pre_va
+0000f5d0: 6c69 6461 7465 5f62 6c6f 636b 735f 6d75  lidate_blocks_mu
+0000f5e0: 6c74 6970 726f 6365 7373 696e 6728 0a20  ltiprocessing(. 
+0000f5f0: 2020 2020 2020 2020 2020 2062 6c6f 636b             block
+0000f600: 735f 746f 5f76 616c 6964 6174 652c 207b  s_to_validate, {
+0000f610: 7d2c 2077 705f 7375 6d6d 6172 6965 733d  }, wp_summaries=
+0000f620: 7770 5f73 756d 6d61 7269 6573 2c20 7661  wp_summaries, va
+0000f630: 6c69 6461 7465 5f73 6967 6e61 7475 7265  lidate_signature
+0000f640: 733d 5472 7565 0a20 2020 2020 2020 2029  s=True.        )
+0000f650: 0a20 2020 2020 2020 2070 7265 5f76 616c  .        pre_val
+0000f660: 6964 6174 655f 656e 6420 3d20 7469 6d65  idate_end = time
+0000f670: 2e6d 6f6e 6f74 6f6e 6963 2829 0a20 2020  .monotonic().   
+0000f680: 2020 2020 2070 7265 5f76 616c 6964 6174       pre_validat
+0000f690: 655f 7469 6d65 203d 2070 7265 5f76 616c  e_time = pre_val
+0000f6a0: 6964 6174 655f 656e 6420 2d20 7072 655f  idate_end - pre_
+0000f6b0: 7661 6c69 6461 7465 5f73 7461 7274 0a0a  validate_start..
+0000f6c0: 2020 2020 2020 2020 7365 6c66 2e6c 6f67          self.log
+0000f6d0: 2e6c 6f67 280a 2020 2020 2020 2020 2020  .log(.          
+0000f6e0: 2020 6c6f 6767 696e 672e 5741 524e 494e    logging.WARNIN
+0000f6f0: 4720 6966 2070 7265 5f76 616c 6964 6174  G if pre_validat
+0000f700: 655f 7469 6d65 203e 2031 3020 656c 7365  e_time > 10 else
+0000f710: 206c 6f67 6769 6e67 2e44 4542 5547 2c0a   logging.DEBUG,.
+0000f720: 2020 2020 2020 2020 2020 2020 6622 426c              f"Bl
+0000f730: 6f63 6b20 7072 652d 7661 6c69 6461 7469  ock pre-validati
+0000f740: 6f6e 3a20 7b70 7265 5f76 616c 6964 6174  on: {pre_validat
+0000f750: 655f 656e 6420 2d20 7072 655f 7661 6c69  e_end - pre_vali
+0000f760: 6461 7465 5f73 7461 7274 3a30 2e32 667d  date_start:0.2f}
+0000f770: 7320 220a 2020 2020 2020 2020 2020 2020  s ".            
+0000f780: 6622 434c 564d 3a20 7b73 756d 285b 7076  f"CLVM: {sum([pv
+0000f790: 722e 7469 6d69 6e67 2f31 3030 302e 3020  r.timing/1000.0 
+0000f7a0: 666f 7220 7076 7220 696e 2070 7265 5f76  for pvr in pre_v
+0000f7b0: 616c 6964 6174 696f 6e5f 7265 7375 6c74  alidation_result
+0000f7c0: 735d 293a 302e 3266 7d73 2022 0a20 2020  s]):0.2f}s ".   
+0000f7d0: 2020 2020 2020 2020 2066 2228 7b6c 656e           f"({len
+0000f7e0: 2862 6c6f 636b 735f 746f 5f76 616c 6964  (blocks_to_valid
+0000f7f0: 6174 6529 7d20 626c 6f63 6b73 2c20 7374  ate)} blocks, st
+0000f800: 6172 7420 6865 6967 6874 3a20 7b62 6c6f  art height: {blo
+0000f810: 636b 735f 746f 5f76 616c 6964 6174 655b  cks_to_validate[
+0000f820: 305d 2e68 6569 6768 747d 2922 2c0a 2020  0].height})",.  
+0000f830: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0000f840: 666f 7220 692c 2062 6c6f 636b 2069 6e20  for i, block in 
+0000f850: 656e 756d 6572 6174 6528 626c 6f63 6b73  enumerate(blocks
+0000f860: 5f74 6f5f 7661 6c69 6461 7465 293a 0a20  _to_validate):. 
+0000f870: 2020 2020 2020 2020 2020 2069 6620 7072             if pr
+0000f880: 655f 7661 6c69 6461 7469 6f6e 5f72 6573  e_validation_res
+0000f890: 756c 7473 5b69 5d2e 6572 726f 7220 6973  ults[i].error is
+0000f8a0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0000f8b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000f8c0: 6c6f 672e 6572 726f 7228 6622 496e 7661  log.error(f"Inva
+0000f8d0: 6c69 6420 626c 6f63 6b20 6672 6f6d 2070  lid block from p
+0000f8e0: 6565 723a 207b 7065 6572 5f69 6e66 6f7d  eer: {peer_info}
+0000f8f0: 207b 4572 7228 7072 655f 7661 6c69 6461   {Err(pre_valida
+0000f900: 7469 6f6e 5f72 6573 756c 7473 5b69 5d2e  tion_results[i].
+0000f910: 6572 726f 7229 7d22 290a 2020 2020 2020  error)}").      
+0000f920: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0000f930: 2046 616c 7365 2c20 4e6f 6e65 2c20 4572   False, None, Er
+0000f940: 7228 7072 655f 7661 6c69 6461 7469 6f6e  r(pre_validation
+0000f950: 5f72 6573 756c 7473 5b69 5d2e 6572 726f  _results[i].erro
+0000f960: 7229 0a0a 2020 2020 2020 2020 6167 675f  r)..        agg_
+0000f970: 7374 6174 655f 6368 616e 6765 5f73 756d  state_change_sum
+0000f980: 6d61 7279 3a20 4f70 7469 6f6e 616c 5b53  mary: Optional[S
+0000f990: 7461 7465 4368 616e 6765 5375 6d6d 6172  tateChangeSummar
+0000f9a0: 795d 203d 204e 6f6e 650a 0a20 2020 2020  y] = None..     
+0000f9b0: 2020 2066 6f72 2069 2c20 626c 6f63 6b20     for i, block 
+0000f9c0: 696e 2065 6e75 6d65 7261 7465 2862 6c6f  in enumerate(blo
+0000f9d0: 636b 735f 746f 5f76 616c 6964 6174 6529  cks_to_validate)
+0000f9e0: 3a0a 2020 2020 2020 2020 2020 2020 6173  :.            as
+0000f9f0: 7365 7274 2070 7265 5f76 616c 6964 6174  sert pre_validat
+0000fa00: 696f 6e5f 7265 7375 6c74 735b 695d 2e72  ion_results[i].r
+0000fa10: 6571 7569 7265 645f 6974 6572 7320 6973  equired_iters is
+0000fa20: 206e 6f74 204e 6f6e 650a 2020 2020 2020   not None.      
+0000fa30: 2020 2020 2020 7374 6174 655f 6368 616e        state_chan
+0000fa40: 6765 5f73 756d 6d61 7279 3a20 4f70 7469  ge_summary: Opti
+0000fa50: 6f6e 616c 5b53 7461 7465 4368 616e 6765  onal[StateChange
+0000fa60: 5375 6d6d 6172 795d 0a20 2020 2020 2020  Summary].       
+0000fa70: 2020 2020 2072 6573 756c 742c 2065 7272       result, err
+0000fa80: 6f72 2c20 7374 6174 655f 6368 616e 6765  or, state_change
+0000fa90: 5f73 756d 6d61 7279 203d 2061 7761 6974  _summary = await
+0000faa0: 2073 656c 662e 626c 6f63 6b63 6861 696e   self.blockchain
+0000fab0: 2e61 6464 5f62 6c6f 636b 280a 2020 2020  .add_block(.    
+0000fac0: 2020 2020 2020 2020 2020 2020 626c 6f63              bloc
+0000fad0: 6b2c 2070 7265 5f76 616c 6964 6174 696f  k, pre_validatio
+0000fae0: 6e5f 7265 7375 6c74 735b 695d 2c20 666f  n_results[i], fo
+0000faf0: 726b 5f69 6e66 6f0a 2020 2020 2020 2020  rk_info.        
+0000fb00: 2020 2020 290a 0a20 2020 2020 2020 2020      )..         
+0000fb10: 2020 2069 6620 7265 7375 6c74 203d 3d20     if result == 
+0000fb20: 4164 6442 6c6f 636b 5265 7375 6c74 2e4e  AddBlockResult.N
+0000fb30: 4557 5f50 4541 4b3a 0a20 2020 2020 2020  EW_PEAK:.       
+0000fb40: 2020 2020 2020 2020 2023 2073 696e 6365           # since
+0000fb50: 2074 6869 7320 626c 6f63 6b20 6a75 7374   this block just
+0000fb60: 2061 6464 6564 2061 206e 6577 2070 6561   added a new pea
+0000fb70: 6b2c 2077 6527 7665 2064 6f6e 2774 206e  k, we've don't n
+0000fb80: 6565 6420 616e 790a 2020 2020 2020 2020  eed any.        
+0000fb90: 2020 2020 2020 2020 2320 666f 726b 2068          # fork h
+0000fba0: 6973 746f 7279 2066 726f 6d20 666f 726b  istory from fork
+0000fbb0: 5f69 6e66 6f20 616e 796d 6f72 650a 2020  _info anymore.  
+0000fbc0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0000fbd0: 2066 6f72 6b5f 696e 666f 2069 7320 6e6f   fork_info is no
+0000fbe0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0000fbf0: 2020 2020 2020 2020 2020 2020 666f 726b              fork
+0000fc00: 5f69 6e66 6f2e 7265 7365 7428 626c 6f63  _info.reset(bloc
+0000fc10: 6b2e 6865 6967 6874 2c20 626c 6f63 6b2e  k.height, block.
+0000fc20: 6865 6164 6572 5f68 6173 6829 0a20 2020  header_hash).   
+0000fc30: 2020 2020 2020 2020 2020 2020 2061 7373               ass
+0000fc40: 6572 7420 7374 6174 655f 6368 616e 6765  ert state_change
+0000fc50: 5f73 756d 6d61 7279 2069 7320 6e6f 7420  _summary is not 
+0000fc60: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+0000fc70: 2020 2020 2023 2053 696e 6365 2061 6c6c       # Since all
+0000fc80: 2062 6c6f 636b 7320 6172 6520 636f 6e74   blocks are cont
+0000fc90: 6967 756f 7573 2c20 7765 2063 616e 2073  iguous, we can s
+0000fca0: 696d 706c 7920 6170 7065 6e64 2074 6865  imply append the
+0000fcb0: 2072 6f6c 6c62 6163 6b20 6368 616e 6765   rollback change
+0000fcc0: 7320 616e 6420 6e70 6320 7265 7375 6c74  s and npc result
+0000fcd0: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
+0000fce0: 2020 6966 2061 6767 5f73 7461 7465 5f63    if agg_state_c
+0000fcf0: 6861 6e67 655f 7375 6d6d 6172 7920 6973  hange_summary is
+0000fd00: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0000fd10: 2020 2020 2020 2020 2020 2061 6767 5f73             agg_s
+0000fd20: 7461 7465 5f63 6861 6e67 655f 7375 6d6d  tate_change_summ
+0000fd30: 6172 7920 3d20 7374 6174 655f 6368 616e  ary = state_chan
+0000fd40: 6765 5f73 756d 6d61 7279 0a20 2020 2020  ge_summary.     
+0000fd50: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0000fd60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000fd70: 2020 2020 2023 204b 6565 7073 2074 6865       # Keeps the
+0000fd80: 206f 6c64 2c20 6f72 6967 696e 616c 2066   old, original f
+0000fd90: 6f72 6b5f 6865 6967 6874 2c20 7369 6e63  ork_height, sinc
+0000fda0: 6520 7468 6520 6e65 7874 2062 6c6f 636b  e the next block
+0000fdb0: 7320 7769 6c6c 2068 6176 6520 666f 726b  s will have fork
+0000fdc0: 2068 6569 6768 7420 682d 310a 2020 2020   height h-1.    
+0000fdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fde0: 2320 4772 6f75 7073 2075 7020 616c 6c20  # Groups up all 
+0000fdf0: 7374 6174 6520 6368 616e 6765 7320 696e  state changes in
+0000fe00: 746f 206f 6e65 0a20 2020 2020 2020 2020  to one.         
+0000fe10: 2020 2020 2020 2020 2020 2061 6767 5f73             agg_s
+0000fe20: 7461 7465 5f63 6861 6e67 655f 7375 6d6d  tate_change_summ
+0000fe30: 6172 7920 3d20 5374 6174 6543 6861 6e67  ary = StateChang
+0000fe40: 6553 756d 6d61 7279 280a 2020 2020 2020  eSummary(.      
+0000fe50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fe60: 2020 7374 6174 655f 6368 616e 6765 5f73    state_change_s
+0000fe70: 756d 6d61 7279 2e70 6561 6b2c 0a20 2020  ummary.peak,.   
+0000fe80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fe90: 2020 2020 2061 6767 5f73 7461 7465 5f63       agg_state_c
+0000fea0: 6861 6e67 655f 7375 6d6d 6172 792e 666f  hange_summary.fo
+0000feb0: 726b 5f68 6569 6768 742c 0a20 2020 2020  rk_height,.     
+0000fec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fed0: 2020 2061 6767 5f73 7461 7465 5f63 6861     agg_state_cha
+0000fee0: 6e67 655f 7375 6d6d 6172 792e 726f 6c6c  nge_summary.roll
+0000fef0: 6564 5f62 6163 6b5f 7265 636f 7264 7320  ed_back_records 
+0000ff00: 2b20 7374 6174 655f 6368 616e 6765 5f73  + state_change_s
+0000ff10: 756d 6d61 7279 2e72 6f6c 6c65 645f 6261  ummary.rolled_ba
+0000ff20: 636b 5f72 6563 6f72 6473 2c0a 2020 2020  ck_records,.    
+0000ff30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ff40: 2020 2020 6167 675f 7374 6174 655f 6368      agg_state_ch
+0000ff50: 616e 6765 5f73 756d 6d61 7279 2e72 656d  ange_summary.rem
+0000ff60: 6f76 616c 7320 2b20 7374 6174 655f 6368  ovals + state_ch
+0000ff70: 616e 6765 5f73 756d 6d61 7279 2e72 656d  ange_summary.rem
+0000ff80: 6f76 616c 732c 0a20 2020 2020 2020 2020  ovals,.         
+0000ff90: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0000ffa0: 6767 5f73 7461 7465 5f63 6861 6e67 655f  gg_state_change_
+0000ffb0: 7375 6d6d 6172 792e 6164 6469 7469 6f6e  summary.addition
+0000ffc0: 7320 2b20 7374 6174 655f 6368 616e 6765  s + state_change
+0000ffd0: 5f73 756d 6d61 7279 2e61 6464 6974 696f  _summary.additio
+0000ffe0: 6e73 2c0a 2020 2020 2020 2020 2020 2020  ns,.            
+0000fff0: 2020 2020 2020 2020 2020 2020 6167 675f              agg_
+00010000: 7374 6174 655f 6368 616e 6765 5f73 756d  state_change_sum
+00010010: 6d61 7279 2e6e 6577 5f72 6577 6172 6473  mary.new_rewards
+00010020: 202b 2073 7461 7465 5f63 6861 6e67 655f   + state_change_
+00010030: 7375 6d6d 6172 792e 6e65 775f 7265 7761  summary.new_rewa
+00010040: 7264 732c 0a20 2020 2020 2020 2020 2020  rds,.           
+00010050: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+00010060: 2020 2020 2020 2065 6c69 6620 7265 7375         elif resu
+00010070: 6c74 203d 3d20 4164 6442 6c6f 636b 5265  lt == AddBlockRe
+00010080: 7375 6c74 2e49 4e56 414c 4944 5f42 4c4f  sult.INVALID_BLO
+00010090: 434b 206f 7220 7265 7375 6c74 203d 3d20  CK or result == 
+000100a0: 4164 6442 6c6f 636b 5265 7375 6c74 2e44  AddBlockResult.D
+000100b0: 4953 434f 4e4e 4543 5445 445f 424c 4f43  ISCONNECTED_BLOC
+000100c0: 4b3a 0a20 2020 2020 2020 2020 2020 2020  K:.             
+000100d0: 2020 2069 6620 6572 726f 7220 6973 206e     if error is n
+000100e0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+000100f0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00010100: 662e 6c6f 672e 6572 726f 7228 6622 4572  f.log.error(f"Er
+00010110: 726f 723a 207b 6572 726f 727d 2c20 496e  ror: {error}, In
+00010120: 7661 6c69 6420 626c 6f63 6b20 6672 6f6d  valid block from
+00010130: 2070 6565 723a 207b 7065 6572 5f69 6e66   peer: {peer_inf
+00010140: 6f7d 2022 290a 2020 2020 2020 2020 2020  o} ").          
+00010150: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
+00010160: 7365 2c20 6167 675f 7374 6174 655f 6368  se, agg_state_ch
+00010170: 616e 6765 5f73 756d 6d61 7279 2c20 6572  ange_summary, er
+00010180: 726f 720a 2020 2020 2020 2020 2020 2020  ror.            
+00010190: 626c 6f63 6b5f 7265 636f 7264 203d 2061  block_record = a
+000101a0: 7761 6974 2073 656c 662e 626c 6f63 6b63  wait self.blockc
+000101b0: 6861 696e 2e67 6574 5f62 6c6f 636b 5f72  hain.get_block_r
+000101c0: 6563 6f72 645f 6672 6f6d 5f64 6228 626c  ecord_from_db(bl
+000101d0: 6f63 6b2e 6865 6164 6572 5f68 6173 6829  ock.header_hash)
+000101e0: 0a20 2020 2020 2020 2020 2020 2061 7373  .            ass
+000101f0: 6572 7420 626c 6f63 6b5f 7265 636f 7264  ert block_record
+00010200: 2069 7320 6e6f 7420 4e6f 6e65 0a20 2020   is not None.   
+00010210: 2020 2020 2020 2020 2069 6620 626c 6f63           if bloc
+00010220: 6b5f 7265 636f 7264 2e73 7562 5f65 706f  k_record.sub_epo
+00010230: 6368 5f73 756d 6d61 7279 5f69 6e63 6c75  ch_summary_inclu
+00010240: 6465 6420 6973 206e 6f74 204e 6f6e 653a  ded is not None:
+00010250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010260: 2069 6620 7365 6c66 2e77 6569 6768 745f   if self.weight_
+00010270: 7072 6f6f 665f 6861 6e64 6c65 7220 6973  proof_handler is
+00010280: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00010290: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+000102a0: 7761 6974 2073 656c 662e 7765 6967 6874  wait self.weight
+000102b0: 5f70 726f 6f66 5f68 616e 646c 6572 2e63  _proof_handler.c
+000102c0: 7265 6174 655f 7072 6576 5f73 7562 5f65  reate_prev_sub_e
+000102d0: 706f 6368 5f73 6567 6d65 6e74 7328 290a  poch_segments().
+000102e0: 2020 2020 2020 2020 6966 2061 6767 5f73          if agg_s
+000102f0: 7461 7465 5f63 6861 6e67 655f 7375 6d6d  tate_change_summ
+00010300: 6172 7920 6973 206e 6f74 204e 6f6e 653a  ary is not None:
+00010310: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00010320: 662e 5f73 7461 7465 5f63 6861 6e67 6564  f._state_changed
+00010330: 2822 6e65 775f 7065 616b 2229 0a20 2020  ("new_peak").   
+00010340: 2020 2020 2020 2020 2073 656c 662e 6c6f           self.lo
+00010350: 672e 6465 6275 6728 0a20 2020 2020 2020  g.debug(.       
+00010360: 2020 2020 2020 2020 2066 2254 6f74 616c           f"Total
+00010370: 2074 696d 6520 666f 7220 7b6c 656e 2862   time for {len(b
+00010380: 6c6f 636b 735f 746f 5f76 616c 6964 6174  locks_to_validat
+00010390: 6529 7d20 626c 6f63 6b73 3a20 7b74 696d  e)} blocks: {tim
+000103a0: 652e 6d6f 6e6f 746f 6e69 6328 2920 2d20  e.monotonic() - 
+000103b0: 7072 655f 7661 6c69 6461 7465 5f73 7461  pre_validate_sta
+000103c0: 7274 7d2c 2022 0a20 2020 2020 2020 2020  rt}, ".         
+000103d0: 2020 2020 2020 2066 2261 6476 616e 6365         f"advance
+000103e0: 643a 2054 7275 6522 0a20 2020 2020 2020  d: True".       
+000103f0: 2020 2020 2029 0a20 2020 2020 2020 2072       ).        r
+00010400: 6574 7572 6e20 5472 7565 2c20 6167 675f  eturn True, agg_
+00010410: 7374 6174 655f 6368 616e 6765 5f73 756d  state_change_sum
+00010420: 6d61 7279 2c20 4e6f 6e65 0a0a 2020 2020  mary, None..    
+00010430: 6173 796e 6320 6465 6620 5f66 696e 6973  async def _finis
+00010440: 685f 7379 6e63 2873 656c 6629 202d 3e20  h_sync(self) -> 
+00010450: 4e6f 6e65 3a0a 2020 2020 2020 2020 2222  None:.        ""
+00010460: 220a 2020 2020 2020 2020 4669 6e61 6c69  ".        Finali
+00010470: 7a65 2073 796e 6320 6279 2073 6574 7469  ze sync by setti
+00010480: 6e67 2073 796e 6320 6d6f 6465 2074 6f20  ng sync mode to 
+00010490: 4661 6c73 652c 2063 6c65 6172 696e 6720  False, clearing 
+000104a0: 616c 6c20 7379 6e63 2069 6e66 6f72 6d61  all sync informa
+000104b0: 7469 6f6e 2c20 616e 6420 6164 6469 6e67  tion, and adding
+000104c0: 2061 6e79 2066 696e 616c 0a20 2020 2020   any final.     
+000104d0: 2020 2062 6c6f 636b 7320 7468 6174 2077     blocks that w
+000104e0: 6520 6861 7665 2066 696e 616c 697a 6564  e have finalized
+000104f0: 2072 6563 656e 746c 792e 0a20 2020 2020   recently..     
+00010500: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
+00010510: 656c 662e 6c6f 672e 696e 666f 2822 6c6f  elf.log.info("lo
+00010520: 6e67 2073 796e 6320 646f 6e65 2229 0a20  ng sync done"). 
+00010530: 2020 2020 2020 2073 656c 662e 7379 6e63         self.sync
+00010540: 5f73 746f 7265 2e73 6574 5f6c 6f6e 675f  _store.set_long_
+00010550: 7379 6e63 2846 616c 7365 290a 2020 2020  sync(False).    
+00010560: 2020 2020 7365 6c66 2e73 796e 635f 7374      self.sync_st
+00010570: 6f72 652e 7365 745f 7379 6e63 5f6d 6f64  ore.set_sync_mod
+00010580: 6528 4661 6c73 6529 0a20 2020 2020 2020  e(False).       
+00010590: 2073 656c 662e 5f73 7461 7465 5f63 6861   self._state_cha
+000105a0: 6e67 6564 2822 7379 6e63 5f6d 6f64 6522  nged("sync_mode"
+000105b0: 290a 2020 2020 2020 2020 6966 2073 656c  ).        if sel
+000105c0: 662e 5f73 6572 7665 7220 6973 204e 6f6e  f._server is Non
+000105d0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+000105e0: 6574 7572 6e20 4e6f 6e65 0a0a 2020 2020  eturn None..    
+000105f0: 2020 2020 6173 796e 6320 7769 7468 2073      async with s
+00010600: 656c 662e 626c 6f63 6b63 6861 696e 2e70  elf.blockchain.p
+00010610: 7269 6f72 6974 795f 6d75 7465 782e 6163  riority_mutex.ac
+00010620: 7175 6972 6528 7072 696f 7269 7479 3d42  quire(priority=B
+00010630: 6c6f 636b 6368 6169 6e4d 7574 6578 5072  lockchainMutexPr
+00010640: 696f 7269 7479 2e68 6967 6829 3a0a 2020  iority.high):.  
+00010650: 2020 2020 2020 2020 2020 7065 616b 3a20            peak: 
+00010660: 4f70 7469 6f6e 616c 5b42 6c6f 636b 5265  Optional[BlockRe
+00010670: 636f 7264 5d20 3d20 7365 6c66 2e62 6c6f  cord] = self.blo
+00010680: 636b 6368 6169 6e2e 6765 745f 7065 616b  ckchain.get_peak
+00010690: 2829 0a20 2020 2020 2020 2020 2020 2070  ().            p
+000106a0: 6561 6b5f 6662 3a20 4f70 7469 6f6e 616c  eak_fb: Optional
+000106b0: 5b46 756c 6c42 6c6f 636b 5d20 3d20 6177  [FullBlock] = aw
+000106c0: 6169 7420 7365 6c66 2e62 6c6f 636b 6368  ait self.blockch
+000106d0: 6169 6e2e 6765 745f 6675 6c6c 5f70 6561  ain.get_full_pea
+000106e0: 6b28 290a 2020 2020 2020 2020 2020 2020  k().            
+000106f0: 6966 2070 6561 6b5f 6662 2069 7320 6e6f  if peak_fb is no
+00010700: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00010710: 2020 2020 2020 2020 6173 7365 7274 2070          assert p
+00010720: 6561 6b20 6973 206e 6f74 204e 6f6e 650a  eak is not None.
+00010730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010740: 7374 6174 655f 6368 616e 6765 5f73 756d  state_change_sum
+00010750: 6d61 7279 203d 2053 7461 7465 4368 616e  mary = StateChan
+00010760: 6765 5375 6d6d 6172 7928 7065 616b 2c20  geSummary(peak, 
+00010770: 7569 6e74 3332 286d 6178 2870 6561 6b2e  uint32(max(peak.
+00010780: 6865 6967 6874 202d 2031 2c20 3029 292c  height - 1, 0)),
+00010790: 205b 5d2c 205b 5d2c 205b 5d2c 205b 5d29   [], [], [], [])
+000107a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000107b0: 2070 7070 5f72 6573 756c 743a 2050 6561   ppp_result: Pea
+000107c0: 6b50 6f73 7450 726f 6365 7373 696e 6752  kPostProcessingR
+000107d0: 6573 756c 7420 3d20 6177 6169 7420 7365  esult = await se
+000107e0: 6c66 2e70 6561 6b5f 706f 7374 5f70 726f  lf.peak_post_pro
+000107f0: 6365 7373 696e 6728 0a20 2020 2020 2020  cessing(.       
+00010800: 2020 2020 2020 2020 2020 2020 2070 6561               pea
+00010810: 6b5f 6662 2c20 7374 6174 655f 6368 616e  k_fb, state_chan
+00010820: 6765 5f73 756d 6d61 7279 2c20 4e6f 6e65  ge_summary, None
+00010830: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010840: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+00010850: 2020 2061 7761 6974 2073 656c 662e 7065     await self.pe
+00010860: 616b 5f70 6f73 745f 7072 6f63 6573 7369  ak_post_processi
+00010870: 6e67 5f32 2870 6561 6b5f 6662 2c20 4e6f  ng_2(peak_fb, No
+00010880: 6e65 2c20 7374 6174 655f 6368 616e 6765  ne, state_change
+00010890: 5f73 756d 6d61 7279 2c20 7070 705f 7265  _summary, ppp_re
+000108a0: 7375 6c74 290a 0a20 2020 2020 2020 2069  sult)..        i
+000108b0: 6620 7065 616b 2069 7320 6e6f 7420 4e6f  f peak is not No
+000108c0: 6e65 2061 6e64 2073 656c 662e 7765 6967  ne and self.weig
+000108d0: 6874 5f70 726f 6f66 5f68 616e 646c 6572  ht_proof_handler
+000108e0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+000108f0: 2020 2020 2020 2020 2020 6177 6169 7420            await 
+00010900: 7365 6c66 2e77 6569 6768 745f 7072 6f6f  self.weight_proo
+00010910: 665f 6861 6e64 6c65 722e 6765 745f 7072  f_handler.get_pr
+00010920: 6f6f 665f 6f66 5f77 6569 6768 7428 7065  oof_of_weight(pe
+00010930: 616b 2e68 6561 6465 725f 6861 7368 290a  ak.header_hash).
+00010940: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00010950: 2e5f 7374 6174 655f 6368 616e 6765 6428  ._state_changed(
+00010960: 2262 6c6f 636b 2229 0a0a 2020 2020 6465  "block")..    de
+00010970: 6620 6861 735f 7661 6c69 645f 706f 6f6c  f has_valid_pool
+00010980: 5f73 6967 2873 656c 662c 2062 6c6f 636b  _sig(self, block
+00010990: 3a20 556e 696f 6e5b 556e 6669 6e69 7368  : Union[Unfinish
+000109a0: 6564 426c 6f63 6b2c 2046 756c 6c42 6c6f  edBlock, FullBlo
+000109b0: 636b 5d29 202d 3e20 626f 6f6c 3a0a 2020  ck]) -> bool:.  
+000109c0: 2020 2020 2020 6966 2028 0a20 2020 2020        if (.     
+000109d0: 2020 2020 2020 2062 6c6f 636b 2e66 6f6c         block.fol
+000109e0: 6961 6765 2e66 6f6c 6961 6765 5f62 6c6f  iage.foliage_blo
+000109f0: 636b 5f64 6174 612e 706f 6f6c 5f74 6172  ck_data.pool_tar
+00010a00: 6765 740a 2020 2020 2020 2020 2020 2020  get.            
+00010a10: 3d3d 2050 6f6f 6c54 6172 6765 7428 7365  == PoolTarget(se
+00010a20: 6c66 2e63 6f6e 7374 616e 7473 2e47 454e  lf.constants.GEN
+00010a30: 4553 4953 5f50 5245 5f46 4152 4d5f 504f  ESIS_PRE_FARM_PO
+00010a40: 4f4c 5f50 555a 5a4c 455f 4841 5348 2c20  OL_PUZZLE_HASH, 
+00010a50: 7569 6e74 3332 2830 2929 0a20 2020 2020  uint32(0)).     
+00010a60: 2020 2020 2020 2061 6e64 2062 6c6f 636b         and block
+00010a70: 2e66 6f6c 6961 6765 2e70 7265 765f 626c  .foliage.prev_bl
+00010a80: 6f63 6b5f 6861 7368 2021 3d20 7365 6c66  ock_hash != self
+00010a90: 2e63 6f6e 7374 616e 7473 2e47 454e 4553  .constants.GENES
+00010aa0: 4953 5f43 4841 4c4c 454e 4745 0a20 2020  IS_CHALLENGE.   
+00010ab0: 2020 2020 2020 2020 2061 6e64 2062 6c6f           and blo
+00010ac0: 636b 2e72 6577 6172 645f 6368 6169 6e5f  ck.reward_chain_
+00010ad0: 626c 6f63 6b2e 7072 6f6f 665f 6f66 5f73  block.proof_of_s
+00010ae0: 7061 6365 2e70 6f6f 6c5f 7075 626c 6963  pace.pool_public
+00010af0: 5f6b 6579 2069 7320 6e6f 7420 4e6f 6e65  _key is not None
+00010b00: 0a20 2020 2020 2020 2029 3a0a 2020 2020  .        ):.    
+00010b10: 2020 2020 2020 2020 6173 7365 7274 2062          assert b
+00010b20: 6c6f 636b 2e66 6f6c 6961 6765 2e66 6f6c  lock.foliage.fol
+00010b30: 6961 6765 5f62 6c6f 636b 5f64 6174 612e  iage_block_data.
+00010b40: 706f 6f6c 5f73 6967 6e61 7475 7265 2069  pool_signature i
+00010b50: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
+00010b60: 2020 2020 2020 2069 6620 6e6f 7420 4175         if not Au
+00010b70: 6753 6368 656d 654d 504c 2e76 6572 6966  gSchemeMPL.verif
+00010b80: 7928 0a20 2020 2020 2020 2020 2020 2020  y(.             
+00010b90: 2020 2062 6c6f 636b 2e72 6577 6172 645f     block.reward_
+00010ba0: 6368 6169 6e5f 626c 6f63 6b2e 7072 6f6f  chain_block.proo
+00010bb0: 665f 6f66 5f73 7061 6365 2e70 6f6f 6c5f  f_of_space.pool_
+00010bc0: 7075 626c 6963 5f6b 6579 2c0a 2020 2020  public_key,.    
+00010bd0: 2020 2020 2020 2020 2020 2020 6279 7465              byte
+00010be0: 7328 626c 6f63 6b2e 666f 6c69 6167 652e  s(block.foliage.
+00010bf0: 666f 6c69 6167 655f 626c 6f63 6b5f 6461  foliage_block_da
+00010c00: 7461 2e70 6f6f 6c5f 7461 7267 6574 292c  ta.pool_target),
+00010c10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010c20: 2062 6c6f 636b 2e66 6f6c 6961 6765 2e66   block.foliage.f
+00010c30: 6f6c 6961 6765 5f62 6c6f 636b 5f64 6174  oliage_block_dat
+00010c40: 612e 706f 6f6c 5f73 6967 6e61 7475 7265  a.pool_signature
+00010c50: 2c0a 2020 2020 2020 2020 2020 2020 293a  ,.            ):
+00010c60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010c70: 2072 6574 7572 6e20 4661 6c73 650a 2020   return False.  
+00010c80: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
+00010c90: 650a 0a20 2020 2061 7379 6e63 2064 6566  e..    async def
+00010ca0: 2073 6967 6e61 6765 5f70 6f69 6e74 5f70   signage_point_p
+00010cb0: 6f73 745f 7072 6f63 6573 7369 6e67 280a  ost_processing(.
+00010cc0: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
+00010cd0: 2020 2020 2020 7265 7175 6573 743a 2066        request: f
+00010ce0: 756c 6c5f 6e6f 6465 5f70 726f 746f 636f  ull_node_protoco
+00010cf0: 6c2e 5265 7370 6f6e 6453 6967 6e61 6765  l.RespondSignage
+00010d00: 506f 696e 742c 0a20 2020 2020 2020 2070  Point,.        p
+00010d10: 6565 723a 2057 5343 6869 6143 6f6e 6e65  eer: WSChiaConne
+00010d20: 6374 696f 6e2c 0a20 2020 2020 2020 2069  ction,.        i
+00010d30: 705f 7375 625f 736c 6f74 3a20 4f70 7469  p_sub_slot: Opti
+00010d40: 6f6e 616c 5b45 6e64 4f66 5375 6253 6c6f  onal[EndOfSubSlo
+00010d50: 7442 756e 646c 655d 2c0a 2020 2020 2920  tBundle],.    ) 
+00010d60: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+00010d70: 2073 656c 662e 6c6f 672e 696e 666f 280a   self.log.info(.
+00010d80: 2020 2020 2020 2020 2020 2020 6622 e28f              f"..
+00010d90: b2ef b88f 2020 4669 6e69 7368 6564 2073  ....  Finished s
+00010da0: 6967 6e61 6765 2070 6f69 6e74 207b 7265  ignage point {re
+00010db0: 7175 6573 742e 696e 6465 785f 6672 6f6d  quest.index_from
+00010dc0: 5f63 6861 6c6c 656e 6765 7d2f 220a 2020  _challenge}/".  
+00010dd0: 2020 2020 2020 2020 2020 6622 7b73 656c            f"{sel
+00010de0: 662e 636f 6e73 7461 6e74 732e 4e55 4d5f  f.constants.NUM_
+00010df0: 5350 535f 5355 425f 534c 4f54 7d3a 2022  SPS_SUB_SLOT}: "
+00010e00: 0a20 2020 2020 2020 2020 2020 2066 2243  .            f"C
+00010e10: 433a 207b 7265 7175 6573 742e 6368 616c  C: {request.chal
+00010e20: 6c65 6e67 655f 6368 6169 6e5f 7664 662e  lenge_chain_vdf.
+00010e30: 6f75 7470 7574 2e67 6574 5f68 6173 6828  output.get_hash(
+00010e40: 292e 6865 7828 297d 2022 0a20 2020 2020  ).hex()} ".     
+00010e50: 2020 2020 2020 2066 2252 433a 207b 7265         f"RC: {re
+00010e60: 7175 6573 742e 7265 7761 7264 5f63 6861  quest.reward_cha
+00010e70: 696e 5f76 6466 2e6f 7574 7075 742e 6765  in_vdf.output.ge
+00010e80: 745f 6861 7368 2829 2e68 6578 2829 7d20  t_hash().hex()} 
+00010e90: 220a 2020 2020 2020 2020 290a 2020 2020  ".        ).    
+00010ea0: 2020 2020 7365 6c66 2e73 6967 6e61 6765      self.signage
+00010eb0: 5f70 6f69 6e74 5f74 696d 6573 5b72 6571  _point_times[req
+00010ec0: 7565 7374 2e69 6e64 6578 5f66 726f 6d5f  uest.index_from_
+00010ed0: 6368 616c 6c65 6e67 655d 203d 2074 696d  challenge] = tim
+00010ee0: 652e 7469 6d65 2829 0a20 2020 2020 2020  e.time().       
+00010ef0: 2073 7562 5f73 6c6f 745f 7475 706c 6520   sub_slot_tuple 
+00010f00: 3d20 7365 6c66 2e66 756c 6c5f 6e6f 6465  = self.full_node
+00010f10: 5f73 746f 7265 2e67 6574 5f73 7562 5f73  _store.get_sub_s
+00010f20: 6c6f 7428 7265 7175 6573 742e 6368 616c  lot(request.chal
+00010f30: 6c65 6e67 655f 6368 6169 6e5f 7664 662e  lenge_chain_vdf.
+00010f40: 6368 616c 6c65 6e67 6529 0a20 2020 2020  challenge).     
+00010f50: 2020 2070 7265 765f 6368 616c 6c65 6e67     prev_challeng
+00010f60: 653a 204f 7074 696f 6e61 6c5b 6279 7465  e: Optional[byte
+00010f70: 7333 325d 0a20 2020 2020 2020 2069 6620  s32].        if 
+00010f80: 7375 625f 736c 6f74 5f74 7570 6c65 2069  sub_slot_tuple i
+00010f90: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00010fa0: 2020 2020 2020 2020 7072 6576 5f63 6861          prev_cha
+00010fb0: 6c6c 656e 6765 203d 2073 7562 5f73 6c6f  llenge = sub_slo
+00010fc0: 745f 7475 706c 655b 305d 2e63 6861 6c6c  t_tuple[0].chall
+00010fd0: 656e 6765 5f63 6861 696e 2e63 6861 6c6c  enge_chain.chall
+00010fe0: 656e 6765 5f63 6861 696e 5f65 6e64 5f6f  enge_chain_end_o
+00010ff0: 665f 736c 6f74 5f76 6466 2e63 6861 6c6c  f_slot_vdf.chall
+00011000: 656e 6765 0a20 2020 2020 2020 2065 6c73  enge.        els
+00011010: 653a 0a20 2020 2020 2020 2020 2020 2070  e:.            p
+00011020: 7265 765f 6368 616c 6c65 6e67 6520 3d20  rev_challenge = 
+00011030: 4e6f 6e65 0a0a 2020 2020 2020 2020 2320  None..        # 
+00011040: 4e6f 7469 6679 206e 6f64 6573 206f 6620  Notify nodes of 
+00011050: 7468 6520 6e65 7720 7369 676e 6167 6520  the new signage 
+00011060: 706f 696e 740a 2020 2020 2020 2020 6272  point.        br
+00011070: 6f61 6463 6173 7420 3d20 6675 6c6c 5f6e  oadcast = full_n
+00011080: 6f64 655f 7072 6f74 6f63 6f6c 2e4e 6577  ode_protocol.New
+00011090: 5369 676e 6167 6550 6f69 6e74 4f72 456e  SignagePointOrEn
+000110a0: 644f 6653 7562 536c 6f74 280a 2020 2020  dOfSubSlot(.    
+000110b0: 2020 2020 2020 2020 7072 6576 5f63 6861          prev_cha
+000110c0: 6c6c 656e 6765 2c0a 2020 2020 2020 2020  llenge,.        
+000110d0: 2020 2020 7265 7175 6573 742e 6368 616c      request.chal
+000110e0: 6c65 6e67 655f 6368 6169 6e5f 7664 662e  lenge_chain_vdf.
+000110f0: 6368 616c 6c65 6e67 652c 0a20 2020 2020  challenge,.     
+00011100: 2020 2020 2020 2072 6571 7565 7374 2e69         request.i
+00011110: 6e64 6578 5f66 726f 6d5f 6368 616c 6c65  ndex_from_challe
+00011120: 6e67 652c 0a20 2020 2020 2020 2020 2020  nge,.           
+00011130: 2072 6571 7565 7374 2e72 6577 6172 645f   request.reward_
+00011140: 6368 6169 6e5f 7664 662e 6368 616c 6c65  chain_vdf.challe
+00011150: 6e67 652c 0a20 2020 2020 2020 2029 0a20  nge,.        ). 
+00011160: 2020 2020 2020 206d 7367 203d 206d 616b         msg = mak
+00011170: 655f 6d73 6728 5072 6f74 6f63 6f6c 4d65  e_msg(ProtocolMe
+00011180: 7373 6167 6554 7970 6573 2e6e 6577 5f73  ssageTypes.new_s
+00011190: 6967 6e61 6765 5f70 6f69 6e74 5f6f 725f  ignage_point_or_
+000111a0: 656e 645f 6f66 5f73 7562 5f73 6c6f 742c  end_of_sub_slot,
+000111b0: 2062 726f 6164 6361 7374 290a 2020 2020   broadcast).    
+000111c0: 2020 2020 6177 6169 7420 7365 6c66 2e73      await self.s
+000111d0: 6572 7665 722e 7365 6e64 5f74 6f5f 616c  erver.send_to_al
+000111e0: 6c28 5b6d 7367 5d2c 204e 6f64 6554 7970  l([msg], NodeTyp
+000111f0: 652e 4655 4c4c 5f4e 4f44 452c 2070 6565  e.FULL_NODE, pee
+00011200: 722e 7065 6572 5f6e 6f64 655f 6964 290a  r.peer_node_id).
+00011210: 0a20 2020 2020 2020 2070 6561 6b20 3d20  .        peak = 
+00011220: 7365 6c66 2e62 6c6f 636b 6368 6169 6e2e  self.blockchain.
+00011230: 6765 745f 7065 616b 2829 0a20 2020 2020  get_peak().     
+00011240: 2020 2069 6620 7065 616b 2069 7320 6e6f     if peak is no
+00011250: 7420 4e6f 6e65 2061 6e64 2070 6561 6b2e  t None and peak.
+00011260: 6865 6967 6874 203e 2073 656c 662e 636f  height > self.co
+00011270: 6e73 7461 6e74 732e 4d41 585f 5355 425f  nstants.MAX_SUB_
+00011280: 534c 4f54 5f42 4c4f 434b 533a 0a20 2020  SLOT_BLOCKS:.   
+00011290: 2020 2020 2020 2020 2073 7562 5f73 6c6f           sub_slo
+000112a0: 745f 6974 6572 7320 3d20 7065 616b 2e73  t_iters = peak.s
+000112b0: 7562 5f73 6c6f 745f 6974 6572 730a 2020  ub_slot_iters.  
+000112c0: 2020 2020 2020 2020 2020 6469 6666 6963            diffic
+000112d0: 756c 7479 203d 2075 696e 7436 3428 7065  ulty = uint64(pe
+000112e0: 616b 2e77 6569 6768 7420 2d20 7365 6c66  ak.weight - self
+000112f0: 2e62 6c6f 636b 6368 6169 6e2e 626c 6f63  .blockchain.bloc
+00011300: 6b5f 7265 636f 7264 2870 6561 6b2e 7072  k_record(peak.pr
+00011310: 6576 5f68 6173 6829 2e77 6569 6768 7429  ev_hash).weight)
+00011320: 0a20 2020 2020 2020 2020 2020 2023 204d  .            # M
+00011330: 616b 6573 2073 7572 6520 746f 2070 6f74  akes sure to pot
+00011340: 656e 7469 616c 6c79 2075 7064 6174 6520  entially update 
+00011350: 7468 6520 6469 6666 6963 756c 7479 2069  the difficulty i
+00011360: 6620 7765 2061 7265 2070 6173 7420 7468  f we are past th
+00011370: 6520 7065 616b 2028 696e 746f 2061 206e  e peak (into a n
+00011380: 6577 2073 7562 2d73 6c6f 7429 0a20 2020  ew sub-slot).   
+00011390: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
+000113a0: 6970 5f73 7562 5f73 6c6f 7420 6973 206e  ip_sub_slot is n
+000113b0: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
+000113c0: 2020 2020 6966 2072 6571 7565 7374 2e63      if request.c
+000113d0: 6861 6c6c 656e 6765 5f63 6861 696e 5f76  hallenge_chain_v
+000113e0: 6466 2e63 6861 6c6c 656e 6765 2021 3d20  df.challenge != 
+000113f0: 6970 5f73 7562 5f73 6c6f 742e 6368 616c  ip_sub_slot.chal
+00011400: 6c65 6e67 655f 6368 6169 6e2e 6765 745f  lenge_chain.get_
+00011410: 6861 7368 2829 3a0a 2020 2020 2020 2020  hash():.        
+00011420: 2020 2020 2020 2020 6e65 7874 5f64 6966          next_dif
+00011430: 6669 6375 6c74 7920 3d20 7365 6c66 2e62  ficulty = self.b
+00011440: 6c6f 636b 6368 6169 6e2e 6765 745f 6e65  lockchain.get_ne
+00011450: 7874 5f64 6966 6669 6375 6c74 7928 7065  xt_difficulty(pe
+00011460: 616b 2e68 6561 6465 725f 6861 7368 2c20  ak.header_hash, 
+00011470: 5472 7565 290a 2020 2020 2020 2020 2020  True).          
+00011480: 2020 2020 2020 6e65 7874 5f73 7562 5f73        next_sub_s
+00011490: 6c6f 745f 6974 6572 7320 3d20 7365 6c66  lot_iters = self
+000114a0: 2e62 6c6f 636b 6368 6169 6e2e 6765 745f  .blockchain.get_
+000114b0: 6e65 7874 5f73 6c6f 745f 6974 6572 7328  next_slot_iters(
+000114c0: 7065 616b 2e68 6561 6465 725f 6861 7368  peak.header_hash
+000114d0: 2c20 5472 7565 290a 2020 2020 2020 2020  , True).        
+000114e0: 2020 2020 2020 2020 6469 6666 6963 756c          difficul
+000114f0: 7479 203d 206e 6578 745f 6469 6666 6963  ty = next_diffic
+00011500: 756c 7479 0a20 2020 2020 2020 2020 2020  ulty.           
+00011510: 2020 2020 2073 7562 5f73 6c6f 745f 6974       sub_slot_it
+00011520: 6572 7320 3d20 6e65 7874 5f73 7562 5f73  ers = next_sub_s
+00011530: 6c6f 745f 6974 6572 730a 2020 2020 2020  lot_iters.      
+00011540: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00011550: 2020 2020 6469 6666 6963 756c 7479 203d      difficulty =
+00011560: 2073 656c 662e 636f 6e73 7461 6e74 732e   self.constants.
+00011570: 4449 4646 4943 554c 5459 5f53 5441 5254  DIFFICULTY_START
+00011580: 494e 470a 2020 2020 2020 2020 2020 2020  ING.            
+00011590: 7375 625f 736c 6f74 5f69 7465 7273 203d  sub_slot_iters =
+000115a0: 2073 656c 662e 636f 6e73 7461 6e74 732e   self.constants.
+000115b0: 5355 425f 534c 4f54 5f49 5445 5253 5f53  SUB_SLOT_ITERS_S
+000115c0: 5441 5254 494e 470a 0a20 2020 2020 2020  TARTING..       
+000115d0: 2023 204e 6f74 6966 7920 6661 726d 6572   # Notify farmer
+000115e0: 7320 6f66 2074 6865 206e 6577 2073 6967  s of the new sig
+000115f0: 6e61 6765 2070 6f69 6e74 0a20 2020 2020  nage point.     
+00011600: 2020 2062 726f 6164 6361 7374 5f66 6172     broadcast_far
+00011610: 6d65 7220 3d20 6661 726d 6572 5f70 726f  mer = farmer_pro
+00011620: 746f 636f 6c2e 4e65 7753 6967 6e61 6765  tocol.NewSignage
+00011630: 506f 696e 7428 0a20 2020 2020 2020 2020  Point(.         
+00011640: 2020 2072 6571 7565 7374 2e63 6861 6c6c     request.chall
+00011650: 656e 6765 5f63 6861 696e 5f76 6466 2e63  enge_chain_vdf.c
+00011660: 6861 6c6c 656e 6765 2c0a 2020 2020 2020  hallenge,.      
+00011670: 2020 2020 2020 7265 7175 6573 742e 6368        request.ch
+00011680: 616c 6c65 6e67 655f 6368 6169 6e5f 7664  allenge_chain_vd
+00011690: 662e 6f75 7470 7574 2e67 6574 5f68 6173  f.output.get_has
+000116a0: 6828 292c 0a20 2020 2020 2020 2020 2020  h(),.           
+000116b0: 2072 6571 7565 7374 2e72 6577 6172 645f   request.reward_
+000116c0: 6368 6169 6e5f 7664 662e 6f75 7470 7574  chain_vdf.output
+000116d0: 2e67 6574 5f68 6173 6828 292c 0a20 2020  .get_hash(),.   
+000116e0: 2020 2020 2020 2020 2064 6966 6669 6375           difficu
+000116f0: 6c74 792c 0a20 2020 2020 2020 2020 2020  lty,.           
+00011700: 2073 7562 5f73 6c6f 745f 6974 6572 732c   sub_slot_iters,
+00011710: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+00011720: 7565 7374 2e69 6e64 6578 5f66 726f 6d5f  uest.index_from_
+00011730: 6368 616c 6c65 6e67 652c 0a20 2020 2020  challenge,.     
+00011740: 2020 2020 2020 2075 696e 7433 3228 3029         uint32(0)
+00011750: 2069 6620 7065 616b 2069 7320 4e6f 6e65   if peak is None
+00011760: 2065 6c73 6520 7065 616b 2e68 6569 6768   else peak.heigh
+00011770: 742c 0a20 2020 2020 2020 2020 2020 2073  t,.            s
+00011780: 705f 736f 7572 6365 5f64 6174 613d 5369  p_source_data=Si
+00011790: 676e 6167 6550 6f69 6e74 536f 7572 6365  gnagePointSource
+000117a0: 4461 7461 280a 2020 2020 2020 2020 2020  Data(.          
+000117b0: 2020 2020 2020 7664 665f 6461 7461 3d53        vdf_data=S
+000117c0: 5056 4446 536f 7572 6365 4461 7461 2872  PVDFSourceData(r
+000117d0: 6571 7565 7374 2e63 6861 6c6c 656e 6765  equest.challenge
+000117e0: 5f63 6861 696e 5f76 6466 2e6f 7574 7075  _chain_vdf.outpu
+000117f0: 742c 2072 6571 7565 7374 2e72 6577 6172  t, request.rewar
+00011800: 645f 6368 6169 6e5f 7664 662e 6f75 7470  d_chain_vdf.outp
+00011810: 7574 290a 2020 2020 2020 2020 2020 2020  ut).            
+00011820: 292c 0a20 2020 2020 2020 2029 0a20 2020  ),.        ).   
+00011830: 2020 2020 206d 7367 203d 206d 616b 655f       msg = make_
+00011840: 6d73 6728 5072 6f74 6f63 6f6c 4d65 7373  msg(ProtocolMess
+00011850: 6167 6554 7970 6573 2e6e 6577 5f73 6967  ageTypes.new_sig
+00011860: 6e61 6765 5f70 6f69 6e74 2c20 6272 6f61  nage_point, broa
+00011870: 6463 6173 745f 6661 726d 6572 290a 2020  dcast_farmer).  
+00011880: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
+00011890: 2e73 6572 7665 722e 7365 6e64 5f74 6f5f  .server.send_to_
+000118a0: 616c 6c28 5b6d 7367 5d2c 204e 6f64 6554  all([msg], NodeT
+000118b0: 7970 652e 4641 524d 4552 290a 0a20 2020  ype.FARMER)..   
+000118c0: 2020 2020 2073 656c 662e 5f73 7461 7465       self._state
+000118d0: 5f63 6861 6e67 6564 2822 7369 676e 6167  _changed("signag
+000118e0: 655f 706f 696e 7422 2c20 7b22 6272 6f61  e_point", {"broa
+000118f0: 6463 6173 745f 6661 726d 6572 223a 2062  dcast_farmer": b
+00011900: 726f 6164 6361 7374 5f66 6172 6d65 727d  roadcast_farmer}
+00011910: 290a 0a20 2020 2061 7379 6e63 2064 6566  )..    async def
+00011920: 2070 6561 6b5f 706f 7374 5f70 726f 6365   peak_post_proce
+00011930: 7373 696e 6728 0a20 2020 2020 2020 2073  ssing(.        s
+00011940: 656c 662c 0a20 2020 2020 2020 2062 6c6f  elf,.        blo
+00011950: 636b 3a20 4675 6c6c 426c 6f63 6b2c 0a20  ck: FullBlock,. 
+00011960: 2020 2020 2020 2073 7461 7465 5f63 6861         state_cha
+00011970: 6e67 655f 7375 6d6d 6172 793a 2053 7461  nge_summary: Sta
+00011980: 7465 4368 616e 6765 5375 6d6d 6172 792c  teChangeSummary,
+00011990: 0a20 2020 2020 2020 2070 6565 723a 204f  .        peer: O
+000119a0: 7074 696f 6e61 6c5b 5753 4368 6961 436f  ptional[WSChiaCo
+000119b0: 6e6e 6563 7469 6f6e 5d2c 0a20 2020 2029  nnection],.    )
+000119c0: 202d 3e20 5065 616b 506f 7374 5072 6f63   -> PeakPostProc
+000119d0: 6573 7369 6e67 5265 7375 6c74 3a0a 2020  essingResult:.  
+000119e0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+000119f0: 2020 4d75 7374 2062 6520 6361 6c6c 6564    Must be called
+00011a00: 2075 6e64 6572 2073 656c 662e 626c 6f63   under self.bloc
+00011a10: 6b63 6861 696e 2e70 7269 6f72 6974 795f  kchain.priority_
+00011a20: 6d75 7465 782e 2054 6869 7320 7570 6461  mutex. This upda
+00011a30: 7465 7320 7468 6520 696e 7465 726e 616c  tes the internal
+00011a40: 2073 7461 7465 206f 6620 7468 6520 6675   state of the fu
+00011a50: 6c6c 206e 6f64 6520 7769 7468 2074 6865  ll node with the
+00011a60: 0a20 2020 2020 2020 206c 6174 6573 7420  .        latest 
+00011a70: 7065 616b 2069 6e66 6f72 6d61 7469 6f6e  peak information
+00011a80: 2e20 4974 2061 6c73 6f20 6e6f 7469 6669  . It also notifi
+00011a90: 6573 2070 6565 7273 2061 626f 7574 2074  es peers about t
+00011aa0: 6865 206e 6577 2070 6561 6b2e 0a20 2020  he new peak..   
+00011ab0: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
+00011ac0: 2020 7265 636f 7264 203d 2073 7461 7465    record = state
+00011ad0: 5f63 6861 6e67 655f 7375 6d6d 6172 792e  _change_summary.
+00011ae0: 7065 616b 0a20 2020 2020 2020 2064 6966  peak.        dif
+00011af0: 6669 6375 6c74 7920 3d20 7365 6c66 2e62  ficulty = self.b
+00011b00: 6c6f 636b 6368 6169 6e2e 6765 745f 6e65  lockchain.get_ne
+00011b10: 7874 5f64 6966 6669 6375 6c74 7928 7265  xt_difficulty(re
+00011b20: 636f 7264 2e68 6561 6465 725f 6861 7368  cord.header_hash
+00011b30: 2c20 4661 6c73 6529 0a20 2020 2020 2020  , False).       
+00011b40: 2073 7562 5f73 6c6f 745f 6974 6572 7320   sub_slot_iters 
+00011b50: 3d20 7365 6c66 2e62 6c6f 636b 6368 6169  = self.blockchai
+00011b60: 6e2e 6765 745f 6e65 7874 5f73 6c6f 745f  n.get_next_slot_
+00011b70: 6974 6572 7328 7265 636f 7264 2e68 6561  iters(record.hea
+00011b80: 6465 725f 6861 7368 2c20 4661 6c73 6529  der_hash, False)
+00011b90: 0a0a 2020 2020 2020 2020 7365 6c66 2e6c  ..        self.l
+00011ba0: 6f67 2e69 6e66 6f28 0a20 2020 2020 2020  og.info(.       
+00011bb0: 2020 2020 2066 22f0 9f8c b120 5570 6461       f".... Upda
+00011bc0: 7465 6420 7065 616b 2074 6f20 6865 6967  ted peak to heig
+00011bd0: 6874 207b 7265 636f 7264 2e68 6569 6768  ht {record.heigh
+00011be0: 747d 2c20 7765 6967 6874 207b 7265 636f  t}, weight {reco
+00011bf0: 7264 2e77 6569 6768 747d 2c20 220a 2020  rd.weight}, ".  
+00011c00: 2020 2020 2020 2020 2020 6622 6868 207b            f"hh {
+00011c10: 7265 636f 7264 2e68 6561 6465 725f 6861  record.header_ha
+00011c20: 7368 2e68 6578 2829 7d2c 2022 0a20 2020  sh.hex()}, ".   
+00011c30: 2020 2020 2020 2020 2066 2266 6f72 6b65           f"forke
+00011c40: 6420 6174 207b 7374 6174 655f 6368 616e  d at {state_chan
+00011c50: 6765 5f73 756d 6d61 7279 2e66 6f72 6b5f  ge_summary.fork_
+00011c60: 6865 6967 6874 7d2c 2072 683a 207b 7265  height}, rh: {re
+00011c70: 636f 7264 2e72 6577 6172 645f 696e 6675  cord.reward_infu
+00011c80: 7369 6f6e 5f6e 6577 5f63 6861 6c6c 656e  sion_new_challen
+00011c90: 6765 2e68 6578 2829 7d2c 2022 0a20 2020  ge.hex()}, ".   
+00011ca0: 2020 2020 2020 2020 2066 2274 6f74 616c           f"total
+00011cb0: 2069 7465 7273 3a20 7b72 6563 6f72 642e   iters: {record.
+00011cc0: 746f 7461 6c5f 6974 6572 737d 2c20 220a  total_iters}, ".
+00011cd0: 2020 2020 2020 2020 2020 2020 6622 6f76              f"ov
+00011ce0: 6572 666c 6f77 3a20 7b72 6563 6f72 642e  erflow: {record.
+00011cf0: 6f76 6572 666c 6f77 7d2c 2022 0a20 2020  overflow}, ".   
+00011d00: 2020 2020 2020 2020 2066 2264 6566 6963           f"defic
+00011d10: 6974 3a20 7b72 6563 6f72 642e 6465 6669  it: {record.defi
+00011d20: 6369 747d 2c20 220a 2020 2020 2020 2020  cit}, ".        
+00011d30: 2020 2020 6622 6469 6666 6963 756c 7479      f"difficulty
+00011d40: 3a20 7b64 6966 6669 6375 6c74 797d 2c20  : {difficulty}, 
+00011d50: 220a 2020 2020 2020 2020 2020 2020 6622  ".            f"
+00011d60: 7375 6220 736c 6f74 2069 7465 7273 3a20  sub slot iters: 
+00011d70: 7b73 7562 5f73 6c6f 745f 6974 6572 737d  {sub_slot_iters}
+00011d80: 2c20 220a 2020 2020 2020 2020 2020 2020  , ".            
+00011d90: 6622 4765 6e65 7261 746f 7220 7369 7a65  f"Generator size
+00011da0: 3a20 220a 2020 2020 2020 2020 2020 2020  : ".            
+00011db0: 6622 7b6c 656e 2862 7974 6573 2862 6c6f  f"{len(bytes(blo
+00011dc0: 636b 2e74 7261 6e73 6163 7469 6f6e 735f  ck.transactions_
+00011dd0: 6765 6e65 7261 746f 7229 2920 6966 2062  generator)) if b
+00011de0: 6c6f 636b 2e74 7261 6e73 6163 7469 6f6e  lock.transaction
+00011df0: 735f 6765 6e65 7261 746f 7220 656c 7365  s_generator else
+00011e00: 2027 4e6f 2074 7827 7d2c 2022 0a20 2020   'No tx'}, ".   
+00011e10: 2020 2020 2020 2020 2066 2247 656e 6572           f"Gener
+00011e20: 6174 6f72 2072 6566 206c 6973 7420 7369  ator ref list si
+00011e30: 7a65 3a20 220a 2020 2020 2020 2020 2020  ze: ".          
+00011e40: 2020 6622 7b6c 656e 2862 6c6f 636b 2e74    f"{len(block.t
+00011e50: 7261 6e73 6163 7469 6f6e 735f 6765 6e65  ransactions_gene
+00011e60: 7261 746f 725f 7265 665f 6c69 7374 2920  rator_ref_list) 
+00011e70: 6966 2062 6c6f 636b 2e74 7261 6e73 6163  if block.transac
+00011e80: 7469 6f6e 735f 6765 6e65 7261 746f 7220  tions_generator 
+00011e90: 656c 7365 2027 4e6f 2074 7827 7d22 0a20  else 'No tx'}". 
+00011ea0: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00011eb0: 2020 6966 2028 0a20 2020 2020 2020 2020    if (.         
+00011ec0: 2020 2073 656c 662e 6675 6c6c 5f6e 6f64     self.full_nod
+00011ed0: 655f 7374 6f72 652e 7072 6576 696f 7573  e_store.previous
+00011ee0: 5f67 656e 6572 6174 6f72 2069 7320 6e6f  _generator is no
+00011ef0: 7420 4e6f 6e65 0a20 2020 2020 2020 2020  t None.         
+00011f00: 2020 2061 6e64 2073 7461 7465 5f63 6861     and state_cha
+00011f10: 6e67 655f 7375 6d6d 6172 792e 666f 726b  nge_summary.fork
+00011f20: 5f68 6569 6768 7420 3c20 7365 6c66 2e66  _height < self.f
+00011f30: 756c 6c5f 6e6f 6465 5f73 746f 7265 2e70  ull_node_store.p
+00011f40: 7265 7669 6f75 735f 6765 6e65 7261 746f  revious_generato
+00011f50: 722e 626c 6f63 6b5f 6865 6967 6874 0a20  r.block_height. 
+00011f60: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
+00011f70: 2020 2020 2020 7365 6c66 2e66 756c 6c5f        self.full_
+00011f80: 6e6f 6465 5f73 746f 7265 2e70 7265 7669  node_store.previ
+00011f90: 6f75 735f 6765 6e65 7261 746f 7220 3d20  ous_generator = 
+00011fa0: 4e6f 6e65 0a0a 2020 2020 2020 2020 6869  None..        hi
+00011fb0: 6e74 735f 746f 5f61 6464 2c20 6c6f 6f6b  nts_to_add, look
+00011fc0: 7570 5f63 6f69 6e5f 6964 7320 3d20 6765  up_coin_ids = ge
+00011fd0: 745f 6869 6e74 735f 616e 645f 7375 6273  t_hints_and_subs
+00011fe0: 6372 6970 7469 6f6e 5f63 6f69 6e5f 6964  cription_coin_id
+00011ff0: 7328 0a20 2020 2020 2020 2020 2020 2073  s(.            s
+00012000: 7461 7465 5f63 6861 6e67 655f 7375 6d6d  tate_change_summ
+00012010: 6172 792c 0a20 2020 2020 2020 2020 2020  ary,.           
+00012020: 2073 656c 662e 7375 6273 6372 6970 7469   self.subscripti
+00012030: 6f6e 732e 6861 735f 636f 696e 5f73 7562  ons.has_coin_sub
+00012040: 7363 7269 7074 696f 6e2c 0a20 2020 2020  scription,.     
+00012050: 2020 2020 2020 2073 656c 662e 7375 6273         self.subs
+00012060: 6372 6970 7469 6f6e 732e 6861 735f 7075  criptions.has_pu
+00012070: 7a7a 6c65 5f73 7562 7363 7269 7074 696f  zzle_subscriptio
+00012080: 6e2c 0a20 2020 2020 2020 2029 0a20 2020  n,.        ).   
+00012090: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
+000120a0: 6869 6e74 5f73 746f 7265 2e61 6464 5f68  hint_store.add_h
+000120b0: 696e 7473 2868 696e 7473 5f74 6f5f 6164  ints(hints_to_ad
+000120c0: 6429 0a0a 2020 2020 2020 2020 7375 625f  d)..        sub_
+000120d0: 736c 6f74 7320 3d20 6177 6169 7420 7365  slots = await se
+000120e0: 6c66 2e62 6c6f 636b 6368 6169 6e2e 6765  lf.blockchain.ge
+000120f0: 745f 7370 5f61 6e64 5f69 705f 7375 625f  t_sp_and_ip_sub_
+00012100: 736c 6f74 7328 7265 636f 7264 2e68 6561  slots(record.hea
+00012110: 6465 725f 6861 7368 290a 2020 2020 2020  der_hash).      
+00012120: 2020 6173 7365 7274 2073 7562 5f73 6c6f    assert sub_slo
+00012130: 7473 2069 7320 6e6f 7420 4e6f 6e65 0a0a  ts is not None..
+00012140: 2020 2020 2020 2020 6966 206e 6f74 2073          if not s
+00012150: 656c 662e 7379 6e63 5f73 746f 7265 2e67  elf.sync_store.g
+00012160: 6574 5f73 796e 635f 6d6f 6465 2829 3a0a  et_sync_mode():.
+00012170: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00012180: 2e62 6c6f 636b 6368 6169 6e2e 636c 6561  .blockchain.clea
+00012190: 6e5f 626c 6f63 6b5f 7265 636f 7264 7328  n_block_records(
+000121a0: 290a 0a20 2020 2020 2020 2066 6f72 6b5f  )..        fork_
+000121b0: 626c 6f63 6b3a 204f 7074 696f 6e61 6c5b  block: Optional[
+000121c0: 426c 6f63 6b52 6563 6f72 645d 203d 204e  BlockRecord] = N
+000121d0: 6f6e 650a 2020 2020 2020 2020 6966 2073  one.        if s
+000121e0: 7461 7465 5f63 6861 6e67 655f 7375 6d6d  tate_change_summ
+000121f0: 6172 792e 666f 726b 5f68 6569 6768 7420  ary.fork_height 
+00012200: 213d 2062 6c6f 636b 2e68 6569 6768 7420  != block.height 
+00012210: 2d20 3120 616e 6420 626c 6f63 6b2e 6865  - 1 and block.he
+00012220: 6967 6874 2021 3d20 303a 0a20 2020 2020  ight != 0:.     
+00012230: 2020 2020 2020 2023 2054 6869 7320 6973         # This is
+00012240: 2061 2072 656f 7267 0a20 2020 2020 2020   a reorg.       
+00012250: 2020 2020 2066 6f72 6b5f 6861 7368 3a20       fork_hash: 
+00012260: 4f70 7469 6f6e 616c 5b62 7974 6573 3332  Optional[bytes32
+00012270: 5d20 3d20 7365 6c66 2e62 6c6f 636b 6368  ] = self.blockch
+00012280: 6169 6e2e 6865 6967 6874 5f74 6f5f 6861  ain.height_to_ha
+00012290: 7368 2873 7461 7465 5f63 6861 6e67 655f  sh(state_change_
+000122a0: 7375 6d6d 6172 792e 666f 726b 5f68 6569  summary.fork_hei
+000122b0: 6768 7429 0a20 2020 2020 2020 2020 2020  ght).           
+000122c0: 2061 7373 6572 7420 666f 726b 5f68 6173   assert fork_has
+000122d0: 6820 6973 206e 6f74 204e 6f6e 650a 2020  h is not None.  
+000122e0: 2020 2020 2020 2020 2020 666f 726b 5f62            fork_b
+000122f0: 6c6f 636b 203d 2061 7761 6974 2073 656c  lock = await sel
+00012300: 662e 626c 6f63 6b63 6861 696e 2e67 6574  f.blockchain.get
+00012310: 5f62 6c6f 636b 5f72 6563 6f72 645f 6672  _block_record_fr
+00012320: 6f6d 5f64 6228 666f 726b 5f68 6173 6829  om_db(fork_hash)
+00012330: 0a0a 2020 2020 2020 2020 666e 735f 7065  ..        fns_pe
+00012340: 616b 5f72 6573 756c 743a 2046 756c 6c4e  ak_result: FullN
+00012350: 6f64 6553 746f 7265 5065 616b 5265 7375  odeStorePeakResu
+00012360: 6c74 203d 2073 656c 662e 6675 6c6c 5f6e  lt = self.full_n
+00012370: 6f64 655f 7374 6f72 652e 6e65 775f 7065  ode_store.new_pe
+00012380: 616b 280a 2020 2020 2020 2020 2020 2020  ak(.            
+00012390: 7265 636f 7264 2c0a 2020 2020 2020 2020  record,.        
+000123a0: 2020 2020 626c 6f63 6b2c 0a20 2020 2020      block,.     
+000123b0: 2020 2020 2020 2073 7562 5f73 6c6f 7473         sub_slots
+000123c0: 5b30 5d2c 0a20 2020 2020 2020 2020 2020  [0],.           
+000123d0: 2073 7562 5f73 6c6f 7473 5b31 5d2c 0a20   sub_slots[1],. 
+000123e0: 2020 2020 2020 2020 2020 2066 6f72 6b5f             fork_
+000123f0: 626c 6f63 6b2c 0a20 2020 2020 2020 2020  block,.         
+00012400: 2020 2073 656c 662e 626c 6f63 6b63 6861     self.blockcha
+00012410: 696e 2c0a 2020 2020 2020 2020 2020 2020  in,.            
+00012420: 7375 625f 736c 6f74 5f69 7465 7273 2c0a  sub_slot_iters,.
+00012430: 2020 2020 2020 2020 2020 2020 6469 6666              diff
+00012440: 6963 756c 7479 2c0a 2020 2020 2020 2020  iculty,.        
+00012450: 290a 0a20 2020 2020 2020 2069 6620 666e  )..        if fn
+00012460: 735f 7065 616b 5f72 6573 756c 742e 6e65  s_peak_result.ne
+00012470: 775f 7369 676e 6167 655f 706f 696e 7473  w_signage_points
+00012480: 2069 7320 6e6f 7420 4e6f 6e65 2061 6e64   is not None and
+00012490: 2070 6565 7220 6973 206e 6f74 204e 6f6e   peer is not Non
+000124a0: 653a 0a20 2020 2020 2020 2020 2020 2066  e:.            f
+000124b0: 6f72 2069 6e64 6578 2c20 7370 2069 6e20  or index, sp in 
+000124c0: 666e 735f 7065 616b 5f72 6573 756c 742e  fns_peak_result.
+000124d0: 6e65 775f 7369 676e 6167 655f 706f 696e  new_signage_poin
+000124e0: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
+000124f0: 2020 2020 6173 7365 7274 2028 0a20 2020      assert (.   
+00012500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012510: 2073 702e 6363 5f76 6466 2069 7320 6e6f   sp.cc_vdf is no
+00012520: 7420 4e6f 6e65 0a20 2020 2020 2020 2020  t None.         
+00012530: 2020 2020 2020 2020 2020 2061 6e64 2073             and s
+00012540: 702e 6363 5f70 726f 6f66 2069 7320 6e6f  p.cc_proof is no
+00012550: 7420 4e6f 6e65 0a20 2020 2020 2020 2020  t None.         
+00012560: 2020 2020 2020 2020 2020 2061 6e64 2073             and s
+00012570: 702e 7263 5f76 6466 2069 7320 6e6f 7420  p.rc_vdf is not 
+00012580: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+00012590: 2020 2020 2020 2020 2061 6e64 2073 702e           and sp.
+000125a0: 7263 5f70 726f 6f66 2069 7320 6e6f 7420  rc_proof is not 
+000125b0: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+000125c0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+000125d0: 2020 2020 2020 2061 7761 6974 2073 656c         await sel
+000125e0: 662e 7369 676e 6167 655f 706f 696e 745f  f.signage_point_
+000125f0: 706f 7374 5f70 726f 6365 7373 696e 6728  post_processing(
+00012600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012610: 2020 2020 2052 6573 706f 6e64 5369 676e       RespondSign
+00012620: 6167 6550 6f69 6e74 2869 6e64 6578 2c20  agePoint(index, 
+00012630: 7370 2e63 635f 7664 662c 2073 702e 6363  sp.cc_vdf, sp.cc
+00012640: 5f70 726f 6f66 2c20 7370 2e72 635f 7664  _proof, sp.rc_vd
+00012650: 662c 2073 702e 7263 5f70 726f 6f66 292c  f, sp.rc_proof),
+00012660: 2070 6565 722c 2073 7562 5f73 6c6f 7473   peer, sub_slots
+00012670: 5b31 5d0a 2020 2020 2020 2020 2020 2020  [1].            
+00012680: 2020 2020 290a 0a20 2020 2020 2020 2069      )..        i
+00012690: 6620 7375 625f 736c 6f74 735b 315d 2069  f sub_slots[1] i
+000126a0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+000126b0: 2020 2020 6173 7365 7274 2072 6563 6f72      assert recor
+000126c0: 642e 6970 5f73 7562 5f73 6c6f 745f 746f  d.ip_sub_slot_to
+000126d0: 7461 6c5f 6974 6572 7328 7365 6c66 2e63  tal_iters(self.c
+000126e0: 6f6e 7374 616e 7473 2920 3d3d 2030 0a20  onstants) == 0. 
+000126f0: 2020 2020 2020 2023 2045 6e73 7572 6520         # Ensure 
+00012700: 7468 6520 7369 676e 6167 6520 706f 696e  the signage poin
+00012710: 7420 6973 2061 6c73 6f20 696e 2074 6865  t is also in the
+00012720: 2073 746f 7265 2c20 666f 7220 636f 6e73   store, for cons
+00012730: 6973 7465 6e63 790a 2020 2020 2020 2020  istency.        
+00012740: 7365 6c66 2e66 756c 6c5f 6e6f 6465 5f73  self.full_node_s
+00012750: 746f 7265 2e6e 6577 5f73 6967 6e61 6765  tore.new_signage
+00012760: 5f70 6f69 6e74 280a 2020 2020 2020 2020  _point(.        
+00012770: 2020 2020 7265 636f 7264 2e73 6967 6e61      record.signa
+00012780: 6765 5f70 6f69 6e74 5f69 6e64 6578 2c0a  ge_point_index,.
+00012790: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000127a0: 2e62 6c6f 636b 6368 6169 6e2c 0a20 2020  .blockchain,.   
+000127b0: 2020 2020 2020 2020 2072 6563 6f72 642c           record,
+000127c0: 0a20 2020 2020 2020 2020 2020 2072 6563  .            rec
+000127d0: 6f72 642e 7375 625f 736c 6f74 5f69 7465  ord.sub_slot_ite
+000127e0: 7273 2c0a 2020 2020 2020 2020 2020 2020  rs,.            
+000127f0: 5369 676e 6167 6550 6f69 6e74 280a 2020  SignagePoint(.  
+00012800: 2020 2020 2020 2020 2020 2020 2020 626c                bl
+00012810: 6f63 6b2e 7265 7761 7264 5f63 6861 696e  ock.reward_chain
+00012820: 5f62 6c6f 636b 2e63 6861 6c6c 656e 6765  _block.challenge
+00012830: 5f63 6861 696e 5f73 705f 7664 662c 0a20  _chain_sp_vdf,. 
+00012840: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+00012850: 6c6f 636b 2e63 6861 6c6c 656e 6765 5f63  lock.challenge_c
+00012860: 6861 696e 5f73 705f 7072 6f6f 662c 0a20  hain_sp_proof,. 
+00012870: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+00012880: 6c6f 636b 2e72 6577 6172 645f 6368 6169  lock.reward_chai
+00012890: 6e5f 626c 6f63 6b2e 7265 7761 7264 5f63  n_block.reward_c
+000128a0: 6861 696e 5f73 705f 7664 662c 0a20 2020  hain_sp_vdf,.   
+000128b0: 2020 2020 2020 2020 2020 2020 2062 6c6f               blo
+000128c0: 636b 2e72 6577 6172 645f 6368 6169 6e5f  ck.reward_chain_
+000128d0: 7370 5f70 726f 6f66 2c0a 2020 2020 2020  sp_proof,.      
+000128e0: 2020 2020 2020 292c 0a20 2020 2020 2020        ),.       
+000128f0: 2020 2020 2073 6b69 705f 7664 665f 7661       skip_vdf_va
+00012900: 6c69 6461 7469 6f6e 3d54 7275 652c 0a20  lidation=True,. 
+00012910: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00012920: 2020 2320 5570 6461 7465 2074 6865 206d    # Update the m
+00012930: 656d 706f 6f6c 2028 7265 7475 726e 7320  empool (returns 
+00012940: 7375 6363 6573 7366 756c 2070 656e 6469  successful pendi
+00012950: 6e67 2074 7261 6e73 6163 7469 6f6e 7320  ng transactions 
+00012960: 6164 6465 6420 746f 2074 6865 206d 656d  added to the mem
+00012970: 706f 6f6c 290a 2020 2020 2020 2020 7370  pool).        sp
+00012980: 656e 745f 636f 696e 733a 204c 6973 745b  ent_coins: List[
+00012990: 6279 7465 7333 325d 203d 205b 636f 696e  bytes32] = [coin
+000129a0: 5f69 6420 666f 7220 636f 696e 5f69 642c  _id for coin_id,
+000129b0: 205f 2069 6e20 7374 6174 655f 6368 616e   _ in state_chan
+000129c0: 6765 5f73 756d 6d61 7279 2e72 656d 6f76  ge_summary.remov
+000129d0: 616c 735d 0a20 2020 2020 2020 206d 656d  als].        mem
+000129e0: 706f 6f6c 5f6e 6577 5f70 6561 6b5f 7265  pool_new_peak_re
+000129f0: 7375 6c74 3a20 4c69 7374 5b54 7570 6c65  sult: List[Tuple
+00012a00: 5b53 7065 6e64 4275 6e64 6c65 2c20 4e50  [SpendBundle, NP
+00012a10: 4352 6573 756c 742c 2062 7974 6573 3332  CResult, bytes32
+00012a20: 5d5d 0a20 2020 2020 2020 206d 656d 706f  ]].        mempo
+00012a30: 6f6c 5f6e 6577 5f70 6561 6b5f 7265 7375  ol_new_peak_resu
+00012a40: 6c74 203d 2061 7761 6974 2073 656c 662e  lt = await self.
+00012a50: 6d65 6d70 6f6f 6c5f 6d61 6e61 6765 722e  mempool_manager.
+00012a60: 6e65 775f 7065 616b 2873 656c 662e 626c  new_peak(self.bl
+00012a70: 6f63 6b63 6861 696e 2e67 6574 5f74 785f  ockchain.get_tx_
+00012a80: 7065 616b 2829 2c20 7370 656e 745f 636f  peak(), spent_co
+00012a90: 696e 7329 0a0a 2020 2020 2020 2020 2320  ins)..        # 
+00012aa0: 4368 6563 6b20 6966 2077 6520 6465 7465  Check if we dete
+00012ab0: 6374 6564 2061 2073 7065 6e74 2074 7261  cted a spent tra
+00012ac0: 6e73 6163 7469 6f6e 2c20 746f 206c 6f61  nsaction, to loa
+00012ad0: 6420 7570 206f 7572 2067 656e 6572 6174  d up our generat
+00012ae0: 6f72 2063 6163 6865 0a20 2020 2020 2020  or cache.       
+00012af0: 2069 6620 626c 6f63 6b2e 7472 616e 7361   if block.transa
+00012b00: 6374 696f 6e73 5f67 656e 6572 6174 6f72  ctions_generator
+00012b10: 2069 7320 6e6f 7420 4e6f 6e65 2061 6e64   is not None and
+00012b20: 2073 656c 662e 6675 6c6c 5f6e 6f64 655f   self.full_node_
+00012b30: 7374 6f72 652e 7072 6576 696f 7573 5f67  store.previous_g
+00012b40: 656e 6572 6174 6f72 2069 7320 4e6f 6e65  enerator is None
+00012b50: 3a0a 2020 2020 2020 2020 2020 2020 6765  :.            ge
+00012b60: 6e65 7261 746f 725f 6172 6720 3d20 6465  nerator_arg = de
+00012b70: 7465 6374 5f70 6f74 656e 7469 616c 5f74  tect_potential_t
+00012b80: 656d 706c 6174 655f 6765 6e65 7261 746f  emplate_generato
+00012b90: 7228 626c 6f63 6b2e 6865 6967 6874 2c20  r(block.height, 
+00012ba0: 626c 6f63 6b2e 7472 616e 7361 6374 696f  block.transactio
+00012bb0: 6e73 5f67 656e 6572 6174 6f72 290a 2020  ns_generator).  
+00012bc0: 2020 2020 2020 2020 2020 6966 2067 656e            if gen
+00012bd0: 6572 6174 6f72 5f61 7267 3a0a 2020 2020  erator_arg:.    
+00012be0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00012bf0: 2e6c 6f67 2e69 6e66 6f28 6622 5361 7669  .log.info(f"Savi
+00012c00: 6e67 2070 7265 7669 6f75 7320 6765 6e65  ng previous gene
+00012c10: 7261 746f 7220 666f 7220 6865 6967 6874  rator for height
+00012c20: 207b 626c 6f63 6b2e 6865 6967 6874 7d22   {block.height}"
+00012c30: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00012c40: 2020 7365 6c66 2e66 756c 6c5f 6e6f 6465    self.full_node
+00012c50: 5f73 746f 7265 2e70 7265 7669 6f75 735f  _store.previous_
+00012c60: 6765 6e65 7261 746f 7220 3d20 6765 6e65  generator = gene
+00012c70: 7261 746f 725f 6172 670a 0a20 2020 2020  rator_arg..     
+00012c80: 2020 2072 6574 7572 6e20 5065 616b 506f     return PeakPo
+00012c90: 7374 5072 6f63 6573 7369 6e67 5265 7375  stProcessingResu
+00012ca0: 6c74 286d 656d 706f 6f6c 5f6e 6577 5f70  lt(mempool_new_p
+00012cb0: 6561 6b5f 7265 7375 6c74 2c20 666e 735f  eak_result, fns_
+00012cc0: 7065 616b 5f72 6573 756c 742c 2068 696e  peak_result, hin
+00012cd0: 7473 5f74 6f5f 6164 642c 206c 6f6f 6b75  ts_to_add, looku
+00012ce0: 705f 636f 696e 5f69 6473 290a 0a20 2020  p_coin_ids)..   
+00012cf0: 2061 7379 6e63 2064 6566 2070 6561 6b5f   async def peak_
+00012d00: 706f 7374 5f70 726f 6365 7373 696e 675f  post_processing_
+00012d10: 3228 0a20 2020 2020 2020 2073 656c 662c  2(.        self,
+00012d20: 0a20 2020 2020 2020 2062 6c6f 636b 3a20  .        block: 
+00012d30: 4675 6c6c 426c 6f63 6b2c 0a20 2020 2020  FullBlock,.     
+00012d40: 2020 2070 6565 723a 204f 7074 696f 6e61     peer: Optiona
+00012d50: 6c5b 5753 4368 6961 436f 6e6e 6563 7469  l[WSChiaConnecti
+00012d60: 6f6e 5d2c 0a20 2020 2020 2020 2073 7461  on],.        sta
+00012d70: 7465 5f63 6861 6e67 655f 7375 6d6d 6172  te_change_summar
+00012d80: 793a 2053 7461 7465 4368 616e 6765 5375  y: StateChangeSu
+00012d90: 6d6d 6172 792c 0a20 2020 2020 2020 2070  mmary,.        p
+00012da0: 7070 5f72 6573 756c 743a 2050 6561 6b50  pp_result: PeakP
+00012db0: 6f73 7450 726f 6365 7373 696e 6752 6573  ostProcessingRes
+00012dc0: 756c 742c 0a20 2020 2029 202d 3e20 4e6f  ult,.    ) -> No
+00012dd0: 6e65 3a0a 2020 2020 2020 2020 2222 220a  ne:.        """.
+00012de0: 2020 2020 2020 2020 446f 6573 204e 4f54          Does NOT
+00012df0: 206e 6565 6420 746f 2062 6520 6361 6c6c   need to be call
+00012e00: 6564 2075 6e64 6572 2074 6865 2062 6c6f  ed under the blo
+00012e10: 636b 6368 6169 6e20 6c6f 636b 2e20 4861  ckchain lock. Ha
+00012e20: 6e64 6c65 206f 7468 6572 2070 6172 7473  ndle other parts
+00012e30: 206f 6620 706f 7374 2070 726f 6365 7373   of post process
+00012e40: 696e 6720 6c69 6b65 2063 6f6d 6d75 6e69  ing like communi
+00012e50: 6361 7469 6e67 0a20 2020 2020 2020 2077  cating.        w
+00012e60: 6974 6820 7065 6572 730a 2020 2020 2020  ith peers.      
+00012e70: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+00012e80: 636f 7264 203d 2073 7461 7465 5f63 6861  cord = state_cha
+00012e90: 6e67 655f 7375 6d6d 6172 792e 7065 616b  nge_summary.peak
+00012ea0: 0a20 2020 2020 2020 2066 6f72 2062 756e  .        for bun
+00012eb0: 646c 652c 2072 6573 756c 742c 2073 7065  dle, result, spe
+00012ec0: 6e64 5f6e 616d 6520 696e 2070 7070 5f72  nd_name in ppp_r
+00012ed0: 6573 756c 742e 6d65 6d70 6f6f 6c5f 7065  esult.mempool_pe
+00012ee0: 616b 5f72 6573 756c 743a 0a20 2020 2020  ak_result:.     
+00012ef0: 2020 2020 2020 2073 656c 662e 6c6f 672e         self.log.
+00012f00: 6465 6275 6728 6622 4164 6465 6420 7472  debug(f"Added tr
+00012f10: 616e 7361 6374 696f 6e20 746f 206d 656d  ansaction to mem
+00012f20: 706f 6f6c 3a20 7b73 7065 6e64 5f6e 616d  pool: {spend_nam
+00012f30: 657d 2229 0a20 2020 2020 2020 2020 2020  e}").           
+00012f40: 206d 656d 706f 6f6c 5f69 7465 6d20 3d20   mempool_item = 
+00012f50: 7365 6c66 2e6d 656d 706f 6f6c 5f6d 616e  self.mempool_man
+00012f60: 6167 6572 2e67 6574 5f6d 656d 706f 6f6c  ager.get_mempool
+00012f70: 5f69 7465 6d28 7370 656e 645f 6e61 6d65  _item(spend_name
+00012f80: 290a 2020 2020 2020 2020 2020 2020 6173  ).            as
+00012f90: 7365 7274 206d 656d 706f 6f6c 5f69 7465  sert mempool_ite
+00012fa0: 6d20 6973 206e 6f74 204e 6f6e 650a 2020  m is not None.  
+00012fb0: 2020 2020 2020 2020 2020 6665 6573 203d            fees =
+00012fc0: 206d 656d 706f 6f6c 5f69 7465 6d2e 6665   mempool_item.fe
+00012fd0: 650a 2020 2020 2020 2020 2020 2020 6173  e.            as
+00012fe0: 7365 7274 2066 6565 7320 3e3d 2030 0a20  sert fees >= 0. 
+00012ff0: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+00013000: 7420 6d65 6d70 6f6f 6c5f 6974 656d 2e63  t mempool_item.c
+00013010: 6f73 7420 6973 206e 6f74 204e 6f6e 650a  ost is not None.
+00013020: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
+00013030: 7478 203d 2066 756c 6c5f 6e6f 6465 5f70  tx = full_node_p
+00013040: 726f 746f 636f 6c2e 4e65 7754 7261 6e73  rotocol.NewTrans
+00013050: 6163 7469 6f6e 280a 2020 2020 2020 2020  action(.        
+00013060: 2020 2020 2020 2020 7370 656e 645f 6e61          spend_na
+00013070: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
+00013080: 2020 2020 6d65 6d70 6f6f 6c5f 6974 656d      mempool_item
+00013090: 2e63 6f73 742c 0a20 2020 2020 2020 2020  .cost,.         
+000130a0: 2020 2020 2020 2066 6565 732c 0a20 2020         fees,.   
+000130b0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+000130c0: 2020 2020 2020 206d 7367 203d 206d 616b         msg = mak
+000130d0: 655f 6d73 6728 5072 6f74 6f63 6f6c 4d65  e_msg(ProtocolMe
+000130e0: 7373 6167 6554 7970 6573 2e6e 6577 5f74  ssageTypes.new_t
+000130f0: 7261 6e73 6163 7469 6f6e 2c20 6e65 775f  ransaction, new_
+00013100: 7478 290a 2020 2020 2020 2020 2020 2020  tx).            
+00013110: 6177 6169 7420 7365 6c66 2e73 6572 7665  await self.serve
+00013120: 722e 7365 6e64 5f74 6f5f 616c 6c28 5b6d  r.send_to_all([m
+00013130: 7367 5d2c 204e 6f64 6554 7970 652e 4655  sg], NodeType.FU
+00013140: 4c4c 5f4e 4f44 4529 0a0a 2020 2020 2020  LL_NODE)..      
+00013150: 2020 2320 4966 2074 6865 7265 2077 6572    # If there wer
+00013160: 6520 7065 6e64 696e 6720 656e 6420 6f66  e pending end of
+00013170: 2073 6c6f 7473 2074 6861 7420 6861 7070   slots that happ
+00013180: 656e 2061 6674 6572 2074 6869 7320 7065  en after this pe
+00013190: 616b 2c20 6272 6f61 6463 6173 7420 7468  ak, broadcast th
+000131a0: 656d 2069 6620 7468 6579 2061 7265 2061  em if they are a
+000131b0: 6464 6564 0a20 2020 2020 2020 2069 6620  dded.        if 
+000131c0: 7070 705f 7265 7375 6c74 2e66 6e73 5f70  ppp_result.fns_p
+000131d0: 6561 6b5f 7265 7375 6c74 2e61 6464 6564  eak_result.added
+000131e0: 5f65 6f73 2069 7320 6e6f 7420 4e6f 6e65  _eos is not None
+000131f0: 3a0a 2020 2020 2020 2020 2020 2020 6272  :.            br
+00013200: 6f61 6463 6173 7420 3d20 6675 6c6c 5f6e  oadcast = full_n
+00013210: 6f64 655f 7072 6f74 6f63 6f6c 2e4e 6577  ode_protocol.New
+00013220: 5369 676e 6167 6550 6f69 6e74 4f72 456e  SignagePointOrEn
+00013230: 644f 6653 7562 536c 6f74 280a 2020 2020  dOfSubSlot(.    
+00013240: 2020 2020 2020 2020 2020 2020 7070 705f              ppp_
+00013250: 7265 7375 6c74 2e66 6e73 5f70 6561 6b5f  result.fns_peak_
+00013260: 7265 7375 6c74 2e61 6464 6564 5f65 6f73  result.added_eos
+00013270: 2e63 6861 6c6c 656e 6765 5f63 6861 696e  .challenge_chain
+00013280: 2e63 6861 6c6c 656e 6765 5f63 6861 696e  .challenge_chain
+00013290: 5f65 6e64 5f6f 665f 736c 6f74 5f76 6466  _end_of_slot_vdf
+000132a0: 2e63 6861 6c6c 656e 6765 2c0a 2020 2020  .challenge,.    
+000132b0: 2020 2020 2020 2020 2020 2020 7070 705f              ppp_
+000132c0: 7265 7375 6c74 2e66 6e73 5f70 6561 6b5f  result.fns_peak_
+000132d0: 7265 7375 6c74 2e61 6464 6564 5f65 6f73  result.added_eos
+000132e0: 2e63 6861 6c6c 656e 6765 5f63 6861 696e  .challenge_chain
+000132f0: 2e67 6574 5f68 6173 6828 292c 0a20 2020  .get_hash(),.   
+00013300: 2020 2020 2020 2020 2020 2020 2075 696e               uin
+00013310: 7438 2830 292c 0a20 2020 2020 2020 2020  t8(0),.         
+00013320: 2020 2020 2020 2070 7070 5f72 6573 756c         ppp_resul
+00013330: 742e 666e 735f 7065 616b 5f72 6573 756c  t.fns_peak_resul
+00013340: 742e 6164 6465 645f 656f 732e 7265 7761  t.added_eos.rewa
+00013350: 7264 5f63 6861 696e 2e65 6e64 5f6f 665f  rd_chain.end_of_
+00013360: 736c 6f74 5f76 6466 2e63 6861 6c6c 656e  slot_vdf.challen
+00013370: 6765 2c0a 2020 2020 2020 2020 2020 2020  ge,.            
+00013380: 290a 2020 2020 2020 2020 2020 2020 6d73  ).            ms
+00013390: 6720 3d20 6d61 6b65 5f6d 7367 2850 726f  g = make_msg(Pro
+000133a0: 746f 636f 6c4d 6573 7361 6765 5479 7065  tocolMessageType
+000133b0: 732e 6e65 775f 7369 676e 6167 655f 706f  s.new_signage_po
+000133c0: 696e 745f 6f72 5f65 6e64 5f6f 665f 7375  int_or_end_of_su
+000133d0: 625f 736c 6f74 2c20 6272 6f61 6463 6173  b_slot, broadcas
+000133e0: 7429 0a20 2020 2020 2020 2020 2020 2061  t).            a
+000133f0: 7761 6974 2073 656c 662e 7365 7276 6572  wait self.server
+00013400: 2e73 656e 645f 746f 5f61 6c6c 285b 6d73  .send_to_all([ms
+00013410: 675d 2c20 4e6f 6465 5479 7065 2e46 554c  g], NodeType.FUL
+00013420: 4c5f 4e4f 4445 290a 0a20 2020 2020 2020  L_NODE)..       
+00013430: 2023 2054 4f44 4f3a 206d 6179 6265 2061   # TODO: maybe a
+00013440: 6464 2061 6e64 2062 726f 6164 6361 7374  dd and broadcast
+00013450: 206e 6577 2049 5073 2061 7320 7765 6c6c   new IPs as well
+00013460: 0a0a 2020 2020 2020 2020 6966 2072 6563  ..        if rec
+00013470: 6f72 642e 6865 6967 6874 2025 2031 3030  ord.height % 100
+00013480: 3020 3d3d 2030 3a0a 2020 2020 2020 2020  0 == 0:.        
+00013490: 2020 2020 2320 4f63 6361 7369 6f6e 616c      # Occasional
+000134a0: 6c79 2063 6c65 6172 2064 6174 6120 696e  ly clear data in
+000134b0: 2066 756c 6c20 6e6f 6465 2073 746f 7265   full node store
+000134c0: 2074 6f20 6b65 6570 206d 656d 6f72 7920   to keep memory 
+000134d0: 7573 6167 6520 736d 616c 6c0a 2020 2020  usage small.    
+000134e0: 2020 2020 2020 2020 7365 6c66 2e66 756c          self.ful
+000134f0: 6c5f 6e6f 6465 5f73 746f 7265 2e63 6c65  l_node_store.cle
+00013500: 6172 5f6f 6c64 5f63 6163 6865 5f65 6e74  ar_old_cache_ent
+00013510: 7269 6573 2829 0a0a 2020 2020 2020 2020  ries()..        
+00013520: 6966 2073 656c 662e 7379 6e63 5f73 746f  if self.sync_sto
+00013530: 7265 2e67 6574 5f73 796e 635f 6d6f 6465  re.get_sync_mode
+00013540: 2829 2069 7320 4661 6c73 653a 0a20 2020  () is False:.   
+00013550: 2020 2020 2020 2020 2061 7761 6974 2073           await s
+00013560: 656c 662e 7365 6e64 5f70 6561 6b5f 746f  elf.send_peak_to
+00013570: 5f74 696d 656c 6f72 6473 2862 6c6f 636b  _timelords(block
+00013580: 290a 0a20 2020 2020 2020 2020 2020 2023  )..            #
+00013590: 2054 656c 6c20 6675 6c6c 206e 6f64 6573   Tell full nodes
+000135a0: 2061 626f 7574 2074 6865 206e 6577 2070   about the new p
+000135b0: 6561 6b0a 2020 2020 2020 2020 2020 2020  eak.            
+000135c0: 6d73 6720 3d20 6d61 6b65 5f6d 7367 280a  msg = make_msg(.
+000135d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000135e0: 5072 6f74 6f63 6f6c 4d65 7373 6167 6554  ProtocolMessageT
+000135f0: 7970 6573 2e6e 6577 5f70 6561 6b2c 0a20  ypes.new_peak,. 
+00013600: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00013610: 756c 6c5f 6e6f 6465 5f70 726f 746f 636f  ull_node_protoco
+00013620: 6c2e 4e65 7750 6561 6b28 0a20 2020 2020  l.NewPeak(.     
+00013630: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00013640: 6563 6f72 642e 6865 6164 6572 5f68 6173  ecord.header_has
+00013650: 682c 0a20 2020 2020 2020 2020 2020 2020  h,.             
+00013660: 2020 2020 2020 2072 6563 6f72 642e 6865         record.he
+00013670: 6967 6874 2c0a 2020 2020 2020 2020 2020  ight,.          
+00013680: 2020 2020 2020 2020 2020 7265 636f 7264            record
+00013690: 2e77 6569 6768 742c 0a20 2020 2020 2020  .weight,.       
+000136a0: 2020 2020 2020 2020 2020 2020 2073 7461               sta
+000136b0: 7465 5f63 6861 6e67 655f 7375 6d6d 6172  te_change_summar
+000136c0: 792e 666f 726b 5f68 6569 6768 742c 0a20  y.fork_height,. 
+000136d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000136e0: 2020 2062 6c6f 636b 2e72 6577 6172 645f     block.reward_
+000136f0: 6368 6169 6e5f 626c 6f63 6b2e 6765 745f  chain_block.get_
+00013700: 756e 6669 6e69 7368 6564 2829 2e67 6574  unfinished().get
+00013710: 5f68 6173 6828 292c 0a20 2020 2020 2020  _hash(),.       
+00013720: 2020 2020 2020 2020 2029 2c0a 2020 2020           ),.    
+00013730: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00013740: 2020 2020 2020 6966 2070 6565 7220 6973        if peer is
+00013750: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00013760: 2020 2020 2020 2020 2020 2061 7761 6974             await
+00013770: 2073 656c 662e 7365 7276 6572 2e73 656e   self.server.sen
+00013780: 645f 746f 5f61 6c6c 285b 6d73 675d 2c20  d_to_all([msg], 
+00013790: 4e6f 6465 5479 7065 2e46 554c 4c5f 4e4f  NodeType.FULL_NO
+000137a0: 4445 2c20 7065 6572 2e70 6565 725f 6e6f  DE, peer.peer_no
+000137b0: 6465 5f69 6429 0a20 2020 2020 2020 2020  de_id).         
+000137c0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+000137d0: 2020 2020 2020 2020 2061 7761 6974 2073           await s
+000137e0: 656c 662e 7365 7276 6572 2e73 656e 645f  elf.server.send_
+000137f0: 746f 5f61 6c6c 285b 6d73 675d 2c20 4e6f  to_all([msg], No
+00013800: 6465 5479 7065 2e46 554c 4c5f 4e4f 4445  deType.FULL_NODE
+00013810: 290a 0a20 2020 2020 2020 2063 6f69 6e5f  )..        coin_
+00013820: 6869 6e74 733a 2044 6963 745b 6279 7465  hints: Dict[byte
+00013830: 7333 322c 2062 7974 6573 3332 5d20 3d20  s32, bytes32] = 
+00013840: 7b0a 2020 2020 2020 2020 2020 2020 636f  {.            co
+00013850: 696e 5f69 643a 2062 7974 6573 3332 2868  in_id: bytes32(h
+00013860: 696e 7429 2066 6f72 2063 6f69 6e5f 6964  int) for coin_id
+00013870: 2c20 6869 6e74 2069 6e20 7070 705f 7265  , hint in ppp_re
+00013880: 7375 6c74 2e68 696e 7473 2069 6620 6c65  sult.hints if le
+00013890: 6e28 6869 6e74 2920 3d3d 2033 320a 2020  n(hint) == 32.  
+000138a0: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
+000138b0: 2070 6561 6b20 3d20 5065 616b 280a 2020   peak = Peak(.  
+000138c0: 2020 2020 2020 2020 2020 7374 6174 655f            state_
+000138d0: 6368 616e 6765 5f73 756d 6d61 7279 2e70  change_summary.p
+000138e0: 6561 6b2e 6865 6164 6572 5f68 6173 682c  eak.header_hash,
+000138f0: 2073 7461 7465 5f63 6861 6e67 655f 7375   state_change_su
+00013900: 6d6d 6172 792e 7065 616b 2e68 6569 6768  mmary.peak.heigh
+00013910: 742c 2073 7461 7465 5f63 6861 6e67 655f  t, state_change_
+00013920: 7375 6d6d 6172 792e 7065 616b 2e77 6569  summary.peak.wei
+00013930: 6768 740a 2020 2020 2020 2020 290a 0a20  ght.        ).. 
+00013940: 2020 2020 2020 2023 204c 6f6f 6b73 2075         # Looks u
+00013950: 7020 636f 696e 2072 6563 6f72 6473 2069  p coin records i
+00013960: 6e20 4442 2066 6f72 2074 6865 2063 6f69  n DB for the coi
+00013970: 6e73 2074 6861 7420 7761 6c6c 6574 7320  ns that wallets 
+00013980: 6172 6520 696e 7465 7265 7374 6564 2069  are interested i
+00013990: 6e0a 2020 2020 2020 2020 6e65 775f 7374  n.        new_st
+000139a0: 6174 6573 203d 2061 7761 6974 2073 656c  ates = await sel
+000139b0: 662e 636f 696e 5f73 746f 7265 2e67 6574  f.coin_store.get
+000139c0: 5f63 6f69 6e5f 7265 636f 7264 7328 7070  _coin_records(pp
+000139d0: 705f 7265 7375 6c74 2e6c 6f6f 6b75 705f  p_result.lookup_
+000139e0: 636f 696e 5f69 6473 290a 0a20 2020 2020  coin_ids)..     
+000139f0: 2020 2061 7761 6974 2073 656c 662e 7761     await self.wa
+00013a00: 6c6c 6574 5f73 796e 635f 7175 6575 652e  llet_sync_queue.
+00013a10: 7075 7428 0a20 2020 2020 2020 2020 2020  put(.           
+00013a20: 2057 616c 6c65 7455 7064 6174 6528 0a20   WalletUpdate(. 
+00013a30: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00013a40: 7461 7465 5f63 6861 6e67 655f 7375 6d6d  tate_change_summ
+00013a50: 6172 792e 666f 726b 5f68 6569 6768 742c  ary.fork_height,
+00013a60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013a70: 2070 6561 6b2c 0a20 2020 2020 2020 2020   peak,.         
+00013a80: 2020 2020 2020 2073 7461 7465 5f63 6861         state_cha
+00013a90: 6e67 655f 7375 6d6d 6172 792e 726f 6c6c  nge_summary.roll
+00013aa0: 6564 5f62 6163 6b5f 7265 636f 7264 7320  ed_back_records 
+00013ab0: 2b20 6e65 775f 7374 6174 6573 2c0a 2020  + new_states,.  
+00013ac0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00013ad0: 696e 5f68 696e 7473 2c0a 2020 2020 2020  in_hints,.      
+00013ae0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00013af0: 290a 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00013b00: 5f73 7461 7465 5f63 6861 6e67 6564 2822  _state_changed("
+00013b10: 6e65 775f 7065 616b 2229 0a0a 2020 2020  new_peak")..    
+00013b20: 6173 796e 6320 6465 6620 6164 645f 626c  async def add_bl
+00013b30: 6f63 6b28 0a20 2020 2020 2020 2073 656c  ock(.        sel
+00013b40: 662c 0a20 2020 2020 2020 2062 6c6f 636b  f,.        block
+00013b50: 3a20 4675 6c6c 426c 6f63 6b2c 0a20 2020  : FullBlock,.   
+00013b60: 2020 2020 2070 6565 723a 204f 7074 696f       peer: Optio
+00013b70: 6e61 6c5b 5753 4368 6961 436f 6e6e 6563  nal[WSChiaConnec
+00013b80: 7469 6f6e 5d20 3d20 4e6f 6e65 2c0a 2020  tion] = None,.  
+00013b90: 2020 2020 2020 7261 6973 655f 6f6e 5f64        raise_on_d
+00013ba0: 6973 636f 6e6e 6563 7465 643a 2062 6f6f  isconnected: boo
+00013bb0: 6c20 3d20 4661 6c73 652c 0a20 2020 2020  l = False,.     
+00013bc0: 2020 2066 6f72 6b5f 696e 666f 3a20 4f70     fork_info: Op
+00013bd0: 7469 6f6e 616c 5b46 6f72 6b49 6e66 6f5d  tional[ForkInfo]
+00013be0: 203d 204e 6f6e 652c 0a20 2020 2029 202d   = None,.    ) -
+00013bf0: 3e20 4f70 7469 6f6e 616c 5b4d 6573 7361  > Optional[Messa
+00013c00: 6765 5d3a 0a20 2020 2020 2020 2022 2222  ge]:.        """
+00013c10: 0a20 2020 2020 2020 2041 6464 2061 2066  .        Add a f
+00013c20: 756c 6c20 626c 6f63 6b20 6672 6f6d 2061  ull block from a
+00013c30: 2070 6565 7220 6675 6c6c 206e 6f64 6520   peer full node 
+00013c40: 286f 7220 6f75 7273 656c 7665 7329 2e0a  (or ourselves)..
+00013c50: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00013c60: 2020 2020 6966 2073 656c 662e 7379 6e63      if self.sync
+00013c70: 5f73 746f 7265 2e67 6574 5f73 796e 635f  _store.get_sync_
+00013c80: 6d6f 6465 2829 3a0a 2020 2020 2020 2020  mode():.        
+00013c90: 2020 2020 7265 7475 726e 204e 6f6e 650a      return None.
+00013ca0: 0a20 2020 2020 2020 2023 2041 6464 7320  .        # Adds 
+00013cb0: 7468 6520 626c 6f63 6b20 746f 2073 6565  the block to see
+00013cc0: 6e2c 2061 6e64 2063 6865 636b 2069 6620  n, and check if 
+00013cd0: 6974 2773 2073 6565 6e20 6265 666f 7265  it's seen before
+00013ce0: 2028 7768 6963 6820 6d65 616e 7320 6865   (which means he
+00013cf0: 6164 6572 2069 7320 696e 206d 656d 6f72  ader is in memor
+00013d00: 7929 0a20 2020 2020 2020 2068 6561 6465  y).        heade
+00013d10: 725f 6861 7368 203d 2062 6c6f 636b 2e68  r_hash = block.h
+00013d20: 6561 6465 725f 6861 7368 0a20 2020 2020  eader_hash.     
+00013d30: 2020 2069 6620 7365 6c66 2e62 6c6f 636b     if self.block
+00013d40: 6368 6169 6e2e 636f 6e74 6169 6e73 5f62  chain.contains_b
+00013d50: 6c6f 636b 2868 6561 6465 725f 6861 7368  lock(header_hash
+00013d60: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+00013d70: 6574 7572 6e20 4e6f 6e65 0a0a 2020 2020  eturn None..    
+00013d80: 2020 2020 7072 655f 7661 6c69 6461 7469      pre_validati
+00013d90: 6f6e 5f72 6573 756c 743a 204f 7074 696f  on_result: Optio
+00013da0: 6e61 6c5b 5072 6556 616c 6964 6174 696f  nal[PreValidatio
+00013db0: 6e52 6573 756c 745d 203d 204e 6f6e 650a  nResult] = None.
+00013dc0: 2020 2020 2020 2020 6966 2028 0a20 2020          if (.   
+00013dd0: 2020 2020 2020 2020 2062 6c6f 636b 2e69           block.i
+00013de0: 735f 7472 616e 7361 6374 696f 6e5f 626c  s_transaction_bl
+00013df0: 6f63 6b28 290a 2020 2020 2020 2020 2020  ock().          
+00013e00: 2020 616e 6420 626c 6f63 6b2e 7472 616e    and block.tran
+00013e10: 7361 6374 696f 6e73 5f69 6e66 6f20 6973  sactions_info is
+00013e20: 206e 6f74 204e 6f6e 650a 2020 2020 2020   not None.      
+00013e30: 2020 2020 2020 616e 6420 626c 6f63 6b2e        and block.
+00013e40: 7472 616e 7361 6374 696f 6e73 5f69 6e66  transactions_inf
+00013e50: 6f2e 6765 6e65 7261 746f 725f 726f 6f74  o.generator_root
+00013e60: 2021 3d20 6279 7465 7328 5b30 5d20 2a20   != bytes([0] * 
+00013e70: 3332 290a 2020 2020 2020 2020 2020 2020  32).            
+00013e80: 616e 6420 626c 6f63 6b2e 7472 616e 7361  and block.transa
+00013e90: 6374 696f 6e73 5f67 656e 6572 6174 6f72  ctions_generator
+00013ea0: 2069 7320 4e6f 6e65 0a20 2020 2020 2020   is None.       
+00013eb0: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
+00013ec0: 2320 5468 6973 2069 7320 7468 6520 6361  # This is the ca
+00013ed0: 7365 2077 6865 7265 2077 6520 616c 7265  se where we alre
+00013ee0: 6164 7920 6861 6420 7468 6520 756e 6669  ady had the unfi
+00013ef0: 6e69 7368 6564 2062 6c6f 636b 2c20 616e  nished block, an
+00013f00: 6420 6173 6b65 6420 666f 7220 7468 6973  d asked for this
+00013f10: 2062 6c6f 636b 2077 6974 686f 7574 0a20   block without. 
+00013f20: 2020 2020 2020 2020 2020 2023 2074 6865             # the
+00013f30: 2074 7261 6e73 6163 7469 6f6e 7320 2873   transactions (s
+00013f40: 696e 6365 2077 6520 616c 7265 6164 7920  ince we already 
+00013f50: 6861 6420 7468 656d 292e 2054 6865 7265  had them). There
+00013f60: 666f 7265 2c20 6865 7265 2077 6520 6164  fore, here we ad
+00013f70: 6420 7468 6520 7472 616e 7361 6374 696f  d the transactio
+00013f80: 6e73 2e0a 2020 2020 2020 2020 2020 2020  ns..            
+00013f90: 756e 6669 6e69 7368 6564 5f72 683a 2062  unfinished_rh: b
+00013fa0: 7974 6573 3332 203d 2062 6c6f 636b 2e72  ytes32 = block.r
+00013fb0: 6577 6172 645f 6368 6169 6e5f 626c 6f63  eward_chain_bloc
+00013fc0: 6b2e 6765 745f 756e 6669 6e69 7368 6564  k.get_unfinished
+00013fd0: 2829 2e67 6574 5f68 6173 6828 290a 2020  ().get_hash().  
+00013fe0: 2020 2020 2020 2020 2020 666f 6c69 6167            foliag
+00013ff0: 655f 6861 7368 3a20 4f70 7469 6f6e 616c  e_hash: Optional
+00014000: 5b62 7974 6573 3332 5d20 3d20 626c 6f63  [bytes32] = bloc
+00014010: 6b2e 666f 6c69 6167 652e 666f 6c69 6167  k.foliage.foliag
+00014020: 655f 7472 616e 7361 6374 696f 6e5f 626c  e_transaction_bl
+00014030: 6f63 6b5f 6861 7368 0a20 2020 2020 2020  ock_hash.       
+00014040: 2020 2020 2061 7373 6572 7420 666f 6c69       assert foli
+00014050: 6167 655f 6861 7368 2069 7320 6e6f 7420  age_hash is not 
+00014060: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+00014070: 2075 6e66 5f65 6e74 7279 3a20 4f70 7469   unf_entry: Opti
+00014080: 6f6e 616c 5b55 6e66 696e 6973 6865 6442  onal[UnfinishedB
+00014090: 6c6f 636b 456e 7472 795d 203d 2073 656c  lockEntry] = sel
+000140a0: 662e 6675 6c6c 5f6e 6f64 655f 7374 6f72  f.full_node_stor
+000140b0: 652e 6765 745f 756e 6669 6e69 7368 6564  e.get_unfinished
+000140c0: 5f62 6c6f 636b 5f72 6573 756c 7428 0a20  _block_result(. 
+000140d0: 2020 2020 2020 2020 2020 2020 2020 2075                 u
+000140e0: 6e66 696e 6973 6865 645f 7268 2c20 666f  nfinished_rh, fo
+000140f0: 6c69 6167 655f 6861 7368 0a20 2020 2020  liage_hash.     
+00014100: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00014110: 2020 2020 2069 6620 280a 2020 2020 2020       if (.      
+00014120: 2020 2020 2020 2020 2020 756e 665f 656e            unf_en
+00014130: 7472 7920 6973 206e 6f74 204e 6f6e 650a  try is not None.
+00014140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014150: 616e 6420 756e 665f 656e 7472 792e 756e  and unf_entry.un
+00014160: 6669 6e69 7368 6564 5f62 6c6f 636b 2069  finished_block i
+00014170: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
+00014180: 2020 2020 2020 2020 2020 2061 6e64 2075             and u
+00014190: 6e66 5f65 6e74 7279 2e75 6e66 696e 6973  nf_entry.unfinis
+000141a0: 6865 645f 626c 6f63 6b2e 7472 616e 7361  hed_block.transa
+000141b0: 6374 696f 6e73 5f67 656e 6572 6174 6f72  ctions_generator
+000141c0: 2069 7320 6e6f 7420 4e6f 6e65 0a20 2020   is not None.   
+000141d0: 2020 2020 2020 2020 2020 2020 2061 6e64               and
+000141e0: 2075 6e66 5f65 6e74 7279 2e75 6e66 696e   unf_entry.unfin
+000141f0: 6973 6865 645f 626c 6f63 6b2e 666f 6c69  ished_block.foli
+00014200: 6167 655f 7472 616e 7361 6374 696f 6e5f  age_transaction_
+00014210: 626c 6f63 6b20 3d3d 2062 6c6f 636b 2e66  block == block.f
+00014220: 6f6c 6961 6765 5f74 7261 6e73 6163 7469  oliage_transacti
+00014230: 6f6e 5f62 6c6f 636b 0a20 2020 2020 2020  on_block.       
+00014240: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
+00014250: 2020 2020 2020 2020 2320 5765 2063 6865          # We che
+00014260: 636b 6564 2074 6861 7420 7468 6520 7472  cked that the tr
+00014270: 616e 7361 6374 696f 6e20 626c 6f63 6b20  ansaction block 
+00014280: 6973 2074 6865 2073 616d 652c 2074 6865  is the same, the
+00014290: 7265 666f 7265 2061 6c6c 2074 7261 6e73  refore all trans
+000142a0: 6163 7469 6f6e 7320 616e 6420 7468 6520  actions and the 
+000142b0: 7369 676e 6174 7572 650a 2020 2020 2020  signature.      
+000142c0: 2020 2020 2020 2020 2020 2320 6d75 7374            # must
+000142d0: 2062 6520 6964 656e 7469 6361 6c20 696e   be identical in
+000142e0: 2074 6865 2075 6e66 696e 6973 6865 6420   the unfinished 
+000142f0: 616e 6420 6669 6e69 7368 6564 2062 6c6f  and finished blo
+00014300: 636b 732e 2057 6520 6361 6e20 7468 6572  cks. We can ther
+00014310: 6566 6f72 6520 7573 6520 7468 6520 6361  efore use the ca
+00014320: 6368 652e 0a0a 2020 2020 2020 2020 2020  che...          
+00014330: 2020 2020 2020 2320 7468 6973 2069 7320        # this is 
+00014340: 6120 7472 616e 7361 6374 696f 6e20 626c  a transaction bl
+00014350: 6f63 6b2c 2074 6865 2066 6f6c 6961 6765  ock, the foliage
+00014360: 2068 6173 6820 7368 6f75 6c64 2062 6520   hash should be 
+00014370: 7365 740a 2020 2020 2020 2020 2020 2020  set.            
+00014380: 2020 2020 6173 7365 7274 2066 6f6c 6961      assert folia
+00014390: 6765 5f68 6173 6820 6973 206e 6f74 204e  ge_hash is not N
+000143a0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+000143b0: 2020 2020 7072 655f 7661 6c69 6461 7469      pre_validati
+000143c0: 6f6e 5f72 6573 756c 7420 3d20 756e 665f  on_result = unf_
+000143d0: 656e 7472 792e 7265 7375 6c74 0a20 2020  entry.result.   
+000143e0: 2020 2020 2020 2020 2020 2020 2061 7373               ass
+000143f0: 6572 7420 7072 655f 7661 6c69 6461 7469  ert pre_validati
+00014400: 6f6e 5f72 6573 756c 7420 6973 206e 6f74  on_result is not
+00014410: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
+00014420: 2020 2020 2020 626c 6f63 6b20 3d20 626c        block = bl
+00014430: 6f63 6b2e 7265 706c 6163 6528 0a20 2020  ock.replace(.   
+00014440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014450: 2074 7261 6e73 6163 7469 6f6e 735f 6765   transactions_ge
+00014460: 6e65 7261 746f 723d 756e 665f 656e 7472  nerator=unf_entr
+00014470: 792e 756e 6669 6e69 7368 6564 5f62 6c6f  y.unfinished_blo
+00014480: 636b 2e74 7261 6e73 6163 7469 6f6e 735f  ck.transactions_
+00014490: 6765 6e65 7261 746f 722c 0a20 2020 2020  generator,.     
+000144a0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+000144b0: 7261 6e73 6163 7469 6f6e 735f 6765 6e65  ransactions_gene
+000144c0: 7261 746f 725f 7265 665f 6c69 7374 3d75  rator_ref_list=u
+000144d0: 6e66 5f65 6e74 7279 2e75 6e66 696e 6973  nf_entry.unfinis
+000144e0: 6865 645f 626c 6f63 6b2e 7472 616e 7361  hed_block.transa
+000144f0: 6374 696f 6e73 5f67 656e 6572 6174 6f72  ctions_generator
+00014500: 5f72 6566 5f6c 6973 742c 0a20 2020 2020  _ref_list,.     
+00014510: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00014520: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00014530: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00014540: 2057 6520 7374 696c 6c20 646f 206e 6f74   We still do not
+00014550: 2068 6176 6520 7468 6520 636f 7272 6563   have the correc
+00014560: 7420 696e 666f 726d 6174 696f 6e20 666f  t information fo
+00014570: 7220 7468 6973 2062 6c6f 636b 2c20 7065  r this block, pe
+00014580: 7268 6170 7320 7468 6572 6520 6973 2061  rhaps there is a
+00014590: 2064 7570 6c69 6361 7465 2062 6c6f 636b   duplicate block
+000145a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000145b0: 2023 2077 6974 6820 7468 6520 7361 6d65   # with the same
+000145c0: 2075 6e66 696e 6973 6865 6420 626c 6f63   unfinished bloc
+000145d0: 6b20 6861 7368 2069 6e20 7468 6520 6361  k hash in the ca
+000145e0: 6368 652c 2073 6f20 7765 206e 6565 6420  che, so we need 
+000145f0: 746f 2066 6574 6368 2074 6865 2063 6f72  to fetch the cor
+00014600: 7265 6374 206f 6e65 0a20 2020 2020 2020  rect one.       
+00014610: 2020 2020 2020 2020 2069 6620 7065 6572           if peer
+00014620: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+00014630: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00014640: 7475 726e 204e 6f6e 650a 0a20 2020 2020  turn None..     
+00014650: 2020 2020 2020 2020 2020 2062 6c6f 636b             block
+00014660: 5f72 6573 706f 6e73 653a 204f 7074 696f  _response: Optio
+00014670: 6e61 6c5b 416e 795d 203d 2061 7761 6974  nal[Any] = await
+00014680: 2070 6565 722e 6361 6c6c 5f61 7069 280a   peer.call_api(.
+00014690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000146a0: 2020 2020 4675 6c6c 4e6f 6465 4150 492e      FullNodeAPI.
+000146b0: 7265 7175 6573 745f 626c 6f63 6b2c 2066  request_block, f
+000146c0: 756c 6c5f 6e6f 6465 5f70 726f 746f 636f  ull_node_protoco
+000146d0: 6c2e 5265 7175 6573 7442 6c6f 636b 2862  l.RequestBlock(b
+000146e0: 6c6f 636b 2e68 6569 6768 742c 2054 7275  lock.height, Tru
+000146f0: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+00014700: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+00014710: 2020 2020 2069 6620 626c 6f63 6b5f 7265       if block_re
+00014720: 7370 6f6e 7365 2069 7320 4e6f 6e65 206f  sponse is None o
+00014730: 7220 6e6f 7420 6973 696e 7374 616e 6365  r not isinstance
+00014740: 2862 6c6f 636b 5f72 6573 706f 6e73 652c  (block_response,
+00014750: 2066 756c 6c5f 6e6f 6465 5f70 726f 746f   full_node_proto
+00014760: 636f 6c2e 5265 7370 6f6e 6442 6c6f 636b  col.RespondBlock
+00014770: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00014780: 2020 2020 2020 2073 656c 662e 6c6f 672e         self.log.
+00014790: 7761 726e 696e 6728 0a20 2020 2020 2020  warning(.       
+000147a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000147b0: 2066 2257 6173 206e 6f74 2061 626c 6520   f"Was not able 
+000147c0: 746f 2066 6574 6368 2074 6865 2063 6f72  to fetch the cor
+000147d0: 7265 6374 2062 6c6f 636b 2066 6f72 2068  rect block for h
+000147e0: 6569 6768 7420 7b62 6c6f 636b 2e68 6569  eight {block.hei
+000147f0: 6768 747d 207b 626c 6f63 6b5f 7265 7370  ght} {block_resp
+00014800: 6f6e 7365 7d22 0a20 2020 2020 2020 2020  onse}".         
+00014810: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00014820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014830: 2072 6574 7572 6e20 4e6f 6e65 0a20 2020   return None.   
+00014840: 2020 2020 2020 2020 2020 2020 206e 6577               new
+00014850: 5f62 6c6f 636b 3a20 4675 6c6c 426c 6f63  _block: FullBloc
+00014860: 6b20 3d20 626c 6f63 6b5f 7265 7370 6f6e  k = block_respon
+00014870: 7365 2e62 6c6f 636b 0a20 2020 2020 2020  se.block.       
+00014880: 2020 2020 2020 2020 2069 6620 6e65 775f           if new_
+00014890: 626c 6f63 6b2e 666f 6c69 6167 655f 7472  block.foliage_tr
+000148a0: 616e 7361 6374 696f 6e5f 626c 6f63 6b20  ansaction_block 
+000148b0: 213d 2062 6c6f 636b 2e66 6f6c 6961 6765  != block.foliage
+000148c0: 5f74 7261 6e73 6163 7469 6f6e 5f62 6c6f  _transaction_blo
+000148d0: 636b 3a0a 2020 2020 2020 2020 2020 2020  ck:.            
+000148e0: 2020 2020 2020 2020 7365 6c66 2e6c 6f67          self.log
+000148f0: 2e77 6172 6e69 6e67 280a 2020 2020 2020  .warning(.      
+00014900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014910: 2020 6622 5265 6365 6976 6564 2074 6865    f"Received the
+00014920: 2077 726f 6e67 2062 6c6f 636b 2066 6f72   wrong block for
+00014930: 2068 6569 6768 7420 7b62 6c6f 636b 2e68   height {block.h
+00014940: 6569 6768 747d 207b 6e65 775f 626c 6f63  eight} {new_bloc
+00014950: 6b2e 6865 6164 6572 5f68 6173 682e 6865  k.header_hash.he
+00014960: 7828 297d 220a 2020 2020 2020 2020 2020  x()}".          
+00014970: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00014980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014990: 7265 7475 726e 204e 6f6e 650a 2020 2020  return None.    
+000149a0: 2020 2020 2020 2020 2020 2020 6173 7365              asse
+000149b0: 7274 206e 6577 5f62 6c6f 636b 2e74 7261  rt new_block.tra
+000149c0: 6e73 6163 7469 6f6e 735f 6765 6e65 7261  nsactions_genera
+000149d0: 746f 7220 6973 206e 6f74 204e 6f6e 650a  tor is not None.
+000149e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000149f0: 2073 656c 662e 6c6f 672e 6465 6275 6728   self.log.debug(
+00014a00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014a10: 2020 2020 2066 2257 726f 6e67 2069 6e66       f"Wrong inf
+00014a20: 6f20 696e 2074 6865 2063 6163 6865 2066  o in the cache f
+00014a30: 6f72 2062 6820 7b6e 6577 5f62 6c6f 636b  or bh {new_block
+00014a40: 2e68 6561 6465 725f 6861 7368 2e68 6578  .header_hash.hex
+00014a50: 2829 7d2c 2022 0a20 2020 2020 2020 2020  ()}, ".         
+00014a60: 2020 2020 2020 2020 2020 2066 2274 6865             f"the
+00014a70: 7265 206d 6967 6874 2062 6520 6d75 6c74  re might be mult
+00014a80: 6970 6c65 2062 6c6f 636b 7320 6672 6f6d  iple blocks from
+00014a90: 2074 6865 2022 0a20 2020 2020 2020 2020   the ".         
+00014aa0: 2020 2020 2020 2020 2020 2066 2273 616d             f"sam
+00014ab0: 6520 6661 726d 6572 2077 6974 6820 7468  e farmer with th
+00014ac0: 6520 7361 6d65 2070 6f73 7061 6365 2e22  e same pospace."
+00014ad0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014ae0: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+00014af0: 2020 2023 2054 6869 7320 7265 6375 7273     # This recurs
+00014b00: 696f 6e20 656e 6473 2068 6572 652c 2077  ion ends here, w
+00014b10: 6520 6361 6e6e 6f74 2072 6563 7572 7365  e cannot recurse
+00014b20: 2061 6761 696e 2062 6563 6175 7365 2074   again because t
+00014b30: 7261 6e73 6163 7469 6f6e 735f 6765 6e65  ransactions_gene
+00014b40: 7261 746f 7220 6973 206e 6f74 204e 6f6e  rator is not Non
+00014b50: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00014b60: 2020 7265 7475 726e 2061 7761 6974 2073    return await s
+00014b70: 656c 662e 6164 645f 626c 6f63 6b28 6e65  elf.add_block(ne
+00014b80: 775f 626c 6f63 6b2c 2070 6565 7229 0a20  w_block, peer). 
+00014b90: 2020 2020 2020 2073 7461 7465 5f63 6861         state_cha
+00014ba0: 6e67 655f 7375 6d6d 6172 793a 204f 7074  nge_summary: Opt
+00014bb0: 696f 6e61 6c5b 5374 6174 6543 6861 6e67  ional[StateChang
+00014bc0: 6553 756d 6d61 7279 5d20 3d20 4e6f 6e65  eSummary] = None
+00014bd0: 0a20 2020 2020 2020 2070 7070 5f72 6573  .        ppp_res
+00014be0: 756c 743a 204f 7074 696f 6e61 6c5b 5065  ult: Optional[Pe
+00014bf0: 616b 506f 7374 5072 6f63 6573 7369 6e67  akPostProcessing
+00014c00: 5265 7375 6c74 5d20 3d20 4e6f 6e65 0a20  Result] = None. 
+00014c10: 2020 2020 2020 2061 7379 6e63 2077 6974         async wit
+00014c20: 6820 7365 6c66 2e62 6c6f 636b 6368 6169  h self.blockchai
+00014c30: 6e2e 7072 696f 7269 7479 5f6d 7574 6578  n.priority_mutex
+00014c40: 2e61 6371 7569 7265 2870 7269 6f72 6974  .acquire(priorit
+00014c50: 793d 426c 6f63 6b63 6861 696e 4d75 7465  y=BlockchainMute
+00014c60: 7850 7269 6f72 6974 792e 6869 6768 292c  xPriority.high),
+00014c70: 2065 6e61 626c 655f 7072 6f66 696c 6572   enable_profiler
+00014c80: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
+00014c90: 6c66 2e70 726f 6669 6c65 5f62 6c6f 636b  lf.profile_block
+00014ca0: 5f76 616c 6964 6174 696f 6e0a 2020 2020  _validation.    
+00014cb0: 2020 2020 2920 6173 2070 723a 0a20 2020      ) as pr:.   
+00014cc0: 2020 2020 2020 2020 2023 2041 6674 6572           # After
+00014cd0: 2061 6371 7569 7269 6e67 2074 6865 206c   acquiring the l
+00014ce0: 6f63 6b2c 2063 6865 636b 2061 6761 696e  ock, check again
+00014cf0: 2c20 6265 6361 7573 6520 616e 6f74 6865  , because anothe
+00014d00: 7220 6173 796e 6369 6f20 7468 7265 6164  r asyncio thread
+00014d10: 206d 6967 6874 2068 6176 6520 6164 6465   might have adde
+00014d20: 6420 6974 0a20 2020 2020 2020 2020 2020  d it.           
+00014d30: 2069 6620 7365 6c66 2e62 6c6f 636b 6368   if self.blockch
+00014d40: 6169 6e2e 636f 6e74 6169 6e73 5f62 6c6f  ain.contains_blo
+00014d50: 636b 2868 6561 6465 725f 6861 7368 293a  ck(header_hash):
+00014d60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014d70: 2072 6574 7572 6e20 4e6f 6e65 0a20 2020   return None.   
+00014d80: 2020 2020 2020 2020 2076 616c 6964 6174           validat
+00014d90: 696f 6e5f 7374 6172 7420 3d20 7469 6d65  ion_start = time
+00014da0: 2e6d 6f6e 6f74 6f6e 6963 2829 0a20 2020  .monotonic().   
+00014db0: 2020 2020 2020 2020 2023 2054 7269 6573           # Tries
+00014dc0: 2074 6f20 6164 6420 7468 6520 626c 6f63   to add the bloc
+00014dd0: 6b20 746f 2074 6865 2062 6c6f 636b 6368  k to the blockch
+00014de0: 6169 6e2c 2069 6620 7765 2061 6c72 6561  ain, if we alrea
+00014df0: 6479 2076 616c 6964 6174 6564 2074 7261  dy validated tra
+00014e00: 6e73 6163 7469 6f6e 732c 2064 6f6e 2774  nsactions, don't
+00014e10: 2064 6f20 6974 2061 6761 696e 0a20 2020   do it again.   
+00014e20: 2020 2020 2020 2020 206e 7063 5f72 6573           npc_res
+00014e30: 756c 7473 203d 207b 7d0a 2020 2020 2020  ults = {}.      
+00014e40: 2020 2020 2020 6966 2070 7265 5f76 616c        if pre_val
+00014e50: 6964 6174 696f 6e5f 7265 7375 6c74 2069  idation_result i
+00014e60: 7320 6e6f 7420 4e6f 6e65 2061 6e64 2070  s not None and p
+00014e70: 7265 5f76 616c 6964 6174 696f 6e5f 7265  re_validation_re
+00014e80: 7375 6c74 2e6e 7063 5f72 6573 756c 7420  sult.npc_result 
+00014e90: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00014ea0: 2020 2020 2020 2020 2020 2020 206e 7063               npc
+00014eb0: 5f72 6573 756c 7473 5b62 6c6f 636b 2e68  _results[block.h
+00014ec0: 6569 6768 745d 203d 2070 7265 5f76 616c  eight] = pre_val
+00014ed0: 6964 6174 696f 6e5f 7265 7375 6c74 2e6e  idation_result.n
+00014ee0: 7063 5f72 6573 756c 740a 0a20 2020 2020  pc_result..     
+00014ef0: 2020 2020 2020 2023 2044 6f6e 2774 2076         # Don't v
+00014f00: 616c 6964 6174 6520 7369 676e 6174 7572  alidate signatur
+00014f10: 6573 2062 6563 6175 7365 2077 6520 7761  es because we wa
+00014f20: 6e74 2074 6f20 7661 6c69 6461 7465 2074  nt to validate t
+00014f30: 6865 6d20 696e 2074 6865 206d 6169 6e20  hem in the main 
+00014f40: 7468 7265 6164 206c 6174 6572 2c20 7369  thread later, si
+00014f50: 6e63 6520 7765 2068 6176 6520 610a 2020  nce we have a.  
+00014f60: 2020 2020 2020 2020 2020 2320 6361 6368            # cach
+00014f70: 6520 6176 6169 6c61 626c 650a 2020 2020  e available.    
+00014f80: 2020 2020 2020 2020 7072 655f 7661 6c69          pre_vali
+00014f90: 6461 7469 6f6e 5f72 6573 756c 7473 203d  dation_results =
+00014fa0: 2061 7761 6974 2073 656c 662e 626c 6f63   await self.bloc
+00014fb0: 6b63 6861 696e 2e70 7265 5f76 616c 6964  kchain.pre_valid
+00014fc0: 6174 655f 626c 6f63 6b73 5f6d 756c 7469  ate_blocks_multi
+00014fd0: 7072 6f63 6573 7369 6e67 280a 2020 2020  processing(.    
+00014fe0: 2020 2020 2020 2020 2020 2020 5b62 6c6f              [blo
+00014ff0: 636b 5d2c 206e 7063 5f72 6573 756c 7473  ck], npc_results
+00015000: 2c20 7661 6c69 6461 7465 5f73 6967 6e61  , validate_signa
+00015010: 7475 7265 733d 4661 6c73 650a 2020 2020  tures=False.    
+00015020: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00015030: 2020 2020 2020 6164 6465 643a 204f 7074        added: Opt
+00015040: 696f 6e61 6c5b 4164 6442 6c6f 636b 5265  ional[AddBlockRe
+00015050: 7375 6c74 5d20 3d20 4e6f 6e65 0a20 2020  sult] = None.   
+00015060: 2020 2020 2020 2020 2070 7265 5f76 616c           pre_val
+00015070: 6964 6174 696f 6e5f 7469 6d65 203d 2074  idation_time = t
+00015080: 696d 652e 6d6f 6e6f 746f 6e69 6328 2920  ime.monotonic() 
+00015090: 2d20 7661 6c69 6461 7469 6f6e 5f73 7461  - validation_sta
+000150a0: 7274 0a20 2020 2020 2020 2020 2020 2074  rt.            t
+000150b0: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+000150c0: 2020 2020 6966 206c 656e 2870 7265 5f76      if len(pre_v
+000150d0: 616c 6964 6174 696f 6e5f 7265 7375 6c74  alidation_result
+000150e0: 7329 203c 2031 3a0a 2020 2020 2020 2020  s) < 1:.        
+000150f0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00015100: 6520 5661 6c75 6545 7272 6f72 2866 2246  e ValueError(f"F
+00015110: 6169 6c65 6420 746f 2076 616c 6964 6174  ailed to validat
+00015120: 6520 626c 6f63 6b20 7b68 6561 6465 725f  e block {header_
+00015130: 6861 7368 7d20 6865 6967 6874 207b 626c  hash} height {bl
+00015140: 6f63 6b2e 6865 6967 6874 7d22 290a 2020  ock.height}").  
+00015150: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00015160: 2070 7265 5f76 616c 6964 6174 696f 6e5f   pre_validation_
+00015170: 7265 7375 6c74 735b 305d 2e65 7272 6f72  results[0].error
+00015180: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00015190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000151a0: 2020 6966 2045 7272 2870 7265 5f76 616c    if Err(pre_val
+000151b0: 6964 6174 696f 6e5f 7265 7375 6c74 735b  idation_results[
+000151c0: 305d 2e65 7272 6f72 2920 3d3d 2045 7272  0].error) == Err
+000151d0: 2e49 4e56 414c 4944 5f50 5245 565f 424c  .INVALID_PREV_BL
+000151e0: 4f43 4b5f 4841 5348 3a0a 2020 2020 2020  OCK_HASH:.      
+000151f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015200: 2020 6164 6465 6420 3d20 4164 6442 6c6f    added = AddBlo
+00015210: 636b 5265 7375 6c74 2e44 4953 434f 4e4e  ckResult.DISCONN
+00015220: 4543 5445 445f 424c 4f43 4b0a 2020 2020  ECTED_BLOCK.    
+00015230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015240: 2020 2020 6572 726f 725f 636f 6465 3a20      error_code: 
+00015250: 4f70 7469 6f6e 616c 5b45 7272 5d20 3d20  Optional[Err] = 
+00015260: 4572 722e 494e 5641 4c49 445f 5052 4556  Err.INVALID_PREV
+00015270: 5f42 4c4f 434b 5f48 4153 480a 2020 2020  _BLOCK_HASH.    
+00015280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015290: 656c 6966 2045 7272 2870 7265 5f76 616c  elif Err(pre_val
+000152a0: 6964 6174 696f 6e5f 7265 7375 6c74 735b  idation_results[
+000152b0: 305d 2e65 7272 6f72 2920 3d3d 2045 7272  0].error) == Err
+000152c0: 2e54 494d 4553 5441 4d50 5f54 4f4f 5f46  .TIMESTAMP_TOO_F
+000152d0: 4152 5f49 4e5f 4655 5455 5245 3a0a 2020  AR_IN_FUTURE:.  
+000152e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000152f0: 2020 2020 2020 7261 6973 6520 5469 6d65        raise Time
+00015300: 7374 616d 7045 7272 6f72 2829 0a20 2020  stampError().   
+00015310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015320: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00015330: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00015340: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
+00015350: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015360: 2020 2020 2020 2020 2020 2020 2066 2246               f"F
+00015370: 6169 6c65 6420 746f 2076 616c 6964 6174  ailed to validat
+00015380: 6520 626c 6f63 6b20 7b68 6561 6465 725f  e block {header_
+00015390: 6861 7368 7d20 6865 6967 6874 2022 0a20  hash} height ". 
+000153a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000153b0: 2020 2020 2020 2020 2020 2066 227b 626c             f"{bl
+000153c0: 6f63 6b2e 6865 6967 6874 7d3a 207b 4572  ock.height}: {Er
+000153d0: 7228 7072 655f 7661 6c69 6461 7469 6f6e  r(pre_validation
+000153e0: 5f72 6573 756c 7473 5b30 5d2e 6572 726f  _results[0].erro
+000153f0: 7229 2e6e 616d 657d 220a 2020 2020 2020  r).name}".      
 00015400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015410: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00015420: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-00015430: 5f74 6f5f 7661 6c69 6461 7465 203d 2028  _to_validate = (
-00015440: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015450: 2020 2020 2020 2020 2070 7265 5f76 616c           pre_val
-00015460: 6964 6174 696f 6e5f 7265 7375 6c74 735b  idation_results[
-00015470: 305d 2069 6620 7072 655f 7661 6c69 6461  0] if pre_valida
-00015480: 7469 6f6e 5f72 6573 756c 7420 6973 204e  tion_result is N
-00015490: 6f6e 6520 656c 7365 2070 7265 5f76 616c  one else pre_val
-000154a0: 6964 6174 696f 6e5f 7265 7375 6c74 0a20  idation_result. 
-000154b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000154c0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-000154d0: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
-000154e0: 7265 7375 6c74 5f74 6f5f 7661 6c69 6461  result_to_valida
-000154f0: 7465 2e72 6571 7569 7265 645f 6974 6572  te.required_iter
-00015500: 7320 3d3d 2070 7265 5f76 616c 6964 6174  s == pre_validat
-00015510: 696f 6e5f 7265 7375 6c74 735b 305d 2e72  ion_results[0].r
-00015520: 6571 7569 7265 645f 6974 6572 730a 2020  equired_iters.  
-00015530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015540: 2020 2861 6464 6564 2c20 6572 726f 725f    (added, error_
-00015550: 636f 6465 2c20 7374 6174 655f 6368 616e  code, state_chan
-00015560: 6765 5f73 756d 6d61 7279 2920 3d20 6177  ge_summary) = aw
-00015570: 6169 7420 7365 6c66 2e62 6c6f 636b 6368  ait self.blockch
-00015580: 6169 6e2e 6164 645f 626c 6f63 6b28 0a20  ain.add_block(. 
-00015590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000155a0: 2020 2020 2020 2062 6c6f 636b 2c20 7265         block, re
-000155b0: 7375 6c74 5f74 6f5f 7661 6c69 6461 7465  sult_to_validate
-000155c0: 2c20 666f 726b 5f69 6e66 6f0a 2020 2020  , fork_info.    
-000155d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000155e0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000155f0: 2020 6966 2061 6464 6564 203d 3d20 4164    if added == Ad
-00015600: 6442 6c6f 636b 5265 7375 6c74 2e41 4c52  dBlockResult.ALR
-00015610: 4541 4459 5f48 4156 455f 424c 4f43 4b3a  EADY_HAVE_BLOCK:
-00015620: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015630: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
-00015640: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015650: 2065 6c69 6620 6164 6465 6420 3d3d 2041   elif added == A
-00015660: 6464 426c 6f63 6b52 6573 756c 742e 494e  ddBlockResult.IN
-00015670: 5641 4c49 445f 424c 4f43 4b3a 0a20 2020  VALID_BLOCK:.   
-00015680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015690: 2061 7373 6572 7420 6572 726f 725f 636f   assert error_co
-000156a0: 6465 2069 7320 6e6f 7420 4e6f 6e65 0a20  de is not None. 
-000156b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000156c0: 2020 2073 656c 662e 6c6f 672e 6572 726f     self.log.erro
-000156d0: 7228 6622 426c 6f63 6b20 7b68 6561 6465  r(f"Block {heade
-000156e0: 725f 6861 7368 7d20 6174 2068 6569 6768  r_hash} at heigh
-000156f0: 7420 7b62 6c6f 636b 2e68 6569 6768 747d  t {block.height}
-00015700: 2069 7320 696e 7661 6c69 6420 7769 7468   is invalid with
-00015710: 2063 6f64 6520 7b65 7272 6f72 5f63 6f64   code {error_cod
-00015720: 657d 2e22 290a 2020 2020 2020 2020 2020  e}.").          
-00015730: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00015740: 436f 6e73 656e 7375 7345 7272 6f72 2865  ConsensusError(e
-00015750: 7272 6f72 5f63 6f64 652c 205b 6865 6164  rror_code, [head
-00015760: 6572 5f68 6173 685d 290a 2020 2020 2020  er_hash]).      
-00015770: 2020 2020 2020 2020 2020 656c 6966 2061            elif a
-00015780: 6464 6564 203d 3d20 4164 6442 6c6f 636b  dded == AddBlock
-00015790: 5265 7375 6c74 2e44 4953 434f 4e4e 4543  Result.DISCONNEC
-000157a0: 5445 445f 424c 4f43 4b3a 0a20 2020 2020  TED_BLOCK:.     
-000157b0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000157c0: 656c 662e 6c6f 672e 696e 666f 2866 2244  elf.log.info(f"D
-000157d0: 6973 636f 6e6e 6563 7465 6420 626c 6f63  isconnected bloc
-000157e0: 6b20 7b68 6561 6465 725f 6861 7368 7d20  k {header_hash} 
-000157f0: 6174 2068 6569 6768 7420 7b62 6c6f 636b  at height {block
-00015800: 2e68 6569 6768 747d 2229 0a20 2020 2020  .height}").     
-00015810: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00015820: 6620 7261 6973 655f 6f6e 5f64 6973 636f  f raise_on_disco
-00015830: 6e6e 6563 7465 643a 0a20 2020 2020 2020  nnected:.       
-00015840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015850: 2072 6169 7365 2052 756e 7469 6d65 4572   raise RuntimeEr
-00015860: 726f 7228 2245 7870 6563 7465 6420 626c  ror("Expected bl
-00015870: 6f63 6b20 746f 2062 6520 6164 6465 642c  ock to be added,
-00015880: 2072 6563 6569 7665 6420 6469 7363 6f6e   received discon
-00015890: 6e65 6374 6564 2062 6c6f 636b 2e22 290a  nected block.").
-000158a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000158b0: 2020 2020 7265 7475 726e 204e 6f6e 650a      return None.
-000158c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000158d0: 656c 6966 2061 6464 6564 203d 3d20 4164  elif added == Ad
-000158e0: 6442 6c6f 636b 5265 7375 6c74 2e4e 4557  dBlockResult.NEW
-000158f0: 5f50 4541 4b3a 0a20 2020 2020 2020 2020  _PEAK:.         
-00015900: 2020 2020 2020 2020 2020 2023 204f 6e6c             # Onl
-00015910: 7920 7072 6f70 6167 6174 6520 626c 6f63  y propagate bloc
-00015920: 6b73 2077 6869 6368 2065 7874 656e 6420  ks which extend 
-00015930: 7468 6520 626c 6f63 6b63 6861 696e 2028  the blockchain (
-00015940: 6265 636f 6d65 7320 6f6e 6520 6f66 2074  becomes one of t
-00015950: 6865 2068 6561 6473 290a 2020 2020 2020  he heads).      
-00015960: 2020 2020 2020 2020 2020 2020 2020 6173                as
-00015970: 7365 7274 2073 7461 7465 5f63 6861 6e67  sert state_chang
-00015980: 655f 7375 6d6d 6172 7920 6973 206e 6f74  e_summary is not
-00015990: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-000159a0: 2020 2020 2020 2020 2020 706f 7374 5f70            post_p
-000159b0: 726f 6365 7373 5f74 696d 6520 3d20 7469  rocess_time = ti
-000159c0: 6d65 2e6d 6f6e 6f74 6f6e 6963 2829 0a20  me.monotonic(). 
-000159d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000159e0: 2020 2070 7070 5f72 6573 756c 7420 3d20     ppp_result = 
-000159f0: 6177 6169 7420 7365 6c66 2e70 6561 6b5f  await self.peak_
-00015a00: 706f 7374 5f70 726f 6365 7373 696e 6728  post_processing(
-00015a10: 626c 6f63 6b2c 2073 7461 7465 5f63 6861  block, state_cha
-00015a20: 6e67 655f 7375 6d6d 6172 792c 2070 6565  nge_summary, pee
-00015a30: 7229 0a20 2020 2020 2020 2020 2020 2020  r).             
-00015a40: 2020 2020 2020 2070 6f73 745f 7072 6f63         post_proc
-00015a50: 6573 735f 7469 6d65 203d 2074 696d 652e  ess_time = time.
-00015a60: 6d6f 6e6f 746f 6e69 6328 2920 2d20 706f  monotonic() - po
-00015a70: 7374 5f70 726f 6365 7373 5f74 696d 650a  st_process_time.
-00015a80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015a90: 2065 6c69 6620 6164 6465 6420 3d3d 2041   elif added == A
-00015aa0: 6464 426c 6f63 6b52 6573 756c 742e 4144  ddBlockResult.AD
-00015ab0: 4445 445f 4153 5f4f 5250 4841 4e3a 0a20  DED_AS_ORPHAN:. 
-00015ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015ad0: 2020 2073 656c 662e 6c6f 672e 696e 666f     self.log.info
-00015ae0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00015af0: 2020 2020 2020 2020 2020 6622 5265 6365            f"Rece
-00015b00: 6976 6564 206f 7270 6861 6e20 626c 6f63  ived orphan bloc
-00015b10: 6b20 6f66 2068 6569 6768 7420 7b62 6c6f  k of height {blo
-00015b20: 636b 2e68 6569 6768 747d 2072 6820 7b62  ck.height} rh {b
-00015b30: 6c6f 636b 2e72 6577 6172 645f 6368 6169  lock.reward_chai
-00015b40: 6e5f 626c 6f63 6b2e 6765 745f 6861 7368  n_block.get_hash
-00015b50: 2829 7d22 0a20 2020 2020 2020 2020 2020  ()}".           
-00015b60: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-00015b70: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00015b80: 6f73 745f 7072 6f63 6573 735f 7469 6d65  ost_process_time
-00015b90: 203d 2030 0a20 2020 2020 2020 2020 2020   = 0.           
-00015ba0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00015bb0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00015bc0: 2053 686f 756c 6420 6e65 7665 7220 7265   Should never re
-00015bd0: 6163 6820 6865 7265 2c20 616c 6c20 7468  ach here, all th
-00015be0: 6520 6361 7365 7320 6172 6520 636f 7665  e cases are cove
-00015bf0: 7265 640a 2020 2020 2020 2020 2020 2020  red.            
-00015c00: 2020 2020 2020 2020 7261 6973 6520 5275          raise Ru
-00015c10: 6e74 696d 6545 7272 6f72 2866 2249 6e76  ntimeError(f"Inv
-00015c20: 616c 6964 2072 6573 756c 7420 6672 6f6d  alid result from
-00015c30: 2061 6464 5f62 6c6f 636b 207b 6164 6465   add_block {adde
-00015c40: 647d 2229 0a20 2020 2020 2020 2020 2020  d}").           
-00015c50: 2065 7863 6570 7420 6173 796e 6369 6f2e   except asyncio.
-00015c60: 4361 6e63 656c 6c65 6445 7272 6f72 3a0a  CancelledError:.
-00015c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015c80: 2320 5765 206e 6565 6420 746f 206d 616b  # We need to mak
-00015c90: 6520 7375 7265 2074 6f20 616c 7761 7973  e sure to always
-00015ca0: 2063 616c 6c20 7468 6973 206d 6574 686f   call this metho
-00015cb0: 6420 6576 656e 2077 6865 6e20 7765 2067  d even when we g
-00015cc0: 6574 2061 2063 616e 6365 6c20 6578 6365  et a cancel exce
-00015cd0: 7074 696f 6e2c 2074 6f20 6d61 6b65 2073  ption, to make s
-00015ce0: 7572 650a 2020 2020 2020 2020 2020 2020  ure.            
-00015cf0: 2020 2020 2320 7468 6520 6e6f 6465 2073      # the node s
-00015d00: 7461 7973 2069 6e20 7379 6e63 0a20 2020  tays in sync.   
-00015d10: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00015d20: 6164 6465 6420 3d3d 2041 6464 426c 6f63  added == AddBloc
-00015d30: 6b52 6573 756c 742e 4e45 575f 5045 414b  kResult.NEW_PEAK
-00015d40: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00015d50: 2020 2020 2020 6173 7365 7274 2073 7461        assert sta
-00015d60: 7465 5f63 6861 6e67 655f 7375 6d6d 6172  te_change_summar
-00015d70: 7920 6973 206e 6f74 204e 6f6e 650a 2020  y is not None.  
-00015d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015d90: 2020 6177 6169 7420 7365 6c66 2e70 6561    await self.pea
-00015da0: 6b5f 706f 7374 5f70 726f 6365 7373 696e  k_post_processin
-00015db0: 6728 626c 6f63 6b2c 2073 7461 7465 5f63  g(block, state_c
-00015dc0: 6861 6e67 655f 7375 6d6d 6172 792c 2070  hange_summary, p
-00015dd0: 6565 7229 0a20 2020 2020 2020 2020 2020  eer).           
-00015de0: 2020 2020 2072 6169 7365 0a0a 2020 2020       raise..    
-00015df0: 2020 2020 2020 2020 7661 6c69 6461 7469          validati
-00015e00: 6f6e 5f74 696d 6520 3d20 7469 6d65 2e6d  on_time = time.m
-00015e10: 6f6e 6f74 6f6e 6963 2829 202d 2076 616c  onotonic() - val
-00015e20: 6964 6174 696f 6e5f 7374 6172 740a 0a20  idation_start.. 
-00015e30: 2020 2020 2020 2069 6620 7070 705f 7265         if ppp_re
-00015e40: 7375 6c74 2069 7320 6e6f 7420 4e6f 6e65  sult is not None
-00015e50: 3a0a 2020 2020 2020 2020 2020 2020 6173  :.            as
-00015e60: 7365 7274 2073 7461 7465 5f63 6861 6e67  sert state_chang
-00015e70: 655f 7375 6d6d 6172 7920 6973 206e 6f74  e_summary is not
-00015e80: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-00015e90: 2020 6177 6169 7420 7365 6c66 2e70 6561    await self.pea
-00015ea0: 6b5f 706f 7374 5f70 726f 6365 7373 696e  k_post_processin
-00015eb0: 675f 3228 626c 6f63 6b2c 2070 6565 722c  g_2(block, peer,
-00015ec0: 2073 7461 7465 5f63 6861 6e67 655f 7375   state_change_su
-00015ed0: 6d6d 6172 792c 2070 7070 5f72 6573 756c  mmary, ppp_resul
-00015ee0: 7429 0a0a 2020 2020 2020 2020 7065 7263  t)..        perc
-00015ef0: 656e 745f 6675 6c6c 5f73 7472 203d 2028  ent_full_str = (
-00015f00: 0a20 2020 2020 2020 2020 2020 2028 0a20  .            (. 
-00015f10: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00015f20: 2c20 7065 7263 656e 7420 6675 6c6c 3a20  , percent full: 
-00015f30: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-00015f40: 2020 2b20 7374 7228 726f 756e 6428 3130    + str(round(10
-00015f50: 302e 3020 2a20 666c 6f61 7428 626c 6f63  0.0 * float(bloc
-00015f60: 6b2e 7472 616e 7361 6374 696f 6e73 5f69  k.transactions_i
-00015f70: 6e66 6f2e 636f 7374 2920 2f20 7365 6c66  nfo.cost) / self
-00015f80: 2e63 6f6e 7374 616e 7473 2e4d 4158 5f42  .constants.MAX_B
-00015f90: 4c4f 434b 5f43 4f53 545f 434c 564d 2c20  LOCK_COST_CLVM, 
-00015fa0: 3329 290a 2020 2020 2020 2020 2020 2020  3)).            
-00015fb0: 2020 2020 2b20 2225 220a 2020 2020 2020      + "%".      
-00015fc0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00015fd0: 2020 2020 6966 2062 6c6f 636b 2e74 7261      if block.tra
-00015fe0: 6e73 6163 7469 6f6e 735f 696e 666f 2069  nsactions_info i
-00015ff0: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
-00016000: 2020 2020 2020 2065 6c73 6520 2222 0a20         else "". 
-00016010: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00016020: 2073 656c 662e 6c6f 672e 6c6f 6728 0a20   self.log.log(. 
-00016030: 2020 2020 2020 2020 2020 206c 6f67 6769             loggi
-00016040: 6e67 2e57 4152 4e49 4e47 2069 6620 7661  ng.WARNING if va
-00016050: 6c69 6461 7469 6f6e 5f74 696d 6520 3e20  lidation_time > 
-00016060: 3220 656c 7365 206c 6f67 6769 6e67 2e44  2 else logging.D
-00016070: 4542 5547 2c0a 2020 2020 2020 2020 2020  EBUG,.          
-00016080: 2020 6622 426c 6f63 6b20 7661 6c69 6461    f"Block valida
-00016090: 7469 6f6e 3a20 7b76 616c 6964 6174 696f  tion: {validatio
-000160a0: 6e5f 7469 6d65 3a30 2e32 667d 732c 2022  n_time:0.2f}s, "
-000160b0: 0a20 2020 2020 2020 2020 2020 2066 2270  .            f"p
-000160c0: 7265 5f76 616c 6964 6174 696f 6e3a 207b  re_validation: {
-000160d0: 7072 655f 7661 6c69 6461 7469 6f6e 5f74  pre_validation_t
-000160e0: 696d 653a 302e 3266 7d73 2c20 220a 2020  ime:0.2f}s, ".  
-000160f0: 2020 2020 2020 2020 2020 6622 434c 564d            f"CLVM
-00016100: 3a20 7b70 7265 5f76 616c 6964 6174 696f  : {pre_validatio
-00016110: 6e5f 7265 7375 6c74 735b 305d 2e74 696d  n_results[0].tim
-00016120: 696e 672f 3130 3030 2e30 3a30 2e32 667d  ing/1000.0:0.2f}
-00016130: 732c 2022 0a20 2020 2020 2020 2020 2020  s, ".           
-00016140: 2066 2270 6f73 742d 7072 6f63 6573 733a   f"post-process:
-00016150: 207b 706f 7374 5f70 726f 6365 7373 5f74   {post_process_t
-00016160: 696d 653a 302e 3266 7d73 2c20 220a 2020  ime:0.2f}s, ".  
-00016170: 2020 2020 2020 2020 2020 6622 636f 7374            f"cost
-00016180: 3a20 7b62 6c6f 636b 2e74 7261 6e73 6163  : {block.transac
-00016190: 7469 6f6e 735f 696e 666f 2e63 6f73 7420  tions_info.cost 
-000161a0: 6966 2062 6c6f 636b 2e74 7261 6e73 6163  if block.transac
-000161b0: 7469 6f6e 735f 696e 666f 2069 7320 6e6f  tions_info is no
-000161c0: 7420 4e6f 6e65 2065 6c73 6520 274e 6f6e  t None else 'Non
-000161d0: 6527 7d22 0a20 2020 2020 2020 2020 2020  e'}".           
-000161e0: 2066 227b 7065 7263 656e 745f 6675 6c6c   f"{percent_full
-000161f0: 5f73 7472 7d20 6865 6164 6572 5f68 6173  _str} header_has
-00016200: 683a 207b 6865 6164 6572 5f68 6173 682e  h: {header_hash.
-00016210: 6865 7828 297d 2068 6569 6768 743a 207b  hex()} height: {
-00016220: 626c 6f63 6b2e 6865 6967 6874 7d22 2c0a  block.height}",.
-00016230: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-00016240: 2020 2023 2074 6869 7320 6973 206e 6f74     # this is not
-00016250: 2063 6f76 6572 6564 2062 7920 616e 7920   covered by any 
-00016260: 756e 6974 2074 6573 7473 2061 7320 6974  unit tests as it
-00016270: 2773 2065 7373 656e 7469 616c 6c79 2074  's essentially t
-00016280: 6573 7420 636f 6465 0a20 2020 2020 2020  est code.       
-00016290: 2023 2069 7473 656c 662e 2049 7427 7320   # itself. It's 
-000162a0: 6578 6572 6369 7365 6420 6d61 6e75 616c  exercised manual
-000162b0: 6c79 2077 6865 6e20 696e 7665 7374 6967  ly when investig
-000162c0: 6174 696e 6720 7065 7266 6f72 6d61 6e63  ating performanc
-000162d0: 6520 6973 7375 6573 0a20 2020 2020 2020  e issues.       
-000162e0: 2069 6620 7661 6c69 6461 7469 6f6e 5f74   if validation_t
-000162f0: 696d 6520 3e20 3220 616e 6420 7072 2069  ime > 2 and pr i
-00016300: 7320 6e6f 7420 4e6f 6e65 3a20 2023 2070  s not None:  # p
-00016310: 7261 676d 613a 206e 6f20 636f 7665 720a  ragma: no cover.
-00016320: 2020 2020 2020 2020 2020 2020 7072 2e63              pr.c
-00016330: 7265 6174 655f 7374 6174 7328 290a 2020  reate_stats().  
-00016340: 2020 2020 2020 2020 2020 7072 6f66 696c            profil
-00016350: 655f 6469 7220 3d20 7061 7468 5f66 726f  e_dir = path_fro
-00016360: 6d5f 726f 6f74 2873 656c 662e 726f 6f74  m_root(self.root
-00016370: 5f70 6174 682c 2022 626c 6f63 6b2d 7661  _path, "block-va
-00016380: 6c69 6461 7469 6f6e 2d70 726f 6669 6c65  lidation-profile
-00016390: 2229 0a20 2020 2020 2020 2020 2020 2070  ").            p
-000163a0: 722e 6475 6d70 5f73 7461 7473 2870 726f  r.dump_stats(pro
-000163b0: 6669 6c65 5f64 6972 202f 2066 227b 626c  file_dir / f"{bl
-000163c0: 6f63 6b2e 6865 6967 6874 7d2d 7b76 616c  ock.height}-{val
-000163d0: 6964 6174 696f 6e5f 7469 6d65 3a30 2e31  idation_time:0.1
-000163e0: 667d 2e70 726f 6669 6c65 2229 0a0a 2020  f}.profile")..  
-000163f0: 2020 2020 2020 2320 5468 6973 2063 6f64        # This cod
-00016400: 6520 7061 7468 2069 7320 7265 6163 6865  e path is reache
-00016410: 6420 6966 2061 6464 6564 203d 3d20 4144  d if added == AD
-00016420: 4445 445f 4153 5f4f 5250 4841 4e20 6f72  DED_AS_ORPHAN or
-00016430: 204e 4557 5f54 4950 0a20 2020 2020 2020   NEW_TIP.       
-00016440: 2070 6561 6b20 3d20 7365 6c66 2e62 6c6f   peak = self.blo
-00016450: 636b 6368 6169 6e2e 6765 745f 7065 616b  ckchain.get_peak
-00016460: 2829 0a20 2020 2020 2020 2061 7373 6572  ().        asser
-00016470: 7420 7065 616b 2069 7320 6e6f 7420 4e6f  t peak is not No
-00016480: 6e65 0a0a 2020 2020 2020 2020 2320 5265  ne..        # Re
-00016490: 6d6f 7665 7320 616c 6c20 7465 6d70 6f72  moves all tempor
-000164a0: 6172 7920 6461 7461 2066 6f72 206f 6c64  ary data for old
-000164b0: 2062 6c6f 636b 730a 2020 2020 2020 2020   blocks.        
-000164c0: 636c 6561 725f 6865 6967 6874 203d 2075  clear_height = u
-000164d0: 696e 7433 3228 6d61 7828 302c 2070 6561  int32(max(0, pea
-000164e0: 6b2e 6865 6967 6874 202d 2035 3029 290a  k.height - 50)).
-000164f0: 2020 2020 2020 2020 7365 6c66 2e66 756c          self.ful
-00016500: 6c5f 6e6f 6465 5f73 746f 7265 2e63 6c65  l_node_store.cle
-00016510: 6172 5f63 616e 6469 6461 7465 5f62 6c6f  ar_candidate_blo
-00016520: 636b 735f 6265 6c6f 7728 636c 6561 725f  cks_below(clear_
-00016530: 6865 6967 6874 290a 2020 2020 2020 2020  height).        
-00016540: 7365 6c66 2e66 756c 6c5f 6e6f 6465 5f73  self.full_node_s
-00016550: 746f 7265 2e63 6c65 6172 5f75 6e66 696e  tore.clear_unfin
-00016560: 6973 6865 645f 626c 6f63 6b73 5f62 656c  ished_blocks_bel
-00016570: 6f77 2863 6c65 6172 5f68 6569 6768 7429  ow(clear_height)
-00016580: 0a0a 2020 2020 2020 2020 7374 6174 655f  ..        state_
-00016590: 6368 616e 6765 645f 6461 7461 3a20 4469  changed_data: Di
-000165a0: 6374 5b73 7472 2c20 416e 795d 203d 207b  ct[str, Any] = {
-000165b0: 0a20 2020 2020 2020 2020 2020 2022 7472  .            "tr
-000165c0: 616e 7361 6374 696f 6e5f 626c 6f63 6b22  ansaction_block"
-000165d0: 3a20 4661 6c73 652c 0a20 2020 2020 2020  : False,.       
-000165e0: 2020 2020 2022 6b5f 7369 7a65 223a 2062       "k_size": b
-000165f0: 6c6f 636b 2e72 6577 6172 645f 6368 6169  lock.reward_chai
-00016600: 6e5f 626c 6f63 6b2e 7072 6f6f 665f 6f66  n_block.proof_of
-00016610: 5f73 7061 6365 2e73 697a 652c 0a20 2020  _space.size,.   
-00016620: 2020 2020 2020 2020 2022 6865 6164 6572           "header
-00016630: 5f68 6173 6822 3a20 626c 6f63 6b2e 6865  _hash": block.he
-00016640: 6164 6572 5f68 6173 682c 0a20 2020 2020  ader_hash,.     
-00016650: 2020 2020 2020 2022 666f 726b 5f68 6569         "fork_hei
-00016660: 6768 7422 3a20 4e6f 6e65 2c0a 2020 2020  ght": None,.    
-00016670: 2020 2020 2020 2020 2272 6f6c 6c65 645f          "rolled_
-00016680: 6261 636b 5f72 6563 6f72 6473 223a 204e  back_records": N
-00016690: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
-000166a0: 2022 6865 6967 6874 223a 2062 6c6f 636b   "height": block
-000166b0: 2e68 6569 6768 742c 0a20 2020 2020 2020  .height,.       
-000166c0: 2020 2020 2022 7661 6c69 6461 7469 6f6e       "validation
-000166d0: 5f74 696d 6522 3a20 7661 6c69 6461 7469  _time": validati
-000166e0: 6f6e 5f74 696d 652c 0a20 2020 2020 2020  on_time,.       
-000166f0: 2020 2020 2022 7072 655f 7661 6c69 6461       "pre_valida
-00016700: 7469 6f6e 5f74 696d 6522 3a20 7072 655f  tion_time": pre_
-00016710: 7661 6c69 6461 7469 6f6e 5f74 696d 652c  validation_time,
-00016720: 0a20 2020 2020 2020 207d 0a0a 2020 2020  .        }..    
-00016730: 2020 2020 6966 2073 7461 7465 5f63 6861      if state_cha
-00016740: 6e67 655f 7375 6d6d 6172 7920 6973 206e  nge_summary is n
-00016750: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00016760: 2020 2020 2073 7461 7465 5f63 6861 6e67       state_chang
-00016770: 6564 5f64 6174 615b 2266 6f72 6b5f 6865  ed_data["fork_he
-00016780: 6967 6874 225d 203d 2073 7461 7465 5f63  ight"] = state_c
-00016790: 6861 6e67 655f 7375 6d6d 6172 792e 666f  hange_summary.fo
-000167a0: 726b 5f68 6569 6768 740a 2020 2020 2020  rk_height.      
-000167b0: 2020 2020 2020 7374 6174 655f 6368 616e        state_chan
-000167c0: 6765 645f 6461 7461 5b22 726f 6c6c 6564  ged_data["rolled
-000167d0: 5f62 6163 6b5f 7265 636f 7264 7322 5d20  _back_records"] 
-000167e0: 3d20 6c65 6e28 7374 6174 655f 6368 616e  = len(state_chan
-000167f0: 6765 5f73 756d 6d61 7279 2e72 6f6c 6c65  ge_summary.rolle
-00016800: 645f 6261 636b 5f72 6563 6f72 6473 290a  d_back_records).
-00016810: 0a20 2020 2020 2020 2069 6620 626c 6f63  .        if bloc
-00016820: 6b2e 7472 616e 7361 6374 696f 6e73 5f69  k.transactions_i
-00016830: 6e66 6f20 6973 206e 6f74 204e 6f6e 653a  nfo is not None:
-00016840: 0a20 2020 2020 2020 2020 2020 2073 7461  .            sta
-00016850: 7465 5f63 6861 6e67 6564 5f64 6174 615b  te_changed_data[
-00016860: 2274 7261 6e73 6163 7469 6f6e 5f62 6c6f  "transaction_blo
-00016870: 636b 225d 203d 2054 7275 650a 2020 2020  ck"] = True.    
-00016880: 2020 2020 2020 2020 7374 6174 655f 6368          state_ch
-00016890: 616e 6765 645f 6461 7461 5b22 626c 6f63  anged_data["bloc
-000168a0: 6b5f 636f 7374 225d 203d 2062 6c6f 636b  k_cost"] = block
-000168b0: 2e74 7261 6e73 6163 7469 6f6e 735f 696e  .transactions_in
-000168c0: 666f 2e63 6f73 740a 2020 2020 2020 2020  fo.cost.        
-000168d0: 2020 2020 7374 6174 655f 6368 616e 6765      state_change
-000168e0: 645f 6461 7461 5b22 626c 6f63 6b5f 6665  d_data["block_fe
-000168f0: 6573 225d 203d 2062 6c6f 636b 2e74 7261  es"] = block.tra
-00016900: 6e73 6163 7469 6f6e 735f 696e 666f 2e66  nsactions_info.f
-00016910: 6565 730a 0a20 2020 2020 2020 2069 6620  ees..        if 
-00016920: 626c 6f63 6b2e 666f 6c69 6167 655f 7472  block.foliage_tr
-00016930: 616e 7361 6374 696f 6e5f 626c 6f63 6b20  ansaction_block 
-00016940: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00016950: 2020 2020 2020 2020 2073 7461 7465 5f63           state_c
-00016960: 6861 6e67 6564 5f64 6174 615b 2274 696d  hanged_data["tim
-00016970: 6573 7461 6d70 225d 203d 2062 6c6f 636b  estamp"] = block
-00016980: 2e66 6f6c 6961 6765 5f74 7261 6e73 6163  .foliage_transac
-00016990: 7469 6f6e 5f62 6c6f 636b 2e74 696d 6573  tion_block.times
-000169a0: 7461 6d70 0a0a 2020 2020 2020 2020 6966  tamp..        if
-000169b0: 2062 6c6f 636b 2e74 7261 6e73 6163 7469   block.transacti
-000169c0: 6f6e 735f 6765 6e65 7261 746f 7220 6973  ons_generator is
-000169d0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-000169e0: 2020 2020 2020 2073 7461 7465 5f63 6861         state_cha
-000169f0: 6e67 6564 5f64 6174 615b 2274 7261 6e73  nged_data["trans
-00016a00: 6163 7469 6f6e 5f67 656e 6572 6174 6f72  action_generator
-00016a10: 5f73 697a 655f 6279 7465 7322 5d20 3d20  _size_bytes"] = 
-00016a20: 6c65 6e28 6279 7465 7328 626c 6f63 6b2e  len(bytes(block.
-00016a30: 7472 616e 7361 6374 696f 6e73 5f67 656e  transactions_gen
-00016a40: 6572 6174 6f72 2929 0a0a 2020 2020 2020  erator))..      
-00016a50: 2020 7374 6174 655f 6368 616e 6765 645f    state_changed_
-00016a60: 6461 7461 5b22 7472 616e 7361 6374 696f  data["transactio
-00016a70: 6e5f 6765 6e65 7261 746f 725f 7265 665f  n_generator_ref_
-00016a80: 6c69 7374 225d 203d 2062 6c6f 636b 2e74  list"] = block.t
-00016a90: 7261 6e73 6163 7469 6f6e 735f 6765 6e65  ransactions_gene
-00016aa0: 7261 746f 725f 7265 665f 6c69 7374 0a20  rator_ref_list. 
-00016ab0: 2020 2020 2020 2069 6620 6164 6465 6420         if added 
-00016ac0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00016ad0: 2020 2020 2020 2020 2073 7461 7465 5f63           state_c
-00016ae0: 6861 6e67 6564 5f64 6174 615b 2272 6563  hanged_data["rec
-00016af0: 6569 7665 5f62 6c6f 636b 5f72 6573 756c  eive_block_resul
-00016b00: 7422 5d20 3d20 6164 6465 642e 7661 6c75  t"] = added.valu
-00016b10: 650a 0a20 2020 2020 2020 2073 656c 662e  e..        self.
-00016b20: 5f73 7461 7465 5f63 6861 6e67 6564 2822  _state_changed("
-00016b30: 626c 6f63 6b22 2c20 7374 6174 655f 6368  block", state_ch
-00016b40: 616e 6765 645f 6461 7461 290a 0a20 2020  anged_data)..   
-00016b50: 2020 2020 2072 6563 6f72 6420 3d20 7365       record = se
-00016b60: 6c66 2e62 6c6f 636b 6368 6169 6e2e 626c  lf.blockchain.bl
-00016b70: 6f63 6b5f 7265 636f 7264 2862 6c6f 636b  ock_record(block
-00016b80: 2e68 6561 6465 725f 6861 7368 290a 2020  .header_hash).  
-00016b90: 2020 2020 2020 6966 2073 656c 662e 7765        if self.we
-00016ba0: 6967 6874 5f70 726f 6f66 5f68 616e 646c  ight_proof_handl
-00016bb0: 6572 2069 7320 6e6f 7420 4e6f 6e65 2061  er is not None a
-00016bc0: 6e64 2072 6563 6f72 642e 7375 625f 6570  nd record.sub_ep
-00016bd0: 6f63 685f 7375 6d6d 6172 795f 696e 636c  och_summary_incl
-00016be0: 7564 6564 2069 7320 6e6f 7420 4e6f 6e65  uded is not None
-00016bf0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00016c00: 2073 656c 662e 5f73 6567 6d65 6e74 5f74   self._segment_t
-00016c10: 6173 6b20 6973 204e 6f6e 6520 6f72 2073  ask is None or s
-00016c20: 656c 662e 5f73 6567 6d65 6e74 5f74 6173  elf._segment_tas
-00016c30: 6b2e 646f 6e65 2829 3a0a 2020 2020 2020  k.done():.      
-00016c40: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
-00016c50: 7365 676d 656e 745f 7461 736b 203d 2061  segment_task = a
-00016c60: 7379 6e63 696f 2e63 7265 6174 655f 7461  syncio.create_ta
-00016c70: 736b 2873 656c 662e 7765 6967 6874 5f70  sk(self.weight_p
-00016c80: 726f 6f66 5f68 616e 646c 6572 2e63 7265  roof_handler.cre
-00016c90: 6174 655f 7072 6576 5f73 7562 5f65 706f  ate_prev_sub_epo
-00016ca0: 6368 5f73 6567 6d65 6e74 7328 2929 0a20  ch_segments()). 
-00016cb0: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
-00016cc0: 6e65 0a0a 2020 2020 6173 796e 6320 6465  ne..    async de
-00016cd0: 6620 6164 645f 756e 6669 6e69 7368 6564  f add_unfinished
-00016ce0: 5f62 6c6f 636b 280a 2020 2020 2020 2020  _block(.        
-00016cf0: 7365 6c66 2c0a 2020 2020 2020 2020 626c  self,.        bl
-00016d00: 6f63 6b3a 2055 6e66 696e 6973 6865 6442  ock: UnfinishedB
-00016d10: 6c6f 636b 2c0a 2020 2020 2020 2020 7065  lock,.        pe
-00016d20: 6572 3a20 4f70 7469 6f6e 616c 5b57 5343  er: Optional[WSC
-00016d30: 6869 6143 6f6e 6e65 6374 696f 6e5d 2c0a  hiaConnection],.
-00016d40: 2020 2020 2020 2020 6661 726d 6564 5f62          farmed_b
-00016d50: 6c6f 636b 3a20 626f 6f6c 203d 2046 616c  lock: bool = Fal
-00016d60: 7365 2c0a 2020 2020 2020 2020 626c 6f63  se,.        bloc
-00016d70: 6b5f 6279 7465 733a 204f 7074 696f 6e61  k_bytes: Optiona
-00016d80: 6c5b 6279 7465 735d 203d 204e 6f6e 652c  l[bytes] = None,
-00016d90: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-00016da0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00016db0: 2020 2020 5765 2068 6176 6520 7265 6365      We have rece
-00016dc0: 6976 6564 2061 6e20 756e 6669 6e69 7368  ived an unfinish
-00016dd0: 6564 2062 6c6f 636b 2c20 6569 7468 6572  ed block, either
-00016de0: 2063 7265 6174 6564 2062 7920 7573 2c20   created by us, 
-00016df0: 6f72 2066 726f 6d20 616e 6f74 6865 7220  or from another 
-00016e00: 7065 6572 2e0a 2020 2020 2020 2020 5765  peer..        We
-00016e10: 2063 616e 2076 616c 6964 6174 6520 616e   can validate an
-00016e20: 6420 6164 6420 6974 2061 6e64 2069 6620  d add it and if 
-00016e30: 6974 2773 2061 2067 6f6f 6420 626c 6f63  it's a good bloc
-00016e40: 6b2c 2070 726f 7061 6761 7465 2069 7420  k, propagate it 
-00016e50: 746f 206f 7468 6572 2070 6565 7273 2061  to other peers a
-00016e60: 6e64 0a20 2020 2020 2020 2074 696d 656c  nd.        timel
-00016e70: 6f72 6473 2e0a 2020 2020 2020 2020 2222  ords..        ""
-00016e80: 220a 2020 2020 2020 2020 7265 6365 6976  ".        receiv
-00016e90: 655f 7469 6d65 203d 2074 696d 652e 7469  e_time = time.ti
-00016ea0: 6d65 2829 0a0a 2020 2020 2020 2020 6966  me()..        if
-00016eb0: 2062 6c6f 636b 2e70 7265 765f 6865 6164   block.prev_head
-00016ec0: 6572 5f68 6173 6820 213d 2073 656c 662e  er_hash != self.
-00016ed0: 636f 6e73 7461 6e74 732e 4745 4e45 5349  constants.GENESI
-00016ee0: 535f 4348 414c 4c45 4e47 4520 616e 6420  S_CHALLENGE and 
-00016ef0: 6e6f 7420 7365 6c66 2e62 6c6f 636b 6368  not self.blockch
-00016f00: 6169 6e2e 636f 6e74 6169 6e73 5f62 6c6f  ain.contains_blo
-00016f10: 636b 280a 2020 2020 2020 2020 2020 2020  ck(.            
-00016f20: 626c 6f63 6b2e 7072 6576 5f68 6561 6465  block.prev_heade
-00016f30: 725f 6861 7368 0a20 2020 2020 2020 2029  r_hash.        )
-00016f40: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
-00016f50: 4e6f 206e 6565 6420 746f 2072 6571 7565  No need to reque
-00016f60: 7374 2074 6865 2070 6172 656e 742c 2073  st the parent, s
-00016f70: 696e 6365 2074 6865 2070 6565 7220 7769  ince the peer wi
-00016f80: 6c6c 2073 656e 6420 6974 2074 6f20 7573  ll send it to us
-00016f90: 2061 6e79 7761 792c 2076 6961 204e 6577   anyway, via New
-00016fa0: 5065 616b 0a20 2020 2020 2020 2020 2020  Peak.           
-00016fb0: 2073 656c 662e 6c6f 672e 6465 6275 6728   self.log.debug(
-00016fc0: 2252 6563 6569 7665 6420 6120 6469 7363  "Received a disc
-00016fd0: 6f6e 6e65 6374 6564 2075 6e66 696e 6973  onnected unfinis
-00016fe0: 6865 6420 626c 6f63 6b22 290a 2020 2020  hed block").    
-00016ff0: 2020 2020 2020 2020 7265 7475 726e 204e          return N
-00017000: 6f6e 650a 0a20 2020 2020 2020 2023 2041  one..        # A
-00017010: 6464 7320 7468 6520 756e 6669 6e69 7368  dds the unfinish
-00017020: 6564 2062 6c6f 636b 2074 6f20 7365 656e  ed block to seen
-00017030: 2c20 616e 6420 6368 6563 6b20 6966 2069  , and check if i
-00017040: 7427 7320 7365 656e 2062 6566 6f72 652c  t's seen before,
-00017050: 2074 6f20 7072 6576 656e 740a 2020 2020   to prevent.    
-00017060: 2020 2020 2320 7072 6f63 6573 7369 6e67      # processing
-00017070: 2069 7420 7477 6963 652e 2054 6869 7320   it twice. This 
-00017080: 7365 6172 6368 6573 2066 6f72 2074 6865  searches for the
-00017090: 2065 7861 6374 2076 6572 7369 6f6e 206f   exact version o
-000170a0: 6620 7468 6520 756e 6669 6e69 7368 6564  f the unfinished
-000170b0: 2062 6c6f 636b 2028 7468 6572 6520 6361   block (there ca
-000170c0: 6e20 6265 206d 616e 7920 6469 6666 6572  n be many differ
-000170d0: 656e 740a 2020 2020 2020 2020 2320 666f  ent.        # fo
-000170e0: 6c69 6167 6573 2066 6f72 2074 6865 2073  liages for the s
-000170f0: 616d 6520 7472 756e 6b29 2e20 5468 6973  ame trunk). This
-00017100: 2069 7320 696e 7465 6e74 696f 6e61 6c2c   is intentional,
-00017110: 2074 6f20 7072 6576 656e 7420 444f 5320   to prevent DOS 
-00017120: 6174 7461 636b 732e 0a20 2020 2020 2020  attacks..       
-00017130: 2023 204e 6f74 6520 7468 6174 2069 7420   # Note that it 
-00017140: 646f 6573 206e 6f74 2072 6571 7569 7265  does not require
-00017150: 2074 6861 7420 7468 6973 2062 6c6f 636b   that this block
-00017160: 2077 6173 2073 7563 6365 7373 6675 6c6c   was successfull
-00017170: 7920 7072 6f63 6573 7365 640a 2020 2020  y processed.    
-00017180: 2020 2020 6966 2073 656c 662e 6675 6c6c      if self.full
-00017190: 5f6e 6f64 655f 7374 6f72 652e 7365 656e  _node_store.seen
-000171a0: 5f75 6e66 696e 6973 6865 645f 626c 6f63  _unfinished_bloc
-000171b0: 6b28 626c 6f63 6b2e 6765 745f 6861 7368  k(block.get_hash
-000171c0: 2829 293a 0a20 2020 2020 2020 2020 2020  ()):.           
-000171d0: 2072 6574 7572 6e20 4e6f 6e65 0a0a 2020   return None..  
-000171e0: 2020 2020 2020 626c 6f63 6b5f 6861 7368        block_hash
-000171f0: 203d 2062 7974 6573 3332 2862 6c6f 636b   = bytes32(block
-00017200: 2e72 6577 6172 645f 6368 6169 6e5f 626c  .reward_chain_bl
-00017210: 6f63 6b2e 6765 745f 6861 7368 2829 290a  ock.get_hash()).
-00017220: 2020 2020 2020 2020 666f 6c69 6167 655f          foliage_
-00017230: 7478 5f68 6173 6820 3d20 626c 6f63 6b2e  tx_hash = block.
-00017240: 666f 6c69 6167 652e 666f 6c69 6167 655f  foliage.foliage_
-00017250: 7472 616e 7361 6374 696f 6e5f 626c 6f63  transaction_bloc
-00017260: 6b5f 6861 7368 0a0a 2020 2020 2020 2020  k_hash..        
-00017270: 2320 4966 2077 6520 6861 7665 2061 6c72  # If we have alr
-00017280: 6561 6479 2061 6464 6564 2074 6865 2062  eady added the b
-00017290: 6c6f 636b 2077 6974 6820 7468 6973 2072  lock with this r
-000172a0: 6577 6172 6420 626c 6f63 6b20 6861 7368  eward block hash
-000172b0: 2061 6e64 0a20 2020 2020 2020 2023 2066   and.        # f
-000172c0: 6f6c 6961 6765 2068 6173 682c 2072 6574  oliage hash, ret
-000172d0: 7572 6e0a 2020 2020 2020 2020 6966 2073  urn.        if s
-000172e0: 656c 662e 6675 6c6c 5f6e 6f64 655f 7374  elf.full_node_st
-000172f0: 6f72 652e 6765 745f 756e 6669 6e69 7368  ore.get_unfinish
-00017300: 6564 5f62 6c6f 636b 3228 626c 6f63 6b5f  ed_block2(block_
-00017310: 6861 7368 2c20 666f 6c69 6167 655f 7478  hash, foliage_tx
-00017320: 5f68 6173 6829 5b30 5d20 6973 206e 6f74  _hash)[0] is not
-00017330: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00017340: 2020 2072 6574 7572 6e20 4e6f 6e65 0a0a     return None..
-00017350: 2020 2020 2020 2020 7065 616b 3a20 4f70          peak: Op
-00017360: 7469 6f6e 616c 5b42 6c6f 636b 5265 636f  tional[BlockReco
-00017370: 7264 5d20 3d20 7365 6c66 2e62 6c6f 636b  rd] = self.block
-00017380: 6368 6169 6e2e 6765 745f 7065 616b 2829  chain.get_peak()
-00017390: 0a20 2020 2020 2020 2069 6620 7065 616b  .        if peak
-000173a0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-000173b0: 2020 2020 2020 2020 2020 6966 2062 6c6f            if blo
-000173c0: 636b 2e74 6f74 616c 5f69 7465 7273 203c  ck.total_iters <
-000173d0: 2070 6561 6b2e 7370 5f74 6f74 616c 5f69   peak.sp_total_i
-000173e0: 7465 7273 2873 656c 662e 636f 6e73 7461  ters(self.consta
-000173f0: 6e74 7329 3a0a 2020 2020 2020 2020 2020  nts):.          
-00017400: 2020 2020 2020 2320 5468 6973 206d 6561        # This mea
-00017410: 6e73 2074 6869 7320 756e 6669 6e69 7368  ns this unfinish
-00017420: 6564 2062 6c6f 636b 2069 7320 7072 6574  ed block is pret
-00017430: 7479 2066 6172 2062 6568 696e 642c 2069  ty far behind, i
-00017440: 7420 7769 6c6c 206e 6f74 2061 6464 2077  t will not add w
-00017450: 6569 6768 7420 746f 206f 7572 2063 6861  eight to our cha
-00017460: 696e 0a20 2020 2020 2020 2020 2020 2020  in.             
-00017470: 2020 2072 6574 7572 6e20 4e6f 6e65 0a0a     return None..
-00017480: 2020 2020 2020 2020 6966 2062 6c6f 636b          if block
-00017490: 2e70 7265 765f 6865 6164 6572 5f68 6173  .prev_header_has
-000174a0: 6820 3d3d 2073 656c 662e 636f 6e73 7461  h == self.consta
-000174b0: 6e74 732e 4745 4e45 5349 535f 4348 414c  nts.GENESIS_CHAL
-000174c0: 4c45 4e47 453a 0a20 2020 2020 2020 2020  LENGE:.         
-000174d0: 2020 2070 7265 765f 6220 3d20 4e6f 6e65     prev_b = None
-000174e0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-000174f0: 2020 2020 2020 2020 2020 2070 7265 765f             prev_
-00017500: 6220 3d20 7365 6c66 2e62 6c6f 636b 6368  b = self.blockch
-00017510: 6169 6e2e 626c 6f63 6b5f 7265 636f 7264  ain.block_record
-00017520: 2862 6c6f 636b 2e70 7265 765f 6865 6164  (block.prev_head
-00017530: 6572 5f68 6173 6829 0a0a 2020 2020 2020  er_hash)..      
-00017540: 2020 2320 436f 756e 7420 7468 6520 626c    # Count the bl
-00017550: 6f63 6b73 2069 6e20 7375 6220 736c 6f74  ocks in sub slot
-00017560: 2c20 616e 6420 6368 6563 6b20 6966 2069  , and check if i
-00017570: 7427 7320 6120 6e65 7720 6570 6f63 680a  t's a new epoch.
-00017580: 2020 2020 2020 2020 6966 206c 656e 2862          if len(b
-00017590: 6c6f 636b 2e66 696e 6973 6865 645f 7375  lock.finished_su
-000175a0: 625f 736c 6f74 7329 203e 2030 3a0a 2020  b_slots) > 0:.  
-000175b0: 2020 2020 2020 2020 2020 6e75 6d5f 626c            num_bl
-000175c0: 6f63 6b73 5f69 6e5f 7373 203d 2031 2020  ocks_in_ss = 1  
-000175d0: 2320 4375 7272 0a20 2020 2020 2020 2065  # Curr.        e
-000175e0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000175f0: 2063 7572 7220 3d20 7365 6c66 2e62 6c6f   curr = self.blo
-00017600: 636b 6368 6169 6e2e 7472 795f 626c 6f63  ckchain.try_bloc
-00017610: 6b5f 7265 636f 7264 2862 6c6f 636b 2e70  k_record(block.p
-00017620: 7265 765f 6865 6164 6572 5f68 6173 6829  rev_header_hash)
-00017630: 0a20 2020 2020 2020 2020 2020 206e 756d  .            num
-00017640: 5f62 6c6f 636b 735f 696e 5f73 7320 3d20  _blocks_in_ss = 
-00017650: 3220 2023 2043 7572 7220 616e 6420 7072  2  # Curr and pr
-00017660: 6576 0a20 2020 2020 2020 2020 2020 2077  ev.            w
-00017670: 6869 6c65 2028 6375 7272 2069 7320 6e6f  hile (curr is no
-00017680: 7420 4e6f 6e65 2920 616e 6420 6e6f 7420  t None) and not 
-00017690: 6375 7272 2e66 6972 7374 5f69 6e5f 7375  curr.first_in_su
-000176a0: 625f 736c 6f74 3a0a 2020 2020 2020 2020  b_slot:.        
-000176b0: 2020 2020 2020 2020 6375 7272 203d 2073          curr = s
-000176c0: 656c 662e 626c 6f63 6b63 6861 696e 2e74  elf.blockchain.t
-000176d0: 7279 5f62 6c6f 636b 5f72 6563 6f72 6428  ry_block_record(
-000176e0: 6375 7272 2e70 7265 765f 6861 7368 290a  curr.prev_hash).
-000176f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017700: 6e75 6d5f 626c 6f63 6b73 5f69 6e5f 7373  num_blocks_in_ss
-00017710: 202b 3d20 310a 0a20 2020 2020 2020 2069   += 1..        i
-00017720: 6620 6e75 6d5f 626c 6f63 6b73 5f69 6e5f  f num_blocks_in_
-00017730: 7373 203e 2073 656c 662e 636f 6e73 7461  ss > self.consta
-00017740: 6e74 732e 4d41 585f 5355 425f 534c 4f54  nts.MAX_SUB_SLOT
-00017750: 5f42 4c4f 434b 533a 0a20 2020 2020 2020  _BLOCKS:.       
-00017760: 2020 2020 2023 2054 4f44 4f3a 2070 6f74       # TODO: pot
-00017770: 656e 7469 616c 6c79 2061 6c6c 6f77 206f  entially allow o
-00017780: 7665 7266 6c6f 7720 626c 6f63 6b73 2068  verflow blocks h
-00017790: 6572 652c 2077 6869 6368 2063 6f75 6e74  ere, which count
-000177a0: 2066 6f72 2074 6865 206e 6578 7420 736c   for the next sl
-000177b0: 6f74 0a20 2020 2020 2020 2020 2020 2073  ot.            s
-000177c0: 656c 662e 6c6f 672e 7761 726e 696e 6728  elf.log.warning(
-000177d0: 2254 6f6f 206d 616e 7920 626c 6f63 6b73  "Too many blocks
-000177e0: 2061 6464 6564 2c20 6e6f 7420 6164 6469   added, not addi
-000177f0: 6e67 2062 6c6f 636b 2229 0a20 2020 2020  ng block").     
-00017800: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
-00017810: 6e65 0a0a 2020 2020 2020 2020 2320 5468  ne..        # Th
-00017820: 6520 636c 766d 2067 656e 6572 6174 6f72  e clvm generator
-00017830: 2061 6e64 2061 6767 7265 6761 7465 2073   and aggregate s
-00017840: 6967 6e61 7475 7265 2061 7265 2076 616c  ignature are val
-00017850: 6964 6174 6564 206f 7574 7369 6465 206f  idated outside o
-00017860: 6620 7468 6520 6c6f 636b 2c20 746f 2061  f the lock, to a
-00017870: 6c6c 6f77 206f 7468 6572 2062 6c6f 636b  llow other block
-00017880: 7320 616e 640a 2020 2020 2020 2020 2320  s and.        # 
-00017890: 7472 616e 7361 6374 696f 6e73 2074 6f20  transactions to 
-000178a0: 6765 7420 7661 6c69 6461 7465 640a 2020  get validated.  
-000178b0: 2020 2020 2020 6e70 635f 7265 7375 6c74        npc_result
-000178c0: 3a20 4f70 7469 6f6e 616c 5b4e 5043 5265  : Optional[NPCRe
-000178d0: 7375 6c74 5d20 3d20 4e6f 6e65 0a20 2020  sult] = None.   
-000178e0: 2020 2020 2070 7265 5f76 616c 6964 6174       pre_validat
-000178f0: 696f 6e5f 7469 6d65 203d 204e 6f6e 650a  ion_time = None.
-00017900: 0a20 2020 2020 2020 2061 7379 6e63 2077  .        async w
-00017910: 6974 6820 7365 6c66 2e62 6c6f 636b 6368  ith self.blockch
-00017920: 6169 6e2e 7072 696f 7269 7479 5f6d 7574  ain.priority_mut
-00017930: 6578 2e61 6371 7569 7265 2870 7269 6f72  ex.acquire(prior
-00017940: 6974 793d 426c 6f63 6b63 6861 696e 4d75  ity=BlockchainMu
-00017950: 7465 7850 7269 6f72 6974 792e 6869 6768  texPriority.high
-00017960: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
-00017970: 7461 7274 5f68 6561 6465 725f 7469 6d65  tart_header_time
-00017980: 203d 2074 696d 652e 6d6f 6e6f 746f 6e69   = time.monotoni
-00017990: 6328 290a 2020 2020 2020 2020 2020 2020  c().            
-000179a0: 5f2c 2068 6561 6465 725f 6572 726f 7220  _, header_error 
-000179b0: 3d20 6177 6169 7420 7365 6c66 2e62 6c6f  = await self.blo
-000179c0: 636b 6368 6169 6e2e 7661 6c69 6461 7465  ckchain.validate
-000179d0: 5f75 6e66 696e 6973 6865 645f 626c 6f63  _unfinished_bloc
-000179e0: 6b5f 6865 6164 6572 2862 6c6f 636b 290a  k_header(block).
-000179f0: 2020 2020 2020 2020 2020 2020 6966 2068              if h
-00017a00: 6561 6465 725f 6572 726f 7220 6973 206e  eader_error is n
-00017a10: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00017a20: 2020 2020 2020 2020 2069 6620 6865 6164           if head
-00017a30: 6572 5f65 7272 6f72 203d 3d20 4572 722e  er_error == Err.
-00017a40: 5449 4d45 5354 414d 505f 544f 4f5f 4641  TIMESTAMP_TOO_FA
-00017a50: 525f 494e 5f46 5554 5552 453a 0a20 2020  R_IN_FUTURE:.   
-00017a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017a70: 2072 6169 7365 2054 696d 6573 7461 6d70   raise Timestamp
-00017a80: 4572 726f 7228 290a 2020 2020 2020 2020  Error().        
-00017a90: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00017aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017ab0: 2020 7261 6973 6520 436f 6e73 656e 7375    raise Consensu
-00017ac0: 7345 7272 6f72 2868 6561 6465 725f 6572  sError(header_er
-00017ad0: 726f 7229 0a20 2020 2020 2020 2020 2020  ror).           
-00017ae0: 2076 616c 6964 6174 655f 7469 6d65 203d   validate_time =
-00017af0: 2074 696d 652e 6d6f 6e6f 746f 6e69 6328   time.monotonic(
-00017b00: 2920 2d20 7374 6172 745f 6865 6164 6572  ) - start_header
-00017b10: 5f74 696d 650a 2020 2020 2020 2020 2020  _time.          
-00017b20: 2020 7365 6c66 2e6c 6f67 2e6c 6f67 280a    self.log.log(.
-00017b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017b40: 6c6f 6767 696e 672e 5741 524e 494e 4720  logging.WARNING 
-00017b50: 6966 2076 616c 6964 6174 655f 7469 6d65  if validate_time
-00017b60: 203e 2032 2065 6c73 6520 6c6f 6767 696e   > 2 else loggin
-00017b70: 672e 4445 4255 472c 0a20 2020 2020 2020  g.DEBUG,.       
-00017b80: 2020 2020 2020 2020 2066 2254 696d 6520           f"Time 
-00017b90: 666f 7220 6865 6164 6572 2076 616c 6964  for header valid
-00017ba0: 6174 653a 207b 7661 6c69 6461 7465 5f74  ate: {validate_t
-00017bb0: 696d 653a 302e 3366 7d73 222c 0a20 2020  ime:0.3f}s",.   
-00017bc0: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
-00017bd0: 2020 2020 6966 2062 6c6f 636b 2e74 7261      if block.tra
-00017be0: 6e73 6163 7469 6f6e 735f 6765 6e65 7261  nsactions_genera
-00017bf0: 746f 7220 6973 206e 6f74 204e 6f6e 653a  tor is not None:
-00017c00: 0a20 2020 2020 2020 2020 2020 2070 7265  .            pre
-00017c10: 5f76 616c 6964 6174 696f 6e5f 7374 6172  _validation_star
-00017c20: 7420 3d20 7469 6d65 2e6d 6f6e 6f74 6f6e  t = time.monoton
-00017c30: 6963 2829 0a20 2020 2020 2020 2020 2020  ic().           
-00017c40: 2061 7373 6572 7420 626c 6f63 6b2e 7472   assert block.tr
-00017c50: 616e 7361 6374 696f 6e73 5f69 6e66 6f20  ansactions_info 
-00017c60: 6973 206e 6f74 204e 6f6e 650a 2020 2020  is not None.    
-00017c70: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
-00017c80: 2020 2020 2020 2020 2020 2020 2062 6c6f               blo
-00017c90: 636b 5f67 656e 6572 6174 6f72 3a20 4f70  ck_generator: Op
-00017ca0: 7469 6f6e 616c 5b42 6c6f 636b 4765 6e65  tional[BlockGene
-00017cb0: 7261 746f 725d 203d 2061 7761 6974 2073  rator] = await s
-00017cc0: 656c 662e 626c 6f63 6b63 6861 696e 2e67  elf.blockchain.g
-00017cd0: 6574 5f62 6c6f 636b 5f67 656e 6572 6174  et_block_generat
-00017ce0: 6f72 2862 6c6f 636b 290a 2020 2020 2020  or(block).      
-00017cf0: 2020 2020 2020 6578 6365 7074 2056 616c        except Val
-00017d00: 7565 4572 726f 723a 0a20 2020 2020 2020  ueError:.       
-00017d10: 2020 2020 2020 2020 2072 6169 7365 2043           raise C
-00017d20: 6f6e 7365 6e73 7573 4572 726f 7228 4572  onsensusError(Er
-00017d30: 722e 4745 4e45 5241 544f 525f 5245 465f  r.GENERATOR_REF_
-00017d40: 4841 535f 4e4f 5f47 454e 4552 4154 4f52  HAS_NO_GENERATOR
-00017d50: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-00017d60: 2062 6c6f 636b 5f67 656e 6572 6174 6f72   block_generator
-00017d70: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-00017d80: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00017d90: 436f 6e73 656e 7375 7345 7272 6f72 2845  ConsensusError(E
-00017da0: 7272 2e47 454e 4552 4154 4f52 5f52 4546  rr.GENERATOR_REF
-00017db0: 5f48 4153 5f4e 4f5f 4745 4e45 5241 544f  _HAS_NO_GENERATO
-00017dc0: 5229 0a20 2020 2020 2020 2020 2020 2069  R).            i
-00017dd0: 6620 626c 6f63 6b5f 6279 7465 7320 6973  f block_bytes is
-00017de0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00017df0: 2020 2020 2020 2062 6c6f 636b 5f62 7974         block_byt
-00017e00: 6573 203d 2062 7974 6573 2862 6c6f 636b  es = bytes(block
-00017e10: 290a 0a20 2020 2020 2020 2020 2020 2068  )..            h
-00017e20: 6569 6768 7420 3d20 7569 6e74 3332 2830  eight = uint32(0
-00017e30: 2920 6966 2070 7265 765f 6220 6973 204e  ) if prev_b is N
-00017e40: 6f6e 6520 656c 7365 2075 696e 7433 3228  one else uint32(
-00017e50: 7072 6576 5f62 2e68 6569 6768 7420 2b20  prev_b.height + 
-00017e60: 3129 0a20 2020 2020 2020 2020 2020 206e  1).            n
-00017e70: 7063 5f72 6573 756c 7420 3d20 6177 6169  pc_result = awai
-00017e80: 7420 7365 6c66 2e62 6c6f 636b 6368 6169  t self.blockchai
-00017e90: 6e2e 7275 6e5f 6765 6e65 7261 746f 7228  n.run_generator(
-00017ea0: 626c 6f63 6b5f 6279 7465 732c 2062 6c6f  block_bytes, blo
-00017eb0: 636b 5f67 656e 6572 6174 6f72 2c20 6865  ck_generator, he
-00017ec0: 6967 6874 290a 2020 2020 2020 2020 2020  ight).          
-00017ed0: 2020 7072 655f 7661 6c69 6461 7469 6f6e    pre_validation
-00017ee0: 5f74 696d 6520 3d20 7469 6d65 2e6d 6f6e  _time = time.mon
-00017ef0: 6f74 6f6e 6963 2829 202d 2070 7265 5f76  otonic() - pre_v
-00017f00: 616c 6964 6174 696f 6e5f 7374 6172 740a  alidation_start.
-00017f10: 0a20 2020 2020 2020 2020 2020 2023 2062  .            # b
-00017f20: 6c6f 636b 6368 6169 6e2e 7275 6e5f 6765  lockchain.run_ge
-00017f30: 6e65 7261 746f 7220 7468 726f 7773 206f  nerator throws o
-00017f40: 6e20 6572 726f 7273 2c20 736f 206e 7063  n errors, so npc
-00017f50: 5f72 6573 756c 7420 6973 0a20 2020 2020  _result is.     
-00017f60: 2020 2020 2020 2023 2067 7561 7261 6e74         # guarant
-00017f70: 6565 6420 746f 2072 6570 7265 7365 6e74  eed to represent
-00017f80: 2061 2073 7563 6365 7373 6675 6c20 7275   a successful ru
-00017f90: 6e0a 2020 2020 2020 2020 2020 2020 6173  n.            as
-00017fa0: 7365 7274 206e 7063 5f72 6573 756c 742e  sert npc_result.
-00017fb0: 636f 6e64 7320 6973 206e 6f74 204e 6f6e  conds is not Non
-00017fc0: 650a 2020 2020 2020 2020 2020 2020 7061  e.            pa
-00017fd0: 6972 735f 706b 732c 2070 6169 7273 5f6d  irs_pks, pairs_m
-00017fe0: 7367 7320 3d20 706b 6d5f 7061 6972 7328  sgs = pkm_pairs(
-00017ff0: 6e70 635f 7265 7375 6c74 2e63 6f6e 6473  npc_result.conds
-00018000: 2c20 7365 6c66 2e63 6f6e 7374 616e 7473  , self.constants
-00018010: 2e41 4747 5f53 4947 5f4d 455f 4144 4449  .AGG_SIG_ME_ADDI
-00018020: 5449 4f4e 414c 5f44 4154 4129 0a20 2020  TIONAL_DATA).   
-00018030: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-00018040: 6361 6368 6564 5f62 6c73 2e61 6767 7265  cached_bls.aggre
-00018050: 6761 7465 5f76 6572 6966 7928 0a20 2020  gate_verify(.   
-00018060: 2020 2020 2020 2020 2020 2020 2070 6169               pai
-00018070: 7273 5f70 6b73 2c20 7061 6972 735f 6d73  rs_pks, pairs_ms
-00018080: 6773 2c20 626c 6f63 6b2e 7472 616e 7361  gs, block.transa
-00018090: 6374 696f 6e73 5f69 6e66 6f2e 6167 6772  ctions_info.aggr
-000180a0: 6567 6174 6564 5f73 6967 6e61 7475 7265  egated_signature
-000180b0: 2c20 5472 7565 0a20 2020 2020 2020 2020  , True.         
-000180c0: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-000180d0: 2020 2020 2020 7261 6973 6520 436f 6e73        raise Cons
-000180e0: 656e 7375 7345 7272 6f72 2845 7272 2e42  ensusError(Err.B
-000180f0: 4144 5f41 4747 5245 4741 5445 5f53 4947  AD_AGGREGATE_SIG
-00018100: 4e41 5455 5245 290a 0a20 2020 2020 2020  NATURE)..       
-00018110: 2061 7379 6e63 2077 6974 6820 7365 6c66   async with self
-00018120: 2e62 6c6f 636b 6368 6169 6e2e 7072 696f  .blockchain.prio
-00018130: 7269 7479 5f6d 7574 6578 2e61 6371 7569  rity_mutex.acqui
-00018140: 7265 2870 7269 6f72 6974 793d 426c 6f63  re(priority=Bloc
-00018150: 6b63 6861 696e 4d75 7465 7850 7269 6f72  kchainMutexPrior
-00018160: 6974 792e 6869 6768 293a 0a20 2020 2020  ity.high):.     
-00018170: 2020 2020 2020 2023 2054 4f44 4f3a 2070         # TODO: p
-00018180: 7265 2d76 616c 6964 6174 6520 5644 4673  re-validate VDFs
-00018190: 206f 7574 7369 6465 206f 6620 6c6f 636b   outside of lock
-000181a0: 0a20 2020 2020 2020 2020 2020 2076 616c  .            val
-000181b0: 6964 6174 696f 6e5f 7374 6172 7420 3d20  idation_start = 
-000181c0: 7469 6d65 2e6d 6f6e 6f74 6f6e 6963 2829  time.monotonic()
-000181d0: 0a20 2020 2020 2020 2020 2020 2076 616c  .            val
-000181e0: 6964 6174 655f 7265 7375 6c74 203d 2061  idate_result = a
-000181f0: 7761 6974 2073 656c 662e 626c 6f63 6b63  wait self.blockc
-00018200: 6861 696e 2e76 616c 6964 6174 655f 756e  hain.validate_un
-00018210: 6669 6e69 7368 6564 5f62 6c6f 636b 2862  finished_block(b
-00018220: 6c6f 636b 2c20 6e70 635f 7265 7375 6c74  lock, npc_result
-00018230: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-00018240: 2076 616c 6964 6174 655f 7265 7375 6c74   validate_result
-00018250: 2e65 7272 6f72 2069 7320 6e6f 7420 4e6f  .error is not No
-00018260: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00018270: 2020 2020 7261 6973 6520 436f 6e73 656e      raise Consen
-00018280: 7375 7345 7272 6f72 2845 7272 2876 616c  susError(Err(val
-00018290: 6964 6174 655f 7265 7375 6c74 2e65 7272  idate_result.err
-000182a0: 6f72 2929 0a20 2020 2020 2020 2020 2020  or)).           
-000182b0: 2076 616c 6964 6174 696f 6e5f 7469 6d65   validation_time
-000182c0: 203d 2074 696d 652e 6d6f 6e6f 746f 6e69   = time.monotoni
-000182d0: 6328 2920 2d20 7661 6c69 6461 7469 6f6e  c() - validation
-000182e0: 5f73 7461 7274 0a0a 2020 2020 2020 2020  _start..        
-000182f0: 2320 7265 7370 6f6e 645f 626c 6f63 6b20  # respond_block 
-00018300: 7769 6c6c 206c 6174 6572 2075 7365 2074  will later use t
-00018310: 6865 2063 6163 6865 2028 7661 6c69 6461  he cache (valida
-00018320: 7465 645f 7369 676e 6174 7572 653d 5472  ted_signature=Tr
-00018330: 7565 290a 2020 2020 2020 2020 7661 6c69  ue).        vali
-00018340: 6461 7465 5f72 6573 756c 7420 3d20 6461  date_result = da
-00018350: 7461 636c 6173 7365 732e 7265 706c 6163  taclasses.replac
-00018360: 6528 7661 6c69 6461 7465 5f72 6573 756c  e(validate_resul
-00018370: 742c 2076 616c 6964 6174 6564 5f73 6967  t, validated_sig
-00018380: 6e61 7475 7265 3d54 7275 6529 0a0a 2020  nature=True)..  
-00018390: 2020 2020 2020 6173 7365 7274 2076 616c        assert val
-000183a0: 6964 6174 655f 7265 7375 6c74 2e72 6571  idate_result.req
-000183b0: 7569 7265 645f 6974 6572 7320 6973 206e  uired_iters is n
-000183c0: 6f74 204e 6f6e 650a 0a20 2020 2020 2020  ot None..       
-000183d0: 2023 2050 6572 666f 726d 2061 6e6f 7468   # Perform anoth
-000183e0: 6572 2063 6865 636b 2c20 696e 2063 6173  er check, in cas
-000183f0: 6520 7765 2068 6176 6520 616c 7265 6164  e we have alread
-00018400: 7920 636f 6e63 7572 7265 6e74 6c79 2061  y concurrently a
-00018410: 6464 6564 2074 6865 2073 616d 6520 756e  dded the same un
-00018420: 6669 6e69 7368 6564 2062 6c6f 636b 0a20  finished block. 
-00018430: 2020 2020 2020 2069 6620 7365 6c66 2e66         if self.f
-00018440: 756c 6c5f 6e6f 6465 5f73 746f 7265 2e67  ull_node_store.g
-00018450: 6574 5f75 6e66 696e 6973 6865 645f 626c  et_unfinished_bl
-00018460: 6f63 6b32 2862 6c6f 636b 5f68 6173 682c  ock2(block_hash,
-00018470: 2066 6f6c 6961 6765 5f74 785f 6861 7368   foliage_tx_hash
-00018480: 295b 305d 2069 7320 6e6f 7420 4e6f 6e65  )[0] is not None
-00018490: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-000184a0: 7475 726e 204e 6f6e 650a 0a20 2020 2020  turn None..     
-000184b0: 2020 2069 6620 626c 6f63 6b2e 7072 6576     if block.prev
-000184c0: 5f68 6561 6465 725f 6861 7368 203d 3d20  _header_hash == 
-000184d0: 7365 6c66 2e63 6f6e 7374 616e 7473 2e47  self.constants.G
-000184e0: 454e 4553 4953 5f43 4841 4c4c 454e 4745  ENESIS_CHALLENGE
-000184f0: 3a0a 2020 2020 2020 2020 2020 2020 6865  :.            he
-00018500: 6967 6874 203d 2075 696e 7433 3228 3029  ight = uint32(0)
-00018510: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00018520: 2020 2020 2020 2020 2020 2068 6569 6768             heigh
-00018530: 7420 3d20 7569 6e74 3332 2873 656c 662e  t = uint32(self.
-00018540: 626c 6f63 6b63 6861 696e 2e62 6c6f 636b  blockchain.block
-00018550: 5f72 6563 6f72 6428 626c 6f63 6b2e 7072  _record(block.pr
-00018560: 6576 5f68 6561 6465 725f 6861 7368 292e  ev_header_hash).
-00018570: 6865 6967 6874 202b 2031 290a 0a20 2020  height + 1)..   
-00018580: 2020 2020 2073 6573 3a20 4f70 7469 6f6e       ses: Option
-00018590: 616c 5b53 7562 4570 6f63 6853 756d 6d61  al[SubEpochSumma
-000185a0: 7279 5d20 3d20 6e65 7874 5f73 7562 5f65  ry] = next_sub_e
-000185b0: 706f 6368 5f73 756d 6d61 7279 280a 2020  poch_summary(.  
-000185c0: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
-000185d0: 6f6e 7374 616e 7473 2c0a 2020 2020 2020  onstants,.      
-000185e0: 2020 2020 2020 7365 6c66 2e62 6c6f 636b        self.block
-000185f0: 6368 6169 6e2c 0a20 2020 2020 2020 2020  chain,.         
-00018600: 2020 2076 616c 6964 6174 655f 7265 7375     validate_resu
-00018610: 6c74 2e72 6571 7569 7265 645f 6974 6572  lt.required_iter
-00018620: 732c 0a20 2020 2020 2020 2020 2020 2062  s,.            b
-00018630: 6c6f 636b 2c0a 2020 2020 2020 2020 2020  lock,.          
-00018640: 2020 5472 7565 2c0a 2020 2020 2020 2020    True,.        
-00018650: 290a 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00018660: 6675 6c6c 5f6e 6f64 655f 7374 6f72 652e  full_node_store.
-00018670: 6164 645f 756e 6669 6e69 7368 6564 5f62  add_unfinished_b
-00018680: 6c6f 636b 2868 6569 6768 742c 2062 6c6f  lock(height, blo
-00018690: 636b 2c20 7661 6c69 6461 7465 5f72 6573  ck, validate_res
-000186a0: 756c 7429 0a20 2020 2020 2020 2070 7265  ult).        pre
-000186b0: 5f76 616c 6964 6174 696f 6e5f 6c6f 6720  _validation_log 
-000186c0: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
-000186d0: 6622 7072 655f 7661 6c69 6461 7469 6f6e  f"pre_validation
-000186e0: 2074 696d 6520 7b70 7265 5f76 616c 6964   time {pre_valid
-000186f0: 6174 696f 6e5f 7469 6d65 3a30 2e34 667d  ation_time:0.4f}
-00018700: 2c20 2220 6966 2070 7265 5f76 616c 6964  , " if pre_valid
-00018710: 6174 696f 6e5f 7469 6d65 2069 7320 6e6f  ation_time is no
-00018720: 7420 4e6f 6e65 2065 6c73 6520 2222 0a20  t None else "". 
-00018730: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00018740: 2069 6620 6661 726d 6564 5f62 6c6f 636b   if farmed_block
-00018750: 2069 7320 5472 7565 3a0a 2020 2020 2020   is True:.      
-00018760: 2020 2020 2020 7365 6c66 2e6c 6f67 2e69        self.log.i
-00018770: 6e66 6f28 0a20 2020 2020 2020 2020 2020  nfo(.           
-00018780: 2020 2020 2066 22f0 9f8d 8020 efb8 8f46       f".... ...F
-00018790: 6172 6d65 6420 756e 6669 6e69 7368 6564  armed unfinished
-000187a0: 5f62 6c6f 636b 207b 626c 6f63 6b5f 6861  _block {block_ha
-000187b0: 7368 7d2c 2053 503a 207b 626c 6f63 6b2e  sh}, SP: {block.
-000187c0: 7265 7761 7264 5f63 6861 696e 5f62 6c6f  reward_chain_blo
-000187d0: 636b 2e73 6967 6e61 6765 5f70 6f69 6e74  ck.signage_point
-000187e0: 5f69 6e64 6578 7d2c 2022 0a20 2020 2020  _index}, ".     
-000187f0: 2020 2020 2020 2020 2020 2066 2276 616c             f"val
-00018800: 6964 6174 696f 6e20 7469 6d65 3a20 7b76  idation time: {v
-00018810: 616c 6964 6174 696f 6e5f 7469 6d65 3a30  alidation_time:0
-00018820: 2e34 667d 2073 6563 6f6e 6473 2c20 7b70  .4f} seconds, {p
-00018830: 7265 5f76 616c 6964 6174 696f 6e5f 6c6f  re_validation_lo
-00018840: 677d 220a 2020 2020 2020 2020 2020 2020  g}".            
-00018850: 2020 2020 6622 636f 7374 3a20 7b62 6c6f      f"cost: {blo
-00018860: 636b 2e74 7261 6e73 6163 7469 6f6e 735f  ck.transactions_
-00018870: 696e 666f 2e63 6f73 7420 6966 2062 6c6f  info.cost if blo
-00018880: 636b 2e74 7261 6e73 6163 7469 6f6e 735f  ck.transactions_
-00018890: 696e 666f 2065 6c73 6520 274e 6f6e 6527  info else 'None'
-000188a0: 7d20 220a 2020 2020 2020 2020 2020 2020  } ".            
-000188b0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-000188c0: 2020 2020 2020 2020 2020 2020 7065 7263              perc
-000188d0: 656e 745f 6675 6c6c 5f73 7472 203d 2028  ent_full_str = (
-000188e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000188f0: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
-00018900: 2020 2020 2020 2022 2c20 7065 7263 656e         ", percen
-00018910: 7420 6675 6c6c 3a20 220a 2020 2020 2020  t full: ".      
-00018920: 2020 2020 2020 2020 2020 2020 2020 2b20                + 
-00018930: 7374 7228 726f 756e 6428 3130 302e 3020  str(round(100.0 
-00018940: 2a20 666c 6f61 7428 626c 6f63 6b2e 7472  * float(block.tr
-00018950: 616e 7361 6374 696f 6e73 5f69 6e66 6f2e  ansactions_info.
-00018960: 636f 7374 2920 2f20 7365 6c66 2e63 6f6e  cost) / self.con
-00018970: 7374 616e 7473 2e4d 4158 5f42 4c4f 434b  stants.MAX_BLOCK
-00018980: 5f43 4f53 545f 434c 564d 2c20 3329 290a  _COST_CLVM, 3)).
-00018990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000189a0: 2020 2020 2b20 2225 220a 2020 2020 2020      + "%".      
-000189b0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-000189c0: 2020 2020 2020 2020 2020 2020 6966 2062              if b
-000189d0: 6c6f 636b 2e74 7261 6e73 6163 7469 6f6e  lock.transaction
-000189e0: 735f 696e 666f 2069 7320 6e6f 7420 4e6f  s_info is not No
-000189f0: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
-00018a00: 2020 2065 6c73 6520 2222 0a20 2020 2020     else "".     
-00018a10: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00018a20: 2020 2020 2073 656c 662e 6c6f 672e 696e       self.log.in
-00018a30: 666f 280a 2020 2020 2020 2020 2020 2020  fo(.            
-00018a40: 2020 2020 6622 4164 6465 6420 756e 6669      f"Added unfi
-00018a50: 6e69 7368 6564 5f62 6c6f 636b 207b 626c  nished_block {bl
-00018a60: 6f63 6b5f 6861 7368 7d2c 206e 6f74 2066  ock_hash}, not f
-00018a70: 6172 6d65 6420 6279 2075 732c 220a 2020  armed by us,".  
-00018a80: 2020 2020 2020 2020 2020 2020 2020 6622                f"
-00018a90: 2053 503a 207b 626c 6f63 6b2e 7265 7761   SP: {block.rewa
-00018aa0: 7264 5f63 6861 696e 5f62 6c6f 636b 2e73  rd_chain_block.s
-00018ab0: 6967 6e61 6765 5f70 6f69 6e74 5f69 6e64  ignage_point_ind
-00018ac0: 6578 7d20 6661 726d 6572 2072 6573 706f  ex} farmer respo
-00018ad0: 6e73 6520 7469 6d65 3a20 220a 2020 2020  nse time: ".    
-00018ae0: 2020 2020 2020 2020 2020 2020 6622 7b72              f"{r
-00018af0: 6563 6569 7665 5f74 696d 6520 2d20 7365  eceive_time - se
-00018b00: 6c66 2e73 6967 6e61 6765 5f70 6f69 6e74  lf.signage_point
-00018b10: 5f74 696d 6573 5b62 6c6f 636b 2e72 6577  _times[block.rew
-00018b20: 6172 645f 6368 6169 6e5f 626c 6f63 6b2e  ard_chain_block.
-00018b30: 7369 676e 6167 655f 706f 696e 745f 696e  signage_point_in
-00018b40: 6465 785d 3a30 2e34 667d 2c20 220a 2020  dex]:0.4f}, ".  
-00018b50: 2020 2020 2020 2020 2020 2020 2020 6622                f"
-00018b60: 506f 6f6c 2070 6b20 7b65 6e63 6f64 655f  Pool pk {encode_
-00018b70: 7075 7a7a 6c65 5f68 6173 6828 626c 6f63  puzzle_hash(bloc
-00018b80: 6b2e 666f 6c69 6167 652e 666f 6c69 6167  k.foliage.foliag
-00018b90: 655f 626c 6f63 6b5f 6461 7461 2e70 6f6f  e_block_data.poo
-00018ba0: 6c5f 7461 7267 6574 2e70 757a 7a6c 655f  l_target.puzzle_
-00018bb0: 6861 7368 2c20 2778 6368 2729 7d2c 2022  hash, 'xch')}, "
-00018bc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018bd0: 2066 2276 616c 6964 6174 696f 6e20 7469   f"validation ti
-00018be0: 6d65 3a20 7b76 616c 6964 6174 696f 6e5f  me: {validation_
-00018bf0: 7469 6d65 3a30 2e34 667d 2073 6563 6f6e  time:0.4f} secon
-00018c00: 6473 2c20 7b70 7265 5f76 616c 6964 6174  ds, {pre_validat
-00018c10: 696f 6e5f 6c6f 677d 220a 2020 2020 2020  ion_log}".      
-00018c20: 2020 2020 2020 2020 2020 6622 636f 7374            f"cost
-00018c30: 3a20 7b62 6c6f 636b 2e74 7261 6e73 6163  : {block.transac
-00018c40: 7469 6f6e 735f 696e 666f 2e63 6f73 7420  tions_info.cost 
-00018c50: 6966 2062 6c6f 636b 2e74 7261 6e73 6163  if block.transac
-00018c60: 7469 6f6e 735f 696e 666f 2065 6c73 6520  tions_info else 
-00018c70: 274e 6f6e 6527 7d22 0a20 2020 2020 2020  'None'}".       
-00018c80: 2020 2020 2020 2020 2066 227b 7065 7263           f"{perc
-00018c90: 656e 745f 6675 6c6c 5f73 7472 7d22 0a20  ent_full_str}". 
-00018ca0: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
-00018cb0: 2020 2020 2020 7375 625f 736c 6f74 5f69        sub_slot_i
-00018cc0: 7465 7273 2c20 6469 6666 6963 756c 7479  ters, difficulty
-00018cd0: 203d 2067 6574 5f6e 6578 745f 7375 625f   = get_next_sub_
-00018ce0: 736c 6f74 5f69 7465 7273 5f61 6e64 5f64  slot_iters_and_d
-00018cf0: 6966 6669 6375 6c74 7928 0a20 2020 2020  ifficulty(.     
-00018d00: 2020 2020 2020 2073 656c 662e 636f 6e73         self.cons
-00018d10: 7461 6e74 732c 0a20 2020 2020 2020 2020  tants,.         
-00018d20: 2020 206c 656e 2862 6c6f 636b 2e66 696e     len(block.fin
-00018d30: 6973 6865 645f 7375 625f 736c 6f74 7329  ished_sub_slots)
-00018d40: 203e 2030 2c0a 2020 2020 2020 2020 2020   > 0,.          
-00018d50: 2020 7072 6576 5f62 2c0a 2020 2020 2020    prev_b,.      
-00018d60: 2020 2020 2020 7365 6c66 2e62 6c6f 636b        self.block
-00018d70: 6368 6169 6e2c 0a20 2020 2020 2020 2029  chain,.        )
-00018d80: 0a0a 2020 2020 2020 2020 6966 2062 6c6f  ..        if blo
-00018d90: 636b 2e72 6577 6172 645f 6368 6169 6e5f  ck.reward_chain_
-00018da0: 626c 6f63 6b2e 7369 676e 6167 655f 706f  block.signage_po
-00018db0: 696e 745f 696e 6465 7820 3d3d 2030 3a0a  int_index == 0:.
-00018dc0: 2020 2020 2020 2020 2020 2020 7265 7320              res 
-00018dd0: 3d20 7365 6c66 2e66 756c 6c5f 6e6f 6465  = self.full_node
-00018de0: 5f73 746f 7265 2e67 6574 5f73 7562 5f73  _store.get_sub_s
-00018df0: 6c6f 7428 626c 6f63 6b2e 7265 7761 7264  lot(block.reward
-00018e00: 5f63 6861 696e 5f62 6c6f 636b 2e70 6f73  _chain_block.pos
-00018e10: 5f73 735f 6363 5f63 6861 6c6c 656e 6765  _ss_cc_challenge
-00018e20: 5f68 6173 6829 0a20 2020 2020 2020 2020  _hash).         
-00018e30: 2020 2069 6620 7265 7320 6973 204e 6f6e     if res is Non
-00018e40: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00018e50: 2020 2069 6620 626c 6f63 6b2e 7265 7761     if block.rewa
-00018e60: 7264 5f63 6861 696e 5f62 6c6f 636b 2e70  rd_chain_block.p
-00018e70: 6f73 5f73 735f 6363 5f63 6861 6c6c 656e  os_ss_cc_challen
-00018e80: 6765 5f68 6173 6820 3d3d 2073 656c 662e  ge_hash == self.
-00018e90: 636f 6e73 7461 6e74 732e 4745 4e45 5349  constants.GENESI
-00018ea0: 535f 4348 414c 4c45 4e47 453a 0a20 2020  S_CHALLENGE:.   
-00018eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018ec0: 2072 635f 7072 6576 203d 2073 656c 662e   rc_prev = self.
-00018ed0: 636f 6e73 7461 6e74 732e 4745 4e45 5349  constants.GENESI
-00018ee0: 535f 4348 414c 4c45 4e47 450a 2020 2020  S_CHALLENGE.    
-00018ef0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00018f00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00018f10: 2020 2020 2020 7365 6c66 2e6c 6f67 2e77        self.log.w
-00018f20: 6172 6e69 6e67 2866 2244 6f20 6e6f 7420  arning(f"Do not 
-00018f30: 6861 7665 2073 7562 2073 6c6f 7420 7b62  have sub slot {b
-00018f40: 6c6f 636b 2e72 6577 6172 645f 6368 6169  lock.reward_chai
-00018f50: 6e5f 626c 6f63 6b2e 706f 735f 7373 5f63  n_block.pos_ss_c
-00018f60: 635f 6368 616c 6c65 6e67 655f 6861 7368  c_challenge_hash
-00018f70: 7d22 290a 2020 2020 2020 2020 2020 2020  }").            
-00018f80: 2020 2020 2020 2020 7265 7475 726e 204e          return N
-00018f90: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-00018fa0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00018fb0: 2020 2020 2020 7263 5f70 7265 7620 3d20        rc_prev = 
-00018fc0: 7265 735b 305d 2e72 6577 6172 645f 6368  res[0].reward_ch
-00018fd0: 6169 6e2e 6765 745f 6861 7368 2829 0a20  ain.get_hash(). 
-00018fe0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00018ff0: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
-00019000: 626c 6f63 6b2e 7265 7761 7264 5f63 6861  block.reward_cha
-00019010: 696e 5f62 6c6f 636b 2e72 6577 6172 645f  in_block.reward_
-00019020: 6368 6169 6e5f 7370 5f76 6466 2069 7320  chain_sp_vdf is 
-00019030: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
-00019040: 2020 2020 2072 635f 7072 6576 203d 2062       rc_prev = b
-00019050: 6c6f 636b 2e72 6577 6172 645f 6368 6169  lock.reward_chai
-00019060: 6e5f 626c 6f63 6b2e 7265 7761 7264 5f63  n_block.reward_c
-00019070: 6861 696e 5f73 705f 7664 662e 6368 616c  hain_sp_vdf.chal
-00019080: 6c65 6e67 650a 0a20 2020 2020 2020 2074  lenge..        t
-00019090: 696d 656c 6f72 645f 7265 7175 6573 7420  imelord_request 
-000190a0: 3d20 7469 6d65 6c6f 7264 5f70 726f 746f  = timelord_proto
-000190b0: 636f 6c2e 4e65 7755 6e66 696e 6973 6865  col.NewUnfinishe
-000190c0: 6442 6c6f 636b 5469 6d65 6c6f 7264 280a  dBlockTimelord(.
-000190d0: 2020 2020 2020 2020 2020 2020 626c 6f63              bloc
-000190e0: 6b2e 7265 7761 7264 5f63 6861 696e 5f62  k.reward_chain_b
-000190f0: 6c6f 636b 2c0a 2020 2020 2020 2020 2020  lock,.          
-00019100: 2020 6469 6666 6963 756c 7479 2c0a 2020    difficulty,.  
-00019110: 2020 2020 2020 2020 2020 7375 625f 736c            sub_sl
-00019120: 6f74 5f69 7465 7273 2c0a 2020 2020 2020  ot_iters,.      
-00019130: 2020 2020 2020 626c 6f63 6b2e 666f 6c69        block.foli
-00019140: 6167 652c 0a20 2020 2020 2020 2020 2020  age,.           
-00019150: 2073 6573 2c0a 2020 2020 2020 2020 2020   ses,.          
-00019160: 2020 7263 5f70 7265 762c 0a20 2020 2020    rc_prev,.     
-00019170: 2020 2029 0a0a 2020 2020 2020 2020 7469     )..        ti
-00019180: 6d65 6c6f 7264 5f6d 7367 203d 206d 616b  melord_msg = mak
-00019190: 655f 6d73 6728 5072 6f74 6f63 6f6c 4d65  e_msg(ProtocolMe
-000191a0: 7373 6167 6554 7970 6573 2e6e 6577 5f75  ssageTypes.new_u
-000191b0: 6e66 696e 6973 6865 645f 626c 6f63 6b5f  nfinished_block_
-000191c0: 7469 6d65 6c6f 7264 2c20 7469 6d65 6c6f  timelord, timelo
-000191d0: 7264 5f72 6571 7565 7374 290a 2020 2020  rd_request).    
-000191e0: 2020 2020 6177 6169 7420 7365 6c66 2e73      await self.s
-000191f0: 6572 7665 722e 7365 6e64 5f74 6f5f 616c  erver.send_to_al
-00019200: 6c28 5b74 696d 656c 6f72 645f 6d73 675d  l([timelord_msg]
-00019210: 2c20 4e6f 6465 5479 7065 2e54 494d 454c  , NodeType.TIMEL
-00019220: 4f52 4429 0a0a 2020 2020 2020 2020 2320  ORD)..        # 
-00019230: 6372 6561 7465 2074 776f 2076 6572 7369  create two versi
-00019240: 6f6e 7320 6f66 2074 6865 204e 6577 556e  ons of the NewUn
-00019250: 6669 6e69 7368 6564 426c 6f63 6b20 6d65  finishedBlock me
-00019260: 7373 6167 652c 206f 6e65 2074 6f20 6265  ssage, one to be
-00019270: 2073 656e 740a 2020 2020 2020 2020 2320   sent.        # 
-00019280: 746f 206e 6577 6572 2063 6c69 656e 7473  to newer clients
-00019290: 2061 6e64 206f 6e65 2066 6f72 206f 6c64   and one for old
-000192a0: 6572 2063 6c69 656e 7473 0a20 2020 2020  er clients.     
-000192b0: 2020 2066 756c 6c5f 6e6f 6465 5f72 6571     full_node_req
-000192c0: 7565 7374 203d 2066 756c 6c5f 6e6f 6465  uest = full_node
-000192d0: 5f70 726f 746f 636f 6c2e 4e65 7755 6e66  _protocol.NewUnf
-000192e0: 696e 6973 6865 6442 6c6f 636b 2862 6c6f  inishedBlock(blo
-000192f0: 636b 2e72 6577 6172 645f 6368 6169 6e5f  ck.reward_chain_
-00019300: 626c 6f63 6b2e 6765 745f 6861 7368 2829  block.get_hash()
-00019310: 290a 2020 2020 2020 2020 6d73 6720 3d20  ).        msg = 
-00019320: 6d61 6b65 5f6d 7367 2850 726f 746f 636f  make_msg(Protoco
-00019330: 6c4d 6573 7361 6765 5479 7065 732e 6e65  lMessageTypes.ne
-00019340: 775f 756e 6669 6e69 7368 6564 5f62 6c6f  w_unfinished_blo
-00019350: 636b 2c20 6675 6c6c 5f6e 6f64 655f 7265  ck, full_node_re
-00019360: 7175 6573 7429 0a0a 2020 2020 2020 2020  quest)..        
-00019370: 6675 6c6c 5f6e 6f64 655f 7265 7175 6573  full_node_reques
-00019380: 7432 203d 2066 756c 6c5f 6e6f 6465 5f70  t2 = full_node_p
-00019390: 726f 746f 636f 6c2e 4e65 7755 6e66 696e  rotocol.NewUnfin
-000193a0: 6973 6865 6442 6c6f 636b 3228 0a20 2020  ishedBlock2(.   
-000193b0: 2020 2020 2020 2020 2062 6c6f 636b 2e72           block.r
-000193c0: 6577 6172 645f 6368 6169 6e5f 626c 6f63  eward_chain_bloc
-000193d0: 6b2e 6765 745f 6861 7368 2829 2c20 626c  k.get_hash(), bl
-000193e0: 6f63 6b2e 666f 6c69 6167 652e 666f 6c69  ock.foliage.foli
-000193f0: 6167 655f 7472 616e 7361 6374 696f 6e5f  age_transaction_
-00019400: 626c 6f63 6b5f 6861 7368 0a20 2020 2020  block_hash.     
-00019410: 2020 2029 0a20 2020 2020 2020 206d 7367     ).        msg
-00019420: 3220 3d20 6d61 6b65 5f6d 7367 2850 726f  2 = make_msg(Pro
-00019430: 746f 636f 6c4d 6573 7361 6765 5479 7065  tocolMessageType
-00019440: 732e 6e65 775f 756e 6669 6e69 7368 6564  s.new_unfinished
-00019450: 5f62 6c6f 636b 322c 2066 756c 6c5f 6e6f  _block2, full_no
-00019460: 6465 5f72 6571 7565 7374 3229 0a0a 2020  de_request2)..  
-00019470: 2020 2020 2020 6465 6620 6f6c 645f 636c        def old_cl
-00019480: 6965 6e74 7328 636f 6e6e 3a20 5753 4368  ients(conn: WSCh
-00019490: 6961 436f 6e6e 6563 7469 6f6e 2920 2d3e  iaConnection) ->
-000194a0: 2062 6f6f 6c3a 0a20 2020 2020 2020 2020   bool:.         
-000194b0: 2020 2023 2064 6f6e 2774 2073 656e 6420     # don't send 
-000194c0: 7468 6973 2074 6f20 7065 6572 7320 7769  this to peers wi
-000194d0: 7468 206e 6577 2063 6c69 656e 7473 0a20  th new clients. 
-000194e0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000194f0: 6e20 636f 6e6e 2e70 726f 746f 636f 6c5f  n conn.protocol_
-00019500: 7665 7273 696f 6e20 3c3d 2056 6572 7369  version <= Versi
-00019510: 6f6e 2822 302e 302e 3335 2229 0a0a 2020  on("0.0.35")..  
-00019520: 2020 2020 2020 6465 6620 6e65 775f 636c        def new_cl
-00019530: 6965 6e74 7328 636f 6e6e 3a20 5753 4368  ients(conn: WSCh
-00019540: 6961 436f 6e6e 6563 7469 6f6e 2920 2d3e  iaConnection) ->
-00019550: 2062 6f6f 6c3a 0a20 2020 2020 2020 2020   bool:.         
-00019560: 2020 2023 2064 6f6e 2774 2073 656e 6420     # don't send 
-00019570: 7468 6973 2074 6f20 7065 6572 7320 7769  this to peers wi
-00019580: 7468 206f 6c64 2063 6c69 656e 7473 0a20  th old clients. 
-00019590: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000195a0: 6e20 636f 6e6e 2e70 726f 746f 636f 6c5f  n conn.protocol_
-000195b0: 7665 7273 696f 6e20 3e20 5665 7273 696f  version > Versio
-000195c0: 6e28 2230 2e30 2e33 3522 290a 0a20 2020  n("0.0.35")..   
-000195d0: 2020 2020 2070 6565 725f 6964 3a20 4f70       peer_id: Op
-000195e0: 7469 6f6e 616c 5b62 7974 6573 3332 5d20  tional[bytes32] 
-000195f0: 3d20 4e6f 6e65 2069 6620 7065 6572 2069  = None if peer i
-00019600: 7320 4e6f 6e65 2065 6c73 6520 7065 6572  s None else peer
-00019610: 2e70 6565 725f 6e6f 6465 5f69 640a 2020  .peer_node_id.  
-00019620: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
-00019630: 2e73 6572 7665 722e 7365 6e64 5f74 6f5f  .server.send_to_
-00019640: 616c 6c5f 6966 285b 6d73 675d 2c20 4e6f  all_if([msg], No
-00019650: 6465 5479 7065 2e46 554c 4c5f 4e4f 4445  deType.FULL_NODE
-00019660: 2c20 6f6c 645f 636c 6965 6e74 732c 2070  , old_clients, p
-00019670: 6565 725f 6964 290a 2020 2020 2020 2020  eer_id).        
-00019680: 6177 6169 7420 7365 6c66 2e73 6572 7665  await self.serve
-00019690: 722e 7365 6e64 5f74 6f5f 616c 6c5f 6966  r.send_to_all_if
-000196a0: 285b 6d73 6732 5d2c 204e 6f64 6554 7970  ([msg2], NodeTyp
-000196b0: 652e 4655 4c4c 5f4e 4f44 452c 206e 6577  e.FULL_NODE, new
-000196c0: 5f63 6c69 656e 7473 2c20 7065 6572 5f69  _clients, peer_i
-000196d0: 6429 0a0a 2020 2020 2020 2020 7365 6c66  d)..        self
-000196e0: 2e5f 7374 6174 655f 6368 616e 6765 6428  ._state_changed(
-000196f0: 2275 6e66 696e 6973 6865 645f 626c 6f63  "unfinished_bloc
-00019700: 6b22 290a 0a20 2020 2061 7379 6e63 2064  k")..    async d
-00019710: 6566 206e 6577 5f69 6e66 7573 696f 6e5f  ef new_infusion_
-00019720: 706f 696e 745f 7664 6628 0a20 2020 2020  point_vdf(.     
-00019730: 2020 2073 656c 662c 2072 6571 7565 7374     self, request
-00019740: 3a20 7469 6d65 6c6f 7264 5f70 726f 746f  : timelord_proto
-00019750: 636f 6c2e 4e65 7749 6e66 7573 696f 6e50  col.NewInfusionP
-00019760: 6f69 6e74 5644 462c 2074 696d 656c 6f72  ointVDF, timelor
-00019770: 645f 7065 6572 3a20 4f70 7469 6f6e 616c  d_peer: Optional
-00019780: 5b57 5343 6869 6143 6f6e 6e65 6374 696f  [WSChiaConnectio
-00019790: 6e5d 203d 204e 6f6e 650a 2020 2020 2920  n] = None.    ) 
-000197a0: 2d3e 204f 7074 696f 6e61 6c5b 4d65 7373  -> Optional[Mess
-000197b0: 6167 655d 3a0a 2020 2020 2020 2020 2320  age]:.        # 
-000197c0: 4c6f 6f6b 7570 2075 6e66 696e 6973 6865  Lookup unfinishe
-000197d0: 6420 626c 6f63 6b73 0a20 2020 2020 2020  d blocks.       
-000197e0: 2075 6e66 696e 6973 6865 645f 626c 6f63   unfinished_bloc
-000197f0: 6b3a 204f 7074 696f 6e61 6c5b 556e 6669  k: Optional[Unfi
-00019800: 6e69 7368 6564 426c 6f63 6b5d 203d 2073  nishedBlock] = s
-00019810: 656c 662e 6675 6c6c 5f6e 6f64 655f 7374  elf.full_node_st
-00019820: 6f72 652e 6765 745f 756e 6669 6e69 7368  ore.get_unfinish
-00019830: 6564 5f62 6c6f 636b 280a 2020 2020 2020  ed_block(.      
-00019840: 2020 2020 2020 7265 7175 6573 742e 756e        request.un
-00019850: 6669 6e69 7368 6564 5f72 6577 6172 645f  finished_reward_
-00019860: 6861 7368 0a20 2020 2020 2020 2029 0a0a  hash.        )..
-00019870: 2020 2020 2020 2020 6966 2075 6e66 696e          if unfin
-00019880: 6973 6865 645f 626c 6f63 6b20 6973 204e  ished_block is N
-00019890: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-000198a0: 2073 656c 662e 6c6f 672e 7761 726e 696e   self.log.warnin
-000198b0: 6728 0a20 2020 2020 2020 2020 2020 2020  g(.             
-000198c0: 2020 2066 2244 6f20 6e6f 7420 6861 7665     f"Do not have
-000198d0: 2075 6e66 696e 6973 6865 6420 7265 7761   unfinished rewa
-000198e0: 7264 2063 6861 696e 2062 6c6f 636b 207b  rd chain block {
-000198f0: 7265 7175 6573 742e 756e 6669 6e69 7368  request.unfinish
-00019900: 6564 5f72 6577 6172 645f 6861 7368 7d2c  ed_reward_hash},
-00019910: 2063 616e 6e6f 7420 6669 6e69 7368 2e22   cannot finish."
-00019920: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-00019930: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00019940: 6e20 4e6f 6e65 0a0a 2020 2020 2020 2020  n None..        
-00019950: 7072 6576 5f62 3a20 4f70 7469 6f6e 616c  prev_b: Optional
-00019960: 5b42 6c6f 636b 5265 636f 7264 5d20 3d20  [BlockRecord] = 
-00019970: 4e6f 6e65 0a0a 2020 2020 2020 2020 7461  None..        ta
-00019980: 7267 6574 5f72 635f 6861 7368 203d 2072  rget_rc_hash = r
-00019990: 6571 7565 7374 2e72 6577 6172 645f 6368  equest.reward_ch
-000199a0: 6169 6e5f 6970 5f76 6466 2e63 6861 6c6c  ain_ip_vdf.chall
-000199b0: 656e 6765 0a20 2020 2020 2020 206c 6173  enge.        las
-000199c0: 745f 736c 6f74 5f63 635f 6861 7368 203d  t_slot_cc_hash =
-000199d0: 2072 6571 7565 7374 2e63 6861 6c6c 656e   request.challen
-000199e0: 6765 5f63 6861 696e 5f69 705f 7664 662e  ge_chain_ip_vdf.
-000199f0: 6368 616c 6c65 6e67 650a 0a20 2020 2020  challenge..     
-00019a00: 2020 2023 2042 6163 6b74 7261 636b 7320     # Backtracks 
-00019a10: 7468 726f 7567 6820 656e 6420 6f66 2073  through end of s
-00019a20: 6c6f 7420 6f62 6a65 6374 732c 2073 686f  lot objects, sho
-00019a30: 756c 6420 776f 726b 2066 6f72 206d 756c  uld work for mul
-00019a40: 7469 706c 6520 656d 7074 7920 7375 6220  tiple empty sub 
-00019a50: 736c 6f74 730a 2020 2020 2020 2020 666f  slots.        fo
-00019a60: 7220 656f 732c 205f 2c20 5f20 696e 2072  r eos, _, _ in r
-00019a70: 6576 6572 7365 6428 7365 6c66 2e66 756c  eversed(self.ful
-00019a80: 6c5f 6e6f 6465 5f73 746f 7265 2e66 696e  l_node_store.fin
-00019a90: 6973 6865 645f 7375 625f 736c 6f74 7329  ished_sub_slots)
-00019aa0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00019ab0: 2065 6f73 2069 7320 6e6f 7420 4e6f 6e65   eos is not None
-00019ac0: 2061 6e64 2065 6f73 2e72 6577 6172 645f   and eos.reward_
-00019ad0: 6368 6169 6e2e 6765 745f 6861 7368 2829  chain.get_hash()
-00019ae0: 203d 3d20 7461 7267 6574 5f72 635f 6861   == target_rc_ha
-00019af0: 7368 3a0a 2020 2020 2020 2020 2020 2020  sh:.            
-00019b00: 2020 2020 7461 7267 6574 5f72 635f 6861      target_rc_ha
-00019b10: 7368 203d 2065 6f73 2e72 6577 6172 645f  sh = eos.reward_
-00019b20: 6368 6169 6e2e 656e 645f 6f66 5f73 6c6f  chain.end_of_slo
-00019b30: 745f 7664 662e 6368 616c 6c65 6e67 650a  t_vdf.challenge.
-00019b40: 2020 2020 2020 2020 6966 2074 6172 6765          if targe
-00019b50: 745f 7263 5f68 6173 6820 3d3d 2073 656c  t_rc_hash == sel
-00019b60: 662e 636f 6e73 7461 6e74 732e 4745 4e45  f.constants.GENE
-00019b70: 5349 535f 4348 414c 4c45 4e47 453a 0a20  SIS_CHALLENGE:. 
-00019b80: 2020 2020 2020 2020 2020 2070 7265 765f             prev_
-00019b90: 6220 3d20 4e6f 6e65 0a20 2020 2020 2020  b = None.       
-00019ba0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00019bb0: 2020 2023 2046 696e 6420 7468 6520 7072     # Find the pr
-00019bc0: 6576 2062 6c6f 636b 2c20 7374 6172 7473  ev block, starts
-00019bd0: 206c 6f6f 6b69 6e67 2062 6163 6b77 6172   looking backwar
-00019be0: 6473 2066 726f 6d20 7468 6520 7065 616b  ds from the peak
-00019bf0: 2e20 7461 7267 6574 5f72 635f 6861 7368  . target_rc_hash
-00019c00: 206d 7573 7420 6265 2074 6865 2068 6173   must be the has
-00019c10: 6820 6f66 2061 2062 6c6f 636b 0a20 2020  h of a block.   
-00019c20: 2020 2020 2020 2020 2023 2061 6e64 206e           # and n
-00019c30: 6f74 2061 6e20 656e 6420 6f66 2073 6c6f  ot an end of slo
-00019c40: 7420 2873 696e 6365 2077 6520 6a75 7374  t (since we just
-00019c50: 206c 6f6f 6b65 6420 7468 726f 7567 6820   looked through 
-00019c60: 7468 6520 736c 6f74 7320 616e 6420 6261  the slots and ba
-00019c70: 636b 7472 6163 6b65 6429 0a20 2020 2020  cktracked).     
-00019c80: 2020 2020 2020 2063 7572 723a 204f 7074         curr: Opt
-00019c90: 696f 6e61 6c5b 426c 6f63 6b52 6563 6f72  ional[BlockRecor
-00019ca0: 645d 203d 2073 656c 662e 626c 6f63 6b63  d] = self.blockc
-00019cb0: 6861 696e 2e67 6574 5f70 6561 6b28 290a  hain.get_peak().
-00019cc0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00019cd0: 205f 2069 6e20 7261 6e67 6528 3130 293a   _ in range(10):
-00019ce0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019cf0: 2069 6620 6375 7272 2069 7320 4e6f 6e65   if curr is None
-00019d00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00019d10: 2020 2020 2020 6272 6561 6b0a 2020 2020        break.    
-00019d20: 2020 2020 2020 2020 2020 2020 6966 2063              if c
-00019d30: 7572 722e 7265 7761 7264 5f69 6e66 7573  urr.reward_infus
-00019d40: 696f 6e5f 6e65 775f 6368 616c 6c65 6e67  ion_new_challeng
-00019d50: 6520 3d3d 2074 6172 6765 745f 7263 5f68  e == target_rc_h
-00019d60: 6173 683a 0a20 2020 2020 2020 2020 2020  ash:.           
-00019d70: 2020 2020 2020 2020 2023 2046 6f75 6e64           # Found
-00019d80: 206f 7572 2070 7265 7620 626c 6f63 6b0a   our prev block.
-00019d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019da0: 2020 2020 7072 6576 5f62 203d 2063 7572      prev_b = cur
-00019db0: 720a 2020 2020 2020 2020 2020 2020 2020  r.              
-00019dc0: 2020 2020 2020 6272 6561 6b0a 2020 2020        break.    
-00019dd0: 2020 2020 2020 2020 2020 2020 6375 7272              curr
-00019de0: 203d 2073 656c 662e 626c 6f63 6b63 6861   = self.blockcha
-00019df0: 696e 2e74 7279 5f62 6c6f 636b 5f72 6563  in.try_block_rec
-00019e00: 6f72 6428 6375 7272 2e70 7265 765f 6861  ord(curr.prev_ha
-00019e10: 7368 290a 0a20 2020 2020 2020 2020 2020  sh)..           
-00019e20: 2023 2049 6620 6e6f 7420 666f 756e 642c   # If not found,
-00019e30: 2063 6163 6865 206b 6579 6564 206f 6e20   cache keyed on 
-00019e40: 7072 6576 2062 6c6f 636b 0a20 2020 2020  prev block.     
-00019e50: 2020 2020 2020 2069 6620 7072 6576 5f62         if prev_b
-00019e60: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-00019e70: 2020 2020 2020 2020 2020 7365 6c66 2e66            self.f
-00019e80: 756c 6c5f 6e6f 6465 5f73 746f 7265 2e61  ull_node_store.a
-00019e90: 6464 5f74 6f5f 6675 7475 7265 5f69 7028  dd_to_future_ip(
-00019ea0: 7265 7175 6573 7429 0a20 2020 2020 2020  request).       
-00019eb0: 2020 2020 2020 2020 2073 656c 662e 6c6f           self.lo
-00019ec0: 672e 7761 726e 696e 6728 0a20 2020 2020  g.warning(.     
-00019ed0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00019ee0: 2250 7265 7669 6f75 7320 626c 6f63 6b20  "Previous block 
-00019ef0: 6973 204e 6f6e 652c 2069 6e66 7573 696f  is None, infusio
-00019f00: 6e20 706f 696e 7420 7b72 6571 7565 7374  n point {request
-00019f10: 2e72 6577 6172 645f 6368 6169 6e5f 6970  .reward_chain_ip
-00019f20: 5f76 6466 2e63 6861 6c6c 656e 6765 2e68  _vdf.challenge.h
-00019f30: 6578 2829 7d22 0a20 2020 2020 2020 2020  ex()}".         
-00019f40: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00019f50: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00019f60: 4e6f 6e65 0a0a 2020 2020 2020 2020 6669  None..        fi
-00019f70: 6e69 7368 6564 5f73 7562 5f73 6c6f 7473  nished_sub_slots
-00019f80: 3a20 4f70 7469 6f6e 616c 5b4c 6973 745b  : Optional[List[
-00019f90: 456e 644f 6653 7562 536c 6f74 4275 6e64  EndOfSubSlotBund
-00019fa0: 6c65 5d5d 203d 2073 656c 662e 6675 6c6c  le]] = self.full
-00019fb0: 5f6e 6f64 655f 7374 6f72 652e 6765 745f  _node_store.get_
-00019fc0: 6669 6e69 7368 6564 5f73 7562 5f73 6c6f  finished_sub_slo
-00019fd0: 7473 280a 2020 2020 2020 2020 2020 2020  ts(.            
-00019fe0: 7365 6c66 2e62 6c6f 636b 6368 6169 6e2c  self.blockchain,
-00019ff0: 0a20 2020 2020 2020 2020 2020 2070 7265  .            pre
-0001a000: 765f 622c 0a20 2020 2020 2020 2020 2020  v_b,.           
-0001a010: 206c 6173 745f 736c 6f74 5f63 635f 6861   last_slot_cc_ha
-0001a020: 7368 2c0a 2020 2020 2020 2020 290a 2020  sh,.        ).  
-0001a030: 2020 2020 2020 6966 2066 696e 6973 6865        if finishe
-0001a040: 645f 7375 625f 736c 6f74 7320 6973 204e  d_sub_slots is N
-0001a050: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0001a060: 2072 6574 7572 6e20 4e6f 6e65 0a0a 2020   return None..  
-0001a070: 2020 2020 2020 7375 625f 736c 6f74 5f69        sub_slot_i
-0001a080: 7465 7273 2c20 6469 6666 6963 756c 7479  ters, difficulty
-0001a090: 203d 2067 6574 5f6e 6578 745f 7375 625f   = get_next_sub_
-0001a0a0: 736c 6f74 5f69 7465 7273 5f61 6e64 5f64  slot_iters_and_d
-0001a0b0: 6966 6669 6375 6c74 7928 0a20 2020 2020  ifficulty(.     
-0001a0c0: 2020 2020 2020 2073 656c 662e 636f 6e73         self.cons
-0001a0d0: 7461 6e74 732c 0a20 2020 2020 2020 2020  tants,.         
-0001a0e0: 2020 206c 656e 2866 696e 6973 6865 645f     len(finished_
-0001a0f0: 7375 625f 736c 6f74 7329 203e 2030 2c0a  sub_slots) > 0,.
-0001a100: 2020 2020 2020 2020 2020 2020 7072 6576              prev
-0001a110: 5f62 2c0a 2020 2020 2020 2020 2020 2020  _b,.            
-0001a120: 7365 6c66 2e62 6c6f 636b 6368 6169 6e2c  self.blockchain,
-0001a130: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-0001a140: 2020 2020 6966 2075 6e66 696e 6973 6865      if unfinishe
-0001a150: 645f 626c 6f63 6b2e 7265 7761 7264 5f63  d_block.reward_c
-0001a160: 6861 696e 5f62 6c6f 636b 2e70 6f73 5f73  hain_block.pos_s
-0001a170: 735f 6363 5f63 6861 6c6c 656e 6765 5f68  s_cc_challenge_h
-0001a180: 6173 6820 3d3d 2073 656c 662e 636f 6e73  ash == self.cons
-0001a190: 7461 6e74 732e 4745 4e45 5349 535f 4348  tants.GENESIS_CH
-0001a1a0: 414c 4c45 4e47 453a 0a20 2020 2020 2020  ALLENGE:.       
-0001a1b0: 2020 2020 2073 7562 5f73 6c6f 745f 7374       sub_slot_st
-0001a1c0: 6172 745f 6974 6572 7320 3d20 7569 6e74  art_iters = uint
-0001a1d0: 3132 3828 3029 0a20 2020 2020 2020 2065  128(0).        e
-0001a1e0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0001a1f0: 2073 735f 7265 7320 3d20 7365 6c66 2e66   ss_res = self.f
-0001a200: 756c 6c5f 6e6f 6465 5f73 746f 7265 2e67  ull_node_store.g
-0001a210: 6574 5f73 7562 5f73 6c6f 7428 756e 6669  et_sub_slot(unfi
-0001a220: 6e69 7368 6564 5f62 6c6f 636b 2e72 6577  nished_block.rew
-0001a230: 6172 645f 6368 6169 6e5f 626c 6f63 6b2e  ard_chain_block.
-0001a240: 706f 735f 7373 5f63 635f 6368 616c 6c65  pos_ss_cc_challe
-0001a250: 6e67 655f 6861 7368 290a 2020 2020 2020  nge_hash).      
-0001a260: 2020 2020 2020 6966 2073 735f 7265 7320        if ss_res 
-0001a270: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-0001a280: 2020 2020 2020 2020 2073 656c 662e 6c6f           self.lo
-0001a290: 672e 7761 726e 696e 6728 6622 446f 206e  g.warning(f"Do n
-0001a2a0: 6f74 2068 6176 6520 7375 6220 736c 6f74  ot have sub slot
-0001a2b0: 207b 756e 6669 6e69 7368 6564 5f62 6c6f   {unfinished_blo
-0001a2c0: 636b 2e72 6577 6172 645f 6368 6169 6e5f  ck.reward_chain_
-0001a2d0: 626c 6f63 6b2e 706f 735f 7373 5f63 635f  block.pos_ss_cc_
-0001a2e0: 6368 616c 6c65 6e67 655f 6861 7368 7d22  challenge_hash}"
-0001a2f0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001a300: 2020 7265 7475 726e 204e 6f6e 650a 2020    return None.  
-0001a310: 2020 2020 2020 2020 2020 5f2c 205f 2c20            _, _, 
-0001a320: 7375 625f 736c 6f74 5f73 7461 7274 5f69  sub_slot_start_i
-0001a330: 7465 7273 203d 2073 735f 7265 730a 2020  ters = ss_res.  
-0001a340: 2020 2020 2020 7370 5f74 6f74 616c 5f69        sp_total_i
-0001a350: 7465 7273 203d 2075 696e 7431 3238 280a  ters = uint128(.
-0001a360: 2020 2020 2020 2020 2020 2020 7375 625f              sub_
-0001a370: 736c 6f74 5f73 7461 7274 5f69 7465 7273  slot_start_iters
-0001a380: 0a20 2020 2020 2020 2020 2020 202b 2063  .            + c
-0001a390: 616c 6375 6c61 7465 5f73 705f 6974 6572  alculate_sp_iter
-0001a3a0: 7328 0a20 2020 2020 2020 2020 2020 2020  s(.             
-0001a3b0: 2020 2073 656c 662e 636f 6e73 7461 6e74     self.constant
-0001a3c0: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
-0001a3d0: 2020 2073 7562 5f73 6c6f 745f 6974 6572     sub_slot_iter
-0001a3e0: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
-0001a3f0: 2020 2075 6e66 696e 6973 6865 645f 626c     unfinished_bl
-0001a400: 6f63 6b2e 7265 7761 7264 5f63 6861 696e  ock.reward_chain
-0001a410: 5f62 6c6f 636b 2e73 6967 6e61 6765 5f70  _block.signage_p
-0001a420: 6f69 6e74 5f69 6e64 6578 2c0a 2020 2020  oint_index,.    
-0001a430: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0001a440: 2020 290a 0a20 2020 2020 2020 2062 6c6f    )..        blo
-0001a450: 636b 3a20 4675 6c6c 426c 6f63 6b20 3d20  ck: FullBlock = 
-0001a460: 756e 6669 6e69 7368 6564 5f62 6c6f 636b  unfinished_block
-0001a470: 5f74 6f5f 6675 6c6c 5f62 6c6f 636b 280a  _to_full_block(.
-0001a480: 2020 2020 2020 2020 2020 2020 756e 6669              unfi
-0001a490: 6e69 7368 6564 5f62 6c6f 636b 2c0a 2020  nished_block,.  
-0001a4a0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-0001a4b0: 742e 6368 616c 6c65 6e67 655f 6368 6169  t.challenge_chai
-0001a4c0: 6e5f 6970 5f76 6466 2c0a 2020 2020 2020  n_ip_vdf,.      
-0001a4d0: 2020 2020 2020 7265 7175 6573 742e 6368        request.ch
-0001a4e0: 616c 6c65 6e67 655f 6368 6169 6e5f 6970  allenge_chain_ip
-0001a4f0: 5f70 726f 6f66 2c0a 2020 2020 2020 2020  _proof,.        
-0001a500: 2020 2020 7265 7175 6573 742e 7265 7761      request.rewa
-0001a510: 7264 5f63 6861 696e 5f69 705f 7664 662c  rd_chain_ip_vdf,
-0001a520: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0001a530: 7565 7374 2e72 6577 6172 645f 6368 6169  uest.reward_chai
-0001a540: 6e5f 6970 5f70 726f 6f66 2c0a 2020 2020  n_ip_proof,.    
-0001a550: 2020 2020 2020 2020 7265 7175 6573 742e          request.
-0001a560: 696e 6675 7365 645f 6368 616c 6c65 6e67  infused_challeng
-0001a570: 655f 6368 6169 6e5f 6970 5f76 6466 2c0a  e_chain_ip_vdf,.
-0001a580: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0001a590: 6573 742e 696e 6675 7365 645f 6368 616c  est.infused_chal
-0001a5a0: 6c65 6e67 655f 6368 6169 6e5f 6970 5f70  lenge_chain_ip_p
-0001a5b0: 726f 6f66 2c0a 2020 2020 2020 2020 2020  roof,.          
-0001a5c0: 2020 6669 6e69 7368 6564 5f73 7562 5f73    finished_sub_s
-0001a5d0: 6c6f 7473 2c0a 2020 2020 2020 2020 2020  lots,.          
-0001a5e0: 2020 7072 6576 5f62 2c0a 2020 2020 2020    prev_b,.      
-0001a5f0: 2020 2020 2020 7365 6c66 2e62 6c6f 636b        self.block
-0001a600: 6368 6169 6e2c 0a20 2020 2020 2020 2020  chain,.         
-0001a610: 2020 2073 705f 746f 7461 6c5f 6974 6572     sp_total_iter
-0001a620: 732c 0a20 2020 2020 2020 2020 2020 2064  s,.            d
-0001a630: 6966 6669 6375 6c74 792c 0a20 2020 2020  ifficulty,.     
-0001a640: 2020 2029 0a20 2020 2020 2020 2069 6620     ).        if 
-0001a650: 6e6f 7420 7365 6c66 2e68 6173 5f76 616c  not self.has_val
-0001a660: 6964 5f70 6f6f 6c5f 7369 6728 626c 6f63  id_pool_sig(bloc
-0001a670: 6b29 3a0a 2020 2020 2020 2020 2020 2020  k):.            
-0001a680: 7365 6c66 2e6c 6f67 2e77 6172 6e69 6e67  self.log.warning
-0001a690: 2822 5472 7969 6e67 2074 6f20 6d61 6b65  ("Trying to make
-0001a6a0: 2061 2070 7265 2d66 6172 6d20 626c 6f63   a pre-farm bloc
-0001a6b0: 6b20 6275 7420 6865 6967 6874 2069 7320  k but height is 
-0001a6c0: 6e6f 7420 3022 290a 2020 2020 2020 2020  not 0").        
-0001a6d0: 2020 2020 7265 7475 726e 204e 6f6e 650a      return None.
-0001a6e0: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
-0001a6f0: 2020 2020 2020 2020 2061 7761 6974 2073           await s
-0001a700: 656c 662e 6164 645f 626c 6f63 6b28 626c  elf.add_block(bl
-0001a710: 6f63 6b2c 2072 6169 7365 5f6f 6e5f 6469  ock, raise_on_di
-0001a720: 7363 6f6e 6e65 6374 6564 3d54 7275 6529  sconnected=True)
-0001a730: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
-0001a740: 4578 6365 7074 696f 6e20 6173 2065 3a0a  Exception as e:.
-0001a750: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001a760: 2e6c 6f67 2e77 6172 6e69 6e67 2866 2243  .log.warning(f"C
-0001a770: 6f6e 7365 6e73 7573 2065 7272 6f72 2076  onsensus error v
-0001a780: 616c 6964 6174 696e 6720 626c 6f63 6b3a  alidating block:
-0001a790: 207b 657d 2229 0a20 2020 2020 2020 2020   {e}").         
-0001a7a0: 2020 2069 6620 7469 6d65 6c6f 7264 5f70     if timelord_p
-0001a7b0: 6565 7220 6973 206e 6f74 204e 6f6e 653a  eer is not None:
-0001a7c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a7d0: 2023 204f 6e6c 7920 7365 6e64 7320 746f   # Only sends to
-0001a7e0: 2074 6865 2074 696d 656c 6f72 6420 7768   the timelord wh
-0001a7f0: 6f20 7365 6e74 2075 7320 7468 6973 2056  o sent us this V
-0001a800: 4446 2c20 746f 2072 6573 6574 2074 6865  DF, to reset the
-0001a810: 6d20 746f 2074 6865 2063 6f72 7265 6374  m to the correct
-0001a820: 2070 6561 6b0a 2020 2020 2020 2020 2020   peak.          
-0001a830: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
-0001a840: 2e73 656e 645f 7065 616b 5f74 6f5f 7469  .send_peak_to_ti
-0001a850: 6d65 6c6f 7264 7328 7065 6572 3d74 696d  melords(peer=tim
-0001a860: 656c 6f72 645f 7065 6572 290a 2020 2020  elord_peer).    
-0001a870: 2020 2020 7265 7475 726e 204e 6f6e 650a      return None.
-0001a880: 0a20 2020 2061 7379 6e63 2064 6566 2061  .    async def a
-0001a890: 6464 5f65 6e64 5f6f 665f 7375 625f 736c  dd_end_of_sub_sl
-0001a8a0: 6f74 280a 2020 2020 2020 2020 7365 6c66  ot(.        self
-0001a8b0: 2c20 656e 645f 6f66 5f73 6c6f 745f 6275  , end_of_slot_bu
-0001a8c0: 6e64 6c65 3a20 456e 644f 6653 7562 536c  ndle: EndOfSubSl
-0001a8d0: 6f74 4275 6e64 6c65 2c20 7065 6572 3a20  otBundle, peer: 
-0001a8e0: 5753 4368 6961 436f 6e6e 6563 7469 6f6e  WSChiaConnection
-0001a8f0: 0a20 2020 2029 202d 3e20 5475 706c 655b  .    ) -> Tuple[
-0001a900: 4f70 7469 6f6e 616c 5b4d 6573 7361 6765  Optional[Message
-0001a910: 5d2c 2062 6f6f 6c5d 3a0a 2020 2020 2020  ], bool]:.      
-0001a920: 2020 6665 7463 6865 645f 7373 203d 2073    fetched_ss = s
-0001a930: 656c 662e 6675 6c6c 5f6e 6f64 655f 7374  elf.full_node_st
-0001a940: 6f72 652e 6765 745f 7375 625f 736c 6f74  ore.get_sub_slot
-0001a950: 2865 6e64 5f6f 665f 736c 6f74 5f62 756e  (end_of_slot_bun
-0001a960: 646c 652e 6368 616c 6c65 6e67 655f 6368  dle.challenge_ch
-0001a970: 6169 6e2e 6765 745f 6861 7368 2829 290a  ain.get_hash()).
-0001a980: 0a20 2020 2020 2020 2023 2057 6520 6172  .        # We ar
-0001a990: 6520 6e6f 7420 696e 7465 7265 7374 6564  e not interested
-0001a9a0: 2069 6e20 7375 622d 736c 6f74 7320 7768   in sub-slots wh
-0001a9b0: 6963 6820 6861 7665 2074 6865 2073 616d  ich have the sam
-0001a9c0: 6520 6368 616c 6c65 6e67 6520 6368 6169  e challenge chai
-0001a9d0: 6e20 6275 7420 6469 6666 6572 656e 7420  n but different 
-0001a9e0: 7265 7761 7264 2063 6861 696e 2e20 4966  reward chain. If
-0001a9f0: 2074 6865 7265 0a20 2020 2020 2020 2023   there.        #
-0001aa00: 2069 7320 6120 7265 6f72 672c 2077 6520   is a reorg, we 
-0001aa10: 7769 6c6c 2066 696e 6420 6f75 7420 7468  will find out th
-0001aa20: 726f 7567 6820 7468 6520 6272 6f61 6463  rough the broadc
-0001aa30: 6173 7420 6f66 2062 6c6f 636b 7320 696e  ast of blocks in
-0001aa40: 7374 6561 642e 0a20 2020 2020 2020 2069  stead..        i
-0001aa50: 6620 6665 7463 6865 645f 7373 2069 7320  f fetched_ss is 
-0001aa60: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0001aa70: 2020 2020 2020 2320 416c 7265 6164 7920        # Already 
-0001aa80: 6861 7665 2074 6865 2073 7562 2d73 6c6f  have the sub-slo
-0001aa90: 740a 2020 2020 2020 2020 2020 2020 7265  t.            re
-0001aaa0: 7475 726e 204e 6f6e 652c 2054 7275 650a  turn None, True.
-0001aab0: 0a20 2020 2020 2020 2061 7379 6e63 2077  .        async w
-0001aac0: 6974 6820 7365 6c66 2e74 696d 656c 6f72  ith self.timelor
-0001aad0: 645f 6c6f 636b 3a0a 2020 2020 2020 2020  d_lock:.        
-0001aae0: 2020 2020 6665 7463 6865 645f 7373 203d      fetched_ss =
-0001aaf0: 2073 656c 662e 6675 6c6c 5f6e 6f64 655f   self.full_node_
-0001ab00: 7374 6f72 652e 6765 745f 7375 625f 736c  store.get_sub_sl
-0001ab10: 6f74 280a 2020 2020 2020 2020 2020 2020  ot(.            
-0001ab20: 2020 2020 656e 645f 6f66 5f73 6c6f 745f      end_of_slot_
-0001ab30: 6275 6e64 6c65 2e63 6861 6c6c 656e 6765  bundle.challenge
-0001ab40: 5f63 6861 696e 2e63 6861 6c6c 656e 6765  _chain.challenge
-0001ab50: 5f63 6861 696e 5f65 6e64 5f6f 665f 736c  _chain_end_of_sl
-0001ab60: 6f74 5f76 6466 2e63 6861 6c6c 656e 6765  ot_vdf.challenge
-0001ab70: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-0001ab80: 2020 2020 2020 2020 2020 2069 6620 280a             if (.
-0001ab90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aba0: 2866 6574 6368 6564 5f73 7320 6973 204e  (fetched_ss is N
-0001abb0: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
-0001abc0: 2020 2020 2061 6e64 2065 6e64 5f6f 665f       and end_of_
-0001abd0: 736c 6f74 5f62 756e 646c 652e 6368 616c  slot_bundle.chal
-0001abe0: 6c65 6e67 655f 6368 6169 6e2e 6368 616c  lenge_chain.chal
-0001abf0: 6c65 6e67 655f 6368 6169 6e5f 656e 645f  lenge_chain_end_
-0001ac00: 6f66 5f73 6c6f 745f 7664 662e 6368 616c  of_slot_vdf.chal
-0001ac10: 6c65 6e67 650a 2020 2020 2020 2020 2020  lenge.          
-0001ac20: 2020 2020 2020 213d 2073 656c 662e 636f        != self.co
-0001ac30: 6e73 7461 6e74 732e 4745 4e45 5349 535f  nstants.GENESIS_
-0001ac40: 4348 414c 4c45 4e47 450a 2020 2020 2020  CHALLENGE.      
-0001ac50: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
-0001ac60: 2020 2020 2020 2020 2023 2049 6620 7765           # If we
-0001ac70: 2064 6f6e 2774 2068 6176 6520 7468 6520   don't have the 
-0001ac80: 7072 6576 2c20 7265 7175 6573 7420 7468  prev, request th
-0001ac90: 6520 7072 6576 2069 6e73 7465 6164 0a20  e prev instead. 
-0001aca0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001acb0: 756c 6c5f 6e6f 6465 5f72 6571 7565 7374  ull_node_request
-0001acc0: 203d 2066 756c 6c5f 6e6f 6465 5f70 726f   = full_node_pro
-0001acd0: 746f 636f 6c2e 5265 7175 6573 7453 6967  tocol.RequestSig
-0001ace0: 6e61 6765 506f 696e 744f 7245 6e64 4f66  nagePointOrEndOf
-0001acf0: 5375 6253 6c6f 7428 0a20 2020 2020 2020  SubSlot(.       
-0001ad00: 2020 2020 2020 2020 2020 2020 2065 6e64               end
-0001ad10: 5f6f 665f 736c 6f74 5f62 756e 646c 652e  _of_slot_bundle.
-0001ad20: 6368 616c 6c65 6e67 655f 6368 6169 6e2e  challenge_chain.
-0001ad30: 6368 616c 6c65 6e67 655f 6368 6169 6e5f  challenge_chain_
-0001ad40: 656e 645f 6f66 5f73 6c6f 745f 7664 662e  end_of_slot_vdf.
-0001ad50: 6368 616c 6c65 6e67 652c 0a20 2020 2020  challenge,.     
-0001ad60: 2020 2020 2020 2020 2020 2020 2020 2075                 u
-0001ad70: 696e 7438 2830 292c 0a20 2020 2020 2020  int8(0),.       
-0001ad80: 2020 2020 2020 2020 2020 2020 2062 7974               byt
-0001ad90: 6573 3332 285b 305d 202a 2033 3229 2c0a  es32([0] * 32),.
-0001ada0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001adb0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001adc0: 2020 7265 7475 726e 2028 0a20 2020 2020    return (.     
-0001add0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-0001ade0: 616b 655f 6d73 6728 5072 6f74 6f63 6f6c  ake_msg(Protocol
-0001adf0: 4d65 7373 6167 6554 7970 6573 2e72 6571  MessageTypes.req
-0001ae00: 7565 7374 5f73 6967 6e61 6765 5f70 6f69  uest_signage_poi
-0001ae10: 6e74 5f6f 725f 656e 645f 6f66 5f73 7562  nt_or_end_of_sub
-0001ae20: 5f73 6c6f 742c 2066 756c 6c5f 6e6f 6465  _slot, full_node
-0001ae30: 5f72 6571 7565 7374 292c 0a20 2020 2020  _request),.     
-0001ae40: 2020 2020 2020 2020 2020 2020 2020 2046                 F
-0001ae50: 616c 7365 2c0a 2020 2020 2020 2020 2020  alse,.          
-0001ae60: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-0001ae70: 2020 2020 2070 6561 6b20 3d20 7365 6c66       peak = self
-0001ae80: 2e62 6c6f 636b 6368 6169 6e2e 6765 745f  .blockchain.get_
-0001ae90: 7065 616b 2829 0a20 2020 2020 2020 2020  peak().         
-0001aea0: 2020 2069 6620 7065 616b 2069 7320 6e6f     if peak is no
-0001aeb0: 7420 4e6f 6e65 2061 6e64 2070 6561 6b2e  t None and peak.
-0001aec0: 6865 6967 6874 203e 2032 3a0a 2020 2020  height > 2:.    
-0001aed0: 2020 2020 2020 2020 2020 2020 6e65 7874              next
-0001aee0: 5f73 7562 5f73 6c6f 745f 6974 6572 7320  _sub_slot_iters 
-0001aef0: 3d20 7365 6c66 2e62 6c6f 636b 6368 6169  = self.blockchai
-0001af00: 6e2e 6765 745f 6e65 7874 5f73 6c6f 745f  n.get_next_slot_
-0001af10: 6974 6572 7328 7065 616b 2e68 6561 6465  iters(peak.heade
-0001af20: 725f 6861 7368 2c20 5472 7565 290a 2020  r_hash, True).  
-0001af30: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-0001af40: 7874 5f64 6966 6669 6375 6c74 7920 3d20  xt_difficulty = 
-0001af50: 7365 6c66 2e62 6c6f 636b 6368 6169 6e2e  self.blockchain.
-0001af60: 6765 745f 6e65 7874 5f64 6966 6669 6375  get_next_difficu
-0001af70: 6c74 7928 7065 616b 2e68 6561 6465 725f  lty(peak.header_
-0001af80: 6861 7368 2c20 5472 7565 290a 2020 2020  hash, True).    
-0001af90: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0001afa0: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-0001afb0: 7874 5f73 7562 5f73 6c6f 745f 6974 6572  xt_sub_slot_iter
-0001afc0: 7320 3d20 7365 6c66 2e63 6f6e 7374 616e  s = self.constan
-0001afd0: 7473 2e53 5542 5f53 4c4f 545f 4954 4552  ts.SUB_SLOT_ITER
-0001afe0: 535f 5354 4152 5449 4e47 0a20 2020 2020  S_STARTING.     
-0001aff0: 2020 2020 2020 2020 2020 206e 6578 745f             next_
-0001b000: 6469 6666 6963 756c 7479 203d 2073 656c  difficulty = sel
-0001b010: 662e 636f 6e73 7461 6e74 732e 4449 4646  f.constants.DIFF
-0001b020: 4943 554c 5459 5f53 5441 5254 494e 470a  ICULTY_STARTING.
-0001b030: 0a20 2020 2020 2020 2020 2020 2023 2041  .            # A
-0001b040: 6464 7320 7468 6520 7375 6220 736c 6f74  dds the sub slot
-0001b050: 2061 6e64 2070 6f74 656e 7469 616c 6c79   and potentially
-0001b060: 2067 6574 206e 6577 2069 6e66 7573 696f   get new infusio
-0001b070: 6e73 0a20 2020 2020 2020 2020 2020 206e  ns.            n
-0001b080: 6577 5f69 6e66 7573 696f 6e73 203d 2073  ew_infusions = s
-0001b090: 656c 662e 6675 6c6c 5f6e 6f64 655f 7374  elf.full_node_st
-0001b0a0: 6f72 652e 6e65 775f 6669 6e69 7368 6564  ore.new_finished
-0001b0b0: 5f73 7562 5f73 6c6f 7428 0a20 2020 2020  _sub_slot(.     
-0001b0c0: 2020 2020 2020 2020 2020 2065 6e64 5f6f             end_o
-0001b0d0: 665f 736c 6f74 5f62 756e 646c 652c 0a20  f_slot_bundle,. 
-0001b0e0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001b0f0: 656c 662e 626c 6f63 6b63 6861 696e 2c0a  elf.blockchain,.
-0001b100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b110: 7065 616b 2c0a 2020 2020 2020 2020 2020  peak,.          
-0001b120: 2020 2020 2020 6e65 7874 5f73 7562 5f73        next_sub_s
-0001b130: 6c6f 745f 6974 6572 732c 0a20 2020 2020  lot_iters,.     
-0001b140: 2020 2020 2020 2020 2020 206e 6578 745f             next_
-0001b150: 6469 6666 6963 756c 7479 2c0a 2020 2020  difficulty,.    
-0001b160: 2020 2020 2020 2020 2020 2020 6177 6169              awai
-0001b170: 7420 7365 6c66 2e62 6c6f 636b 6368 6169  t self.blockchai
-0001b180: 6e2e 6765 745f 6675 6c6c 5f70 6561 6b28  n.get_full_peak(
-0001b190: 292c 0a20 2020 2020 2020 2020 2020 2029  ),.            )
-0001b1a0: 0a20 2020 2020 2020 2020 2020 2023 2049  .            # I
-0001b1b0: 7420 6d61 7920 6265 2061 6e20 656d 7074  t may be an empt
-0001b1c0: 7920 6c69 7374 2c20 6576 656e 2069 6620  y list, even if 
-0001b1d0: 6974 2773 206e 6f74 204e 6f6e 652e 204e  it's not None. N
-0001b1e0: 6f74 204e 6f6e 6520 6d65 616e 7320 6164  ot None means ad
-0001b1f0: 6465 6420 7375 6363 6573 7366 756c 6c79  ded successfully
-0001b200: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001b210: 6e65 775f 696e 6675 7369 6f6e 7320 6973  new_infusions is
-0001b220: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0001b230: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001b240: 6c6f 672e 696e 666f 280a 2020 2020 2020  log.info(.      
-0001b250: 2020 2020 2020 2020 2020 2020 2020 6622                f"
-0001b260: e28f b2ef b88f 2020 4669 6e69 7368 6564  ......  Finished
-0001b270: 2073 7562 2073 6c6f 742c 2053 5020 7b73   sub slot, SP {s
-0001b280: 656c 662e 636f 6e73 7461 6e74 732e 4e55  elf.constants.NU
-0001b290: 4d5f 5350 535f 5355 425f 534c 4f54 7d2f  M_SPS_SUB_SLOT}/
-0001b2a0: 7b73 656c 662e 636f 6e73 7461 6e74 732e  {self.constants.
-0001b2b0: 4e55 4d5f 5350 535f 5355 425f 534c 4f54  NUM_SPS_SUB_SLOT
-0001b2c0: 7d2c 2022 0a20 2020 2020 2020 2020 2020  }, ".           
-0001b2d0: 2020 2020 2020 2020 2066 227b 656e 645f           f"{end_
-0001b2e0: 6f66 5f73 6c6f 745f 6275 6e64 6c65 2e63  of_slot_bundle.c
-0001b2f0: 6861 6c6c 656e 6765 5f63 6861 696e 2e67  hallenge_chain.g
-0001b300: 6574 5f68 6173 6828 292e 6865 7828 297d  et_hash().hex()}
-0001b310: 2c20 220a 2020 2020 2020 2020 2020 2020  , ".            
-0001b320: 2020 2020 2020 2020 6622 6e75 6d62 6572          f"number
-0001b330: 206f 6620 7375 622d 736c 6f74 733a 207b   of sub-slots: {
-0001b340: 6c65 6e28 7365 6c66 2e66 756c 6c5f 6e6f  len(self.full_no
-0001b350: 6465 5f73 746f 7265 2e66 696e 6973 6865  de_store.finishe
-0001b360: 645f 7375 625f 736c 6f74 7329 7d2c 2022  d_sub_slots)}, "
-0001b370: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b380: 2020 2020 2066 2252 4320 6861 7368 3a20       f"RC hash: 
-0001b390: 7b65 6e64 5f6f 665f 736c 6f74 5f62 756e  {end_of_slot_bun
-0001b3a0: 646c 652e 7265 7761 7264 5f63 6861 696e  dle.reward_chain
-0001b3b0: 2e67 6574 5f68 6173 6828 292e 6865 7828  .get_hash().hex(
-0001b3c0: 297d 2c20 220a 2020 2020 2020 2020 2020  )}, ".          
-0001b3d0: 2020 2020 2020 2020 2020 6622 4465 6669            f"Defi
-0001b3e0: 6369 7420 7b65 6e64 5f6f 665f 736c 6f74  cit {end_of_slot
-0001b3f0: 5f62 756e 646c 652e 7265 7761 7264 5f63  _bundle.reward_c
-0001b400: 6861 696e 2e64 6566 6963 6974 7d22 0a20  hain.deficit}". 
-0001b410: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0001b420: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b430: 2023 2052 6573 6574 2066 6172 6d65 7220   # Reset farmer 
-0001b440: 7265 7370 6f6e 7365 2074 696d 6572 2066  response timer f
-0001b450: 6f72 2073 7562 2073 6c6f 7420 2853 5020  or sub slot (SP 
-0001b460: 3029 0a20 2020 2020 2020 2020 2020 2020  0).             
-0001b470: 2020 2073 656c 662e 7369 676e 6167 655f     self.signage_
-0001b480: 706f 696e 745f 7469 6d65 735b 305d 203d  point_times[0] =
-0001b490: 2074 696d 652e 7469 6d65 2829 0a20 2020   time.time().   
-0001b4a0: 2020 2020 2020 2020 2020 2020 2023 204e               # N
-0001b4b0: 6f74 6966 7920 6675 6c6c 206e 6f64 6573  otify full nodes
-0001b4c0: 206f 6620 7468 6520 6e65 7720 7375 622d   of the new sub-
-0001b4d0: 736c 6f74 0a20 2020 2020 2020 2020 2020  slot.           
-0001b4e0: 2020 2020 2062 726f 6164 6361 7374 203d       broadcast =
-0001b4f0: 2066 756c 6c5f 6e6f 6465 5f70 726f 746f   full_node_proto
-0001b500: 636f 6c2e 4e65 7753 6967 6e61 6765 506f  col.NewSignagePo
-0001b510: 696e 744f 7245 6e64 4f66 5375 6253 6c6f  intOrEndOfSubSlo
-0001b520: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
-0001b530: 2020 2020 2020 2065 6e64 5f6f 665f 736c         end_of_sl
-0001b540: 6f74 5f62 756e 646c 652e 6368 616c 6c65  ot_bundle.challe
-0001b550: 6e67 655f 6368 6169 6e2e 6368 616c 6c65  nge_chain.challe
-0001b560: 6e67 655f 6368 6169 6e5f 656e 645f 6f66  nge_chain_end_of
-0001b570: 5f73 6c6f 745f 7664 662e 6368 616c 6c65  _slot_vdf.challe
-0001b580: 6e67 652c 0a20 2020 2020 2020 2020 2020  nge,.           
-0001b590: 2020 2020 2020 2020 2065 6e64 5f6f 665f           end_of_
-0001b5a0: 736c 6f74 5f62 756e 646c 652e 6368 616c  slot_bundle.chal
-0001b5b0: 6c65 6e67 655f 6368 6169 6e2e 6765 745f  lenge_chain.get_
-0001b5c0: 6861 7368 2829 2c0a 2020 2020 2020 2020  hash(),.        
-0001b5d0: 2020 2020 2020 2020 2020 2020 7569 6e74              uint
-0001b5e0: 3828 3029 2c0a 2020 2020 2020 2020 2020  8(0),.          
-0001b5f0: 2020 2020 2020 2020 2020 656e 645f 6f66            end_of
-0001b600: 5f73 6c6f 745f 6275 6e64 6c65 2e72 6577  _slot_bundle.rew
-0001b610: 6172 645f 6368 6169 6e2e 656e 645f 6f66  ard_chain.end_of
-0001b620: 5f73 6c6f 745f 7664 662e 6368 616c 6c65  _slot_vdf.challe
-0001b630: 6e67 652c 0a20 2020 2020 2020 2020 2020  nge,.           
-0001b640: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-0001b650: 2020 2020 2020 206d 7367 203d 206d 616b         msg = mak
-0001b660: 655f 6d73 6728 5072 6f74 6f63 6f6c 4d65  e_msg(ProtocolMe
-0001b670: 7373 6167 6554 7970 6573 2e6e 6577 5f73  ssageTypes.new_s
-0001b680: 6967 6e61 6765 5f70 6f69 6e74 5f6f 725f  ignage_point_or_
-0001b690: 656e 645f 6f66 5f73 7562 5f73 6c6f 742c  end_of_sub_slot,
-0001b6a0: 2062 726f 6164 6361 7374 290a 2020 2020   broadcast).    
-0001b6b0: 2020 2020 2020 2020 2020 2020 6177 6169              awai
-0001b6c0: 7420 7365 6c66 2e73 6572 7665 722e 7365  t self.server.se
-0001b6d0: 6e64 5f74 6f5f 616c 6c28 5b6d 7367 5d2c  nd_to_all([msg],
-0001b6e0: 204e 6f64 6554 7970 652e 4655 4c4c 5f4e   NodeType.FULL_N
-0001b6f0: 4f44 452c 2070 6565 722e 7065 6572 5f6e  ODE, peer.peer_n
-0001b700: 6f64 655f 6964 290a 0a20 2020 2020 2020  ode_id)..       
-0001b710: 2020 2020 2020 2020 2066 6f72 2069 6e66           for inf
-0001b720: 7573 696f 6e20 696e 206e 6577 5f69 6e66  usion in new_inf
-0001b730: 7573 696f 6e73 3a0a 2020 2020 2020 2020  usions:.        
-0001b740: 2020 2020 2020 2020 2020 2020 6177 6169              awai
-0001b750: 7420 7365 6c66 2e6e 6577 5f69 6e66 7573  t self.new_infus
-0001b760: 696f 6e5f 706f 696e 745f 7664 6628 696e  ion_point_vdf(in
-0001b770: 6675 7369 6f6e 290a 0a20 2020 2020 2020  fusion)..       
-0001b780: 2020 2020 2020 2020 2023 204e 6f74 6966           # Notif
-0001b790: 7920 6661 726d 6572 7320 6f66 2074 6865  y farmers of the
-0001b7a0: 206e 6577 2073 7562 2d73 6c6f 740a 2020   new sub-slot.  
-0001b7b0: 2020 2020 2020 2020 2020 2020 2020 6272                br
-0001b7c0: 6f61 6463 6173 745f 6661 726d 6572 203d  oadcast_farmer =
-0001b7d0: 2066 6172 6d65 725f 7072 6f74 6f63 6f6c   farmer_protocol
-0001b7e0: 2e4e 6577 5369 676e 6167 6550 6f69 6e74  .NewSignagePoint
-0001b7f0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0001b800: 2020 2020 2020 656e 645f 6f66 5f73 6c6f        end_of_slo
-0001b810: 745f 6275 6e64 6c65 2e63 6861 6c6c 656e  t_bundle.challen
-0001b820: 6765 5f63 6861 696e 2e67 6574 5f68 6173  ge_chain.get_has
-0001b830: 6828 292c 0a20 2020 2020 2020 2020 2020  h(),.           
-0001b840: 2020 2020 2020 2020 2065 6e64 5f6f 665f           end_of_
-0001b850: 736c 6f74 5f62 756e 646c 652e 6368 616c  slot_bundle.chal
-0001b860: 6c65 6e67 655f 6368 6169 6e2e 6765 745f  lenge_chain.get_
-0001b870: 6861 7368 2829 2c0a 2020 2020 2020 2020  hash(),.        
-0001b880: 2020 2020 2020 2020 2020 2020 656e 645f              end_
-0001b890: 6f66 5f73 6c6f 745f 6275 6e64 6c65 2e72  of_slot_bundle.r
-0001b8a0: 6577 6172 645f 6368 6169 6e2e 6765 745f  eward_chain.get_
-0001b8b0: 6861 7368 2829 2c0a 2020 2020 2020 2020  hash(),.        
-0001b8c0: 2020 2020 2020 2020 2020 2020 6e65 7874              next
-0001b8d0: 5f64 6966 6669 6375 6c74 792c 0a20 2020  _difficulty,.   
-0001b8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b8f0: 206e 6578 745f 7375 625f 736c 6f74 5f69   next_sub_slot_i
-0001b900: 7465 7273 2c0a 2020 2020 2020 2020 2020  ters,.          
-0001b910: 2020 2020 2020 2020 2020 7569 6e74 3828            uint8(
-0001b920: 3029 2c0a 2020 2020 2020 2020 2020 2020  0),.            
-0001b930: 2020 2020 2020 2020 7569 6e74 3332 2830          uint32(0
-0001b940: 2920 6966 2070 6561 6b20 6973 204e 6f6e  ) if peak is Non
-0001b950: 6520 656c 7365 2070 6561 6b2e 6865 6967  e else peak.heig
-0001b960: 6874 2c0a 2020 2020 2020 2020 2020 2020  ht,.            
-0001b970: 2020 2020 2020 2020 7370 5f73 6f75 7263          sp_sourc
-0001b980: 655f 6461 7461 3d53 6967 6e61 6765 506f  e_data=SignagePo
-0001b990: 696e 7453 6f75 7263 6544 6174 6128 0a20  intSourceData(. 
-0001b9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b9b0: 2020 2020 2020 2073 7562 5f73 6c6f 745f         sub_slot_
-0001b9c0: 6461 7461 3d53 5053 7562 536c 6f74 536f  data=SPSubSlotSo
-0001b9d0: 7572 6365 4461 7461 280a 2020 2020 2020  urceData(.      
-0001b9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b9f0: 2020 2020 2020 656e 645f 6f66 5f73 6c6f        end_of_slo
-0001ba00: 745f 6275 6e64 6c65 2e63 6861 6c6c 656e  t_bundle.challen
-0001ba10: 6765 5f63 6861 696e 2c20 656e 645f 6f66  ge_chain, end_of
-0001ba20: 5f73 6c6f 745f 6275 6e64 6c65 2e72 6577  _slot_bundle.rew
-0001ba30: 6172 645f 6368 6169 6e0a 2020 2020 2020  ard_chain.      
-0001ba40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ba50: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-0001ba60: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
-0001ba70: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-0001ba80: 2020 2020 2020 2020 2020 2020 206d 7367               msg
-0001ba90: 203d 206d 616b 655f 6d73 6728 5072 6f74   = make_msg(Prot
-0001baa0: 6f63 6f6c 4d65 7373 6167 6554 7970 6573  ocolMessageTypes
-0001bab0: 2e6e 6577 5f73 6967 6e61 6765 5f70 6f69  .new_signage_poi
-0001bac0: 6e74 2c20 6272 6f61 6463 6173 745f 6661  nt, broadcast_fa
-0001bad0: 726d 6572 290a 2020 2020 2020 2020 2020  rmer).          
-0001bae0: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
-0001baf0: 2e73 6572 7665 722e 7365 6e64 5f74 6f5f  .server.send_to_
-0001bb00: 616c 6c28 5b6d 7367 5d2c 204e 6f64 6554  all([msg], NodeT
-0001bb10: 7970 652e 4641 524d 4552 290a 2020 2020  ype.FARMER).    
-0001bb20: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001bb30: 726e 204e 6f6e 652c 2054 7275 650a 2020  rn None, True.  
-0001bb40: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0001bb50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bb60: 7365 6c66 2e6c 6f67 2e69 6e66 6f28 0a20  self.log.info(. 
-0001bb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bb80: 2020 2066 2245 6e64 206f 6620 736c 6f74     f"End of slot
-0001bb90: 206e 6f74 2061 6464 6564 2043 4320 6368   not added CC ch
-0001bba0: 616c 6c65 6e67 6520 220a 2020 2020 2020  allenge ".      
-0001bbb0: 2020 2020 2020 2020 2020 2020 2020 6622                f"
-0001bbc0: 7b65 6e64 5f6f 665f 736c 6f74 5f62 756e  {end_of_slot_bun
-0001bbd0: 646c 652e 6368 616c 6c65 6e67 655f 6368  dle.challenge_ch
-0001bbe0: 6169 6e2e 6368 616c 6c65 6e67 655f 6368  ain.challenge_ch
-0001bbf0: 6169 6e5f 656e 645f 6f66 5f73 6c6f 745f  ain_end_of_slot_
-0001bc00: 7664 662e 6368 616c 6c65 6e67 652e 6865  vdf.challenge.he
-0001bc10: 7828 297d 220a 2020 2020 2020 2020 2020  x()}".          
-0001bc20: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0001bc30: 7265 7475 726e 204e 6f6e 652c 2046 616c  return None, Fal
-0001bc40: 7365 0a0a 2020 2020 6173 796e 6320 6465  se..    async de
-0001bc50: 6620 6164 645f 7472 616e 7361 6374 696f  f add_transactio
-0001bc60: 6e28 0a20 2020 2020 2020 2073 656c 662c  n(.        self,
-0001bc70: 0a20 2020 2020 2020 2074 7261 6e73 6163  .        transac
-0001bc80: 7469 6f6e 3a20 5370 656e 6442 756e 646c  tion: SpendBundl
-0001bc90: 652c 0a20 2020 2020 2020 2073 7065 6e64  e,.        spend
-0001bca0: 5f6e 616d 653a 2062 7974 6573 3332 2c0a  _name: bytes32,.
-0001bcb0: 2020 2020 2020 2020 7065 6572 3a20 4f70          peer: Op
-0001bcc0: 7469 6f6e 616c 5b57 5343 6869 6143 6f6e  tional[WSChiaCon
-0001bcd0: 6e65 6374 696f 6e5d 203d 204e 6f6e 652c  nection] = None,
-0001bce0: 0a20 2020 2020 2020 2074 6573 743a 2062  .        test: b
-0001bcf0: 6f6f 6c20 3d20 4661 6c73 652c 0a20 2020  ool = False,.   
-0001bd00: 2020 2020 2074 785f 6279 7465 733a 204f       tx_bytes: O
-0001bd10: 7074 696f 6e61 6c5b 6279 7465 735d 203d  ptional[bytes] =
-0001bd20: 204e 6f6e 652c 0a20 2020 2029 202d 3e20   None,.    ) -> 
-0001bd30: 5475 706c 655b 4d65 6d70 6f6f 6c49 6e63  Tuple[MempoolInc
-0001bd40: 6c75 7369 6f6e 5374 6174 7573 2c20 4f70  lusionStatus, Op
-0001bd50: 7469 6f6e 616c 5b45 7272 5d5d 3a0a 2020  tional[Err]]:.  
-0001bd60: 2020 2020 2020 6966 2073 656c 662e 7379        if self.sy
-0001bd70: 6e63 5f73 746f 7265 2e67 6574 5f73 796e  nc_store.get_syn
-0001bd80: 635f 6d6f 6465 2829 3a0a 2020 2020 2020  c_mode():.      
-0001bd90: 2020 2020 2020 7265 7475 726e 204d 656d        return Mem
-0001bda0: 706f 6f6c 496e 636c 7573 696f 6e53 7461  poolInclusionSta
-0001bdb0: 7475 732e 4641 494c 4544 2c20 4572 722e  tus.FAILED, Err.
-0001bdc0: 4e4f 5f54 5241 4e53 4143 5449 4f4e 535f  NO_TRANSACTIONS_
-0001bdd0: 5748 494c 455f 5359 4e43 494e 470a 2020  WHILE_SYNCING.  
-0001bde0: 2020 2020 2020 6966 206e 6f74 2074 6573        if not tes
-0001bdf0: 7420 616e 6420 6e6f 7420 2861 7761 6974  t and not (await
-0001be00: 2073 656c 662e 7379 6e63 6564 2829 293a   self.synced()):
-0001be10: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0001be20: 7572 6e20 4d65 6d70 6f6f 6c49 6e63 6c75  urn MempoolInclu
-0001be30: 7369 6f6e 5374 6174 7573 2e46 4149 4c45  sionStatus.FAILE
-0001be40: 442c 2045 7272 2e4e 4f5f 5452 414e 5341  D, Err.NO_TRANSA
-0001be50: 4354 494f 4e53 5f57 4849 4c45 5f53 594e  CTIONS_WHILE_SYN
-0001be60: 4349 4e47 0a0a 2020 2020 2020 2020 6966  CING..        if
-0001be70: 2073 656c 662e 6d65 6d70 6f6f 6c5f 6d61   self.mempool_ma
-0001be80: 6e61 6765 722e 6765 745f 7370 656e 6462  nager.get_spendb
-0001be90: 756e 646c 6528 7370 656e 645f 6e61 6d65  undle(spend_name
-0001bea0: 2920 6973 206e 6f74 204e 6f6e 653a 0a20  ) is not None:. 
-0001beb0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001bec0: 6d65 6d70 6f6f 6c5f 6d61 6e61 6765 722e  mempool_manager.
-0001bed0: 7265 6d6f 7665 5f73 6565 6e28 7370 656e  remove_seen(spen
-0001bee0: 645f 6e61 6d65 290a 2020 2020 2020 2020  d_name).        
-0001bef0: 2020 2020 7265 7475 726e 204d 656d 706f      return Mempo
-0001bf00: 6f6c 496e 636c 7573 696f 6e53 7461 7475  olInclusionStatu
-0001bf10: 732e 5355 4343 4553 532c 204e 6f6e 650a  s.SUCCESS, None.
-0001bf20: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-0001bf30: 6d65 6d70 6f6f 6c5f 6d61 6e61 6765 722e  mempool_manager.
-0001bf40: 7365 656e 2873 7065 6e64 5f6e 616d 6529  seen(spend_name)
-0001bf50: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0001bf60: 7475 726e 204d 656d 706f 6f6c 496e 636c  turn MempoolIncl
-0001bf70: 7573 696f 6e53 7461 7475 732e 4641 494c  usionStatus.FAIL
-0001bf80: 4544 2c20 4572 722e 414c 5245 4144 595f  ED, Err.ALREADY_
-0001bf90: 494e 434c 5544 494e 475f 5452 414e 5341  INCLUDING_TRANSA
-0001bfa0: 4354 494f 4e0a 2020 2020 2020 2020 7365  CTION.        se
-0001bfb0: 6c66 2e6d 656d 706f 6f6c 5f6d 616e 6167  lf.mempool_manag
-0001bfc0: 6572 2e61 6464 5f61 6e64 5f6d 6179 6265  er.add_and_maybe
-0001bfd0: 5f70 6f70 5f73 6565 6e28 7370 656e 645f  _pop_seen(spend_
-0001bfe0: 6e61 6d65 290a 2020 2020 2020 2020 7365  name).        se
-0001bff0: 6c66 2e6c 6f67 2e64 6562 7567 2866 2250  lf.log.debug(f"P
-0001c000: 726f 6365 7373 696e 6720 7472 616e 7361  rocessing transa
-0001c010: 6374 696f 6e3a 207b 7370 656e 645f 6e61  ction: {spend_na
-0001c020: 6d65 7d22 290a 2020 2020 2020 2020 2320  me}").        # 
-0001c030: 4967 6e6f 7265 2069 6620 7379 6e63 696e  Ignore if syncin
-0001c040: 6720 6f72 2069 6620 7765 2068 6176 6520  g or if we have 
-0001c050: 6e6f 7420 7965 7420 7265 6365 6976 6564  not yet received
-0001c060: 2061 2062 6c6f 636b 0a20 2020 2020 2020   a block.       
-0001c070: 2023 2074 6865 206d 656d 706f 6f6c 206d   # the mempool m
-0001c080: 7573 7420 6861 7665 2061 2070 6561 6b20  ust have a peak 
-0001c090: 746f 2076 616c 6964 6174 6520 7472 616e  to validate tran
-0001c0a0: 7361 6374 696f 6e73 0a20 2020 2020 2020  sactions.       
-0001c0b0: 2069 6620 7365 6c66 2e73 796e 635f 7374   if self.sync_st
-0001c0c0: 6f72 652e 6765 745f 7379 6e63 5f6d 6f64  ore.get_sync_mod
-0001c0d0: 6528 2920 6f72 2073 656c 662e 6d65 6d70  e() or self.memp
-0001c0e0: 6f6f 6c5f 6d61 6e61 6765 722e 7065 616b  ool_manager.peak
-0001c0f0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-0001c100: 2020 2020 2020 7374 6174 7573 203d 204d        status = M
-0001c110: 656d 706f 6f6c 496e 636c 7573 696f 6e53  empoolInclusionS
-0001c120: 7461 7475 732e 4641 494c 4544 0a20 2020  tatus.FAILED.   
-0001c130: 2020 2020 2020 2020 2065 7272 6f72 3a20           error: 
-0001c140: 4f70 7469 6f6e 616c 5b45 7272 5d20 3d20  Optional[Err] = 
-0001c150: 4572 722e 4e4f 5f54 5241 4e53 4143 5449  Err.NO_TRANSACTI
-0001c160: 4f4e 535f 5748 494c 455f 5359 4e43 494e  ONS_WHILE_SYNCIN
-0001c170: 470a 2020 2020 2020 2020 2020 2020 7365  G.            se
-0001c180: 6c66 2e6d 656d 706f 6f6c 5f6d 616e 6167  lf.mempool_manag
-0001c190: 6572 2e72 656d 6f76 655f 7365 656e 2873  er.remove_seen(s
-0001c1a0: 7065 6e64 5f6e 616d 6529 0a20 2020 2020  pend_name).     
-0001c1b0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0001c1c0: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-0001c1d0: 2020 2020 2020 2020 2020 636f 7374 5f72            cost_r
-0001c1e0: 6573 756c 7420 3d20 6177 6169 7420 7365  esult = await se
-0001c1f0: 6c66 2e6d 656d 706f 6f6c 5f6d 616e 6167  lf.mempool_manag
-0001c200: 6572 2e70 7265 5f76 616c 6964 6174 655f  er.pre_validate_
-0001c210: 7370 656e 6462 756e 646c 6528 7472 616e  spendbundle(tran
-0001c220: 7361 6374 696f 6e2c 2074 785f 6279 7465  saction, tx_byte
-0001c230: 732c 2073 7065 6e64 5f6e 616d 6529 0a20  s, spend_name). 
-0001c240: 2020 2020 2020 2020 2020 2065 7863 6570             excep
-0001c250: 7420 5661 6c69 6461 7469 6f6e 4572 726f  t ValidationErro
-0001c260: 7220 6173 2065 3a0a 2020 2020 2020 2020  r as e:.        
-0001c270: 2020 2020 2020 2020 7365 6c66 2e6d 656d          self.mem
-0001c280: 706f 6f6c 5f6d 616e 6167 6572 2e72 656d  pool_manager.rem
-0001c290: 6f76 655f 7365 656e 2873 7065 6e64 5f6e  ove_seen(spend_n
-0001c2a0: 616d 6529 0a20 2020 2020 2020 2020 2020  ame).           
-0001c2b0: 2020 2020 2072 6574 7572 6e20 4d65 6d70       return Memp
-0001c2c0: 6f6f 6c49 6e63 6c75 7369 6f6e 5374 6174  oolInclusionStat
-0001c2d0: 7573 2e46 4149 4c45 442c 2065 2e63 6f64  us.FAILED, e.cod
-0001c2e0: 650a 2020 2020 2020 2020 2020 2020 6578  e.            ex
-0001c2f0: 6365 7074 2045 7863 6570 7469 6f6e 3a0a  cept Exception:.
-0001c300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c310: 7365 6c66 2e6d 656d 706f 6f6c 5f6d 616e  self.mempool_man
-0001c320: 6167 6572 2e72 656d 6f76 655f 7365 656e  ager.remove_seen
-0001c330: 2873 7065 6e64 5f6e 616d 6529 0a20 2020  (spend_name).   
-0001c340: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-0001c350: 7365 0a20 2020 2020 2020 2020 2020 2061  se.            a
-0001c360: 7379 6e63 2077 6974 6820 7365 6c66 2e62  sync with self.b
-0001c370: 6c6f 636b 6368 6169 6e2e 7072 696f 7269  lockchain.priori
-0001c380: 7479 5f6d 7574 6578 2e61 6371 7569 7265  ty_mutex.acquire
-0001c390: 2870 7269 6f72 6974 793d 426c 6f63 6b63  (priority=Blockc
-0001c3a0: 6861 696e 4d75 7465 7850 7269 6f72 6974  hainMutexPriorit
-0001c3b0: 792e 6c6f 7729 3a0a 2020 2020 2020 2020  y.low):.        
-0001c3c0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-0001c3d0: 6d65 6d70 6f6f 6c5f 6d61 6e61 6765 722e  mempool_manager.
-0001c3e0: 6765 745f 7370 656e 6462 756e 646c 6528  get_spendbundle(
-0001c3f0: 7370 656e 645f 6e61 6d65 2920 6973 206e  spend_name) is n
-0001c400: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0001c410: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0001c420: 662e 6d65 6d70 6f6f 6c5f 6d61 6e61 6765  f.mempool_manage
-0001c430: 722e 7265 6d6f 7665 5f73 6565 6e28 7370  r.remove_seen(sp
-0001c440: 656e 645f 6e61 6d65 290a 2020 2020 2020  end_name).      
-0001c450: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0001c460: 7475 726e 204d 656d 706f 6f6c 496e 636c  turn MempoolIncl
-0001c470: 7573 696f 6e53 7461 7475 732e 5355 4343  usionStatus.SUCC
-0001c480: 4553 532c 204e 6f6e 650a 2020 2020 2020  ESS, None.      
-0001c490: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-0001c4a0: 662e 6d65 6d70 6f6f 6c5f 6d61 6e61 6765  f.mempool_manage
-0001c4b0: 722e 7065 616b 2069 7320 4e6f 6e65 3a0a  r.peak is None:.
-0001c4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c4d0: 2020 2020 7265 7475 726e 204d 656d 706f      return Mempo
-0001c4e0: 6f6c 496e 636c 7573 696f 6e53 7461 7475  olInclusionStatu
-0001c4f0: 732e 4641 494c 4544 2c20 4572 722e 4d45  s.FAILED, Err.ME
-0001c500: 4d50 4f4f 4c5f 4e4f 545f 494e 4954 4941  MPOOL_NOT_INITIA
-0001c510: 4c49 5a45 440a 2020 2020 2020 2020 2020  LIZED.          
-0001c520: 2020 2020 2020 636f 7374 2c20 7374 6174        cost, stat
-0001c530: 7573 2c20 6572 726f 7220 3d20 6177 6169  us, error = awai
-0001c540: 7420 7365 6c66 2e6d 656d 706f 6f6c 5f6d  t self.mempool_m
-0001c550: 616e 6167 6572 2e61 6464 5f73 7065 6e64  anager.add_spend
-0001c560: 5f62 756e 646c 6528 0a20 2020 2020 2020  _bundle(.       
-0001c570: 2020 2020 2020 2020 2020 2020 2074 7261               tra
-0001c580: 6e73 6163 7469 6f6e 2c20 636f 7374 5f72  nsaction, cost_r
-0001c590: 6573 756c 742c 2073 7065 6e64 5f6e 616d  esult, spend_nam
-0001c5a0: 652c 2073 656c 662e 6d65 6d70 6f6f 6c5f  e, self.mempool_
-0001c5b0: 6d61 6e61 6765 722e 7065 616b 2e68 6569  manager.peak.hei
-0001c5c0: 6768 740a 2020 2020 2020 2020 2020 2020  ght.            
-0001c5d0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-0001c5e0: 2020 6966 2073 7461 7475 7320 3d3d 204d    if status == M
-0001c5f0: 656d 706f 6f6c 496e 636c 7573 696f 6e53  empoolInclusionS
-0001c600: 7461 7475 732e 5355 4343 4553 533a 0a20  tatus.SUCCESS:. 
-0001c610: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001c620: 656c 662e 6c6f 672e 6465 6275 6728 0a20  elf.log.debug(. 
-0001c630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c640: 2020 2066 2241 6464 6564 2074 7261 6e73     f"Added trans
-0001c650: 6163 7469 6f6e 2074 6f20 6d65 6d70 6f6f  action to mempoo
-0001c660: 6c3a 207b 7370 656e 645f 6e61 6d65 7d20  l: {spend_name} 
-0001c670: 6d65 6d70 6f6f 6c20 7369 7a65 3a20 220a  mempool size: ".
-0001c680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c690: 2020 2020 6622 7b73 656c 662e 6d65 6d70      f"{self.memp
-0001c6a0: 6f6f 6c5f 6d61 6e61 6765 722e 6d65 6d70  ool_manager.memp
-0001c6b0: 6f6f 6c2e 746f 7461 6c5f 6d65 6d70 6f6f  ool.total_mempoo
-0001c6c0: 6c5f 636f 7374 2829 7d20 6e6f 726d 616c  l_cost()} normal
-0001c6d0: 697a 6564 2022 0a20 2020 2020 2020 2020  ized ".         
-0001c6e0: 2020 2020 2020 2020 2020 2066 227b 7365             f"{se
-0001c6f0: 6c66 2e6d 656d 706f 6f6c 5f6d 616e 6167  lf.mempool_manag
-0001c700: 6572 2e6d 656d 706f 6f6c 2e74 6f74 616c  er.mempool.total
-0001c710: 5f6d 656d 706f 6f6c 5f63 6f73 7428 2920  _mempool_cost() 
-0001c720: 2f20 3530 3030 3030 307d 220a 2020 2020  / 5000000}".    
-0001c730: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
-0001c740: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0001c750: 204f 6e6c 7920 6272 6f61 6463 6173 7420   Only broadcast 
-0001c760: 7375 6363 6573 7366 756c 2074 7261 6e73  successful trans
-0001c770: 6163 7469 6f6e 732c 206e 6f74 2070 656e  actions, not pen
-0001c780: 6469 6e67 206f 6e65 732e 204f 7468 6572  ding ones. Other
-0001c790: 7769 7365 2069 7427 7320 6120 444f 530a  wise it's a DOS.
-0001c7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c7b0: 2320 7665 6374 6f72 2e0a 2020 2020 2020  # vector..      
-0001c7c0: 2020 2020 2020 2020 2020 6d65 6d70 6f6f            mempoo
-0001c7d0: 6c5f 6974 656d 203d 2073 656c 662e 6d65  l_item = self.me
-0001c7e0: 6d70 6f6f 6c5f 6d61 6e61 6765 722e 6765  mpool_manager.ge
-0001c7f0: 745f 6d65 6d70 6f6f 6c5f 6974 656d 2873  t_mempool_item(s
-0001c800: 7065 6e64 5f6e 616d 6529 0a20 2020 2020  pend_name).     
-0001c810: 2020 2020 2020 2020 2020 2061 7373 6572             asser
-0001c820: 7420 6d65 6d70 6f6f 6c5f 6974 656d 2069  t mempool_item i
-0001c830: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
-0001c840: 2020 2020 2020 2020 2020 2066 6565 7320             fees 
-0001c850: 3d20 6d65 6d70 6f6f 6c5f 6974 656d 2e66  = mempool_item.f
-0001c860: 6565 0a20 2020 2020 2020 2020 2020 2020  ee.             
-0001c870: 2020 2061 7373 6572 7420 6665 6573 203e     assert fees >
-0001c880: 3d20 300a 2020 2020 2020 2020 2020 2020  = 0.            
-0001c890: 2020 2020 6173 7365 7274 2063 6f73 7420      assert cost 
-0001c8a0: 6973 206e 6f74 204e 6f6e 650a 2020 2020  is not None.    
-0001c8b0: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
-0001c8c0: 7478 203d 2066 756c 6c5f 6e6f 6465 5f70  tx = full_node_p
-0001c8d0: 726f 746f 636f 6c2e 4e65 7754 7261 6e73  rotocol.NewTrans
-0001c8e0: 6163 7469 6f6e 280a 2020 2020 2020 2020  action(.        
-0001c8f0: 2020 2020 2020 2020 2020 2020 7370 656e              spen
-0001c900: 645f 6e61 6d65 2c0a 2020 2020 2020 2020  d_name,.        
-0001c910: 2020 2020 2020 2020 2020 2020 636f 7374              cost
-0001c920: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0001c930: 2020 2020 2020 6665 6573 2c0a 2020 2020        fees,.    
-0001c940: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-0001c950: 2020 2020 2020 2020 2020 2020 2020 6d73                ms
-0001c960: 6720 3d20 6d61 6b65 5f6d 7367 2850 726f  g = make_msg(Pro
-0001c970: 746f 636f 6c4d 6573 7361 6765 5479 7065  tocolMessageType
-0001c980: 732e 6e65 775f 7472 616e 7361 6374 696f  s.new_transactio
-0001c990: 6e2c 206e 6577 5f74 7829 0a20 2020 2020  n, new_tx).     
-0001c9a0: 2020 2020 2020 2020 2020 2069 6620 7065             if pe
-0001c9b0: 6572 2069 7320 4e6f 6e65 3a0a 2020 2020  er is None:.    
-0001c9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c9d0: 6177 6169 7420 7365 6c66 2e73 6572 7665  await self.serve
-0001c9e0: 722e 7365 6e64 5f74 6f5f 616c 6c28 5b6d  r.send_to_all([m
-0001c9f0: 7367 5d2c 204e 6f64 6554 7970 652e 4655  sg], NodeType.FU
-0001ca00: 4c4c 5f4e 4f44 4529 0a20 2020 2020 2020  LL_NODE).       
-0001ca10: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0001ca20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ca30: 2020 2061 7761 6974 2073 656c 662e 7365     await self.se
-0001ca40: 7276 6572 2e73 656e 645f 746f 5f61 6c6c  rver.send_to_all
-0001ca50: 285b 6d73 675d 2c20 4e6f 6465 5479 7065  ([msg], NodeType
-0001ca60: 2e46 554c 4c5f 4e4f 4445 2c20 7065 6572  .FULL_NODE, peer
-0001ca70: 2e70 6565 725f 6e6f 6465 5f69 6429 0a0a  .peer_node_id)..
-0001ca80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ca90: 6966 2073 656c 662e 7369 6d75 6c61 746f  if self.simulato
-0001caa0: 725f 7472 616e 7361 6374 696f 6e5f 6361  r_transaction_ca
-0001cab0: 6c6c 6261 636b 2069 7320 6e6f 7420 4e6f  llback is not No
-0001cac0: 6e65 3a20 2023 2063 616c 6c62 6163 6b0a  ne:  # callback.
-0001cad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cae0: 2020 2020 6177 6169 7420 7365 6c66 2e73      await self.s
-0001caf0: 696d 756c 6174 6f72 5f74 7261 6e73 6163  imulator_transac
-0001cb00: 7469 6f6e 5f63 616c 6c62 6163 6b28 7370  tion_callback(sp
-0001cb10: 656e 645f 6e61 6d65 2920 2023 2070 796c  end_name)  # pyl
-0001cb20: 696e 743a 2064 6973 6162 6c65 3d45 3131  int: disable=E11
-0001cb30: 3032 0a0a 2020 2020 2020 2020 2020 2020  02..            
-0001cb40: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0001cb50: 2020 2020 2020 7365 6c66 2e6d 656d 706f        self.mempo
-0001cb60: 6f6c 5f6d 616e 6167 6572 2e72 656d 6f76  ol_manager.remov
-0001cb70: 655f 7365 656e 2873 7065 6e64 5f6e 616d  e_seen(spend_nam
-0001cb80: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
-0001cb90: 2020 2073 656c 662e 6c6f 672e 6465 6275     self.log.debu
-0001cba0: 6728 6622 5761 736e 2774 2061 626c 6520  g(f"Wasn't able 
-0001cbb0: 746f 2061 6464 2074 7261 6e73 6163 7469  to add transacti
-0001cbc0: 6f6e 2077 6974 6820 6964 207b 7370 656e  on with id {spen
-0001cbd0: 645f 6e61 6d65 7d2c 2073 7461 7475 7320  d_name}, status 
-0001cbe0: 7b73 7461 7475 737d 2065 7272 6f72 3a20  {status} error: 
-0001cbf0: 7b65 7272 6f72 7d22 290a 2020 2020 2020  {error}").      
-0001cc00: 2020 7265 7475 726e 2073 7461 7475 732c    return status,
-0001cc10: 2065 7272 6f72 0a0a 2020 2020 6173 796e   error..    asyn
-0001cc20: 6320 6465 6620 5f6e 6565 6473 5f63 6f6d  c def _needs_com
-0001cc30: 7061 6374 5f70 726f 6f66 280a 2020 2020  pact_proof(.    
-0001cc40: 2020 2020 7365 6c66 2c20 7664 665f 696e      self, vdf_in
-0001cc50: 666f 3a20 5644 4649 6e66 6f2c 2068 6561  fo: VDFInfo, hea
-0001cc60: 6465 725f 626c 6f63 6b3a 2048 6561 6465  der_block: Heade
-0001cc70: 7242 6c6f 636b 2c20 6669 656c 645f 7664  rBlock, field_vd
-0001cc80: 663a 2043 6f6d 7072 6573 7369 626c 6556  f: CompressibleV
-0001cc90: 4446 4669 656c 640a 2020 2020 2920 2d3e  DFField.    ) ->
-0001cca0: 2062 6f6f 6c3a 0a20 2020 2020 2020 2069   bool:.        i
-0001ccb0: 6620 6669 656c 645f 7664 6620 3d3d 2043  f field_vdf == C
-0001ccc0: 6f6d 7072 6573 7369 626c 6556 4446 4669  ompressibleVDFFi
-0001ccd0: 656c 642e 4343 5f45 4f53 5f56 4446 3a0a  eld.CC_EOS_VDF:.
-0001cce0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0001ccf0: 7375 625f 736c 6f74 2069 6e20 6865 6164  sub_slot in head
-0001cd00: 6572 5f62 6c6f 636b 2e66 696e 6973 6865  er_block.finishe
-0001cd10: 645f 7375 625f 736c 6f74 733a 0a20 2020  d_sub_slots:.   
-0001cd20: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001cd30: 7375 625f 736c 6f74 2e63 6861 6c6c 656e  sub_slot.challen
-0001cd40: 6765 5f63 6861 696e 2e63 6861 6c6c 656e  ge_chain.challen
-0001cd50: 6765 5f63 6861 696e 5f65 6e64 5f6f 665f  ge_chain_end_of_
-0001cd60: 736c 6f74 5f76 6466 203d 3d20 7664 665f  slot_vdf == vdf_
-0001cd70: 696e 666f 3a0a 2020 2020 2020 2020 2020  info:.          
-0001cd80: 2020 2020 2020 2020 2020 6966 2028 0a20            if (. 
-0001cd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cda0: 2020 2020 2020 2073 7562 5f73 6c6f 742e         sub_slot.
-0001cdb0: 7072 6f6f 6673 2e63 6861 6c6c 656e 6765  proofs.challenge
-0001cdc0: 5f63 6861 696e 5f73 6c6f 745f 7072 6f6f  _chain_slot_proo
-0001cdd0: 662e 7769 746e 6573 735f 7479 7065 203d  f.witness_type =
-0001cde0: 3d20 300a 2020 2020 2020 2020 2020 2020  = 0.            
-0001cdf0: 2020 2020 2020 2020 2020 2020 616e 6420              and 
-0001ce00: 7375 625f 736c 6f74 2e70 726f 6f66 732e  sub_slot.proofs.
-0001ce10: 6368 616c 6c65 6e67 655f 6368 6169 6e5f  challenge_chain_
-0001ce20: 736c 6f74 5f70 726f 6f66 2e6e 6f72 6d61  slot_proof.norma
-0001ce30: 6c69 7a65 645f 746f 5f69 6465 6e74 6974  lized_to_identit
-0001ce40: 790a 2020 2020 2020 2020 2020 2020 2020  y.              
-0001ce50: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
-0001ce60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ce70: 2072 6574 7572 6e20 4661 6c73 650a 2020   return False.  
-0001ce80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ce90: 2020 7265 7475 726e 2054 7275 650a 2020    return True.  
-0001cea0: 2020 2020 2020 6966 2066 6965 6c64 5f76        if field_v
-0001ceb0: 6466 203d 3d20 436f 6d70 7265 7373 6962  df == Compressib
-0001cec0: 6c65 5644 4646 6965 6c64 2e49 4343 5f45  leVDFField.ICC_E
-0001ced0: 4f53 5f56 4446 3a0a 2020 2020 2020 2020  OS_VDF:.        
-0001cee0: 2020 2020 666f 7220 7375 625f 736c 6f74      for sub_slot
-0001cef0: 2069 6e20 6865 6164 6572 5f62 6c6f 636b   in header_block
-0001cf00: 2e66 696e 6973 6865 645f 7375 625f 736c  .finished_sub_sl
-0001cf10: 6f74 733a 0a20 2020 2020 2020 2020 2020  ots:.           
-0001cf20: 2020 2020 2069 6620 280a 2020 2020 2020       if (.      
-0001cf30: 2020 2020 2020 2020 2020 2020 2020 7375                su
-0001cf40: 625f 736c 6f74 2e69 6e66 7573 6564 5f63  b_slot.infused_c
-0001cf50: 6861 6c6c 656e 6765 5f63 6861 696e 2069  hallenge_chain i
-0001cf60: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
-0001cf70: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0001cf80: 6e64 2073 7562 5f73 6c6f 742e 696e 6675  nd sub_slot.infu
-0001cf90: 7365 645f 6368 616c 6c65 6e67 655f 6368  sed_challenge_ch
-0001cfa0: 6169 6e2e 696e 6675 7365 645f 6368 616c  ain.infused_chal
-0001cfb0: 6c65 6e67 655f 6368 6169 6e5f 656e 645f  lenge_chain_end_
-0001cfc0: 6f66 5f73 6c6f 745f 7664 6620 3d3d 2076  of_slot_vdf == v
-0001cfd0: 6466 5f69 6e66 6f0a 2020 2020 2020 2020  df_info.        
-0001cfe0: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
-0001cff0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0001d000: 7373 6572 7420 7375 625f 736c 6f74 2e70  ssert sub_slot.p
-0001d010: 726f 6f66 732e 696e 6675 7365 645f 6368  roofs.infused_ch
-0001d020: 616c 6c65 6e67 655f 6368 6169 6e5f 736c  allenge_chain_sl
-0001d030: 6f74 5f70 726f 6f66 2069 7320 6e6f 7420  ot_proof is not 
-0001d040: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-0001d050: 2020 2020 2020 2020 2069 6620 280a 2020           if (.  
-0001d060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d070: 2020 2020 2020 7375 625f 736c 6f74 2e70        sub_slot.p
-0001d080: 726f 6f66 732e 696e 6675 7365 645f 6368  roofs.infused_ch
-0001d090: 616c 6c65 6e67 655f 6368 6169 6e5f 736c  allenge_chain_sl
-0001d0a0: 6f74 5f70 726f 6f66 2e77 6974 6e65 7373  ot_proof.witness
-0001d0b0: 5f74 7970 6520 3d3d 2030 0a20 2020 2020  _type == 0.     
-0001d0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d0d0: 2020 2061 6e64 2073 7562 5f73 6c6f 742e     and sub_slot.
-0001d0e0: 7072 6f6f 6673 2e69 6e66 7573 6564 5f63  proofs.infused_c
-0001d0f0: 6861 6c6c 656e 6765 5f63 6861 696e 5f73  hallenge_chain_s
-0001d100: 6c6f 745f 7072 6f6f 662e 6e6f 726d 616c  lot_proof.normal
-0001d110: 697a 6564 5f74 6f5f 6964 656e 7469 7479  ized_to_identity
-0001d120: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001d130: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
-0001d140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d150: 7265 7475 726e 2046 616c 7365 0a20 2020  return False.   
-0001d160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d170: 2072 6574 7572 6e20 5472 7565 0a20 2020   return True.   
-0001d180: 2020 2020 2069 6620 6669 656c 645f 7664       if field_vd
-0001d190: 6620 3d3d 2043 6f6d 7072 6573 7369 626c  f == Compressibl
-0001d1a0: 6556 4446 4669 656c 642e 4343 5f53 505f  eVDFField.CC_SP_
-0001d1b0: 5644 463a 0a20 2020 2020 2020 2020 2020  VDF:.           
-0001d1c0: 2069 6620 6865 6164 6572 5f62 6c6f 636b   if header_block
-0001d1d0: 2e72 6577 6172 645f 6368 6169 6e5f 626c  .reward_chain_bl
-0001d1e0: 6f63 6b2e 6368 616c 6c65 6e67 655f 6368  ock.challenge_ch
-0001d1f0: 6169 6e5f 7370 5f76 6466 2069 7320 4e6f  ain_sp_vdf is No
-0001d200: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0001d210: 2020 2020 7265 7475 726e 2046 616c 7365      return False
-0001d220: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001d230: 7664 665f 696e 666f 203d 3d20 6865 6164  vdf_info == head
-0001d240: 6572 5f62 6c6f 636b 2e72 6577 6172 645f  er_block.reward_
-0001d250: 6368 6169 6e5f 626c 6f63 6b2e 6368 616c  chain_block.chal
-0001d260: 6c65 6e67 655f 6368 6169 6e5f 7370 5f76  lenge_chain_sp_v
-0001d270: 6466 3a0a 2020 2020 2020 2020 2020 2020  df:.            
-0001d280: 2020 2020 6173 7365 7274 2068 6561 6465      assert heade
-0001d290: 725f 626c 6f63 6b2e 6368 616c 6c65 6e67  r_block.challeng
-0001d2a0: 655f 6368 6169 6e5f 7370 5f70 726f 6f66  e_chain_sp_proof
-0001d2b0: 2069 7320 6e6f 7420 4e6f 6e65 0a20 2020   is not None.   
-0001d2c0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001d2d0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0001d2e0: 2020 2020 2020 6865 6164 6572 5f62 6c6f        header_blo
-0001d2f0: 636b 2e63 6861 6c6c 656e 6765 5f63 6861  ck.challenge_cha
-0001d300: 696e 5f73 705f 7072 6f6f 662e 7769 746e  in_sp_proof.witn
-0001d310: 6573 735f 7479 7065 203d 3d20 300a 2020  ess_type == 0.  
-0001d320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d330: 2020 616e 6420 6865 6164 6572 5f62 6c6f    and header_blo
-0001d340: 636b 2e63 6861 6c6c 656e 6765 5f63 6861  ck.challenge_cha
-0001d350: 696e 5f73 705f 7072 6f6f 662e 6e6f 726d  in_sp_proof.norm
-0001d360: 616c 697a 6564 5f74 6f5f 6964 656e 7469  alized_to_identi
-0001d370: 7479 0a20 2020 2020 2020 2020 2020 2020  ty.             
-0001d380: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-0001d390: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001d3a0: 2046 616c 7365 0a20 2020 2020 2020 2020   False.         
-0001d3b0: 2020 2020 2020 2072 6574 7572 6e20 5472         return Tr
-0001d3c0: 7565 0a20 2020 2020 2020 2069 6620 6669  ue.        if fi
-0001d3d0: 656c 645f 7664 6620 3d3d 2043 6f6d 7072  eld_vdf == Compr
-0001d3e0: 6573 7369 626c 6556 4446 4669 656c 642e  essibleVDFField.
-0001d3f0: 4343 5f49 505f 5644 463a 0a20 2020 2020  CC_IP_VDF:.     
-0001d400: 2020 2020 2020 2069 6620 7664 665f 696e         if vdf_in
-0001d410: 666f 203d 3d20 6865 6164 6572 5f62 6c6f  fo == header_blo
-0001d420: 636b 2e72 6577 6172 645f 6368 6169 6e5f  ck.reward_chain_
-0001d430: 626c 6f63 6b2e 6368 616c 6c65 6e67 655f  block.challenge_
-0001d440: 6368 6169 6e5f 6970 5f76 6466 3a0a 2020  chain_ip_vdf:.  
-0001d450: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0001d460: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
-0001d470: 2020 2020 2020 2068 6561 6465 725f 626c         header_bl
-0001d480: 6f63 6b2e 6368 616c 6c65 6e67 655f 6368  ock.challenge_ch
-0001d490: 6169 6e5f 6970 5f70 726f 6f66 2e77 6974  ain_ip_proof.wit
-0001d4a0: 6e65 7373 5f74 7970 6520 3d3d 2030 0a20  ness_type == 0. 
-0001d4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d4c0: 2020 2061 6e64 2068 6561 6465 725f 626c     and header_bl
-0001d4d0: 6f63 6b2e 6368 616c 6c65 6e67 655f 6368  ock.challenge_ch
-0001d4e0: 6169 6e5f 6970 5f70 726f 6f66 2e6e 6f72  ain_ip_proof.nor
-0001d4f0: 6d61 6c69 7a65 645f 746f 5f69 6465 6e74  malized_to_ident
-0001d500: 6974 790a 2020 2020 2020 2020 2020 2020  ity.            
-0001d510: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
-0001d520: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001d530: 6e20 4661 6c73 650a 2020 2020 2020 2020  n False.        
-0001d540: 2020 2020 2020 2020 7265 7475 726e 2054          return T
-0001d550: 7275 650a 2020 2020 2020 2020 7265 7475  rue.        retu
-0001d560: 726e 2046 616c 7365 0a0a 2020 2020 6173  rn False..    as
-0001d570: 796e 6320 6465 6620 5f63 616e 5f61 6363  ync def _can_acc
-0001d580: 6570 745f 636f 6d70 6163 745f 7072 6f6f  ept_compact_proo
-0001d590: 6628 0a20 2020 2020 2020 2073 656c 662c  f(.        self,
-0001d5a0: 0a20 2020 2020 2020 2076 6466 5f69 6e66  .        vdf_inf
-0001d5b0: 6f3a 2056 4446 496e 666f 2c0a 2020 2020  o: VDFInfo,.    
-0001d5c0: 2020 2020 7664 665f 7072 6f6f 663a 2056      vdf_proof: V
-0001d5d0: 4446 5072 6f6f 662c 0a20 2020 2020 2020  DFProof,.       
-0001d5e0: 2068 6569 6768 743a 2075 696e 7433 322c   height: uint32,
-0001d5f0: 0a20 2020 2020 2020 2068 6561 6465 725f  .        header_
-0001d600: 6861 7368 3a20 6279 7465 7333 322c 0a20  hash: bytes32,. 
-0001d610: 2020 2020 2020 2066 6965 6c64 5f76 6466         field_vdf
-0001d620: 3a20 436f 6d70 7265 7373 6962 6c65 5644  : CompressibleVD
-0001d630: 4646 6965 6c64 2c0a 2020 2020 2920 2d3e  FField,.    ) ->
-0001d640: 2062 6f6f 6c3a 0a20 2020 2020 2020 2022   bool:.        "
-0001d650: 2222 0a20 2020 2020 2020 202d 2043 6865  "".        - Che
-0001d660: 636b 7320 6966 2074 6865 2070 726f 7669  cks if the provi
-0001d670: 6465 6420 7072 6f6f 6620 6973 2069 6e64  ded proof is ind
-0001d680: 6565 6420 636f 6d70 6163 742e 0a20 2020  eed compact..   
-0001d690: 2020 2020 202d 2043 6865 636b 7320 6966       - Checks if
-0001d6a0: 2070 726f 6f66 2076 6572 6966 6965 7320   proof verifies 
-0001d6b0: 6769 7665 6e20 7468 6520 7664 665f 696e  given the vdf_in
-0001d6c0: 666f 2066 726f 6d20 7468 6520 7374 6172  fo from the star
-0001d6d0: 7420 6f66 2073 7562 2d73 6c6f 742e 0a20  t of sub-slot.. 
-0001d6e0: 2020 2020 2020 202d 2043 6865 636b 7320         - Checks 
-0001d6f0: 6966 2074 6865 2070 726f 7669 6465 6420  if the provided 
-0001d700: 7664 665f 696e 666f 2069 7320 636f 7272  vdf_info is corr
-0001d710: 6563 742c 2061 7373 756d 696e 6720 6974  ect, assuming it
-0001d720: 2072 6566 6572 7320 746f 2074 6865 2073   refers to the s
-0001d730: 7461 7274 206f 6620 7375 622d 736c 6f74  tart of sub-slot
-0001d740: 2e0a 2020 2020 2020 2020 2d20 4368 6563  ..        - Chec
-0001d750: 6b73 2069 6620 7468 6520 6578 6973 7469  ks if the existi
-0001d760: 6e67 2070 726f 6f66 2077 6173 206e 6f6e  ng proof was non
-0001d770: 2d63 6f6d 7061 6374 2e20 4967 6e6f 7265  -compact. Ignore
-0001d780: 2074 6869 7320 7072 6f6f 6620 6966 2077   this proof if w
-0001d790: 6520 616c 7265 6164 7920 6861 7665 2061  e already have a
-0001d7a0: 2063 6f6d 7061 6374 2070 726f 6f66 2e0a   compact proof..
-0001d7b0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0001d7c0: 2020 2020 6973 5f66 756c 6c79 5f63 6f6d      is_fully_com
-0001d7d0: 7061 6374 6966 6965 6420 3d20 6177 6169  pactified = awai
-0001d7e0: 7420 7365 6c66 2e62 6c6f 636b 5f73 746f  t self.block_sto
-0001d7f0: 7265 2e69 735f 6675 6c6c 795f 636f 6d70  re.is_fully_comp
-0001d800: 6163 7469 6669 6564 2868 6561 6465 725f  actified(header_
-0001d810: 6861 7368 290a 2020 2020 2020 2020 6966  hash).        if
-0001d820: 2069 735f 6675 6c6c 795f 636f 6d70 6163   is_fully_compac
-0001d830: 7469 6669 6564 2069 7320 4e6f 6e65 206f  tified is None o
-0001d840: 7220 6973 5f66 756c 6c79 5f63 6f6d 7061  r is_fully_compa
-0001d850: 6374 6966 6965 643a 0a20 2020 2020 2020  ctified:.       
-0001d860: 2020 2020 2073 656c 662e 6c6f 672e 696e       self.log.in
-0001d870: 666f 2866 2241 6c72 6561 6479 2063 6f6d  fo(f"Already com
-0001d880: 7061 6374 6966 6965 6420 626c 6f63 6b3a  pactified block:
-0001d890: 207b 6865 6164 6572 5f68 6173 687d 2e20   {header_hash}. 
-0001d8a0: 4967 6e6f 7269 6e67 2e22 290a 2020 2020  Ignoring.").    
-0001d8b0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-0001d8c0: 616c 7365 0a20 2020 2020 2020 2070 6561  alse.        pea
-0001d8d0: 6b20 3d20 7365 6c66 2e62 6c6f 636b 6368  k = self.blockch
-0001d8e0: 6169 6e2e 6765 745f 7065 616b 2829 0a20  ain.get_peak(). 
-0001d8f0: 2020 2020 2020 2069 6620 7065 616b 2069         if peak i
-0001d900: 7320 4e6f 6e65 206f 7220 7065 616b 2e68  s None or peak.h
-0001d910: 6569 6768 7420 2d20 6865 6967 6874 203c  eight - height <
-0001d920: 2035 3a0a 2020 2020 2020 2020 2020 2020   5:.            
-0001d930: 7365 6c66 2e6c 6f67 2e64 6562 7567 2822  self.log.debug("
-0001d940: 5769 6c6c 206e 6f74 2063 6f6d 7061 6374  Will not compact
-0001d950: 6966 7920 7265 6365 6e74 2062 6c6f 636b  ify recent block
-0001d960: 2229 0a20 2020 2020 2020 2020 2020 2072  ").            r
-0001d970: 6574 7572 6e20 4661 6c73 650a 2020 2020  eturn False.    
-0001d980: 2020 2020 6966 2076 6466 5f70 726f 6f66      if vdf_proof
-0001d990: 2e77 6974 6e65 7373 5f74 7970 6520 3e20  .witness_type > 
-0001d9a0: 3020 6f72 206e 6f74 2076 6466 5f70 726f  0 or not vdf_pro
-0001d9b0: 6f66 2e6e 6f72 6d61 6c69 7a65 645f 746f  of.normalized_to
-0001d9c0: 5f69 6465 6e74 6974 793a 0a20 2020 2020  _identity:.     
-0001d9d0: 2020 2020 2020 2073 656c 662e 6c6f 672e         self.log.
-0001d9e0: 6572 726f 7228 6622 5265 6365 6976 6564  error(f"Received
-0001d9f0: 2076 6466 2070 726f 6f66 2069 7320 6e6f   vdf proof is no
-0001da00: 7420 636f 6d70 6163 743a 207b 7664 665f  t compact: {vdf_
-0001da10: 7072 6f6f 667d 2e22 290a 2020 2020 2020  proof}.").      
-0001da20: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
-0001da30: 7365 0a20 2020 2020 2020 2069 6620 6e6f  se.        if no
-0001da40: 7420 7661 6c69 6461 7465 5f76 6466 2876  t validate_vdf(v
-0001da50: 6466 5f70 726f 6f66 2c20 7365 6c66 2e63  df_proof, self.c
-0001da60: 6f6e 7374 616e 7473 2c20 436c 6173 7367  onstants, Classg
-0001da70: 726f 7570 456c 656d 656e 742e 6765 745f  roupElement.get_
-0001da80: 6465 6661 756c 745f 656c 656d 656e 7428  default_element(
-0001da90: 292c 2076 6466 5f69 6e66 6f29 3a0a 2020  ), vdf_info):.  
-0001daa0: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
-0001dab0: 6f67 2e65 7272 6f72 2866 2252 6563 6569  og.error(f"Recei
-0001dac0: 7665 6420 636f 6d70 6163 7420 7664 6620  ved compact vdf 
-0001dad0: 7072 6f6f 6620 6973 206e 6f74 2076 616c  proof is not val
-0001dae0: 6964 3a20 7b76 6466 5f70 726f 6f66 7d2e  id: {vdf_proof}.
-0001daf0: 2229 0a20 2020 2020 2020 2020 2020 2072  ").            r
-0001db00: 6574 7572 6e20 4661 6c73 650a 2020 2020  eturn False.    
-0001db10: 2020 2020 6865 6164 6572 5f62 6c6f 636b      header_block
-0001db20: 203d 2061 7761 6974 2073 656c 662e 626c   = await self.bl
-0001db30: 6f63 6b63 6861 696e 2e67 6574 5f68 6561  ockchain.get_hea
-0001db40: 6465 725f 626c 6f63 6b5f 6279 5f68 6569  der_block_by_hei
-0001db50: 6768 7428 6865 6967 6874 2c20 6865 6164  ght(height, head
-0001db60: 6572 5f68 6173 682c 2074 785f 6669 6c74  er_hash, tx_filt
-0001db70: 6572 3d46 616c 7365 290a 2020 2020 2020  er=False).      
-0001db80: 2020 6966 2068 6561 6465 725f 626c 6f63    if header_bloc
-0001db90: 6b20 6973 204e 6f6e 653a 0a20 2020 2020  k is None:.     
-0001dba0: 2020 2020 2020 2073 656c 662e 6c6f 672e         self.log.
-0001dbb0: 6572 726f 7228 6622 4361 6e27 7420 6669  error(f"Can't fi
-0001dbc0: 6e64 2062 6c6f 636b 2066 6f72 2067 6976  nd block for giv
-0001dbd0: 656e 2063 6f6d 7061 6374 2076 6466 2e20  en compact vdf. 
-0001dbe0: 4865 6967 6874 3a20 7b68 6569 6768 747d  Height: {height}
-0001dbf0: 2048 6561 6465 7220 6861 7368 3a20 7b68   Header hash: {h
-0001dc00: 6561 6465 725f 6861 7368 7d22 290a 2020  eader_hash}").  
-0001dc10: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001dc20: 2046 616c 7365 0a20 2020 2020 2020 2069   False.        i
-0001dc30: 735f 6e65 775f 7072 6f6f 6620 3d20 6177  s_new_proof = aw
-0001dc40: 6169 7420 7365 6c66 2e5f 6e65 6564 735f  ait self._needs_
-0001dc50: 636f 6d70 6163 745f 7072 6f6f 6628 7664  compact_proof(vd
-0001dc60: 665f 696e 666f 2c20 6865 6164 6572 5f62  f_info, header_b
-0001dc70: 6c6f 636b 2c20 6669 656c 645f 7664 6629  lock, field_vdf)
-0001dc80: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-0001dc90: 6973 5f6e 6577 5f70 726f 6f66 3a0a 2020  is_new_proof:.  
-0001dca0: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
-0001dcb0: 6f67 2e69 6e66 6f28 6622 4475 706c 6963  og.info(f"Duplic
-0001dcc0: 6174 6520 636f 6d70 6163 7420 7072 6f6f  ate compact proo
-0001dcd0: 662e 2048 6569 6768 743a 207b 6865 6967  f. Height: {heig
-0001dce0: 6874 7d2e 2048 6561 6465 7220 6861 7368  ht}. Header hash
-0001dcf0: 3a20 7b68 6561 6465 725f 6861 7368 7d2e  : {header_hash}.
-0001dd00: 2229 0a20 2020 2020 2020 2072 6574 7572  ").        retur
-0001dd10: 6e20 6973 5f6e 6577 5f70 726f 6f66 0a0a  n is_new_proof..
-0001dd20: 2020 2020 2320 7265 7475 726e 7320 5472      # returns Tr
-0001dd30: 7565 2069 6620 7765 2065 6e64 6564 2075  ue if we ended u
-0001dd40: 7020 7265 706c 6163 696e 6720 7468 6520  p replacing the 
-0001dd50: 7072 6f6f 662c 2061 6e64 2046 616c 7365  proof, and False
-0001dd60: 206f 7468 6572 7769 7365 0a20 2020 2061   otherwise.    a
-0001dd70: 7379 6e63 2064 6566 205f 7265 706c 6163  sync def _replac
-0001dd80: 655f 7072 6f6f 6628 0a20 2020 2020 2020  e_proof(.       
-0001dd90: 2073 656c 662c 0a20 2020 2020 2020 2076   self,.        v
-0001dda0: 6466 5f69 6e66 6f3a 2056 4446 496e 666f  df_info: VDFInfo
-0001ddb0: 2c0a 2020 2020 2020 2020 7664 665f 7072  ,.        vdf_pr
-0001ddc0: 6f6f 663a 2056 4446 5072 6f6f 662c 0a20  oof: VDFProof,. 
-0001ddd0: 2020 2020 2020 2068 6561 6465 725f 6861         header_ha
-0001dde0: 7368 3a20 6279 7465 7333 322c 0a20 2020  sh: bytes32,.   
-0001ddf0: 2020 2020 2066 6965 6c64 5f76 6466 3a20       field_vdf: 
-0001de00: 436f 6d70 7265 7373 6962 6c65 5644 4646  CompressibleVDFF
-0001de10: 6965 6c64 2c0a 2020 2020 2920 2d3e 2062  ield,.    ) -> b
-0001de20: 6f6f 6c3a 0a20 2020 2020 2020 2062 6c6f  ool:.        blo
-0001de30: 636b 203d 2061 7761 6974 2073 656c 662e  ck = await self.
-0001de40: 626c 6f63 6b5f 7374 6f72 652e 6765 745f  block_store.get_
-0001de50: 6675 6c6c 5f62 6c6f 636b 2868 6561 6465  full_block(heade
-0001de60: 725f 6861 7368 290a 2020 2020 2020 2020  r_hash).        
-0001de70: 6966 2062 6c6f 636b 2069 7320 4e6f 6e65  if block is None
-0001de80: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0001de90: 7475 726e 2046 616c 7365 0a0a 2020 2020  turn False..    
-0001dea0: 2020 2020 6e65 775f 626c 6f63 6b20 3d20      new_block = 
-0001deb0: 4e6f 6e65 0a0a 2020 2020 2020 2020 6966  None..        if
-0001dec0: 2066 6965 6c64 5f76 6466 203d 3d20 436f   field_vdf == Co
-0001ded0: 6d70 7265 7373 6962 6c65 5644 4646 6965  mpressibleVDFFie
-0001dee0: 6c64 2e43 435f 454f 535f 5644 463a 0a20  ld.CC_EOS_VDF:. 
-0001def0: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-0001df00: 6e64 6578 2c20 7375 625f 736c 6f74 2069  ndex, sub_slot i
-0001df10: 6e20 656e 756d 6572 6174 6528 626c 6f63  n enumerate(bloc
-0001df20: 6b2e 6669 6e69 7368 6564 5f73 7562 5f73  k.finished_sub_s
-0001df30: 6c6f 7473 293a 0a20 2020 2020 2020 2020  lots):.         
-0001df40: 2020 2020 2020 2069 6620 7375 625f 736c         if sub_sl
-0001df50: 6f74 2e63 6861 6c6c 656e 6765 5f63 6861  ot.challenge_cha
-0001df60: 696e 2e63 6861 6c6c 656e 6765 5f63 6861  in.challenge_cha
-0001df70: 696e 5f65 6e64 5f6f 665f 736c 6f74 5f76  in_end_of_slot_v
-0001df80: 6466 203d 3d20 7664 665f 696e 666f 3a0a  df == vdf_info:.
-0001df90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dfa0: 2020 2020 6e65 775f 7072 6f6f 6673 203d      new_proofs =
-0001dfb0: 2073 7562 5f73 6c6f 742e 7072 6f6f 6673   sub_slot.proofs
-0001dfc0: 2e72 6570 6c61 6365 2863 6861 6c6c 656e  .replace(challen
-0001dfd0: 6765 5f63 6861 696e 5f73 6c6f 745f 7072  ge_chain_slot_pr
-0001dfe0: 6f6f 663d 7664 665f 7072 6f6f 6629 0a20  oof=vdf_proof). 
-0001dff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e000: 2020 206e 6577 5f73 7562 736c 6f74 203d     new_subslot =
-0001e010: 2073 7562 5f73 6c6f 742e 7265 706c 6163   sub_slot.replac
-0001e020: 6528 7072 6f6f 6673 3d6e 6577 5f70 726f  e(proofs=new_pro
-0001e030: 6f66 7329 0a20 2020 2020 2020 2020 2020  ofs).           
-0001e040: 2020 2020 2020 2020 206e 6577 5f66 696e           new_fin
-0001e050: 6973 6865 645f 7375 6273 6c6f 7473 203d  ished_subslots =
-0001e060: 2062 6c6f 636b 2e66 696e 6973 6865 645f   block.finished_
-0001e070: 7375 625f 736c 6f74 730a 2020 2020 2020  sub_slots.      
-0001e080: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-0001e090: 775f 6669 6e69 7368 6564 5f73 7562 736c  w_finished_subsl
-0001e0a0: 6f74 735b 696e 6465 785d 203d 206e 6577  ots[index] = new
-0001e0b0: 5f73 7562 736c 6f74 0a20 2020 2020 2020  _subslot.       
-0001e0c0: 2020 2020 2020 2020 2020 2020 206e 6577               new
-0001e0d0: 5f62 6c6f 636b 203d 2062 6c6f 636b 2e72  _block = block.r
-0001e0e0: 6570 6c61 6365 2866 696e 6973 6865 645f  eplace(finished_
-0001e0f0: 7375 625f 736c 6f74 733d 6e65 775f 6669  sub_slots=new_fi
-0001e100: 6e69 7368 6564 5f73 7562 736c 6f74 7329  nished_subslots)
-0001e110: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e120: 2020 2020 2062 7265 616b 0a20 2020 2020       break.     
-0001e130: 2020 2069 6620 6669 656c 645f 7664 6620     if field_vdf 
-0001e140: 3d3d 2043 6f6d 7072 6573 7369 626c 6556  == CompressibleV
-0001e150: 4446 4669 656c 642e 4943 435f 454f 535f  DFField.ICC_EOS_
-0001e160: 5644 463a 0a20 2020 2020 2020 2020 2020  VDF:.           
-0001e170: 2066 6f72 2069 6e64 6578 2c20 7375 625f   for index, sub_
-0001e180: 736c 6f74 2069 6e20 656e 756d 6572 6174  slot in enumerat
-0001e190: 6528 626c 6f63 6b2e 6669 6e69 7368 6564  e(block.finished
-0001e1a0: 5f73 7562 5f73 6c6f 7473 293a 0a20 2020  _sub_slots):.   
-0001e1b0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001e1c0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0001e1d0: 2020 2020 2020 7375 625f 736c 6f74 2e69        sub_slot.i
-0001e1e0: 6e66 7573 6564 5f63 6861 6c6c 656e 6765  nfused_challenge
-0001e1f0: 5f63 6861 696e 2069 7320 6e6f 7420 4e6f  _chain is not No
-0001e200: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
-0001e210: 2020 2020 2020 2061 6e64 2073 7562 5f73         and sub_s
-0001e220: 6c6f 742e 696e 6675 7365 645f 6368 616c  lot.infused_chal
-0001e230: 6c65 6e67 655f 6368 6169 6e2e 696e 6675  lenge_chain.infu
-0001e240: 7365 645f 6368 616c 6c65 6e67 655f 6368  sed_challenge_ch
-0001e250: 6169 6e5f 656e 645f 6f66 5f73 6c6f 745f  ain_end_of_slot_
-0001e260: 7664 6620 3d3d 2076 6466 5f69 6e66 6f0a  vdf == vdf_info.
-0001e270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e280: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0001e290: 2020 2020 2020 206e 6577 5f70 726f 6f66         new_proof
-0001e2a0: 7320 3d20 7375 625f 736c 6f74 2e70 726f  s = sub_slot.pro
-0001e2b0: 6f66 732e 7265 706c 6163 6528 696e 6675  ofs.replace(infu
-0001e2c0: 7365 645f 6368 616c 6c65 6e67 655f 6368  sed_challenge_ch
-0001e2d0: 6169 6e5f 736c 6f74 5f70 726f 6f66 3d76  ain_slot_proof=v
-0001e2e0: 6466 5f70 726f 6f66 290a 2020 2020 2020  df_proof).      
-0001e2f0: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-0001e300: 775f 7375 6273 6c6f 7420 3d20 7375 625f  w_subslot = sub_
-0001e310: 736c 6f74 2e72 6570 6c61 6365 2870 726f  slot.replace(pro
-0001e320: 6f66 733d 6e65 775f 7072 6f6f 6673 290a  ofs=new_proofs).
-0001e330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e340: 2020 2020 6e65 775f 6669 6e69 7368 6564      new_finished
-0001e350: 5f73 7562 736c 6f74 7320 3d20 626c 6f63  _subslots = bloc
-0001e360: 6b2e 6669 6e69 7368 6564 5f73 7562 5f73  k.finished_sub_s
-0001e370: 6c6f 7473 0a20 2020 2020 2020 2020 2020  lots.           
-0001e380: 2020 2020 2020 2020 206e 6577 5f66 696e           new_fin
-0001e390: 6973 6865 645f 7375 6273 6c6f 7473 5b69  ished_subslots[i
-0001e3a0: 6e64 6578 5d20 3d20 6e65 775f 7375 6273  ndex] = new_subs
-0001e3b0: 6c6f 740a 2020 2020 2020 2020 2020 2020  lot.            
-0001e3c0: 2020 2020 2020 2020 6e65 775f 626c 6f63          new_bloc
-0001e3d0: 6b20 3d20 626c 6f63 6b2e 7265 706c 6163  k = block.replac
-0001e3e0: 6528 6669 6e69 7368 6564 5f73 7562 5f73  e(finished_sub_s
-0001e3f0: 6c6f 7473 3d6e 6577 5f66 696e 6973 6865  lots=new_finishe
-0001e400: 645f 7375 6273 6c6f 7473 290a 2020 2020  d_subslots).    
-0001e410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e420: 6272 6561 6b0a 2020 2020 2020 2020 6966  break.        if
-0001e430: 2066 6965 6c64 5f76 6466 203d 3d20 436f   field_vdf == Co
-0001e440: 6d70 7265 7373 6962 6c65 5644 4646 6965  mpressibleVDFFie
-0001e450: 6c64 2e43 435f 5350 5f56 4446 3a0a 2020  ld.CC_SP_VDF:.  
-0001e460: 2020 2020 2020 2020 2020 6966 2062 6c6f            if blo
-0001e470: 636b 2e72 6577 6172 645f 6368 6169 6e5f  ck.reward_chain_
-0001e480: 626c 6f63 6b2e 6368 616c 6c65 6e67 655f  block.challenge_
-0001e490: 6368 6169 6e5f 7370 5f76 6466 203d 3d20  chain_sp_vdf == 
-0001e4a0: 7664 665f 696e 666f 3a0a 2020 2020 2020  vdf_info:.      
-0001e4b0: 2020 2020 2020 2020 2020 6173 7365 7274            assert
-0001e4c0: 2062 6c6f 636b 2e63 6861 6c6c 656e 6765   block.challenge
-0001e4d0: 5f63 6861 696e 5f73 705f 7072 6f6f 6620  _chain_sp_proof 
-0001e4e0: 6973 206e 6f74 204e 6f6e 650a 2020 2020  is not None.    
-0001e4f0: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
-0001e500: 626c 6f63 6b20 3d20 626c 6f63 6b2e 7265  block = block.re
-0001e510: 706c 6163 6528 6368 616c 6c65 6e67 655f  place(challenge_
-0001e520: 6368 6169 6e5f 7370 5f70 726f 6f66 3d76  chain_sp_proof=v
-0001e530: 6466 5f70 726f 6f66 290a 2020 2020 2020  df_proof).      
-0001e540: 2020 6966 2066 6965 6c64 5f76 6466 203d    if field_vdf =
-0001e550: 3d20 436f 6d70 7265 7373 6962 6c65 5644  = CompressibleVD
-0001e560: 4646 6965 6c64 2e43 435f 4950 5f56 4446  FField.CC_IP_VDF
-0001e570: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0001e580: 2062 6c6f 636b 2e72 6577 6172 645f 6368   block.reward_ch
-0001e590: 6169 6e5f 626c 6f63 6b2e 6368 616c 6c65  ain_block.challe
-0001e5a0: 6e67 655f 6368 6169 6e5f 6970 5f76 6466  nge_chain_ip_vdf
-0001e5b0: 203d 3d20 7664 665f 696e 666f 3a0a 2020   == vdf_info:.  
-0001e5c0: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-0001e5d0: 775f 626c 6f63 6b20 3d20 626c 6f63 6b2e  w_block = block.
-0001e5e0: 7265 706c 6163 6528 6368 616c 6c65 6e67  replace(challeng
-0001e5f0: 655f 6368 6169 6e5f 6970 5f70 726f 6f66  e_chain_ip_proof
-0001e600: 3d76 6466 5f70 726f 6f66 290a 2020 2020  =vdf_proof).    
-0001e610: 2020 2020 6966 206e 6577 5f62 6c6f 636b      if new_block
-0001e620: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-0001e630: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
-0001e640: 7365 0a20 2020 2020 2020 2061 7379 6e63  se.        async
-0001e650: 2077 6974 6820 7365 6c66 2e64 625f 7772   with self.db_wr
-0001e660: 6170 7065 722e 7772 6974 6572 2829 3a0a  apper.writer():.
-0001e670: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-0001e680: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e690: 2061 7761 6974 2073 656c 662e 626c 6f63   await self.bloc
-0001e6a0: 6b5f 7374 6f72 652e 7265 706c 6163 655f  k_store.replace_
-0001e6b0: 7072 6f6f 6628 6865 6164 6572 5f68 6173  proof(header_has
-0001e6c0: 682c 206e 6577 5f62 6c6f 636b 290a 2020  h, new_block).  
-0001e6d0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0001e6e0: 7475 726e 2054 7275 650a 2020 2020 2020  turn True.      
-0001e6f0: 2020 2020 2020 6578 6365 7074 2042 6173        except Bas
-0001e700: 6545 7863 6570 7469 6f6e 2061 7320 653a  eException as e:
-0001e710: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e720: 2073 656c 662e 6c6f 672e 6572 726f 7228   self.log.error(
-0001e730: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e740: 2020 2020 2066 225f 7265 706c 6163 655f       f"_replace_
-0001e750: 7072 6f6f 6620 6572 726f 7220 7768 696c  proof error whil
-0001e760: 6520 6164 6469 6e67 2062 6c6f 636b 207b  e adding block {
-0001e770: 626c 6f63 6b2e 6865 6164 6572 5f68 6173  block.header_has
-0001e780: 687d 2068 6569 6768 7420 7b62 6c6f 636b  h} height {block
-0001e790: 2e68 6569 6768 747d 2c22 0a20 2020 2020  .height},".     
-0001e7a0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001e7b0: 2220 726f 6c6c 696e 6720 6261 636b 3a20  " rolling back: 
-0001e7c0: 7b65 7d20 7b74 7261 6365 6261 636b 2e66  {e} {traceback.f
-0001e7d0: 6f72 6d61 745f 6578 6328 297d 220a 2020  ormat_exc()}".  
-0001e7e0: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-0001e7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e800: 7261 6973 650a 0a20 2020 2061 7379 6e63  raise..    async
-0001e810: 2064 6566 2061 6464 5f63 6f6d 7061 6374   def add_compact
-0001e820: 5f70 726f 6f66 5f6f 665f 7469 6d65 2873  _proof_of_time(s
-0001e830: 656c 662c 2072 6571 7565 7374 3a20 7469  elf, request: ti
-0001e840: 6d65 6c6f 7264 5f70 726f 746f 636f 6c2e  melord_protocol.
-0001e850: 5265 7370 6f6e 6443 6f6d 7061 6374 5072  RespondCompactPr
-0001e860: 6f6f 664f 6654 696d 6529 202d 3e20 4e6f  oofOfTime) -> No
-0001e870: 6e65 3a0a 2020 2020 2020 2020 7065 616b  ne:.        peak
-0001e880: 203d 2073 656c 662e 626c 6f63 6b63 6861   = self.blockcha
-0001e890: 696e 2e67 6574 5f70 6561 6b28 290a 2020  in.get_peak().  
-0001e8a0: 2020 2020 2020 6966 2070 6561 6b20 6973        if peak is
-0001e8b0: 204e 6f6e 6520 6f72 2070 6561 6b2e 6865   None or peak.he
-0001e8c0: 6967 6874 202d 2072 6571 7565 7374 2e68  ight - request.h
-0001e8d0: 6569 6768 7420 3c20 353a 0a20 2020 2020  eight < 5:.     
-0001e8e0: 2020 2020 2020 2073 656c 662e 6c6f 672e         self.log.
-0001e8f0: 696e 666f 2866 2249 676e 6f72 696e 6720  info(f"Ignoring 
-0001e900: 6164 645f 636f 6d70 6163 745f 7072 6f6f  add_compact_proo
-0001e910: 665f 6f66 5f74 696d 652c 2068 6569 6768  f_of_time, heigh
-0001e920: 7420 7b72 6571 7565 7374 2e68 6569 6768  t {request.heigh
-0001e930: 747d 2074 6f6f 2072 6563 656e 742e 2229  t} too recent.")
-0001e940: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0001e950: 7572 6e20 4e6f 6e65 0a0a 2020 2020 2020  urn None..      
-0001e960: 2020 6669 656c 645f 7664 6620 3d20 436f    field_vdf = Co
-0001e970: 6d70 7265 7373 6962 6c65 5644 4646 6965  mpressibleVDFFie
-0001e980: 6c64 2869 6e74 2872 6571 7565 7374 2e66  ld(int(request.f
-0001e990: 6965 6c64 5f76 6466 2929 0a20 2020 2020  ield_vdf)).     
-0001e9a0: 2020 2069 6620 6e6f 7420 6177 6169 7420     if not await 
-0001e9b0: 7365 6c66 2e5f 6361 6e5f 6163 6365 7074  self._can_accept
-0001e9c0: 5f63 6f6d 7061 6374 5f70 726f 6f66 280a  _compact_proof(.
-0001e9d0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0001e9e0: 6573 742e 7664 665f 696e 666f 2c20 7265  est.vdf_info, re
-0001e9f0: 7175 6573 742e 7664 665f 7072 6f6f 662c  quest.vdf_proof,
-0001ea00: 2072 6571 7565 7374 2e68 6569 6768 742c   request.height,
-0001ea10: 2072 6571 7565 7374 2e68 6561 6465 725f   request.header_
-0001ea20: 6861 7368 2c20 6669 656c 645f 7664 660a  hash, field_vdf.
-0001ea30: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
-0001ea40: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
-0001ea50: 6e65 0a20 2020 2020 2020 2061 7379 6e63  ne.        async
-0001ea60: 2077 6974 6820 7365 6c66 2e62 6c6f 636b   with self.block
-0001ea70: 6368 6169 6e2e 636f 6d70 6163 745f 7072  chain.compact_pr
-0001ea80: 6f6f 665f 6c6f 636b 3a0a 2020 2020 2020  oof_lock:.      
-0001ea90: 2020 2020 2020 7265 706c 6163 6564 203d        replaced =
-0001eaa0: 2061 7761 6974 2073 656c 662e 5f72 6570   await self._rep
-0001eab0: 6c61 6365 5f70 726f 6f66 2872 6571 7565  lace_proof(reque
-0001eac0: 7374 2e76 6466 5f69 6e66 6f2c 2072 6571  st.vdf_info, req
-0001ead0: 7565 7374 2e76 6466 5f70 726f 6f66 2c20  uest.vdf_proof, 
-0001eae0: 7265 7175 6573 742e 6865 6164 6572 5f68  request.header_h
-0001eaf0: 6173 682c 2066 6965 6c64 5f76 6466 290a  ash, field_vdf).
-0001eb00: 2020 2020 2020 2020 6966 206e 6f74 2072          if not r
-0001eb10: 6570 6c61 6365 643a 0a20 2020 2020 2020  eplaced:.       
-0001eb20: 2020 2020 2073 656c 662e 6c6f 672e 6572       self.log.er
-0001eb30: 726f 7228 6622 436f 756c 6420 6e6f 7420  ror(f"Could not 
-0001eb40: 7265 706c 6163 6520 636f 6d70 6163 7420  replace compact 
-0001eb50: 7072 6f6f 663a 207b 7265 7175 6573 742e  proof: {request.
-0001eb60: 6865 6967 6874 7d22 290a 2020 2020 2020  height}").      
-0001eb70: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
-0001eb80: 650a 2020 2020 2020 2020 7365 6c66 2e6c  e.        self.l
-0001eb90: 6f67 2e69 6e66 6f28 6622 5265 706c 6163  og.info(f"Replac
-0001eba0: 6564 2063 6f6d 7061 6374 2070 726f 6f66  ed compact proof
-0001ebb0: 2061 7420 6865 6967 6874 207b 7265 7175   at height {requ
-0001ebc0: 6573 742e 6865 6967 6874 7d22 290a 2020  est.height}").  
-0001ebd0: 2020 2020 2020 6d73 6720 3d20 6d61 6b65        msg = make
-0001ebe0: 5f6d 7367 280a 2020 2020 2020 2020 2020  _msg(.          
-0001ebf0: 2020 5072 6f74 6f63 6f6c 4d65 7373 6167    ProtocolMessag
-0001ec00: 6554 7970 6573 2e6e 6577 5f63 6f6d 7061  eTypes.new_compa
-0001ec10: 6374 5f76 6466 2c0a 2020 2020 2020 2020  ct_vdf,.        
-0001ec20: 2020 2020 6675 6c6c 5f6e 6f64 655f 7072      full_node_pr
-0001ec30: 6f74 6f63 6f6c 2e4e 6577 436f 6d70 6163  otocol.NewCompac
-0001ec40: 7456 4446 2872 6571 7565 7374 2e68 6569  tVDF(request.hei
-0001ec50: 6768 742c 2072 6571 7565 7374 2e68 6561  ght, request.hea
-0001ec60: 6465 725f 6861 7368 2c20 7265 7175 6573  der_hash, reques
-0001ec70: 742e 6669 656c 645f 7664 662c 2072 6571  t.field_vdf, req
-0001ec80: 7565 7374 2e76 6466 5f69 6e66 6f29 2c0a  uest.vdf_info),.
-0001ec90: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0001eca0: 2020 6966 2073 656c 662e 5f73 6572 7665    if self._serve
-0001ecb0: 7220 6973 206e 6f74 204e 6f6e 653a 0a20  r is not None:. 
-0001ecc0: 2020 2020 2020 2020 2020 2061 7761 6974             await
-0001ecd0: 2073 656c 662e 7365 7276 6572 2e73 656e   self.server.sen
-0001ece0: 645f 746f 5f61 6c6c 285b 6d73 675d 2c20  d_to_all([msg], 
-0001ecf0: 4e6f 6465 5479 7065 2e46 554c 4c5f 4e4f  NodeType.FULL_NO
-0001ed00: 4445 290a 0a20 2020 2061 7379 6e63 2064  DE)..    async d
-0001ed10: 6566 206e 6577 5f63 6f6d 7061 6374 5f76  ef new_compact_v
-0001ed20: 6466 2873 656c 662c 2072 6571 7565 7374  df(self, request
-0001ed30: 3a20 6675 6c6c 5f6e 6f64 655f 7072 6f74  : full_node_prot
-0001ed40: 6f63 6f6c 2e4e 6577 436f 6d70 6163 7456  ocol.NewCompactV
-0001ed50: 4446 2c20 7065 6572 3a20 5753 4368 6961  DF, peer: WSChia
-0001ed60: 436f 6e6e 6563 7469 6f6e 2920 2d3e 204e  Connection) -> N
-0001ed70: 6f6e 653a 0a20 2020 2020 2020 2070 6561  one:.        pea
-0001ed80: 6b20 3d20 7365 6c66 2e62 6c6f 636b 6368  k = self.blockch
-0001ed90: 6169 6e2e 6765 745f 7065 616b 2829 0a20  ain.get_peak(). 
-0001eda0: 2020 2020 2020 2069 6620 7065 616b 2069         if peak i
-0001edb0: 7320 4e6f 6e65 206f 7220 7065 616b 2e68  s None or peak.h
-0001edc0: 6569 6768 7420 2d20 7265 7175 6573 742e  eight - request.
-0001edd0: 6865 6967 6874 203c 2035 3a0a 2020 2020  height < 5:.    
-0001ede0: 2020 2020 2020 2020 7365 6c66 2e6c 6f67          self.log
-0001edf0: 2e69 6e66 6f28 6622 4967 6e6f 7269 6e67  .info(f"Ignoring
-0001ee00: 206e 6577 5f63 6f6d 7061 6374 5f76 6466   new_compact_vdf
-0001ee10: 2c20 6865 6967 6874 207b 7265 7175 6573  , height {reques
-0001ee20: 742e 6865 6967 6874 7d20 746f 6f20 7265  t.height} too re
-0001ee30: 6365 6e74 2e22 290a 2020 2020 2020 2020  cent.").        
-0001ee40: 2020 2020 7265 7475 726e 204e 6f6e 650a      return None.
-0001ee50: 2020 2020 2020 2020 6973 5f66 756c 6c79          is_fully
-0001ee60: 5f63 6f6d 7061 6374 6966 6965 6420 3d20  _compactified = 
-0001ee70: 6177 6169 7420 7365 6c66 2e62 6c6f 636b  await self.block
-0001ee80: 5f73 746f 7265 2e69 735f 6675 6c6c 795f  _store.is_fully_
-0001ee90: 636f 6d70 6163 7469 6669 6564 2872 6571  compactified(req
-0001eea0: 7565 7374 2e68 6561 6465 725f 6861 7368  uest.header_hash
-0001eeb0: 290a 2020 2020 2020 2020 6966 2069 735f  ).        if is_
-0001eec0: 6675 6c6c 795f 636f 6d70 6163 7469 6669  fully_compactifi
-0001eed0: 6564 2069 7320 4e6f 6e65 206f 7220 6973  ed is None or is
-0001eee0: 5f66 756c 6c79 5f63 6f6d 7061 6374 6966  _fully_compactif
-0001eef0: 6965 643a 0a20 2020 2020 2020 2020 2020  ied:.           
-0001ef00: 2072 6574 7572 6e20 4e6f 6e65 0a20 2020   return None.   
-0001ef10: 2020 2020 2068 6561 6465 725f 626c 6f63       header_bloc
-0001ef20: 6b20 3d20 6177 6169 7420 7365 6c66 2e62  k = await self.b
-0001ef30: 6c6f 636b 6368 6169 6e2e 6765 745f 6865  lockchain.get_he
-0001ef40: 6164 6572 5f62 6c6f 636b 5f62 795f 6865  ader_block_by_he
-0001ef50: 6967 6874 280a 2020 2020 2020 2020 2020  ight(.          
-0001ef60: 2020 7265 7175 6573 742e 6865 6967 6874    request.height
-0001ef70: 2c20 7265 7175 6573 742e 6865 6164 6572  , request.header
-0001ef80: 5f68 6173 682c 2074 785f 6669 6c74 6572  _hash, tx_filter
-0001ef90: 3d46 616c 7365 0a20 2020 2020 2020 2029  =False.        )
-0001efa0: 0a20 2020 2020 2020 2069 6620 6865 6164  .        if head
-0001efb0: 6572 5f62 6c6f 636b 2069 7320 4e6f 6e65  er_block is None
-0001efc0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0001efd0: 7475 726e 204e 6f6e 650a 2020 2020 2020  turn None.      
-0001efe0: 2020 6669 656c 645f 7664 6620 3d20 436f    field_vdf = Co
-0001eff0: 6d70 7265 7373 6962 6c65 5644 4646 6965  mpressibleVDFFie
-0001f000: 6c64 2869 6e74 2872 6571 7565 7374 2e66  ld(int(request.f
-0001f010: 6965 6c64 5f76 6466 2929 0a20 2020 2020  ield_vdf)).     
-0001f020: 2020 2069 6620 6177 6169 7420 7365 6c66     if await self
-0001f030: 2e5f 6e65 6564 735f 636f 6d70 6163 745f  ._needs_compact_
-0001f040: 7072 6f6f 6628 7265 7175 6573 742e 7664  proof(request.vd
-0001f050: 665f 696e 666f 2c20 6865 6164 6572 5f62  f_info, header_b
-0001f060: 6c6f 636b 2c20 6669 656c 645f 7664 6629  lock, field_vdf)
-0001f070: 3a0a 2020 2020 2020 2020 2020 2020 7065  :.            pe
-0001f080: 6572 5f72 6571 7565 7374 203d 2066 756c  er_request = ful
-0001f090: 6c5f 6e6f 6465 5f70 726f 746f 636f 6c2e  l_node_protocol.
-0001f0a0: 5265 7175 6573 7443 6f6d 7061 6374 5644  RequestCompactVD
-0001f0b0: 4628 0a20 2020 2020 2020 2020 2020 2020  F(.             
-0001f0c0: 2020 2072 6571 7565 7374 2e68 6569 6768     request.heigh
-0001f0d0: 742c 2072 6571 7565 7374 2e68 6561 6465  t, request.heade
-0001f0e0: 725f 6861 7368 2c20 7265 7175 6573 742e  r_hash, request.
-0001f0f0: 6669 656c 645f 7664 662c 2072 6571 7565  field_vdf, reque
-0001f100: 7374 2e76 6466 5f69 6e66 6f0a 2020 2020  st.vdf_info.    
-0001f110: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0001f120: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-0001f130: 2061 7761 6974 2070 6565 722e 6361 6c6c   await peer.call
-0001f140: 5f61 7069 2846 756c 6c4e 6f64 6541 5049  _api(FullNodeAPI
-0001f150: 2e72 6571 7565 7374 5f63 6f6d 7061 6374  .request_compact
-0001f160: 5f76 6466 2c20 7065 6572 5f72 6571 7565  _vdf, peer_reque
-0001f170: 7374 2c20 7469 6d65 6f75 743d 3130 290a  st, timeout=10).
-0001f180: 2020 2020 2020 2020 2020 2020 6966 2072              if r
-0001f190: 6573 706f 6e73 6520 6973 206e 6f74 204e  esponse is not N
-0001f1a0: 6f6e 6520 616e 6420 6973 696e 7374 616e  one and isinstan
-0001f1b0: 6365 2872 6573 706f 6e73 652c 2066 756c  ce(response, ful
-0001f1c0: 6c5f 6e6f 6465 5f70 726f 746f 636f 6c2e  l_node_protocol.
-0001f1d0: 5265 7370 6f6e 6443 6f6d 7061 6374 5644  RespondCompactVD
-0001f1e0: 4629 3a0a 2020 2020 2020 2020 2020 2020  F):.            
-0001f1f0: 2020 2020 6177 6169 7420 7365 6c66 2e61      await self.a
-0001f200: 6464 5f63 6f6d 7061 6374 5f76 6466 2872  dd_compact_vdf(r
-0001f210: 6573 706f 6e73 652c 2070 6565 7229 0a0a  esponse, peer)..
-0001f220: 2020 2020 6173 796e 6320 6465 6620 7265      async def re
-0001f230: 7175 6573 745f 636f 6d70 6163 745f 7664  quest_compact_vd
-0001f240: 6628 7365 6c66 2c20 7265 7175 6573 743a  f(self, request:
-0001f250: 2066 756c 6c5f 6e6f 6465 5f70 726f 746f   full_node_proto
-0001f260: 636f 6c2e 5265 7175 6573 7443 6f6d 7061  col.RequestCompa
-0001f270: 6374 5644 462c 2070 6565 723a 2057 5343  ctVDF, peer: WSC
-0001f280: 6869 6143 6f6e 6e65 6374 696f 6e29 202d  hiaConnection) -
-0001f290: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-0001f2a0: 6865 6164 6572 5f62 6c6f 636b 203d 2061  header_block = a
-0001f2b0: 7761 6974 2073 656c 662e 626c 6f63 6b63  wait self.blockc
-0001f2c0: 6861 696e 2e67 6574 5f68 6561 6465 725f  hain.get_header_
-0001f2d0: 626c 6f63 6b5f 6279 5f68 6569 6768 7428  block_by_height(
-0001f2e0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0001f2f0: 7565 7374 2e68 6569 6768 742c 2072 6571  uest.height, req
-0001f300: 7565 7374 2e68 6561 6465 725f 6861 7368  uest.header_hash
-0001f310: 2c20 7478 5f66 696c 7465 723d 4661 6c73  , tx_filter=Fals
-0001f320: 650a 2020 2020 2020 2020 290a 2020 2020  e.        ).    
-0001f330: 2020 2020 6966 2068 6561 6465 725f 626c      if header_bl
-0001f340: 6f63 6b20 6973 204e 6f6e 653a 0a20 2020  ock is None:.   
-0001f350: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0001f360: 4e6f 6e65 0a20 2020 2020 2020 2076 6466  None.        vdf
-0001f370: 5f70 726f 6f66 3a20 4f70 7469 6f6e 616c  _proof: Optional
-0001f380: 5b56 4446 5072 6f6f 665d 203d 204e 6f6e  [VDFProof] = Non
-0001f390: 650a 2020 2020 2020 2020 6669 656c 645f  e.        field_
-0001f3a0: 7664 6620 3d20 436f 6d70 7265 7373 6962  vdf = Compressib
-0001f3b0: 6c65 5644 4646 6965 6c64 2869 6e74 2872  leVDFField(int(r
-0001f3c0: 6571 7565 7374 2e66 6965 6c64 5f76 6466  equest.field_vdf
-0001f3d0: 2929 0a20 2020 2020 2020 2069 6620 6669  )).        if fi
-0001f3e0: 656c 645f 7664 6620 3d3d 2043 6f6d 7072  eld_vdf == Compr
-0001f3f0: 6573 7369 626c 6556 4446 4669 656c 642e  essibleVDFField.
-0001f400: 4343 5f45 4f53 5f56 4446 3a0a 2020 2020  CC_EOS_VDF:.    
-0001f410: 2020 2020 2020 2020 666f 7220 7375 625f          for sub_
-0001f420: 736c 6f74 2069 6e20 6865 6164 6572 5f62  slot in header_b
-0001f430: 6c6f 636b 2e66 696e 6973 6865 645f 7375  lock.finished_su
-0001f440: 625f 736c 6f74 733a 0a20 2020 2020 2020  b_slots:.       
-0001f450: 2020 2020 2020 2020 2069 6620 7375 625f           if sub_
-0001f460: 736c 6f74 2e63 6861 6c6c 656e 6765 5f63  slot.challenge_c
-0001f470: 6861 696e 2e63 6861 6c6c 656e 6765 5f63  hain.challenge_c
-0001f480: 6861 696e 5f65 6e64 5f6f 665f 736c 6f74  hain_end_of_slot
-0001f490: 5f76 6466 203d 3d20 7265 7175 6573 742e  _vdf == request.
-0001f4a0: 7664 665f 696e 666f 3a0a 2020 2020 2020  vdf_info:.      
-0001f4b0: 2020 2020 2020 2020 2020 2020 2020 7664                vd
-0001f4c0: 665f 7072 6f6f 6620 3d20 7375 625f 736c  f_proof = sub_sl
-0001f4d0: 6f74 2e70 726f 6f66 732e 6368 616c 6c65  ot.proofs.challe
-0001f4e0: 6e67 655f 6368 6169 6e5f 736c 6f74 5f70  nge_chain_slot_p
-0001f4f0: 726f 6f66 0a20 2020 2020 2020 2020 2020  roof.           
-0001f500: 2020 2020 2020 2020 2062 7265 616b 0a20           break. 
-0001f510: 2020 2020 2020 2069 6620 6669 656c 645f         if field_
-0001f520: 7664 6620 3d3d 2043 6f6d 7072 6573 7369  vdf == Compressi
-0001f530: 626c 6556 4446 4669 656c 642e 4943 435f  bleVDFField.ICC_
-0001f540: 454f 535f 5644 463a 0a20 2020 2020 2020  EOS_VDF:.       
-0001f550: 2020 2020 2066 6f72 2073 7562 5f73 6c6f       for sub_slo
-0001f560: 7420 696e 2068 6561 6465 725f 626c 6f63  t in header_bloc
-0001f570: 6b2e 6669 6e69 7368 6564 5f73 7562 5f73  k.finished_sub_s
-0001f580: 6c6f 7473 3a0a 2020 2020 2020 2020 2020  lots:.          
-0001f590: 2020 2020 2020 6966 2028 0a20 2020 2020        if (.     
-0001f5a0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001f5b0: 7562 5f73 6c6f 742e 696e 6675 7365 645f  ub_slot.infused_
-0001f5c0: 6368 616c 6c65 6e67 655f 6368 6169 6e20  challenge_chain 
-0001f5d0: 6973 206e 6f74 204e 6f6e 650a 2020 2020  is not None.    
-0001f5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f5f0: 616e 6420 7375 625f 736c 6f74 2e69 6e66  and sub_slot.inf
-0001f600: 7573 6564 5f63 6861 6c6c 656e 6765 5f63  used_challenge_c
-0001f610: 6861 696e 2e69 6e66 7573 6564 5f63 6861  hain.infused_cha
-0001f620: 6c6c 656e 6765 5f63 6861 696e 5f65 6e64  llenge_chain_end
-0001f630: 5f6f 665f 736c 6f74 5f76 6466 203d 3d20  _of_slot_vdf == 
-0001f640: 7265 7175 6573 742e 7664 665f 696e 666f  request.vdf_info
-0001f650: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f660: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
-0001f670: 2020 2020 2020 2020 7664 665f 7072 6f6f          vdf_proo
-0001f680: 6620 3d20 7375 625f 736c 6f74 2e70 726f  f = sub_slot.pro
-0001f690: 6f66 732e 696e 6675 7365 645f 6368 616c  ofs.infused_chal
-0001f6a0: 6c65 6e67 655f 6368 6169 6e5f 736c 6f74  lenge_chain_slot
-0001f6b0: 5f70 726f 6f66 0a20 2020 2020 2020 2020  _proof.         
-0001f6c0: 2020 2020 2020 2020 2020 2062 7265 616b             break
-0001f6d0: 0a20 2020 2020 2020 2069 6620 280a 2020  .        if (.  
-0001f6e0: 2020 2020 2020 2020 2020 6669 656c 645f            field_
-0001f6f0: 7664 6620 3d3d 2043 6f6d 7072 6573 7369  vdf == Compressi
-0001f700: 626c 6556 4446 4669 656c 642e 4343 5f53  bleVDFField.CC_S
-0001f710: 505f 5644 460a 2020 2020 2020 2020 2020  P_VDF.          
-0001f720: 2020 616e 6420 6865 6164 6572 5f62 6c6f    and header_blo
-0001f730: 636b 2e72 6577 6172 645f 6368 6169 6e5f  ck.reward_chain_
-0001f740: 626c 6f63 6b2e 6368 616c 6c65 6e67 655f  block.challenge_
-0001f750: 6368 6169 6e5f 7370 5f76 6466 203d 3d20  chain_sp_vdf == 
-0001f760: 7265 7175 6573 742e 7664 665f 696e 666f  request.vdf_info
-0001f770: 0a20 2020 2020 2020 2029 3a0a 2020 2020  .        ):.    
-0001f780: 2020 2020 2020 2020 7664 665f 7072 6f6f          vdf_proo
-0001f790: 6620 3d20 6865 6164 6572 5f62 6c6f 636b  f = header_block
-0001f7a0: 2e63 6861 6c6c 656e 6765 5f63 6861 696e  .challenge_chain
-0001f7b0: 5f73 705f 7072 6f6f 660a 2020 2020 2020  _sp_proof.      
-0001f7c0: 2020 6966 2028 0a20 2020 2020 2020 2020    if (.         
-0001f7d0: 2020 2066 6965 6c64 5f76 6466 203d 3d20     field_vdf == 
-0001f7e0: 436f 6d70 7265 7373 6962 6c65 5644 4646  CompressibleVDFF
-0001f7f0: 6965 6c64 2e43 435f 4950 5f56 4446 0a20  ield.CC_IP_VDF. 
-0001f800: 2020 2020 2020 2020 2020 2061 6e64 2068             and h
-0001f810: 6561 6465 725f 626c 6f63 6b2e 7265 7761  eader_block.rewa
-0001f820: 7264 5f63 6861 696e 5f62 6c6f 636b 2e63  rd_chain_block.c
-0001f830: 6861 6c6c 656e 6765 5f63 6861 696e 5f69  hallenge_chain_i
-0001f840: 705f 7664 6620 3d3d 2072 6571 7565 7374  p_vdf == request
-0001f850: 2e76 6466 5f69 6e66 6f0a 2020 2020 2020  .vdf_info.      
-0001f860: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
-0001f870: 2076 6466 5f70 726f 6f66 203d 2068 6561   vdf_proof = hea
-0001f880: 6465 725f 626c 6f63 6b2e 6368 616c 6c65  der_block.challe
-0001f890: 6e67 655f 6368 6169 6e5f 6970 5f70 726f  nge_chain_ip_pro
-0001f8a0: 6f66 0a20 2020 2020 2020 2069 6620 7664  of.        if vd
-0001f8b0: 665f 7072 6f6f 6620 6973 204e 6f6e 6520  f_proof is None 
-0001f8c0: 6f72 2076 6466 5f70 726f 6f66 2e77 6974  or vdf_proof.wit
-0001f8d0: 6e65 7373 5f74 7970 6520 3e20 3020 6f72  ness_type > 0 or
-0001f8e0: 206e 6f74 2076 6466 5f70 726f 6f66 2e6e   not vdf_proof.n
-0001f8f0: 6f72 6d61 6c69 7a65 645f 746f 5f69 6465  ormalized_to_ide
-0001f900: 6e74 6974 793a 0a20 2020 2020 2020 2020  ntity:.         
-0001f910: 2020 2073 656c 662e 6c6f 672e 6572 726f     self.log.erro
-0001f920: 7228 6622 7b70 6565 727d 2072 6571 7565  r(f"{peer} reque
-0001f930: 7374 6564 2063 6f6d 7061 6374 2076 6466  sted compact vdf
-0001f940: 2077 6520 646f 6e27 7420 6861 7665 2c20   we don't have, 
-0001f950: 6865 6967 6874 3a20 7b72 6571 7565 7374  height: {request
-0001f960: 2e68 6569 6768 747d 2e22 290a 2020 2020  .height}.").    
-0001f970: 2020 2020 2020 2020 7265 7475 726e 204e          return N
-0001f980: 6f6e 650a 2020 2020 2020 2020 636f 6d70  one.        comp
-0001f990: 6163 745f 7664 6620 3d20 6675 6c6c 5f6e  act_vdf = full_n
-0001f9a0: 6f64 655f 7072 6f74 6f63 6f6c 2e52 6573  ode_protocol.Res
-0001f9b0: 706f 6e64 436f 6d70 6163 7456 4446 280a  pondCompactVDF(.
-0001f9c0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0001f9d0: 6573 742e 6865 6967 6874 2c0a 2020 2020  est.height,.    
-0001f9e0: 2020 2020 2020 2020 7265 7175 6573 742e          request.
-0001f9f0: 6865 6164 6572 5f68 6173 682c 0a20 2020  header_hash,.   
-0001fa00: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0001fa10: 2e66 6965 6c64 5f76 6466 2c0a 2020 2020  .field_vdf,.    
-0001fa20: 2020 2020 2020 2020 7265 7175 6573 742e          request.
-0001fa30: 7664 665f 696e 666f 2c0a 2020 2020 2020  vdf_info,.      
-0001fa40: 2020 2020 2020 7664 665f 7072 6f6f 662c        vdf_proof,
-0001fa50: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-0001fa60: 2020 206d 7367 203d 206d 616b 655f 6d73     msg = make_ms
-0001fa70: 6728 5072 6f74 6f63 6f6c 4d65 7373 6167  g(ProtocolMessag
-0001fa80: 6554 7970 6573 2e72 6573 706f 6e64 5f63  eTypes.respond_c
-0001fa90: 6f6d 7061 6374 5f76 6466 2c20 636f 6d70  ompact_vdf, comp
-0001faa0: 6163 745f 7664 6629 0a20 2020 2020 2020  act_vdf).       
-0001fab0: 2061 7761 6974 2070 6565 722e 7365 6e64   await peer.send
-0001fac0: 5f6d 6573 7361 6765 286d 7367 290a 0a20  _message(msg).. 
-0001fad0: 2020 2061 7379 6e63 2064 6566 2061 6464     async def add
-0001fae0: 5f63 6f6d 7061 6374 5f76 6466 2873 656c  _compact_vdf(sel
-0001faf0: 662c 2072 6571 7565 7374 3a20 6675 6c6c  f, request: full
-0001fb00: 5f6e 6f64 655f 7072 6f74 6f63 6f6c 2e52  _node_protocol.R
-0001fb10: 6573 706f 6e64 436f 6d70 6163 7456 4446  espondCompactVDF
-0001fb20: 2c20 7065 6572 3a20 5753 4368 6961 436f  , peer: WSChiaCo
-0001fb30: 6e6e 6563 7469 6f6e 2920 2d3e 204e 6f6e  nnection) -> Non
-0001fb40: 653a 0a20 2020 2020 2020 2066 6965 6c64  e:.        field
-0001fb50: 5f76 6466 203d 2043 6f6d 7072 6573 7369  _vdf = Compressi
-0001fb60: 626c 6556 4446 4669 656c 6428 696e 7428  bleVDFField(int(
-0001fb70: 7265 7175 6573 742e 6669 656c 645f 7664  request.field_vd
-0001fb80: 6629 290a 2020 2020 2020 2020 6966 206e  f)).        if n
-0001fb90: 6f74 2061 7761 6974 2073 656c 662e 5f63  ot await self._c
-0001fba0: 616e 5f61 6363 6570 745f 636f 6d70 6163  an_accept_compac
-0001fbb0: 745f 7072 6f6f 6628 0a20 2020 2020 2020  t_proof(.       
-0001fbc0: 2020 2020 2072 6571 7565 7374 2e76 6466       request.vdf
-0001fbd0: 5f69 6e66 6f2c 2072 6571 7565 7374 2e76  _info, request.v
-0001fbe0: 6466 5f70 726f 6f66 2c20 7265 7175 6573  df_proof, reques
-0001fbf0: 742e 6865 6967 6874 2c20 7265 7175 6573  t.height, reques
-0001fc00: 742e 6865 6164 6572 5f68 6173 682c 2066  t.header_hash, f
-0001fc10: 6965 6c64 5f76 6466 0a20 2020 2020 2020  ield_vdf.       
-0001fc20: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
-0001fc30: 7265 7475 726e 204e 6f6e 650a 2020 2020  return None.    
-0001fc40: 2020 2020 6173 796e 6320 7769 7468 2073      async with s
-0001fc50: 656c 662e 626c 6f63 6b63 6861 696e 2e63  elf.blockchain.c
-0001fc60: 6f6d 7061 6374 5f70 726f 6f66 5f6c 6f63  ompact_proof_loc
-0001fc70: 6b3a 0a20 2020 2020 2020 2020 2020 2069  k:.            i
-0001fc80: 6620 7365 6c66 2e62 6c6f 636b 6368 6169  f self.blockchai
-0001fc90: 6e2e 7365 656e 5f63 6f6d 7061 6374 5f70  n.seen_compact_p
-0001fca0: 726f 6f66 7328 7265 7175 6573 742e 7664  roofs(request.vd
-0001fcb0: 665f 696e 666f 2c20 7265 7175 6573 742e  f_info, request.
-0001fcc0: 6865 6967 6874 293a 0a20 2020 2020 2020  height):.       
-0001fcd0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0001fce0: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-0001fcf0: 2072 6570 6c61 6365 6420 3d20 6177 6169   replaced = awai
-0001fd00: 7420 7365 6c66 2e5f 7265 706c 6163 655f  t self._replace_
-0001fd10: 7072 6f6f 6628 7265 7175 6573 742e 7664  proof(request.vd
-0001fd20: 665f 696e 666f 2c20 7265 7175 6573 742e  f_info, request.
-0001fd30: 7664 665f 7072 6f6f 662c 2072 6571 7565  vdf_proof, reque
-0001fd40: 7374 2e68 6561 6465 725f 6861 7368 2c20  st.header_hash, 
-0001fd50: 6669 656c 645f 7664 6629 0a20 2020 2020  field_vdf).     
-0001fd60: 2020 2069 6620 6e6f 7420 7265 706c 6163     if not replac
-0001fd70: 6564 3a0a 2020 2020 2020 2020 2020 2020  ed:.            
-0001fd80: 7365 6c66 2e6c 6f67 2e65 7272 6f72 2866  self.log.error(f
-0001fd90: 2243 6f75 6c64 206e 6f74 2072 6570 6c61  "Could not repla
-0001fda0: 6365 2063 6f6d 7061 6374 2070 726f 6f66  ce compact proof
-0001fdb0: 3a20 7b72 6571 7565 7374 2e68 6569 6768  : {request.heigh
-0001fdc0: 747d 2229 0a20 2020 2020 2020 2020 2020  t}").           
-0001fdd0: 2072 6574 7572 6e20 4e6f 6e65 0a20 2020   return None.   
-0001fde0: 2020 2020 206d 7367 203d 206d 616b 655f       msg = make_
-0001fdf0: 6d73 6728 0a20 2020 2020 2020 2020 2020  msg(.           
-0001fe00: 2050 726f 746f 636f 6c4d 6573 7361 6765   ProtocolMessage
-0001fe10: 5479 7065 732e 6e65 775f 636f 6d70 6163  Types.new_compac
-0001fe20: 745f 7664 662c 0a20 2020 2020 2020 2020  t_vdf,.         
-0001fe30: 2020 2066 756c 6c5f 6e6f 6465 5f70 726f     full_node_pro
-0001fe40: 746f 636f 6c2e 4e65 7743 6f6d 7061 6374  tocol.NewCompact
-0001fe50: 5644 4628 7265 7175 6573 742e 6865 6967  VDF(request.heig
-0001fe60: 6874 2c20 7265 7175 6573 742e 6865 6164  ht, request.head
-0001fe70: 6572 5f68 6173 682c 2072 6571 7565 7374  er_hash, request
-0001fe80: 2e66 6965 6c64 5f76 6466 2c20 7265 7175  .field_vdf, requ
-0001fe90: 6573 742e 7664 665f 696e 666f 292c 0a20  est.vdf_info),. 
-0001fea0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0001feb0: 2069 6620 7365 6c66 2e5f 7365 7276 6572   if self._server
-0001fec0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0001fed0: 2020 2020 2020 2020 2020 6177 6169 7420            await 
-0001fee0: 7365 6c66 2e73 6572 7665 722e 7365 6e64  self.server.send
-0001fef0: 5f74 6f5f 616c 6c28 5b6d 7367 5d2c 204e  _to_all([msg], N
-0001ff00: 6f64 6554 7970 652e 4655 4c4c 5f4e 4f44  odeType.FULL_NOD
-0001ff10: 452c 2070 6565 722e 7065 6572 5f6e 6f64  E, peer.peer_nod
-0001ff20: 655f 6964 290a 0a20 2020 2064 6566 2069  e_id)..    def i
-0001ff30: 6e5f 6261 645f 7065 616b 5f63 6163 6865  n_bad_peak_cache
-0001ff40: 2873 656c 662c 2077 703a 2057 6569 6768  (self, wp: Weigh
-0001ff50: 7450 726f 6f66 2920 2d3e 2062 6f6f 6c3a  tProof) -> bool:
-0001ff60: 0a20 2020 2020 2020 2066 6f72 2062 6c6f  .        for blo
-0001ff70: 636b 2069 6e20 7770 2e72 6563 656e 745f  ck in wp.recent_
-0001ff80: 6368 6169 6e5f 6461 7461 3a0a 2020 2020  chain_data:.    
-0001ff90: 2020 2020 2020 2020 6966 2062 6c6f 636b          if block
-0001ffa0: 2e68 6561 6465 725f 6861 7368 2069 6e20  .header_hash in 
-0001ffb0: 7365 6c66 2e62 6164 5f70 6561 6b5f 6361  self.bad_peak_ca
-0001ffc0: 6368 652e 6b65 7973 2829 3a0a 2020 2020  che.keys():.    
-0001ffd0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001ffe0: 726e 2054 7275 650a 2020 2020 2020 2020  rn True.        
-0001fff0: 7265 7475 726e 2046 616c 7365 0a0a 2020  return False..  
-00020000: 2020 6465 6620 6164 645f 746f 5f62 6164    def add_to_bad
-00020010: 5f70 6561 6b5f 6361 6368 6528 7365 6c66  _peak_cache(self
-00020020: 2c20 7065 616b 5f68 6561 6465 725f 6861  , peak_header_ha
-00020030: 7368 3a20 6279 7465 7333 322c 2070 6561  sh: bytes32, pea
-00020040: 6b5f 6865 6967 6874 3a20 7569 6e74 3332  k_height: uint32
-00020050: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-00020060: 2020 2063 7572 725f 6865 6967 6874 203d     curr_height =
-00020070: 2073 656c 662e 626c 6f63 6b63 6861 696e   self.blockchain
-00020080: 2e67 6574 5f70 6561 6b5f 6865 6967 6874  .get_peak_height
-00020090: 2829 0a0a 2020 2020 2020 2020 6966 2063  ()..        if c
-000200a0: 7572 725f 6865 6967 6874 2069 7320 4e6f  urr_height is No
-000200b0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-000200c0: 7365 6c66 2e6c 6f67 2e64 6562 7567 2866  self.log.debug(f
-000200d0: 2261 6464 2062 6164 2070 6561 6b20 7b70  "add bad peak {p
-000200e0: 6561 6b5f 6865 6164 6572 5f68 6173 687d  eak_header_hash}
-000200f0: 2074 6f20 6361 6368 6522 290a 2020 2020   to cache").    
-00020100: 2020 2020 2020 2020 7365 6c66 2e62 6164          self.bad
-00020110: 5f70 6561 6b5f 6361 6368 655b 7065 616b  _peak_cache[peak
-00020120: 5f68 6561 6465 725f 6861 7368 5d20 3d20  _header_hash] = 
-00020130: 7065 616b 5f68 6569 6768 740a 2020 2020  peak_height.    
-00020140: 2020 2020 2020 2020 7265 7475 726e 0a20          return. 
-00020150: 2020 2020 2020 206d 696e 696d 756d 5f63         minimum_c
-00020160: 6163 6865 5f68 6569 6768 7420 3d20 6375  ache_height = cu
-00020170: 7272 5f68 6569 6768 7420 2d20 2832 202a  rr_height - (2 *
-00020180: 2073 656c 662e 636f 6e73 7461 6e74 732e   self.constants.
-00020190: 5355 425f 4550 4f43 485f 424c 4f43 4b53  SUB_EPOCH_BLOCKS
-000201a0: 290a 2020 2020 2020 2020 6966 2070 6561  ).        if pea
-000201b0: 6b5f 6865 6967 6874 203c 206d 696e 696d  k_height < minim
-000201c0: 756d 5f63 6163 6865 5f68 6569 6768 743a  um_cache_height:
-000201d0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-000201e0: 7572 6e0a 0a20 2020 2020 2020 206e 6577  urn..        new
-000201f0: 5f63 6163 6865 203d 207b 7d0a 2020 2020  _cache = {}.    
-00020200: 2020 2020 7365 6c66 2e6c 6f67 2e69 6e66      self.log.inf
-00020210: 6f28 6622 6164 6420 6261 6420 7065 616b  o(f"add bad peak
-00020220: 207b 7065 616b 5f68 6561 6465 725f 6861   {peak_header_ha
-00020230: 7368 7d20 746f 2063 6163 6865 2229 0a20  sh} to cache"). 
-00020240: 2020 2020 2020 206e 6577 5f63 6163 6865         new_cache
-00020250: 5b70 6561 6b5f 6865 6164 6572 5f68 6173  [peak_header_has
-00020260: 685d 203d 2070 6561 6b5f 6865 6967 6874  h] = peak_height
-00020270: 0a20 2020 2020 2020 206d 696e 5f68 6569  .        min_hei
-00020280: 6768 7420 3d20 7065 616b 5f68 6569 6768  ght = peak_heigh
-00020290: 740a 2020 2020 2020 2020 6d69 6e5f 626c  t.        min_bl
-000202a0: 6f63 6b20 3d20 7065 616b 5f68 6561 6465  ock = peak_heade
-000202b0: 725f 6861 7368 0a20 2020 2020 2020 2066  r_hash.        f
-000202c0: 6f72 2068 6561 6465 725f 6861 7368 2c20  or header_hash, 
-000202d0: 6865 6967 6874 2069 6e20 7365 6c66 2e62  height in self.b
-000202e0: 6164 5f70 6561 6b5f 6361 6368 652e 6974  ad_peak_cache.it
-000202f0: 656d 7328 293a 0a20 2020 2020 2020 2020  ems():.         
-00020300: 2020 2069 6620 6865 6967 6874 203c 206d     if height < m
-00020310: 696e 696d 756d 5f63 6163 6865 5f68 6569  inimum_cache_hei
-00020320: 6768 743a 0a20 2020 2020 2020 2020 2020  ght:.           
-00020330: 2020 2020 2073 656c 662e 6c6f 672e 6465       self.log.de
-00020340: 6275 6728 6622 7265 6d6f 7665 2062 6164  bug(f"remove bad
-00020350: 2070 6561 6b20 7b70 6561 6b5f 6865 6164   peak {peak_head
-00020360: 6572 5f68 6173 687d 2066 726f 6d20 6361  er_hash} from ca
-00020370: 6368 6522 290a 2020 2020 2020 2020 2020  che").          
-00020380: 2020 2020 2020 636f 6e74 696e 7565 0a20        continue. 
-00020390: 2020 2020 2020 2020 2020 2069 6620 6865             if he
-000203a0: 6967 6874 203c 206d 696e 5f68 6569 6768  ight < min_heigh
-000203b0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-000203c0: 2020 206d 696e 5f62 6c6f 636b 203d 2068     min_block = h
-000203d0: 6561 6465 725f 6861 7368 0a20 2020 2020  eader_hash.     
-000203e0: 2020 2020 2020 206e 6577 5f63 6163 6865         new_cache
-000203f0: 5b68 6561 6465 725f 6861 7368 5d20 3d20  [header_hash] = 
-00020400: 6865 6967 6874 0a0a 2020 2020 2020 2020  height..        
-00020410: 6966 206c 656e 286e 6577 5f63 6163 6865  if len(new_cache
-00020420: 2920 3e20 7365 6c66 2e63 6f6e 6669 672e  ) > self.config.
-00020430: 6765 7428 2262 6164 5f70 6561 6b5f 6361  get("bad_peak_ca
-00020440: 6368 655f 7369 7a65 222c 2031 3030 293a  che_size", 100):
-00020450: 0a20 2020 2020 2020 2020 2020 2064 656c  .            del
-00020460: 206e 6577 5f63 6163 6865 5b6d 696e 5f62   new_cache[min_b
-00020470: 6c6f 636b 5d0a 0a20 2020 2020 2020 2073  lock]..        s
-00020480: 656c 662e 6261 645f 7065 616b 5f63 6163  elf.bad_peak_cac
-00020490: 6865 203d 206e 6577 5f63 6163 6865 0a0a  he = new_cache..
-000204a0: 2020 2020 6173 796e 6320 6465 6620 6272      async def br
-000204b0: 6f61 6463 6173 745f 756e 636f 6d70 6163  oadcast_uncompac
-000204c0: 745f 626c 6f63 6b73 280a 2020 2020 2020  t_blocks(.      
-000204d0: 2020 7365 6c66 2c20 756e 636f 6d70 6163    self, uncompac
-000204e0: 745f 696e 7465 7276 616c 5f73 6361 6e3a  t_interval_scan:
-000204f0: 2069 6e74 2c20 7461 7267 6574 5f75 6e63   int, target_unc
-00020500: 6f6d 7061 6374 5f70 726f 6f66 733a 2069  ompact_proofs: i
-00020510: 6e74 2c20 7361 6e69 7469 7a65 5f77 6569  nt, sanitize_wei
-00020520: 6768 745f 7072 6f6f 665f 6f6e 6c79 3a20  ght_proof_only: 
-00020530: 626f 6f6c 0a20 2020 2029 202d 3e20 4e6f  bool.    ) -> No
-00020540: 6e65 3a0a 2020 2020 2020 2020 7472 793a  ne:.        try:
-00020550: 0a20 2020 2020 2020 2020 2020 2077 6869  .            whi
-00020560: 6c65 206e 6f74 2073 656c 662e 5f73 6875  le not self._shu
-00020570: 745f 646f 776e 3a0a 2020 2020 2020 2020  t_down:.        
-00020580: 2020 2020 2020 2020 7768 696c 6520 7365          while se
-00020590: 6c66 2e73 796e 635f 7374 6f72 652e 6765  lf.sync_store.ge
-000205a0: 745f 7379 6e63 5f6d 6f64 6528 2920 6f72  t_sync_mode() or
-000205b0: 2073 656c 662e 7379 6e63 5f73 746f 7265   self.sync_store
-000205c0: 2e67 6574 5f6c 6f6e 675f 7379 6e63 2829  .get_long_sync()
-000205d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000205e0: 2020 2020 2020 6966 2073 656c 662e 5f73        if self._s
-000205f0: 6875 745f 646f 776e 3a0a 2020 2020 2020  hut_down:.      
-00020600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020610: 2020 7265 7475 726e 204e 6f6e 650a 2020    return None.  
-00020620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020630: 2020 6177 6169 7420 6173 796e 6369 6f2e    await asyncio.
-00020640: 736c 6565 7028 3330 290a 0a20 2020 2020  sleep(30)..     
-00020650: 2020 2020 2020 2020 2020 2062 726f 6164             broad
-00020660: 6361 7374 5f6c 6973 743a 204c 6973 745b  cast_list: List[
-00020670: 7469 6d65 6c6f 7264 5f70 726f 746f 636f  timelord_protoco
-00020680: 6c2e 5265 7175 6573 7443 6f6d 7061 6374  l.RequestCompact
-00020690: 5072 6f6f 664f 6654 696d 655d 203d 205b  ProofOfTime] = [
-000206a0: 5d0a 0a20 2020 2020 2020 2020 2020 2020  ]..             
-000206b0: 2020 2073 656c 662e 6c6f 672e 696e 666f     self.log.info
-000206c0: 2822 4765 7474 696e 6720 7261 6e64 6f6d  ("Getting random
-000206d0: 2068 6569 6768 7473 2066 6f72 2062 6c75   heights for blu
-000206e0: 6562 6f78 2074 6f20 636f 6d70 6163 7422  ebox to compact"
-000206f0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00020700: 2020 6865 6967 6874 7320 3d20 6177 6169    heights = awai
-00020710: 7420 7365 6c66 2e62 6c6f 636b 5f73 746f  t self.block_sto
-00020720: 7265 2e67 6574 5f72 616e 646f 6d5f 6e6f  re.get_random_no
-00020730: 745f 636f 6d70 6163 7469 6669 6564 2874  t_compactified(t
-00020740: 6172 6765 745f 756e 636f 6d70 6163 745f  arget_uncompact_
-00020750: 7072 6f6f 6673 290a 2020 2020 2020 2020  proofs).        
-00020760: 2020 2020 2020 2020 7365 6c66 2e6c 6f67          self.log
-00020770: 2e69 6e66 6f28 2248 6569 6768 7473 2066  .info("Heights f
-00020780: 6f75 6e64 2066 6f72 2062 6c75 6562 6f78  ound for bluebox
-00020790: 2074 6f20 636f 6d70 6163 743a 205b 2573   to compact: [%s
-000207a0: 5d22 2025 2022 2c20 222e 6a6f 696e 286d  ]" % ", ".join(m
-000207b0: 6170 2873 7472 2c20 6865 6967 6874 7329  ap(str, heights)
-000207c0: 2929 0a0a 2020 2020 2020 2020 2020 2020  ))..            
-000207d0: 2020 2020 666f 7220 6820 696e 2068 6569      for h in hei
-000207e0: 6768 7473 3a0a 2020 2020 2020 2020 2020  ghts:.          
-000207f0: 2020 2020 2020 2020 2020 6865 6164 6572            header
-00020800: 7320 3d20 6177 6169 7420 7365 6c66 2e62  s = await self.b
-00020810: 6c6f 636b 6368 6169 6e2e 6765 745f 6865  lockchain.get_he
-00020820: 6164 6572 5f62 6c6f 636b 735f 696e 5f72  ader_blocks_in_r
-00020830: 616e 6765 2868 2c20 682c 2074 785f 6669  ange(h, h, tx_fi
-00020840: 6c74 6572 3d46 616c 7365 290a 2020 2020  lter=False).    
-00020850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020860: 7265 636f 7264 733a 2044 6963 745b 6279  records: Dict[by
-00020870: 7465 7333 322c 2042 6c6f 636b 5265 636f  tes32, BlockReco
-00020880: 7264 5d20 3d20 7b7d 0a20 2020 2020 2020  rd] = {}.       
-00020890: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000208a0: 7361 6e69 7469 7a65 5f77 6569 6768 745f  sanitize_weight_
-000208b0: 7072 6f6f 665f 6f6e 6c79 3a0a 2020 2020  proof_only:.    
-000208c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000208d0: 2020 2020 7265 636f 7264 7320 3d20 6177      records = aw
-000208e0: 6169 7420 7365 6c66 2e62 6c6f 636b 6368  ait self.blockch
-000208f0: 6169 6e2e 6765 745f 626c 6f63 6b5f 7265  ain.get_block_re
-00020900: 636f 7264 735f 696e 5f72 616e 6765 2868  cords_in_range(h
-00020910: 2c20 6829 0a20 2020 2020 2020 2020 2020  , h).           
-00020920: 2020 2020 2020 2020 2066 6f72 2068 6561           for hea
-00020930: 6465 7220 696e 2068 6561 6465 7273 2e76  der in headers.v
-00020940: 616c 7565 7328 293a 0a20 2020 2020 2020  alues():.       
-00020950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020960: 2065 7870 6563 7465 645f 6865 6164 6572   expected_header
-00020970: 5f68 6173 6820 3d20 7365 6c66 2e62 6c6f  _hash = self.blo
-00020980: 636b 6368 6169 6e2e 6865 6967 6874 5f74  ckchain.height_t
-00020990: 6f5f 6861 7368 2868 6561 6465 722e 6865  o_hash(header.he
-000209a0: 6967 6874 290a 2020 2020 2020 2020 2020  ight).          
-000209b0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000209c0: 2068 6561 6465 722e 6865 6164 6572 5f68   header.header_h
-000209d0: 6173 6820 213d 2065 7870 6563 7465 645f  ash != expected_
-000209e0: 6865 6164 6572 5f68 6173 683a 0a20 2020  header_hash:.   
-000209f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020a00: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
-00020a10: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00020a20: 2020 2020 2020 2020 2020 6966 2073 616e            if san
-00020a30: 6974 697a 655f 7765 6967 6874 5f70 726f  itize_weight_pro
-00020a40: 6f66 5f6f 6e6c 793a 0a20 2020 2020 2020  of_only:.       
-00020a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020a60: 2020 2020 2061 7373 6572 7420 6865 6164       assert head
-00020a70: 6572 2e68 6561 6465 725f 6861 7368 2069  er.header_hash i
-00020a80: 6e20 7265 636f 7264 730a 2020 2020 2020  n records.      
-00020a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020aa0: 2020 2020 2020 7265 636f 7264 203d 2072        record = r
-00020ab0: 6563 6f72 6473 5b68 6561 6465 722e 6865  ecords[header.he
-00020ac0: 6164 6572 5f68 6173 685d 0a20 2020 2020  ader_hash].     
-00020ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020ae0: 2020 2066 6f72 2073 7562 5f73 6c6f 7420     for sub_slot 
-00020af0: 696e 2068 6561 6465 722e 6669 6e69 7368  in header.finish
-00020b00: 6564 5f73 7562 5f73 6c6f 7473 3a0a 2020  ed_sub_slots:.  
-00020b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020b20: 2020 2020 2020 2020 2020 6966 2028 0a20            if (. 
-00020b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020b40: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00020b50: 7562 5f73 6c6f 742e 7072 6f6f 6673 2e63  ub_slot.proofs.c
-00020b60: 6861 6c6c 656e 6765 5f63 6861 696e 5f73  hallenge_chain_s
-00020b70: 6c6f 745f 7072 6f6f 662e 7769 746e 6573  lot_proof.witnes
-00020b80: 735f 7479 7065 203e 2030 0a20 2020 2020  s_type > 0.     
-00020b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020ba0: 2020 2020 2020 2020 2020 206f 7220 6e6f             or no
-00020bb0: 7420 7375 625f 736c 6f74 2e70 726f 6f66  t sub_slot.proof
-00020bc0: 732e 6368 616c 6c65 6e67 655f 6368 6169  s.challenge_chai
-00020bd0: 6e5f 736c 6f74 5f70 726f 6f66 2e6e 6f72  n_slot_proof.nor
-00020be0: 6d61 6c69 7a65 645f 746f 5f69 6465 6e74  malized_to_ident
-00020bf0: 6974 790a 2020 2020 2020 2020 2020 2020  ity.            
-00020c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020c10: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00020c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020c30: 2020 2062 726f 6164 6361 7374 5f6c 6973     broadcast_lis
-00020c40: 742e 6170 7065 6e64 280a 2020 2020 2020  t.append(.      
-00020c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020c60: 2020 2020 2020 2020 2020 2020 2020 7469                ti
-00020c70: 6d65 6c6f 7264 5f70 726f 746f 636f 6c2e  melord_protocol.
-00020c80: 5265 7175 6573 7443 6f6d 7061 6374 5072  RequestCompactPr
-00020c90: 6f6f 664f 6654 696d 6528 0a20 2020 2020  oofOfTime(.     
-00020ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015410: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+00015420: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00015430: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00015440: 7375 6c74 5f74 6f5f 7661 6c69 6461 7465  sult_to_validate
+00015450: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
+00015460: 2020 2020 2020 2020 2020 2020 2070 7265               pre
+00015470: 5f76 616c 6964 6174 696f 6e5f 7265 7375  _validation_resu
+00015480: 6c74 735b 305d 2069 6620 7072 655f 7661  lts[0] if pre_va
+00015490: 6c69 6461 7469 6f6e 5f72 6573 756c 7420  lidation_result 
+000154a0: 6973 204e 6f6e 6520 656c 7365 2070 7265  is None else pre
+000154b0: 5f76 616c 6964 6174 696f 6e5f 7265 7375  _validation_resu
+000154c0: 6c74 0a20 2020 2020 2020 2020 2020 2020  lt.             
+000154d0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+000154e0: 2020 2020 2020 2020 2020 2020 2061 7373               ass
+000154f0: 6572 7420 7265 7375 6c74 5f74 6f5f 7661  ert result_to_va
+00015500: 6c69 6461 7465 2e72 6571 7569 7265 645f  lidate.required_
+00015510: 6974 6572 7320 3d3d 2070 7265 5f76 616c  iters == pre_val
+00015520: 6964 6174 696f 6e5f 7265 7375 6c74 735b  idation_results[
+00015530: 305d 2e72 6571 7569 7265 645f 6974 6572  0].required_iter
+00015540: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
+00015550: 2020 2020 2020 2861 6464 6564 2c20 6572        (added, er
+00015560: 726f 725f 636f 6465 2c20 7374 6174 655f  ror_code, state_
+00015570: 6368 616e 6765 5f73 756d 6d61 7279 2920  change_summary) 
+00015580: 3d20 6177 6169 7420 7365 6c66 2e62 6c6f  = await self.blo
+00015590: 636b 6368 6169 6e2e 6164 645f 626c 6f63  ckchain.add_bloc
+000155a0: 6b28 0a20 2020 2020 2020 2020 2020 2020  k(.             
+000155b0: 2020 2020 2020 2020 2020 2062 6c6f 636b             block
+000155c0: 2c20 7265 7375 6c74 5f74 6f5f 7661 6c69  , result_to_vali
+000155d0: 6461 7465 2c20 666f 726b 5f69 6e66 6f0a  date, fork_info.
+000155e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000155f0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+00015600: 2020 2020 2020 6966 2061 6464 6564 203d        if added =
+00015610: 3d20 4164 6442 6c6f 636b 5265 7375 6c74  = AddBlockResult
+00015620: 2e41 4c52 4541 4459 5f48 4156 455f 424c  .ALREADY_HAVE_BL
+00015630: 4f43 4b3a 0a20 2020 2020 2020 2020 2020  OCK:.           
+00015640: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00015650: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+00015660: 2020 2020 2065 6c69 6620 6164 6465 6420       elif added 
+00015670: 3d3d 2041 6464 426c 6f63 6b52 6573 756c  == AddBlockResul
+00015680: 742e 494e 5641 4c49 445f 424c 4f43 4b3a  t.INVALID_BLOCK:
+00015690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000156a0: 2020 2020 2061 7373 6572 7420 6572 726f       assert erro
+000156b0: 725f 636f 6465 2069 7320 6e6f 7420 4e6f  r_code is not No
+000156c0: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
+000156d0: 2020 2020 2020 2073 656c 662e 6c6f 672e         self.log.
+000156e0: 6572 726f 7228 6622 426c 6f63 6b20 7b68  error(f"Block {h
+000156f0: 6561 6465 725f 6861 7368 7d20 6174 2068  eader_hash} at h
+00015700: 6569 6768 7420 7b62 6c6f 636b 2e68 6569  eight {block.hei
+00015710: 6768 747d 2069 7320 696e 7661 6c69 6420  ght} is invalid 
+00015720: 7769 7468 2063 6f64 6520 7b65 7272 6f72  with code {error
+00015730: 5f63 6f64 657d 2e22 290a 2020 2020 2020  _code}.").      
+00015740: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+00015750: 6973 6520 436f 6e73 656e 7375 7345 7272  ise ConsensusErr
+00015760: 6f72 2865 7272 6f72 5f63 6f64 652c 205b  or(error_code, [
+00015770: 6865 6164 6572 5f68 6173 685d 290a 2020  header_hash]).  
+00015780: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00015790: 6966 2061 6464 6564 203d 3d20 4164 6442  if added == AddB
+000157a0: 6c6f 636b 5265 7375 6c74 2e44 4953 434f  lockResult.DISCO
+000157b0: 4e4e 4543 5445 445f 424c 4f43 4b3a 0a20  NNECTED_BLOCK:. 
+000157c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000157d0: 2020 2073 656c 662e 6c6f 672e 696e 666f     self.log.info
+000157e0: 2866 2244 6973 636f 6e6e 6563 7465 6420  (f"Disconnected 
+000157f0: 626c 6f63 6b20 7b68 6561 6465 725f 6861  block {header_ha
+00015800: 7368 7d20 6174 2068 6569 6768 7420 7b62  sh} at height {b
+00015810: 6c6f 636b 2e68 6569 6768 747d 2229 0a20  lock.height}"). 
+00015820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015830: 2020 2069 6620 7261 6973 655f 6f6e 5f64     if raise_on_d
+00015840: 6973 636f 6e6e 6563 7465 643a 0a20 2020  isconnected:.   
+00015850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015860: 2020 2020 2072 6169 7365 2052 756e 7469       raise Runti
+00015870: 6d65 4572 726f 7228 2245 7870 6563 7465  meError("Expecte
+00015880: 6420 626c 6f63 6b20 746f 2062 6520 6164  d block to be ad
+00015890: 6465 642c 2072 6563 6569 7665 6420 6469  ded, received di
+000158a0: 7363 6f6e 6e65 6374 6564 2062 6c6f 636b  sconnected block
+000158b0: 2e22 290a 2020 2020 2020 2020 2020 2020  .").            
+000158c0: 2020 2020 2020 2020 7265 7475 726e 204e          return N
+000158d0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+000158e0: 2020 2020 656c 6966 2061 6464 6564 203d      elif added =
+000158f0: 3d20 4164 6442 6c6f 636b 5265 7375 6c74  = AddBlockResult
+00015900: 2e4e 4557 5f50 4541 4b3a 0a20 2020 2020  .NEW_PEAK:.     
+00015910: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00015920: 204f 6e6c 7920 7072 6f70 6167 6174 6520   Only propagate 
+00015930: 626c 6f63 6b73 2077 6869 6368 2065 7874  blocks which ext
+00015940: 656e 6420 7468 6520 626c 6f63 6b63 6861  end the blockcha
+00015950: 696e 2028 6265 636f 6d65 7320 6f6e 6520  in (becomes one 
+00015960: 6f66 2074 6865 2068 6561 6473 290a 2020  of the heads).  
+00015970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015980: 2020 6173 7365 7274 2073 7461 7465 5f63    assert state_c
+00015990: 6861 6e67 655f 7375 6d6d 6172 7920 6973  hange_summary is
+000159a0: 206e 6f74 204e 6f6e 650a 2020 2020 2020   not None.      
+000159b0: 2020 2020 2020 2020 2020 2020 2020 706f                po
+000159c0: 7374 5f70 726f 6365 7373 5f74 696d 6520  st_process_time 
+000159d0: 3d20 7469 6d65 2e6d 6f6e 6f74 6f6e 6963  = time.monotonic
+000159e0: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
+000159f0: 2020 2020 2020 2070 7070 5f72 6573 756c         ppp_resul
+00015a00: 7420 3d20 6177 6169 7420 7365 6c66 2e70  t = await self.p
+00015a10: 6561 6b5f 706f 7374 5f70 726f 6365 7373  eak_post_process
+00015a20: 696e 6728 626c 6f63 6b2c 2073 7461 7465  ing(block, state
+00015a30: 5f63 6861 6e67 655f 7375 6d6d 6172 792c  _change_summary,
+00015a40: 2070 6565 7229 0a20 2020 2020 2020 2020   peer).         
+00015a50: 2020 2020 2020 2020 2020 2070 6f73 745f             post_
+00015a60: 7072 6f63 6573 735f 7469 6d65 203d 2074  process_time = t
+00015a70: 696d 652e 6d6f 6e6f 746f 6e69 6328 2920  ime.monotonic() 
+00015a80: 2d20 706f 7374 5f70 726f 6365 7373 5f74  - post_process_t
+00015a90: 696d 650a 0a20 2020 2020 2020 2020 2020  ime..           
+00015aa0: 2020 2020 2065 6c69 6620 6164 6465 6420       elif added 
+00015ab0: 3d3d 2041 6464 426c 6f63 6b52 6573 756c  == AddBlockResul
+00015ac0: 742e 4144 4445 445f 4153 5f4f 5250 4841  t.ADDED_AS_ORPHA
+00015ad0: 4e3a 0a20 2020 2020 2020 2020 2020 2020  N:.             
+00015ae0: 2020 2020 2020 2073 656c 662e 6c6f 672e         self.log.
+00015af0: 696e 666f 280a 2020 2020 2020 2020 2020  info(.          
+00015b00: 2020 2020 2020 2020 2020 2020 2020 6622                f"
+00015b10: 5265 6365 6976 6564 206f 7270 6861 6e20  Received orphan 
+00015b20: 626c 6f63 6b20 6f66 2068 6569 6768 7420  block of height 
+00015b30: 7b62 6c6f 636b 2e68 6569 6768 747d 2072  {block.height} r
+00015b40: 6820 7b62 6c6f 636b 2e72 6577 6172 645f  h {block.reward_
+00015b50: 6368 6169 6e5f 626c 6f63 6b2e 6765 745f  chain_block.get_
+00015b60: 6861 7368 2829 7d22 0a20 2020 2020 2020  hash()}".       
+00015b70: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
+00015b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015b90: 2020 2070 6f73 745f 7072 6f63 6573 735f     post_process_
+00015ba0: 7469 6d65 203d 2030 0a20 2020 2020 2020  time = 0.       
+00015bb0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00015bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015bd0: 2020 2023 2053 686f 756c 6420 6e65 7665     # Should neve
+00015be0: 7220 7265 6163 6820 6865 7265 2c20 616c  r reach here, al
+00015bf0: 6c20 7468 6520 6361 7365 7320 6172 6520  l the cases are 
+00015c00: 636f 7665 7265 640a 2020 2020 2020 2020  covered.        
+00015c10: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00015c20: 6520 5275 6e74 696d 6545 7272 6f72 2866  e RuntimeError(f
+00015c30: 2249 6e76 616c 6964 2072 6573 756c 7420  "Invalid result 
+00015c40: 6672 6f6d 2061 6464 5f62 6c6f 636b 207b  from add_block {
+00015c50: 6164 6465 647d 2229 0a20 2020 2020 2020  added}").       
+00015c60: 2020 2020 2065 7863 6570 7420 6173 796e       except asyn
+00015c70: 6369 6f2e 4361 6e63 656c 6c65 6445 7272  cio.CancelledErr
+00015c80: 6f72 3a0a 2020 2020 2020 2020 2020 2020  or:.            
+00015c90: 2020 2020 2320 5765 206e 6565 6420 746f      # We need to
+00015ca0: 206d 616b 6520 7375 7265 2074 6f20 616c   make sure to al
+00015cb0: 7761 7973 2063 616c 6c20 7468 6973 206d  ways call this m
+00015cc0: 6574 686f 6420 6576 656e 2077 6865 6e20  ethod even when 
+00015cd0: 7765 2067 6574 2061 2063 616e 6365 6c20  we get a cancel 
+00015ce0: 6578 6365 7074 696f 6e2c 2074 6f20 6d61  exception, to ma
+00015cf0: 6b65 2073 7572 650a 2020 2020 2020 2020  ke sure.        
+00015d00: 2020 2020 2020 2020 2320 7468 6520 6e6f          # the no
+00015d10: 6465 2073 7461 7973 2069 6e20 7379 6e63  de stays in sync
+00015d20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015d30: 2069 6620 6164 6465 6420 3d3d 2041 6464   if added == Add
+00015d40: 426c 6f63 6b52 6573 756c 742e 4e45 575f  BlockResult.NEW_
+00015d50: 5045 414b 3a0a 2020 2020 2020 2020 2020  PEAK:.          
+00015d60: 2020 2020 2020 2020 2020 6173 7365 7274            assert
+00015d70: 2073 7461 7465 5f63 6861 6e67 655f 7375   state_change_su
+00015d80: 6d6d 6172 7920 6973 206e 6f74 204e 6f6e  mmary is not Non
+00015d90: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00015da0: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
+00015db0: 2e70 6561 6b5f 706f 7374 5f70 726f 6365  .peak_post_proce
+00015dc0: 7373 696e 6728 626c 6f63 6b2c 2073 7461  ssing(block, sta
+00015dd0: 7465 5f63 6861 6e67 655f 7375 6d6d 6172  te_change_summar
+00015de0: 792c 2070 6565 7229 0a20 2020 2020 2020  y, peer).       
+00015df0: 2020 2020 2020 2020 2072 6169 7365 0a0a           raise..
+00015e00: 2020 2020 2020 2020 2020 2020 7661 6c69              vali
+00015e10: 6461 7469 6f6e 5f74 696d 6520 3d20 7469  dation_time = ti
+00015e20: 6d65 2e6d 6f6e 6f74 6f6e 6963 2829 202d  me.monotonic() -
+00015e30: 2076 616c 6964 6174 696f 6e5f 7374 6172   validation_star
+00015e40: 740a 0a20 2020 2020 2020 2069 6620 7070  t..        if pp
+00015e50: 705f 7265 7375 6c74 2069 7320 6e6f 7420  p_result is not 
+00015e60: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00015e70: 2020 6173 7365 7274 2073 7461 7465 5f63    assert state_c
+00015e80: 6861 6e67 655f 7375 6d6d 6172 7920 6973  hange_summary is
+00015e90: 206e 6f74 204e 6f6e 650a 2020 2020 2020   not None.      
+00015ea0: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
+00015eb0: 2e70 6561 6b5f 706f 7374 5f70 726f 6365  .peak_post_proce
+00015ec0: 7373 696e 675f 3228 626c 6f63 6b2c 2070  ssing_2(block, p
+00015ed0: 6565 722c 2073 7461 7465 5f63 6861 6e67  eer, state_chang
+00015ee0: 655f 7375 6d6d 6172 792c 2070 7070 5f72  e_summary, ppp_r
+00015ef0: 6573 756c 7429 0a0a 2020 2020 2020 2020  esult)..        
+00015f00: 7065 7263 656e 745f 6675 6c6c 5f73 7472  percent_full_str
+00015f10: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
+00015f20: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
+00015f30: 2020 2022 2c20 7065 7263 656e 7420 6675     ", percent fu
+00015f40: 6c6c 3a20 220a 2020 2020 2020 2020 2020  ll: ".          
+00015f50: 2020 2020 2020 2b20 7374 7228 726f 756e        + str(roun
+00015f60: 6428 3130 302e 3020 2a20 666c 6f61 7428  d(100.0 * float(
+00015f70: 626c 6f63 6b2e 7472 616e 7361 6374 696f  block.transactio
+00015f80: 6e73 5f69 6e66 6f2e 636f 7374 2920 2f20  ns_info.cost) / 
+00015f90: 7365 6c66 2e63 6f6e 7374 616e 7473 2e4d  self.constants.M
+00015fa0: 4158 5f42 4c4f 434b 5f43 4f53 545f 434c  AX_BLOCK_COST_CL
+00015fb0: 564d 2c20 3329 290a 2020 2020 2020 2020  VM, 3)).        
+00015fc0: 2020 2020 2020 2020 2b20 2225 220a 2020          + "%".  
+00015fd0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00015fe0: 2020 2020 2020 2020 6966 2062 6c6f 636b          if block
+00015ff0: 2e74 7261 6e73 6163 7469 6f6e 735f 696e  .transactions_in
+00016000: 666f 2069 7320 6e6f 7420 4e6f 6e65 0a20  fo is not None. 
+00016010: 2020 2020 2020 2020 2020 2065 6c73 6520             else 
+00016020: 2222 0a20 2020 2020 2020 2029 0a20 2020  "".        ).   
+00016030: 2020 2020 2073 656c 662e 6c6f 672e 6c6f       self.log.lo
+00016040: 6728 0a20 2020 2020 2020 2020 2020 206c  g(.            l
+00016050: 6f67 6769 6e67 2e57 4152 4e49 4e47 2069  ogging.WARNING i
+00016060: 6620 7661 6c69 6461 7469 6f6e 5f74 696d  f validation_tim
+00016070: 6520 3e20 3220 656c 7365 206c 6f67 6769  e > 2 else loggi
+00016080: 6e67 2e44 4542 5547 2c0a 2020 2020 2020  ng.DEBUG,.      
+00016090: 2020 2020 2020 6622 426c 6f63 6b20 7661        f"Block va
+000160a0: 6c69 6461 7469 6f6e 3a20 7b76 616c 6964  lidation: {valid
+000160b0: 6174 696f 6e5f 7469 6d65 3a30 2e32 667d  ation_time:0.2f}
+000160c0: 732c 2022 0a20 2020 2020 2020 2020 2020  s, ".           
+000160d0: 2066 2270 7265 5f76 616c 6964 6174 696f   f"pre_validatio
+000160e0: 6e3a 207b 7072 655f 7661 6c69 6461 7469  n: {pre_validati
+000160f0: 6f6e 5f74 696d 653a 302e 3266 7d73 2c20  on_time:0.2f}s, 
+00016100: 220a 2020 2020 2020 2020 2020 2020 6622  ".            f"
+00016110: 434c 564d 3a20 7b70 7265 5f76 616c 6964  CLVM: {pre_valid
+00016120: 6174 696f 6e5f 7265 7375 6c74 735b 305d  ation_results[0]
+00016130: 2e74 696d 696e 672f 3130 3030 2e30 3a30  .timing/1000.0:0
+00016140: 2e32 667d 732c 2022 0a20 2020 2020 2020  .2f}s, ".       
+00016150: 2020 2020 2066 2270 6f73 742d 7072 6f63       f"post-proc
+00016160: 6573 733a 207b 706f 7374 5f70 726f 6365  ess: {post_proce
+00016170: 7373 5f74 696d 653a 302e 3266 7d73 2c20  ss_time:0.2f}s, 
+00016180: 220a 2020 2020 2020 2020 2020 2020 6622  ".            f"
+00016190: 636f 7374 3a20 7b62 6c6f 636b 2e74 7261  cost: {block.tra
+000161a0: 6e73 6163 7469 6f6e 735f 696e 666f 2e63  nsactions_info.c
+000161b0: 6f73 7420 6966 2062 6c6f 636b 2e74 7261  ost if block.tra
+000161c0: 6e73 6163 7469 6f6e 735f 696e 666f 2069  nsactions_info i
+000161d0: 7320 6e6f 7420 4e6f 6e65 2065 6c73 6520  s not None else 
+000161e0: 274e 6f6e 6527 7d22 0a20 2020 2020 2020  'None'}".       
+000161f0: 2020 2020 2066 227b 7065 7263 656e 745f       f"{percent_
+00016200: 6675 6c6c 5f73 7472 7d20 6865 6164 6572  full_str} header
+00016210: 5f68 6173 683a 207b 6865 6164 6572 5f68  _hash: {header_h
+00016220: 6173 682e 6865 7828 297d 2068 6569 6768  ash.hex()} heigh
+00016230: 743a 207b 626c 6f63 6b2e 6865 6967 6874  t: {block.height
+00016240: 7d22 2c0a 2020 2020 2020 2020 290a 0a20  }",.        ).. 
+00016250: 2020 2020 2020 2023 2074 6869 7320 6973         # this is
+00016260: 206e 6f74 2063 6f76 6572 6564 2062 7920   not covered by 
+00016270: 616e 7920 756e 6974 2074 6573 7473 2061  any unit tests a
+00016280: 7320 6974 2773 2065 7373 656e 7469 616c  s it's essential
+00016290: 6c79 2074 6573 7420 636f 6465 0a20 2020  ly test code.   
+000162a0: 2020 2020 2023 2069 7473 656c 662e 2049       # itself. I
+000162b0: 7427 7320 6578 6572 6369 7365 6420 6d61  t's exercised ma
+000162c0: 6e75 616c 6c79 2077 6865 6e20 696e 7665  nually when inve
+000162d0: 7374 6967 6174 696e 6720 7065 7266 6f72  stigating perfor
+000162e0: 6d61 6e63 6520 6973 7375 6573 0a20 2020  mance issues.   
+000162f0: 2020 2020 2069 6620 7661 6c69 6461 7469       if validati
+00016300: 6f6e 5f74 696d 6520 3e20 3220 616e 6420  on_time > 2 and 
+00016310: 7072 2069 7320 6e6f 7420 4e6f 6e65 3a20  pr is not None: 
+00016320: 2023 2070 7261 676d 613a 206e 6f20 636f   # pragma: no co
+00016330: 7665 720a 2020 2020 2020 2020 2020 2020  ver.            
+00016340: 7072 2e63 7265 6174 655f 7374 6174 7328  pr.create_stats(
+00016350: 290a 2020 2020 2020 2020 2020 2020 7072  ).            pr
+00016360: 6f66 696c 655f 6469 7220 3d20 7061 7468  ofile_dir = path
+00016370: 5f66 726f 6d5f 726f 6f74 2873 656c 662e  _from_root(self.
+00016380: 726f 6f74 5f70 6174 682c 2022 626c 6f63  root_path, "bloc
+00016390: 6b2d 7661 6c69 6461 7469 6f6e 2d70 726f  k-validation-pro
+000163a0: 6669 6c65 2229 0a20 2020 2020 2020 2020  file").         
+000163b0: 2020 2070 722e 6475 6d70 5f73 7461 7473     pr.dump_stats
+000163c0: 2870 726f 6669 6c65 5f64 6972 202f 2066  (profile_dir / f
+000163d0: 227b 626c 6f63 6b2e 6865 6967 6874 7d2d  "{block.height}-
+000163e0: 7b76 616c 6964 6174 696f 6e5f 7469 6d65  {validation_time
+000163f0: 3a30 2e31 667d 2e70 726f 6669 6c65 2229  :0.1f}.profile")
+00016400: 0a0a 2020 2020 2020 2020 2320 5468 6973  ..        # This
+00016410: 2063 6f64 6520 7061 7468 2069 7320 7265   code path is re
+00016420: 6163 6865 6420 6966 2061 6464 6564 203d  ached if added =
+00016430: 3d20 4144 4445 445f 4153 5f4f 5250 4841  = ADDED_AS_ORPHA
+00016440: 4e20 6f72 204e 4557 5f54 4950 0a20 2020  N or NEW_TIP.   
+00016450: 2020 2020 2070 6561 6b20 3d20 7365 6c66       peak = self
+00016460: 2e62 6c6f 636b 6368 6169 6e2e 6765 745f  .blockchain.get_
+00016470: 7065 616b 2829 0a20 2020 2020 2020 2061  peak().        a
+00016480: 7373 6572 7420 7065 616b 2069 7320 6e6f  ssert peak is no
+00016490: 7420 4e6f 6e65 0a0a 2020 2020 2020 2020  t None..        
+000164a0: 2320 5265 6d6f 7665 7320 616c 6c20 7465  # Removes all te
+000164b0: 6d70 6f72 6172 7920 6461 7461 2066 6f72  mporary data for
+000164c0: 206f 6c64 2062 6c6f 636b 730a 2020 2020   old blocks.    
+000164d0: 2020 2020 636c 6561 725f 6865 6967 6874      clear_height
+000164e0: 203d 2075 696e 7433 3228 6d61 7828 302c   = uint32(max(0,
+000164f0: 2070 6561 6b2e 6865 6967 6874 202d 2035   peak.height - 5
+00016500: 3029 290a 2020 2020 2020 2020 7365 6c66  0)).        self
+00016510: 2e66 756c 6c5f 6e6f 6465 5f73 746f 7265  .full_node_store
+00016520: 2e63 6c65 6172 5f63 616e 6469 6461 7465  .clear_candidate
+00016530: 5f62 6c6f 636b 735f 6265 6c6f 7728 636c  _blocks_below(cl
+00016540: 6561 725f 6865 6967 6874 290a 2020 2020  ear_height).    
+00016550: 2020 2020 7365 6c66 2e66 756c 6c5f 6e6f      self.full_no
+00016560: 6465 5f73 746f 7265 2e63 6c65 6172 5f75  de_store.clear_u
+00016570: 6e66 696e 6973 6865 645f 626c 6f63 6b73  nfinished_blocks
+00016580: 5f62 656c 6f77 2863 6c65 6172 5f68 6569  _below(clear_hei
+00016590: 6768 7429 0a0a 2020 2020 2020 2020 7374  ght)..        st
+000165a0: 6174 655f 6368 616e 6765 645f 6461 7461  ate_changed_data
+000165b0: 3a20 4469 6374 5b73 7472 2c20 416e 795d  : Dict[str, Any]
+000165c0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+000165d0: 2022 7472 616e 7361 6374 696f 6e5f 626c   "transaction_bl
+000165e0: 6f63 6b22 3a20 4661 6c73 652c 0a20 2020  ock": False,.   
+000165f0: 2020 2020 2020 2020 2022 6b5f 7369 7a65           "k_size
+00016600: 223a 2062 6c6f 636b 2e72 6577 6172 645f  ": block.reward_
+00016610: 6368 6169 6e5f 626c 6f63 6b2e 7072 6f6f  chain_block.proo
+00016620: 665f 6f66 5f73 7061 6365 2e73 697a 652c  f_of_space.size,
+00016630: 0a20 2020 2020 2020 2020 2020 2022 6865  .            "he
+00016640: 6164 6572 5f68 6173 6822 3a20 626c 6f63  ader_hash": bloc
+00016650: 6b2e 6865 6164 6572 5f68 6173 682c 0a20  k.header_hash,. 
+00016660: 2020 2020 2020 2020 2020 2022 666f 726b             "fork
+00016670: 5f68 6569 6768 7422 3a20 4e6f 6e65 2c0a  _height": None,.
+00016680: 2020 2020 2020 2020 2020 2020 2272 6f6c              "rol
+00016690: 6c65 645f 6261 636b 5f72 6563 6f72 6473  led_back_records
+000166a0: 223a 204e 6f6e 652c 0a20 2020 2020 2020  ": None,.       
+000166b0: 2020 2020 2022 6865 6967 6874 223a 2062       "height": b
+000166c0: 6c6f 636b 2e68 6569 6768 742c 0a20 2020  lock.height,.   
+000166d0: 2020 2020 2020 2020 2022 7661 6c69 6461           "valida
+000166e0: 7469 6f6e 5f74 696d 6522 3a20 7661 6c69  tion_time": vali
+000166f0: 6461 7469 6f6e 5f74 696d 652c 0a20 2020  dation_time,.   
+00016700: 2020 2020 2020 2020 2022 7072 655f 7661           "pre_va
+00016710: 6c69 6461 7469 6f6e 5f74 696d 6522 3a20  lidation_time": 
+00016720: 7072 655f 7661 6c69 6461 7469 6f6e 5f74  pre_validation_t
+00016730: 696d 652c 0a20 2020 2020 2020 207d 0a0a  ime,.        }..
+00016740: 2020 2020 2020 2020 6966 2073 7461 7465          if state
+00016750: 5f63 6861 6e67 655f 7375 6d6d 6172 7920  _change_summary 
+00016760: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00016770: 2020 2020 2020 2020 2073 7461 7465 5f63           state_c
+00016780: 6861 6e67 6564 5f64 6174 615b 2266 6f72  hanged_data["for
+00016790: 6b5f 6865 6967 6874 225d 203d 2073 7461  k_height"] = sta
+000167a0: 7465 5f63 6861 6e67 655f 7375 6d6d 6172  te_change_summar
+000167b0: 792e 666f 726b 5f68 6569 6768 740a 2020  y.fork_height.  
+000167c0: 2020 2020 2020 2020 2020 7374 6174 655f            state_
+000167d0: 6368 616e 6765 645f 6461 7461 5b22 726f  changed_data["ro
+000167e0: 6c6c 6564 5f62 6163 6b5f 7265 636f 7264  lled_back_record
+000167f0: 7322 5d20 3d20 6c65 6e28 7374 6174 655f  s"] = len(state_
+00016800: 6368 616e 6765 5f73 756d 6d61 7279 2e72  change_summary.r
+00016810: 6f6c 6c65 645f 6261 636b 5f72 6563 6f72  olled_back_recor
+00016820: 6473 290a 0a20 2020 2020 2020 2069 6620  ds)..        if 
+00016830: 626c 6f63 6b2e 7472 616e 7361 6374 696f  block.transactio
+00016840: 6e73 5f69 6e66 6f20 6973 206e 6f74 204e  ns_info is not N
+00016850: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00016860: 2073 7461 7465 5f63 6861 6e67 6564 5f64   state_changed_d
+00016870: 6174 615b 2274 7261 6e73 6163 7469 6f6e  ata["transaction
+00016880: 5f62 6c6f 636b 225d 203d 2054 7275 650a  _block"] = True.
+00016890: 2020 2020 2020 2020 2020 2020 7374 6174              stat
+000168a0: 655f 6368 616e 6765 645f 6461 7461 5b22  e_changed_data["
+000168b0: 626c 6f63 6b5f 636f 7374 225d 203d 2062  block_cost"] = b
+000168c0: 6c6f 636b 2e74 7261 6e73 6163 7469 6f6e  lock.transaction
+000168d0: 735f 696e 666f 2e63 6f73 740a 2020 2020  s_info.cost.    
+000168e0: 2020 2020 2020 2020 7374 6174 655f 6368          state_ch
+000168f0: 616e 6765 645f 6461 7461 5b22 626c 6f63  anged_data["bloc
+00016900: 6b5f 6665 6573 225d 203d 2062 6c6f 636b  k_fees"] = block
+00016910: 2e74 7261 6e73 6163 7469 6f6e 735f 696e  .transactions_in
+00016920: 666f 2e66 6565 730a 0a20 2020 2020 2020  fo.fees..       
+00016930: 2069 6620 626c 6f63 6b2e 666f 6c69 6167   if block.foliag
+00016940: 655f 7472 616e 7361 6374 696f 6e5f 626c  e_transaction_bl
+00016950: 6f63 6b20 6973 206e 6f74 204e 6f6e 653a  ock is not None:
+00016960: 0a20 2020 2020 2020 2020 2020 2073 7461  .            sta
+00016970: 7465 5f63 6861 6e67 6564 5f64 6174 615b  te_changed_data[
+00016980: 2274 696d 6573 7461 6d70 225d 203d 2062  "timestamp"] = b
+00016990: 6c6f 636b 2e66 6f6c 6961 6765 5f74 7261  lock.foliage_tra
+000169a0: 6e73 6163 7469 6f6e 5f62 6c6f 636b 2e74  nsaction_block.t
+000169b0: 696d 6573 7461 6d70 0a0a 2020 2020 2020  imestamp..      
+000169c0: 2020 6966 2062 6c6f 636b 2e74 7261 6e73    if block.trans
+000169d0: 6163 7469 6f6e 735f 6765 6e65 7261 746f  actions_generato
+000169e0: 7220 6973 206e 6f74 204e 6f6e 653a 0a20  r is not None:. 
+000169f0: 2020 2020 2020 2020 2020 2073 7461 7465             state
+00016a00: 5f63 6861 6e67 6564 5f64 6174 615b 2274  _changed_data["t
+00016a10: 7261 6e73 6163 7469 6f6e 5f67 656e 6572  ransaction_gener
+00016a20: 6174 6f72 5f73 697a 655f 6279 7465 7322  ator_size_bytes"
+00016a30: 5d20 3d20 6c65 6e28 6279 7465 7328 626c  ] = len(bytes(bl
+00016a40: 6f63 6b2e 7472 616e 7361 6374 696f 6e73  ock.transactions
+00016a50: 5f67 656e 6572 6174 6f72 2929 0a0a 2020  _generator))..  
+00016a60: 2020 2020 2020 7374 6174 655f 6368 616e        state_chan
+00016a70: 6765 645f 6461 7461 5b22 7472 616e 7361  ged_data["transa
+00016a80: 6374 696f 6e5f 6765 6e65 7261 746f 725f  ction_generator_
+00016a90: 7265 665f 6c69 7374 225d 203d 2062 6c6f  ref_list"] = blo
+00016aa0: 636b 2e74 7261 6e73 6163 7469 6f6e 735f  ck.transactions_
+00016ab0: 6765 6e65 7261 746f 725f 7265 665f 6c69  generator_ref_li
+00016ac0: 7374 0a20 2020 2020 2020 2069 6620 6164  st.        if ad
+00016ad0: 6465 6420 6973 206e 6f74 204e 6f6e 653a  ded is not None:
+00016ae0: 0a20 2020 2020 2020 2020 2020 2073 7461  .            sta
+00016af0: 7465 5f63 6861 6e67 6564 5f64 6174 615b  te_changed_data[
+00016b00: 2272 6563 6569 7665 5f62 6c6f 636b 5f72  "receive_block_r
+00016b10: 6573 756c 7422 5d20 3d20 6164 6465 642e  esult"] = added.
+00016b20: 7661 6c75 650a 0a20 2020 2020 2020 2073  value..        s
+00016b30: 656c 662e 5f73 7461 7465 5f63 6861 6e67  elf._state_chang
+00016b40: 6564 2822 626c 6f63 6b22 2c20 7374 6174  ed("block", stat
+00016b50: 655f 6368 616e 6765 645f 6461 7461 290a  e_changed_data).
+00016b60: 0a20 2020 2020 2020 2072 6563 6f72 6420  .        record 
+00016b70: 3d20 7365 6c66 2e62 6c6f 636b 6368 6169  = self.blockchai
+00016b80: 6e2e 626c 6f63 6b5f 7265 636f 7264 2862  n.block_record(b
+00016b90: 6c6f 636b 2e68 6561 6465 725f 6861 7368  lock.header_hash
+00016ba0: 290a 2020 2020 2020 2020 6966 2073 656c  ).        if sel
+00016bb0: 662e 7765 6967 6874 5f70 726f 6f66 5f68  f.weight_proof_h
+00016bc0: 616e 646c 6572 2069 7320 6e6f 7420 4e6f  andler is not No
+00016bd0: 6e65 2061 6e64 2072 6563 6f72 642e 7375  ne and record.su
+00016be0: 625f 6570 6f63 685f 7375 6d6d 6172 795f  b_epoch_summary_
+00016bf0: 696e 636c 7564 6564 2069 7320 6e6f 7420  included is not 
+00016c00: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00016c10: 2020 6966 2073 656c 662e 5f73 6567 6d65    if self._segme
+00016c20: 6e74 5f74 6173 6b20 6973 204e 6f6e 6520  nt_task is None 
+00016c30: 6f72 2073 656c 662e 5f73 6567 6d65 6e74  or self._segment
+00016c40: 5f74 6173 6b2e 646f 6e65 2829 3a0a 2020  _task.done():.  
+00016c50: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00016c60: 6c66 2e5f 7365 676d 656e 745f 7461 736b  lf._segment_task
+00016c70: 203d 2061 7379 6e63 696f 2e63 7265 6174   = asyncio.creat
+00016c80: 655f 7461 736b 2873 656c 662e 7765 6967  e_task(self.weig
+00016c90: 6874 5f70 726f 6f66 5f68 616e 646c 6572  ht_proof_handler
+00016ca0: 2e63 7265 6174 655f 7072 6576 5f73 7562  .create_prev_sub
+00016cb0: 5f65 706f 6368 5f73 6567 6d65 6e74 7328  _epoch_segments(
+00016cc0: 2929 0a20 2020 2020 2020 2072 6574 7572  )).        retur
+00016cd0: 6e20 4e6f 6e65 0a0a 2020 2020 6173 796e  n None..    asyn
+00016ce0: 6320 6465 6620 6164 645f 756e 6669 6e69  c def add_unfini
+00016cf0: 7368 6564 5f62 6c6f 636b 280a 2020 2020  shed_block(.    
+00016d00: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
+00016d10: 2020 626c 6f63 6b3a 2055 6e66 696e 6973    block: Unfinis
+00016d20: 6865 6442 6c6f 636b 2c0a 2020 2020 2020  hedBlock,.      
+00016d30: 2020 7065 6572 3a20 4f70 7469 6f6e 616c    peer: Optional
+00016d40: 5b57 5343 6869 6143 6f6e 6e65 6374 696f  [WSChiaConnectio
+00016d50: 6e5d 2c0a 2020 2020 2020 2020 6661 726d  n],.        farm
+00016d60: 6564 5f62 6c6f 636b 3a20 626f 6f6c 203d  ed_block: bool =
+00016d70: 2046 616c 7365 2c0a 2020 2020 2020 2020   False,.        
+00016d80: 626c 6f63 6b5f 6279 7465 733a 204f 7074  block_bytes: Opt
+00016d90: 696f 6e61 6c5b 6279 7465 735d 203d 204e  ional[bytes] = N
+00016da0: 6f6e 652c 0a20 2020 2029 202d 3e20 4e6f  one,.    ) -> No
+00016db0: 6e65 3a0a 2020 2020 2020 2020 2222 220a  ne:.        """.
+00016dc0: 2020 2020 2020 2020 5765 2068 6176 6520          We have 
+00016dd0: 7265 6365 6976 6564 2061 6e20 756e 6669  received an unfi
+00016de0: 6e69 7368 6564 2062 6c6f 636b 2c20 6569  nished block, ei
+00016df0: 7468 6572 2063 7265 6174 6564 2062 7920  ther created by 
+00016e00: 7573 2c20 6f72 2066 726f 6d20 616e 6f74  us, or from anot
+00016e10: 6865 7220 7065 6572 2e0a 2020 2020 2020  her peer..      
+00016e20: 2020 5765 2063 616e 2076 616c 6964 6174    We can validat
+00016e30: 6520 616e 6420 6164 6420 6974 2061 6e64  e and add it and
+00016e40: 2069 6620 6974 2773 2061 2067 6f6f 6420   if it's a good 
+00016e50: 626c 6f63 6b2c 2070 726f 7061 6761 7465  block, propagate
+00016e60: 2069 7420 746f 206f 7468 6572 2070 6565   it to other pee
+00016e70: 7273 2061 6e64 0a20 2020 2020 2020 2074  rs and.        t
+00016e80: 696d 656c 6f72 6473 2e0a 2020 2020 2020  imelords..      
+00016e90: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
+00016ea0: 6365 6976 655f 7469 6d65 203d 2074 696d  ceive_time = tim
+00016eb0: 652e 7469 6d65 2829 0a0a 2020 2020 2020  e.time()..      
+00016ec0: 2020 6966 2062 6c6f 636b 2e70 7265 765f    if block.prev_
+00016ed0: 6865 6164 6572 5f68 6173 6820 213d 2073  header_hash != s
+00016ee0: 656c 662e 636f 6e73 7461 6e74 732e 4745  elf.constants.GE
+00016ef0: 4e45 5349 535f 4348 414c 4c45 4e47 4520  NESIS_CHALLENGE 
+00016f00: 616e 6420 6e6f 7420 7365 6c66 2e62 6c6f  and not self.blo
+00016f10: 636b 6368 6169 6e2e 636f 6e74 6169 6e73  ckchain.contains
+00016f20: 5f62 6c6f 636b 280a 2020 2020 2020 2020  _block(.        
+00016f30: 2020 2020 626c 6f63 6b2e 7072 6576 5f68      block.prev_h
+00016f40: 6561 6465 725f 6861 7368 0a20 2020 2020  eader_hash.     
+00016f50: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
+00016f60: 2020 2320 4e6f 206e 6565 6420 746f 2072    # No need to r
+00016f70: 6571 7565 7374 2074 6865 2070 6172 656e  equest the paren
+00016f80: 742c 2073 696e 6365 2074 6865 2070 6565  t, since the pee
+00016f90: 7220 7769 6c6c 2073 656e 6420 6974 2074  r will send it t
+00016fa0: 6f20 7573 2061 6e79 7761 792c 2076 6961  o us anyway, via
+00016fb0: 204e 6577 5065 616b 0a20 2020 2020 2020   NewPeak.       
+00016fc0: 2020 2020 2073 656c 662e 6c6f 672e 6465       self.log.de
+00016fd0: 6275 6728 2252 6563 6569 7665 6420 6120  bug("Received a 
+00016fe0: 6469 7363 6f6e 6e65 6374 6564 2075 6e66  disconnected unf
+00016ff0: 696e 6973 6865 6420 626c 6f63 6b22 290a  inished block").
+00017000: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00017010: 726e 204e 6f6e 650a 0a20 2020 2020 2020  rn None..       
+00017020: 2023 2041 6464 7320 7468 6520 756e 6669   # Adds the unfi
+00017030: 6e69 7368 6564 2062 6c6f 636b 2074 6f20  nished block to 
+00017040: 7365 656e 2c20 616e 6420 6368 6563 6b20  seen, and check 
+00017050: 6966 2069 7427 7320 7365 656e 2062 6566  if it's seen bef
+00017060: 6f72 652c 2074 6f20 7072 6576 656e 740a  ore, to prevent.
+00017070: 2020 2020 2020 2020 2320 7072 6f63 6573          # proces
+00017080: 7369 6e67 2069 7420 7477 6963 652e 2054  sing it twice. T
+00017090: 6869 7320 7365 6172 6368 6573 2066 6f72  his searches for
+000170a0: 2074 6865 2065 7861 6374 2076 6572 7369   the exact versi
+000170b0: 6f6e 206f 6620 7468 6520 756e 6669 6e69  on of the unfini
+000170c0: 7368 6564 2062 6c6f 636b 2028 7468 6572  shed block (ther
+000170d0: 6520 6361 6e20 6265 206d 616e 7920 6469  e can be many di
+000170e0: 6666 6572 656e 740a 2020 2020 2020 2020  fferent.        
+000170f0: 2320 666f 6c69 6167 6573 2066 6f72 2074  # foliages for t
+00017100: 6865 2073 616d 6520 7472 756e 6b29 2e20  he same trunk). 
+00017110: 5468 6973 2069 7320 696e 7465 6e74 696f  This is intentio
+00017120: 6e61 6c2c 2074 6f20 7072 6576 656e 7420  nal, to prevent 
+00017130: 444f 5320 6174 7461 636b 732e 0a20 2020  DOS attacks..   
+00017140: 2020 2020 2023 204e 6f74 6520 7468 6174       # Note that
+00017150: 2069 7420 646f 6573 206e 6f74 2072 6571   it does not req
+00017160: 7569 7265 2074 6861 7420 7468 6973 2062  uire that this b
+00017170: 6c6f 636b 2077 6173 2073 7563 6365 7373  lock was success
+00017180: 6675 6c6c 7920 7072 6f63 6573 7365 640a  fully processed.
+00017190: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+000171a0: 6675 6c6c 5f6e 6f64 655f 7374 6f72 652e  full_node_store.
+000171b0: 7365 656e 5f75 6e66 696e 6973 6865 645f  seen_unfinished_
+000171c0: 626c 6f63 6b28 626c 6f63 6b2e 6765 745f  block(block.get_
+000171d0: 6861 7368 2829 293a 0a20 2020 2020 2020  hash()):.       
+000171e0: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
+000171f0: 0a0a 2020 2020 2020 2020 626c 6f63 6b5f  ..        block_
+00017200: 6861 7368 203d 2062 7974 6573 3332 2862  hash = bytes32(b
+00017210: 6c6f 636b 2e72 6577 6172 645f 6368 6169  lock.reward_chai
+00017220: 6e5f 626c 6f63 6b2e 6765 745f 6861 7368  n_block.get_hash
+00017230: 2829 290a 2020 2020 2020 2020 666f 6c69  ()).        foli
+00017240: 6167 655f 7478 5f68 6173 6820 3d20 626c  age_tx_hash = bl
+00017250: 6f63 6b2e 666f 6c69 6167 652e 666f 6c69  ock.foliage.foli
+00017260: 6167 655f 7472 616e 7361 6374 696f 6e5f  age_transaction_
+00017270: 626c 6f63 6b5f 6861 7368 0a0a 2020 2020  block_hash..    
+00017280: 2020 2020 2320 4966 2077 6520 6861 7665      # If we have
+00017290: 2061 6c72 6561 6479 2061 6464 6564 2074   already added t
+000172a0: 6865 2062 6c6f 636b 2077 6974 6820 7468  he block with th
+000172b0: 6973 2072 6577 6172 6420 626c 6f63 6b20  is reward block 
+000172c0: 6861 7368 2061 6e64 0a20 2020 2020 2020  hash and.       
+000172d0: 2023 2066 6f6c 6961 6765 2068 6173 682c   # foliage hash,
+000172e0: 2072 6574 7572 6e0a 2020 2020 2020 2020   return.        
+000172f0: 6966 2073 656c 662e 6675 6c6c 5f6e 6f64  if self.full_nod
+00017300: 655f 7374 6f72 652e 6765 745f 756e 6669  e_store.get_unfi
+00017310: 6e69 7368 6564 5f62 6c6f 636b 3228 626c  nished_block2(bl
+00017320: 6f63 6b5f 6861 7368 2c20 666f 6c69 6167  ock_hash, foliag
+00017330: 655f 7478 5f68 6173 6829 5b30 5d20 6973  e_tx_hash)[0] is
+00017340: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00017350: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
+00017360: 6e65 0a0a 2020 2020 2020 2020 7065 616b  ne..        peak
+00017370: 3a20 4f70 7469 6f6e 616c 5b42 6c6f 636b  : Optional[Block
+00017380: 5265 636f 7264 5d20 3d20 7365 6c66 2e62  Record] = self.b
+00017390: 6c6f 636b 6368 6169 6e2e 6765 745f 7065  lockchain.get_pe
+000173a0: 616b 2829 0a20 2020 2020 2020 2069 6620  ak().        if 
+000173b0: 7065 616b 2069 7320 6e6f 7420 4e6f 6e65  peak is not None
+000173c0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+000173d0: 2062 6c6f 636b 2e74 6f74 616c 5f69 7465   block.total_ite
+000173e0: 7273 203c 2070 6561 6b2e 7370 5f74 6f74  rs < peak.sp_tot
+000173f0: 616c 5f69 7465 7273 2873 656c 662e 636f  al_iters(self.co
+00017400: 6e73 7461 6e74 7329 3a0a 2020 2020 2020  nstants):.      
+00017410: 2020 2020 2020 2020 2020 2320 5468 6973            # This
+00017420: 206d 6561 6e73 2074 6869 7320 756e 6669   means this unfi
+00017430: 6e69 7368 6564 2062 6c6f 636b 2069 7320  nished block is 
+00017440: 7072 6574 7479 2066 6172 2062 6568 696e  pretty far behin
+00017450: 642c 2069 7420 7769 6c6c 206e 6f74 2061  d, it will not a
+00017460: 6464 2077 6569 6768 7420 746f 206f 7572  dd weight to our
+00017470: 2063 6861 696e 0a20 2020 2020 2020 2020   chain.         
+00017480: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
+00017490: 6e65 0a0a 2020 2020 2020 2020 6966 2062  ne..        if b
+000174a0: 6c6f 636b 2e70 7265 765f 6865 6164 6572  lock.prev_header
+000174b0: 5f68 6173 6820 3d3d 2073 656c 662e 636f  _hash == self.co
+000174c0: 6e73 7461 6e74 732e 4745 4e45 5349 535f  nstants.GENESIS_
+000174d0: 4348 414c 4c45 4e47 453a 0a20 2020 2020  CHALLENGE:.     
+000174e0: 2020 2020 2020 2070 7265 765f 6220 3d20         prev_b = 
+000174f0: 4e6f 6e65 0a20 2020 2020 2020 2065 6c73  None.        els
+00017500: 653a 0a20 2020 2020 2020 2020 2020 2070  e:.            p
+00017510: 7265 765f 6220 3d20 7365 6c66 2e62 6c6f  rev_b = self.blo
+00017520: 636b 6368 6169 6e2e 626c 6f63 6b5f 7265  ckchain.block_re
+00017530: 636f 7264 2862 6c6f 636b 2e70 7265 765f  cord(block.prev_
+00017540: 6865 6164 6572 5f68 6173 6829 0a0a 2020  header_hash)..  
+00017550: 2020 2020 2020 2320 436f 756e 7420 7468        # Count th
+00017560: 6520 626c 6f63 6b73 2069 6e20 7375 6220  e blocks in sub 
+00017570: 736c 6f74 2c20 616e 6420 6368 6563 6b20  slot, and check 
+00017580: 6966 2069 7427 7320 6120 6e65 7720 6570  if it's a new ep
+00017590: 6f63 680a 2020 2020 2020 2020 6966 206c  och.        if l
+000175a0: 656e 2862 6c6f 636b 2e66 696e 6973 6865  en(block.finishe
+000175b0: 645f 7375 625f 736c 6f74 7329 203e 2030  d_sub_slots) > 0
+000175c0: 3a0a 2020 2020 2020 2020 2020 2020 6e75  :.            nu
+000175d0: 6d5f 626c 6f63 6b73 5f69 6e5f 7373 203d  m_blocks_in_ss =
+000175e0: 2031 2020 2320 4375 7272 0a20 2020 2020   1  # Curr.     
+000175f0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00017600: 2020 2020 2063 7572 7220 3d20 7365 6c66       curr = self
+00017610: 2e62 6c6f 636b 6368 6169 6e2e 7472 795f  .blockchain.try_
+00017620: 626c 6f63 6b5f 7265 636f 7264 2862 6c6f  block_record(blo
+00017630: 636b 2e70 7265 765f 6865 6164 6572 5f68  ck.prev_header_h
+00017640: 6173 6829 0a20 2020 2020 2020 2020 2020  ash).           
+00017650: 206e 756d 5f62 6c6f 636b 735f 696e 5f73   num_blocks_in_s
+00017660: 7320 3d20 3220 2023 2043 7572 7220 616e  s = 2  # Curr an
+00017670: 6420 7072 6576 0a20 2020 2020 2020 2020  d prev.         
+00017680: 2020 2077 6869 6c65 2028 6375 7272 2069     while (curr i
+00017690: 7320 6e6f 7420 4e6f 6e65 2920 616e 6420  s not None) and 
+000176a0: 6e6f 7420 6375 7272 2e66 6972 7374 5f69  not curr.first_i
+000176b0: 6e5f 7375 625f 736c 6f74 3a0a 2020 2020  n_sub_slot:.    
+000176c0: 2020 2020 2020 2020 2020 2020 6375 7272              curr
+000176d0: 203d 2073 656c 662e 626c 6f63 6b63 6861   = self.blockcha
+000176e0: 696e 2e74 7279 5f62 6c6f 636b 5f72 6563  in.try_block_rec
+000176f0: 6f72 6428 6375 7272 2e70 7265 765f 6861  ord(curr.prev_ha
+00017700: 7368 290a 2020 2020 2020 2020 2020 2020  sh).            
+00017710: 2020 2020 6e75 6d5f 626c 6f63 6b73 5f69      num_blocks_i
+00017720: 6e5f 7373 202b 3d20 310a 0a20 2020 2020  n_ss += 1..     
+00017730: 2020 2069 6620 6e75 6d5f 626c 6f63 6b73     if num_blocks
+00017740: 5f69 6e5f 7373 203e 2073 656c 662e 636f  _in_ss > self.co
+00017750: 6e73 7461 6e74 732e 4d41 585f 5355 425f  nstants.MAX_SUB_
+00017760: 534c 4f54 5f42 4c4f 434b 533a 0a20 2020  SLOT_BLOCKS:.   
+00017770: 2020 2020 2020 2020 2023 2054 4f44 4f3a           # TODO:
+00017780: 2070 6f74 656e 7469 616c 6c79 2061 6c6c   potentially all
+00017790: 6f77 206f 7665 7266 6c6f 7720 626c 6f63  ow overflow bloc
+000177a0: 6b73 2068 6572 652c 2077 6869 6368 2063  ks here, which c
+000177b0: 6f75 6e74 2066 6f72 2074 6865 206e 6578  ount for the nex
+000177c0: 7420 736c 6f74 0a20 2020 2020 2020 2020  t slot.         
+000177d0: 2020 2073 656c 662e 6c6f 672e 7761 726e     self.log.warn
+000177e0: 696e 6728 2254 6f6f 206d 616e 7920 626c  ing("Too many bl
+000177f0: 6f63 6b73 2061 6464 6564 2c20 6e6f 7420  ocks added, not 
+00017800: 6164 6469 6e67 2062 6c6f 636b 2229 0a20  adding block"). 
+00017810: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00017820: 6e20 4e6f 6e65 0a0a 2020 2020 2020 2020  n None..        
+00017830: 2320 5468 6520 636c 766d 2067 656e 6572  # The clvm gener
+00017840: 6174 6f72 2061 6e64 2061 6767 7265 6761  ator and aggrega
+00017850: 7465 2073 6967 6e61 7475 7265 2061 7265  te signature are
+00017860: 2076 616c 6964 6174 6564 206f 7574 7369   validated outsi
+00017870: 6465 206f 6620 7468 6520 6c6f 636b 2c20  de of the lock, 
+00017880: 746f 2061 6c6c 6f77 206f 7468 6572 2062  to allow other b
+00017890: 6c6f 636b 7320 616e 640a 2020 2020 2020  locks and.      
+000178a0: 2020 2320 7472 616e 7361 6374 696f 6e73    # transactions
+000178b0: 2074 6f20 6765 7420 7661 6c69 6461 7465   to get validate
+000178c0: 640a 2020 2020 2020 2020 6e70 635f 7265  d.        npc_re
+000178d0: 7375 6c74 3a20 4f70 7469 6f6e 616c 5b4e  sult: Optional[N
+000178e0: 5043 5265 7375 6c74 5d20 3d20 4e6f 6e65  PCResult] = None
+000178f0: 0a20 2020 2020 2020 2070 7265 5f76 616c  .        pre_val
+00017900: 6964 6174 696f 6e5f 7469 6d65 203d 204e  idation_time = N
+00017910: 6f6e 650a 0a20 2020 2020 2020 2061 7379  one..        asy
+00017920: 6e63 2077 6974 6820 7365 6c66 2e62 6c6f  nc with self.blo
+00017930: 636b 6368 6169 6e2e 7072 696f 7269 7479  ckchain.priority
+00017940: 5f6d 7574 6578 2e61 6371 7569 7265 2870  _mutex.acquire(p
+00017950: 7269 6f72 6974 793d 426c 6f63 6b63 6861  riority=Blockcha
+00017960: 696e 4d75 7465 7850 7269 6f72 6974 792e  inMutexPriority.
+00017970: 6869 6768 293a 0a20 2020 2020 2020 2020  high):.         
+00017980: 2020 2073 7461 7274 5f68 6561 6465 725f     start_header_
+00017990: 7469 6d65 203d 2074 696d 652e 6d6f 6e6f  time = time.mono
+000179a0: 746f 6e69 6328 290a 2020 2020 2020 2020  tonic().        
+000179b0: 2020 2020 5f2c 2068 6561 6465 725f 6572      _, header_er
+000179c0: 726f 7220 3d20 6177 6169 7420 7365 6c66  ror = await self
+000179d0: 2e62 6c6f 636b 6368 6169 6e2e 7661 6c69  .blockchain.vali
+000179e0: 6461 7465 5f75 6e66 696e 6973 6865 645f  date_unfinished_
+000179f0: 626c 6f63 6b5f 6865 6164 6572 2862 6c6f  block_header(blo
+00017a00: 636b 290a 2020 2020 2020 2020 2020 2020  ck).            
+00017a10: 6966 2068 6561 6465 725f 6572 726f 7220  if header_error 
+00017a20: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00017a30: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00017a40: 6865 6164 6572 5f65 7272 6f72 203d 3d20  header_error == 
+00017a50: 4572 722e 5449 4d45 5354 414d 505f 544f  Err.TIMESTAMP_TO
+00017a60: 4f5f 4641 525f 494e 5f46 5554 5552 453a  O_FAR_IN_FUTURE:
+00017a70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017a80: 2020 2020 2072 6169 7365 2054 696d 6573       raise Times
+00017a90: 7461 6d70 4572 726f 7228 290a 2020 2020  tampError().    
+00017aa0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00017ab0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00017ac0: 2020 2020 2020 7261 6973 6520 436f 6e73        raise Cons
+00017ad0: 656e 7375 7345 7272 6f72 2868 6561 6465  ensusError(heade
+00017ae0: 725f 6572 726f 7229 0a20 2020 2020 2020  r_error).       
+00017af0: 2020 2020 2076 616c 6964 6174 655f 7469       validate_ti
+00017b00: 6d65 203d 2074 696d 652e 6d6f 6e6f 746f  me = time.monoto
+00017b10: 6e69 6328 2920 2d20 7374 6172 745f 6865  nic() - start_he
+00017b20: 6164 6572 5f74 696d 650a 2020 2020 2020  ader_time.      
+00017b30: 2020 2020 2020 7365 6c66 2e6c 6f67 2e6c        self.log.l
+00017b40: 6f67 280a 2020 2020 2020 2020 2020 2020  og(.            
+00017b50: 2020 2020 6c6f 6767 696e 672e 5741 524e      logging.WARN
+00017b60: 494e 4720 6966 2076 616c 6964 6174 655f  ING if validate_
+00017b70: 7469 6d65 203e 2032 2065 6c73 6520 6c6f  time > 2 else lo
+00017b80: 6767 696e 672e 4445 4255 472c 0a20 2020  gging.DEBUG,.   
+00017b90: 2020 2020 2020 2020 2020 2020 2066 2254               f"T
+00017ba0: 696d 6520 666f 7220 6865 6164 6572 2076  ime for header v
+00017bb0: 616c 6964 6174 653a 207b 7661 6c69 6461  alidate: {valida
+00017bc0: 7465 5f74 696d 653a 302e 3366 7d73 222c  te_time:0.3f}s",
+00017bd0: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
+00017be0: 2020 2020 2020 2020 6966 2062 6c6f 636b          if block
+00017bf0: 2e74 7261 6e73 6163 7469 6f6e 735f 6765  .transactions_ge
+00017c00: 6e65 7261 746f 7220 6973 206e 6f74 204e  nerator is not N
+00017c10: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00017c20: 2070 7265 5f76 616c 6964 6174 696f 6e5f   pre_validation_
+00017c30: 7374 6172 7420 3d20 7469 6d65 2e6d 6f6e  start = time.mon
+00017c40: 6f74 6f6e 6963 2829 0a20 2020 2020 2020  otonic().       
+00017c50: 2020 2020 2061 7373 6572 7420 626c 6f63       assert bloc
+00017c60: 6b2e 7472 616e 7361 6374 696f 6e73 5f69  k.transactions_i
+00017c70: 6e66 6f20 6973 206e 6f74 204e 6f6e 650a  nfo is not None.
+00017c80: 2020 2020 2020 2020 2020 2020 7472 793a              try:
+00017c90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017ca0: 2062 6c6f 636b 5f67 656e 6572 6174 6f72   block_generator
+00017cb0: 3a20 4f70 7469 6f6e 616c 5b42 6c6f 636b  : Optional[Block
+00017cc0: 4765 6e65 7261 746f 725d 203d 2061 7761  Generator] = awa
+00017cd0: 6974 2073 656c 662e 626c 6f63 6b63 6861  it self.blockcha
+00017ce0: 696e 2e67 6574 5f62 6c6f 636b 5f67 656e  in.get_block_gen
+00017cf0: 6572 6174 6f72 2862 6c6f 636b 290a 2020  erator(block).  
+00017d00: 2020 2020 2020 2020 2020 6578 6365 7074            except
+00017d10: 2056 616c 7565 4572 726f 723a 0a20 2020   ValueError:.   
+00017d20: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+00017d30: 7365 2043 6f6e 7365 6e73 7573 4572 726f  se ConsensusErro
+00017d40: 7228 4572 722e 4745 4e45 5241 544f 525f  r(Err.GENERATOR_
+00017d50: 5245 465f 4841 535f 4e4f 5f47 454e 4552  REF_HAS_NO_GENER
+00017d60: 4154 4f52 290a 2020 2020 2020 2020 2020  ATOR).          
+00017d70: 2020 6966 2062 6c6f 636b 5f67 656e 6572    if block_gener
+00017d80: 6174 6f72 2069 7320 4e6f 6e65 3a0a 2020  ator is None:.  
+00017d90: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+00017da0: 6973 6520 436f 6e73 656e 7375 7345 7272  ise ConsensusErr
+00017db0: 6f72 2845 7272 2e47 454e 4552 4154 4f52  or(Err.GENERATOR
+00017dc0: 5f52 4546 5f48 4153 5f4e 4f5f 4745 4e45  _REF_HAS_NO_GENE
+00017dd0: 5241 544f 5229 0a20 2020 2020 2020 2020  RATOR).         
+00017de0: 2020 2069 6620 626c 6f63 6b5f 6279 7465     if block_byte
+00017df0: 7320 6973 204e 6f6e 653a 0a20 2020 2020  s is None:.     
+00017e00: 2020 2020 2020 2020 2020 2062 6c6f 636b             block
+00017e10: 5f62 7974 6573 203d 2062 7974 6573 2862  _bytes = bytes(b
+00017e20: 6c6f 636b 290a 0a20 2020 2020 2020 2020  lock)..         
+00017e30: 2020 2068 6569 6768 7420 3d20 7569 6e74     height = uint
+00017e40: 3332 2830 2920 6966 2070 7265 765f 6220  32(0) if prev_b 
+00017e50: 6973 204e 6f6e 6520 656c 7365 2075 696e  is None else uin
+00017e60: 7433 3228 7072 6576 5f62 2e68 6569 6768  t32(prev_b.heigh
+00017e70: 7420 2b20 3129 0a20 2020 2020 2020 2020  t + 1).         
+00017e80: 2020 206e 7063 5f72 6573 756c 7420 3d20     npc_result = 
+00017e90: 6177 6169 7420 7365 6c66 2e62 6c6f 636b  await self.block
+00017ea0: 6368 6169 6e2e 7275 6e5f 6765 6e65 7261  chain.run_genera
+00017eb0: 746f 7228 626c 6f63 6b5f 6279 7465 732c  tor(block_bytes,
+00017ec0: 2062 6c6f 636b 5f67 656e 6572 6174 6f72   block_generator
+00017ed0: 2c20 6865 6967 6874 290a 2020 2020 2020  , height).      
+00017ee0: 2020 2020 2020 7072 655f 7661 6c69 6461        pre_valida
+00017ef0: 7469 6f6e 5f74 696d 6520 3d20 7469 6d65  tion_time = time
+00017f00: 2e6d 6f6e 6f74 6f6e 6963 2829 202d 2070  .monotonic() - p
+00017f10: 7265 5f76 616c 6964 6174 696f 6e5f 7374  re_validation_st
+00017f20: 6172 740a 0a20 2020 2020 2020 2020 2020  art..           
+00017f30: 2023 2062 6c6f 636b 6368 6169 6e2e 7275   # blockchain.ru
+00017f40: 6e5f 6765 6e65 7261 746f 7220 7468 726f  n_generator thro
+00017f50: 7773 206f 6e20 6572 726f 7273 2c20 736f  ws on errors, so
+00017f60: 206e 7063 5f72 6573 756c 7420 6973 0a20   npc_result is. 
+00017f70: 2020 2020 2020 2020 2020 2023 2067 7561             # gua
+00017f80: 7261 6e74 6565 6420 746f 2072 6570 7265  ranteed to repre
+00017f90: 7365 6e74 2061 2073 7563 6365 7373 6675  sent a successfu
+00017fa0: 6c20 7275 6e0a 2020 2020 2020 2020 2020  l run.          
+00017fb0: 2020 6173 7365 7274 206e 7063 5f72 6573    assert npc_res
+00017fc0: 756c 742e 636f 6e64 7320 6973 206e 6f74  ult.conds is not
+00017fd0: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
+00017fe0: 2020 7061 6972 735f 706b 732c 2070 6169    pairs_pks, pai
+00017ff0: 7273 5f6d 7367 7320 3d20 706b 6d5f 7061  rs_msgs = pkm_pa
+00018000: 6972 7328 6e70 635f 7265 7375 6c74 2e63  irs(npc_result.c
+00018010: 6f6e 6473 2c20 7365 6c66 2e63 6f6e 7374  onds, self.const
+00018020: 616e 7473 2e41 4747 5f53 4947 5f4d 455f  ants.AGG_SIG_ME_
+00018030: 4144 4449 5449 4f4e 414c 5f44 4154 4129  ADDITIONAL_DATA)
+00018040: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00018050: 6e6f 7420 6361 6368 6564 5f62 6c73 2e61  not cached_bls.a
+00018060: 6767 7265 6761 7465 5f76 6572 6966 7928  ggregate_verify(
+00018070: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018080: 2070 6169 7273 5f70 6b73 2c20 7061 6972   pairs_pks, pair
+00018090: 735f 6d73 6773 2c20 626c 6f63 6b2e 7472  s_msgs, block.tr
+000180a0: 616e 7361 6374 696f 6e73 5f69 6e66 6f2e  ansactions_info.
+000180b0: 6167 6772 6567 6174 6564 5f73 6967 6e61  aggregated_signa
+000180c0: 7475 7265 2c20 5472 7565 0a20 2020 2020  ture, True.     
+000180d0: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
+000180e0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000180f0: 436f 6e73 656e 7375 7345 7272 6f72 2845  ConsensusError(E
+00018100: 7272 2e42 4144 5f41 4747 5245 4741 5445  rr.BAD_AGGREGATE
+00018110: 5f53 4947 4e41 5455 5245 290a 0a20 2020  _SIGNATURE)..   
+00018120: 2020 2020 2061 7379 6e63 2077 6974 6820       async with 
+00018130: 7365 6c66 2e62 6c6f 636b 6368 6169 6e2e  self.blockchain.
+00018140: 7072 696f 7269 7479 5f6d 7574 6578 2e61  priority_mutex.a
+00018150: 6371 7569 7265 2870 7269 6f72 6974 793d  cquire(priority=
+00018160: 426c 6f63 6b63 6861 696e 4d75 7465 7850  BlockchainMutexP
+00018170: 7269 6f72 6974 792e 6869 6768 293a 0a20  riority.high):. 
+00018180: 2020 2020 2020 2020 2020 2023 2054 4f44             # TOD
+00018190: 4f3a 2070 7265 2d76 616c 6964 6174 6520  O: pre-validate 
+000181a0: 5644 4673 206f 7574 7369 6465 206f 6620  VDFs outside of 
+000181b0: 6c6f 636b 0a20 2020 2020 2020 2020 2020  lock.           
+000181c0: 2076 616c 6964 6174 696f 6e5f 7374 6172   validation_star
+000181d0: 7420 3d20 7469 6d65 2e6d 6f6e 6f74 6f6e  t = time.monoton
+000181e0: 6963 2829 0a20 2020 2020 2020 2020 2020  ic().           
+000181f0: 2076 616c 6964 6174 655f 7265 7375 6c74   validate_result
+00018200: 203d 2061 7761 6974 2073 656c 662e 626c   = await self.bl
+00018210: 6f63 6b63 6861 696e 2e76 616c 6964 6174  ockchain.validat
+00018220: 655f 756e 6669 6e69 7368 6564 5f62 6c6f  e_unfinished_blo
+00018230: 636b 2862 6c6f 636b 2c20 6e70 635f 7265  ck(block, npc_re
+00018240: 7375 6c74 290a 2020 2020 2020 2020 2020  sult).          
+00018250: 2020 6966 2076 616c 6964 6174 655f 7265    if validate_re
+00018260: 7375 6c74 2e65 7272 6f72 2069 7320 6e6f  sult.error is no
+00018270: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00018280: 2020 2020 2020 2020 7261 6973 6520 436f          raise Co
+00018290: 6e73 656e 7375 7345 7272 6f72 2845 7272  nsensusError(Err
+000182a0: 2876 616c 6964 6174 655f 7265 7375 6c74  (validate_result
+000182b0: 2e65 7272 6f72 2929 0a20 2020 2020 2020  .error)).       
+000182c0: 2020 2020 2076 616c 6964 6174 696f 6e5f       validation_
+000182d0: 7469 6d65 203d 2074 696d 652e 6d6f 6e6f  time = time.mono
+000182e0: 746f 6e69 6328 2920 2d20 7661 6c69 6461  tonic() - valida
+000182f0: 7469 6f6e 5f73 7461 7274 0a0a 2020 2020  tion_start..    
+00018300: 2020 2020 2320 7265 7370 6f6e 645f 626c      # respond_bl
+00018310: 6f63 6b20 7769 6c6c 206c 6174 6572 2075  ock will later u
+00018320: 7365 2074 6865 2063 6163 6865 2028 7661  se the cache (va
+00018330: 6c69 6461 7465 645f 7369 676e 6174 7572  lidated_signatur
+00018340: 653d 5472 7565 290a 2020 2020 2020 2020  e=True).        
+00018350: 7661 6c69 6461 7465 5f72 6573 756c 7420  validate_result 
+00018360: 3d20 6461 7461 636c 6173 7365 732e 7265  = dataclasses.re
+00018370: 706c 6163 6528 7661 6c69 6461 7465 5f72  place(validate_r
+00018380: 6573 756c 742c 2076 616c 6964 6174 6564  esult, validated
+00018390: 5f73 6967 6e61 7475 7265 3d54 7275 6529  _signature=True)
+000183a0: 0a0a 2020 2020 2020 2020 6173 7365 7274  ..        assert
+000183b0: 2076 616c 6964 6174 655f 7265 7375 6c74   validate_result
+000183c0: 2e72 6571 7569 7265 645f 6974 6572 7320  .required_iters 
+000183d0: 6973 206e 6f74 204e 6f6e 650a 0a20 2020  is not None..   
+000183e0: 2020 2020 2023 2050 6572 666f 726d 2061       # Perform a
+000183f0: 6e6f 7468 6572 2063 6865 636b 2c20 696e  nother check, in
+00018400: 2063 6173 6520 7765 2068 6176 6520 616c   case we have al
+00018410: 7265 6164 7920 636f 6e63 7572 7265 6e74  ready concurrent
+00018420: 6c79 2061 6464 6564 2074 6865 2073 616d  ly added the sam
+00018430: 6520 756e 6669 6e69 7368 6564 2062 6c6f  e unfinished blo
+00018440: 636b 0a20 2020 2020 2020 2069 6620 7365  ck.        if se
+00018450: 6c66 2e66 756c 6c5f 6e6f 6465 5f73 746f  lf.full_node_sto
+00018460: 7265 2e67 6574 5f75 6e66 696e 6973 6865  re.get_unfinishe
+00018470: 645f 626c 6f63 6b32 2862 6c6f 636b 5f68  d_block2(block_h
+00018480: 6173 682c 2066 6f6c 6961 6765 5f74 785f  ash, foliage_tx_
+00018490: 6861 7368 295b 305d 2069 7320 6e6f 7420  hash)[0] is not 
+000184a0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+000184b0: 2020 7265 7475 726e 204e 6f6e 650a 0a20    return None.. 
+000184c0: 2020 2020 2020 2069 6620 626c 6f63 6b2e         if block.
+000184d0: 7072 6576 5f68 6561 6465 725f 6861 7368  prev_header_hash
+000184e0: 203d 3d20 7365 6c66 2e63 6f6e 7374 616e   == self.constan
+000184f0: 7473 2e47 454e 4553 4953 5f43 4841 4c4c  ts.GENESIS_CHALL
+00018500: 454e 4745 3a0a 2020 2020 2020 2020 2020  ENGE:.          
+00018510: 2020 6865 6967 6874 203d 2075 696e 7433    height = uint3
+00018520: 3228 3029 0a20 2020 2020 2020 2065 6c73  2(0).        els
+00018530: 653a 0a20 2020 2020 2020 2020 2020 2068  e:.            h
+00018540: 6569 6768 7420 3d20 7569 6e74 3332 2873  eight = uint32(s
+00018550: 656c 662e 626c 6f63 6b63 6861 696e 2e62  elf.blockchain.b
+00018560: 6c6f 636b 5f72 6563 6f72 6428 626c 6f63  lock_record(bloc
+00018570: 6b2e 7072 6576 5f68 6561 6465 725f 6861  k.prev_header_ha
+00018580: 7368 292e 6865 6967 6874 202b 2031 290a  sh).height + 1).
+00018590: 0a20 2020 2020 2020 2073 6573 3a20 4f70  .        ses: Op
+000185a0: 7469 6f6e 616c 5b53 7562 4570 6f63 6853  tional[SubEpochS
+000185b0: 756d 6d61 7279 5d20 3d20 6e65 7874 5f73  ummary] = next_s
+000185c0: 7562 5f65 706f 6368 5f73 756d 6d61 7279  ub_epoch_summary
+000185d0: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
+000185e0: 6c66 2e63 6f6e 7374 616e 7473 2c0a 2020  lf.constants,.  
+000185f0: 2020 2020 2020 2020 2020 7365 6c66 2e62            self.b
+00018600: 6c6f 636b 6368 6169 6e2c 0a20 2020 2020  lockchain,.     
+00018610: 2020 2020 2020 2076 616c 6964 6174 655f         validate_
+00018620: 7265 7375 6c74 2e72 6571 7569 7265 645f  result.required_
+00018630: 6974 6572 732c 0a20 2020 2020 2020 2020  iters,.         
+00018640: 2020 2062 6c6f 636b 2c0a 2020 2020 2020     block,.      
+00018650: 2020 2020 2020 5472 7565 2c0a 2020 2020        True,.    
+00018660: 2020 2020 290a 0a20 2020 2020 2020 2073      )..        s
+00018670: 656c 662e 6675 6c6c 5f6e 6f64 655f 7374  elf.full_node_st
+00018680: 6f72 652e 6164 645f 756e 6669 6e69 7368  ore.add_unfinish
+00018690: 6564 5f62 6c6f 636b 2868 6569 6768 742c  ed_block(height,
+000186a0: 2062 6c6f 636b 2c20 7661 6c69 6461 7465   block, validate
+000186b0: 5f72 6573 756c 7429 0a20 2020 2020 2020  _result).       
+000186c0: 2070 7265 5f76 616c 6964 6174 696f 6e5f   pre_validation_
+000186d0: 6c6f 6720 3d20 280a 2020 2020 2020 2020  log = (.        
+000186e0: 2020 2020 6622 7072 655f 7661 6c69 6461      f"pre_valida
+000186f0: 7469 6f6e 2074 696d 6520 7b70 7265 5f76  tion time {pre_v
+00018700: 616c 6964 6174 696f 6e5f 7469 6d65 3a30  alidation_time:0
+00018710: 2e34 667d 2c20 2220 6966 2070 7265 5f76  .4f}, " if pre_v
+00018720: 616c 6964 6174 696f 6e5f 7469 6d65 2069  alidation_time i
+00018730: 7320 6e6f 7420 4e6f 6e65 2065 6c73 6520  s not None else 
+00018740: 2222 0a20 2020 2020 2020 2029 0a20 2020  "".        ).   
+00018750: 2020 2020 2069 6620 6661 726d 6564 5f62       if farmed_b
+00018760: 6c6f 636b 2069 7320 5472 7565 3a0a 2020  lock is True:.  
+00018770: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
+00018780: 6f67 2e69 6e66 6f28 0a20 2020 2020 2020  og.info(.       
+00018790: 2020 2020 2020 2020 2066 22f0 9f8d 8020           f".... 
+000187a0: efb8 8f46 6172 6d65 6420 756e 6669 6e69  ...Farmed unfini
+000187b0: 7368 6564 5f62 6c6f 636b 207b 626c 6f63  shed_block {bloc
+000187c0: 6b5f 6861 7368 7d2c 2053 503a 207b 626c  k_hash}, SP: {bl
+000187d0: 6f63 6b2e 7265 7761 7264 5f63 6861 696e  ock.reward_chain
+000187e0: 5f62 6c6f 636b 2e73 6967 6e61 6765 5f70  _block.signage_p
+000187f0: 6f69 6e74 5f69 6e64 6578 7d2c 2022 0a20  oint_index}, ". 
+00018800: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00018810: 2276 616c 6964 6174 696f 6e20 7469 6d65  "validation time
+00018820: 3a20 7b76 616c 6964 6174 696f 6e5f 7469  : {validation_ti
+00018830: 6d65 3a30 2e34 667d 2073 6563 6f6e 6473  me:0.4f} seconds
+00018840: 2c20 7b70 7265 5f76 616c 6964 6174 696f  , {pre_validatio
+00018850: 6e5f 6c6f 677d 220a 2020 2020 2020 2020  n_log}".        
+00018860: 2020 2020 2020 2020 6622 636f 7374 3a20          f"cost: 
+00018870: 7b62 6c6f 636b 2e74 7261 6e73 6163 7469  {block.transacti
+00018880: 6f6e 735f 696e 666f 2e63 6f73 7420 6966  ons_info.cost if
+00018890: 2062 6c6f 636b 2e74 7261 6e73 6163 7469   block.transacti
+000188a0: 6f6e 735f 696e 666f 2065 6c73 6520 274e  ons_info else 'N
+000188b0: 6f6e 6527 7d20 220a 2020 2020 2020 2020  one'} ".        
+000188c0: 2020 2020 290a 2020 2020 2020 2020 656c      ).        el
+000188d0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+000188e0: 7065 7263 656e 745f 6675 6c6c 5f73 7472  percent_full_str
+000188f0: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
+00018900: 2020 2020 2028 0a20 2020 2020 2020 2020       (.         
+00018910: 2020 2020 2020 2020 2020 2022 2c20 7065             ", pe
+00018920: 7263 656e 7420 6675 6c6c 3a20 220a 2020  rcent full: ".  
+00018930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018940: 2020 2b20 7374 7228 726f 756e 6428 3130    + str(round(10
+00018950: 302e 3020 2a20 666c 6f61 7428 626c 6f63  0.0 * float(bloc
+00018960: 6b2e 7472 616e 7361 6374 696f 6e73 5f69  k.transactions_i
+00018970: 6e66 6f2e 636f 7374 2920 2f20 7365 6c66  nfo.cost) / self
+00018980: 2e63 6f6e 7374 616e 7473 2e4d 4158 5f42  .constants.MAX_B
+00018990: 4c4f 434b 5f43 4f53 545f 434c 564d 2c20  LOCK_COST_CLVM, 
+000189a0: 3329 290a 2020 2020 2020 2020 2020 2020  3)).            
+000189b0: 2020 2020 2020 2020 2b20 2225 220a 2020          + "%".  
+000189c0: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+000189d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000189e0: 6966 2062 6c6f 636b 2e74 7261 6e73 6163  if block.transac
+000189f0: 7469 6f6e 735f 696e 666f 2069 7320 6e6f  tions_info is no
+00018a00: 7420 4e6f 6e65 0a20 2020 2020 2020 2020  t None.         
+00018a10: 2020 2020 2020 2065 6c73 6520 2222 0a20         else "". 
+00018a20: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00018a30: 2020 2020 2020 2020 2073 656c 662e 6c6f           self.lo
+00018a40: 672e 696e 666f 280a 2020 2020 2020 2020  g.info(.        
+00018a50: 2020 2020 2020 2020 6622 4164 6465 6420          f"Added 
+00018a60: 756e 6669 6e69 7368 6564 5f62 6c6f 636b  unfinished_block
+00018a70: 207b 626c 6f63 6b5f 6861 7368 7d2c 206e   {block_hash}, n
+00018a80: 6f74 2066 6172 6d65 6420 6279 2075 732c  ot farmed by us,
+00018a90: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+00018aa0: 2020 6622 2053 503a 207b 626c 6f63 6b2e    f" SP: {block.
+00018ab0: 7265 7761 7264 5f63 6861 696e 5f62 6c6f  reward_chain_blo
+00018ac0: 636b 2e73 6967 6e61 6765 5f70 6f69 6e74  ck.signage_point
+00018ad0: 5f69 6e64 6578 7d20 6661 726d 6572 2072  _index} farmer r
+00018ae0: 6573 706f 6e73 6520 7469 6d65 3a20 220a  esponse time: ".
+00018af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018b00: 6622 7b72 6563 6569 7665 5f74 696d 6520  f"{receive_time 
+00018b10: 2d20 7365 6c66 2e73 6967 6e61 6765 5f70  - self.signage_p
+00018b20: 6f69 6e74 5f74 696d 6573 5b62 6c6f 636b  oint_times[block
+00018b30: 2e72 6577 6172 645f 6368 6169 6e5f 626c  .reward_chain_bl
+00018b40: 6f63 6b2e 7369 676e 6167 655f 706f 696e  ock.signage_poin
+00018b50: 745f 696e 6465 785d 3a30 2e34 667d 2c20  t_index]:0.4f}, 
+00018b60: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+00018b70: 2020 6622 506f 6f6c 2070 6b20 7b65 6e63    f"Pool pk {enc
+00018b80: 6f64 655f 7075 7a7a 6c65 5f68 6173 6828  ode_puzzle_hash(
+00018b90: 626c 6f63 6b2e 666f 6c69 6167 652e 666f  block.foliage.fo
+00018ba0: 6c69 6167 655f 626c 6f63 6b5f 6461 7461  liage_block_data
+00018bb0: 2e70 6f6f 6c5f 7461 7267 6574 2e70 757a  .pool_target.puz
+00018bc0: 7a6c 655f 6861 7368 2c20 2778 6368 2729  zle_hash, 'xch')
+00018bd0: 7d2c 2022 0a20 2020 2020 2020 2020 2020  }, ".           
+00018be0: 2020 2020 2066 2276 616c 6964 6174 696f       f"validatio
+00018bf0: 6e20 7469 6d65 3a20 7b76 616c 6964 6174  n time: {validat
+00018c00: 696f 6e5f 7469 6d65 3a30 2e34 667d 2073  ion_time:0.4f} s
+00018c10: 6563 6f6e 6473 2c20 7b70 7265 5f76 616c  econds, {pre_val
+00018c20: 6964 6174 696f 6e5f 6c6f 677d 220a 2020  idation_log}".  
+00018c30: 2020 2020 2020 2020 2020 2020 2020 6622                f"
+00018c40: 636f 7374 3a20 7b62 6c6f 636b 2e74 7261  cost: {block.tra
+00018c50: 6e73 6163 7469 6f6e 735f 696e 666f 2e63  nsactions_info.c
+00018c60: 6f73 7420 6966 2062 6c6f 636b 2e74 7261  ost if block.tra
+00018c70: 6e73 6163 7469 6f6e 735f 696e 666f 2065  nsactions_info e
+00018c80: 6c73 6520 274e 6f6e 6527 7d22 0a20 2020  lse 'None'}".   
+00018c90: 2020 2020 2020 2020 2020 2020 2066 227b               f"{
+00018ca0: 7065 7263 656e 745f 6675 6c6c 5f73 7472  percent_full_str
+00018cb0: 7d22 0a20 2020 2020 2020 2020 2020 2029  }".            )
+00018cc0: 0a0a 2020 2020 2020 2020 7375 625f 736c  ..        sub_sl
+00018cd0: 6f74 5f69 7465 7273 2c20 6469 6666 6963  ot_iters, diffic
+00018ce0: 756c 7479 203d 2067 6574 5f6e 6578 745f  ulty = get_next_
+00018cf0: 7375 625f 736c 6f74 5f69 7465 7273 5f61  sub_slot_iters_a
+00018d00: 6e64 5f64 6966 6669 6375 6c74 7928 0a20  nd_difficulty(. 
+00018d10: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00018d20: 636f 6e73 7461 6e74 732c 0a20 2020 2020  constants,.     
+00018d30: 2020 2020 2020 206c 656e 2862 6c6f 636b         len(block
+00018d40: 2e66 696e 6973 6865 645f 7375 625f 736c  .finished_sub_sl
+00018d50: 6f74 7329 203e 2030 2c0a 2020 2020 2020  ots) > 0,.      
+00018d60: 2020 2020 2020 7072 6576 5f62 2c0a 2020        prev_b,.  
+00018d70: 2020 2020 2020 2020 2020 7365 6c66 2e62            self.b
+00018d80: 6c6f 636b 6368 6169 6e2c 0a20 2020 2020  lockchain,.     
+00018d90: 2020 2029 0a0a 2020 2020 2020 2020 6966     )..        if
+00018da0: 2062 6c6f 636b 2e72 6577 6172 645f 6368   block.reward_ch
+00018db0: 6169 6e5f 626c 6f63 6b2e 7369 676e 6167  ain_block.signag
+00018dc0: 655f 706f 696e 745f 696e 6465 7820 3d3d  e_point_index ==
+00018dd0: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
+00018de0: 7265 7320 3d20 7365 6c66 2e66 756c 6c5f  res = self.full_
+00018df0: 6e6f 6465 5f73 746f 7265 2e67 6574 5f73  node_store.get_s
+00018e00: 7562 5f73 6c6f 7428 626c 6f63 6b2e 7265  ub_slot(block.re
+00018e10: 7761 7264 5f63 6861 696e 5f62 6c6f 636b  ward_chain_block
+00018e20: 2e70 6f73 5f73 735f 6363 5f63 6861 6c6c  .pos_ss_cc_chall
+00018e30: 656e 6765 5f68 6173 6829 0a20 2020 2020  enge_hash).     
+00018e40: 2020 2020 2020 2069 6620 7265 7320 6973         if res is
+00018e50: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00018e60: 2020 2020 2020 2069 6620 626c 6f63 6b2e         if block.
+00018e70: 7265 7761 7264 5f63 6861 696e 5f62 6c6f  reward_chain_blo
+00018e80: 636b 2e70 6f73 5f73 735f 6363 5f63 6861  ck.pos_ss_cc_cha
+00018e90: 6c6c 656e 6765 5f68 6173 6820 3d3d 2073  llenge_hash == s
+00018ea0: 656c 662e 636f 6e73 7461 6e74 732e 4745  elf.constants.GE
+00018eb0: 4e45 5349 535f 4348 414c 4c45 4e47 453a  NESIS_CHALLENGE:
+00018ec0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018ed0: 2020 2020 2072 635f 7072 6576 203d 2073       rc_prev = s
+00018ee0: 656c 662e 636f 6e73 7461 6e74 732e 4745  elf.constants.GE
+00018ef0: 4e45 5349 535f 4348 414c 4c45 4e47 450a  NESIS_CHALLENGE.
+00018f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018f10: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00018f20: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
+00018f30: 6f67 2e77 6172 6e69 6e67 2866 2244 6f20  og.warning(f"Do 
+00018f40: 6e6f 7420 6861 7665 2073 7562 2073 6c6f  not have sub slo
+00018f50: 7420 7b62 6c6f 636b 2e72 6577 6172 645f  t {block.reward_
+00018f60: 6368 6169 6e5f 626c 6f63 6b2e 706f 735f  chain_block.pos_
+00018f70: 7373 5f63 635f 6368 616c 6c65 6e67 655f  ss_cc_challenge_
+00018f80: 6861 7368 7d22 290a 2020 2020 2020 2020  hash}").        
+00018f90: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00018fa0: 726e 204e 6f6e 650a 2020 2020 2020 2020  rn None.        
+00018fb0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00018fc0: 2020 2020 2020 2020 2020 7263 5f70 7265            rc_pre
+00018fd0: 7620 3d20 7265 735b 305d 2e72 6577 6172  v = res[0].rewar
+00018fe0: 645f 6368 6169 6e2e 6765 745f 6861 7368  d_chain.get_hash
+00018ff0: 2829 0a20 2020 2020 2020 2065 6c73 653a  ().        else:
+00019000: 0a20 2020 2020 2020 2020 2020 2061 7373  .            ass
+00019010: 6572 7420 626c 6f63 6b2e 7265 7761 7264  ert block.reward
+00019020: 5f63 6861 696e 5f62 6c6f 636b 2e72 6577  _chain_block.rew
+00019030: 6172 645f 6368 6169 6e5f 7370 5f76 6466  ard_chain_sp_vdf
+00019040: 2069 7320 6e6f 7420 4e6f 6e65 0a20 2020   is not None.   
+00019050: 2020 2020 2020 2020 2072 635f 7072 6576           rc_prev
+00019060: 203d 2062 6c6f 636b 2e72 6577 6172 645f   = block.reward_
+00019070: 6368 6169 6e5f 626c 6f63 6b2e 7265 7761  chain_block.rewa
+00019080: 7264 5f63 6861 696e 5f73 705f 7664 662e  rd_chain_sp_vdf.
+00019090: 6368 616c 6c65 6e67 650a 0a20 2020 2020  challenge..     
+000190a0: 2020 2074 696d 656c 6f72 645f 7265 7175     timelord_requ
+000190b0: 6573 7420 3d20 7469 6d65 6c6f 7264 5f70  est = timelord_p
+000190c0: 726f 746f 636f 6c2e 4e65 7755 6e66 696e  rotocol.NewUnfin
+000190d0: 6973 6865 6442 6c6f 636b 5469 6d65 6c6f  ishedBlockTimelo
+000190e0: 7264 280a 2020 2020 2020 2020 2020 2020  rd(.            
+000190f0: 626c 6f63 6b2e 7265 7761 7264 5f63 6861  block.reward_cha
+00019100: 696e 5f62 6c6f 636b 2c0a 2020 2020 2020  in_block,.      
+00019110: 2020 2020 2020 6469 6666 6963 756c 7479        difficulty
+00019120: 2c0a 2020 2020 2020 2020 2020 2020 7375  ,.            su
+00019130: 625f 736c 6f74 5f69 7465 7273 2c0a 2020  b_slot_iters,.  
+00019140: 2020 2020 2020 2020 2020 626c 6f63 6b2e            block.
+00019150: 666f 6c69 6167 652c 0a20 2020 2020 2020  foliage,.       
+00019160: 2020 2020 2073 6573 2c0a 2020 2020 2020       ses,.      
+00019170: 2020 2020 2020 7263 5f70 7265 762c 0a20        rc_prev,. 
+00019180: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00019190: 2020 7469 6d65 6c6f 7264 5f6d 7367 203d    timelord_msg =
+000191a0: 206d 616b 655f 6d73 6728 5072 6f74 6f63   make_msg(Protoc
+000191b0: 6f6c 4d65 7373 6167 6554 7970 6573 2e6e  olMessageTypes.n
+000191c0: 6577 5f75 6e66 696e 6973 6865 645f 626c  ew_unfinished_bl
+000191d0: 6f63 6b5f 7469 6d65 6c6f 7264 2c20 7469  ock_timelord, ti
+000191e0: 6d65 6c6f 7264 5f72 6571 7565 7374 290a  melord_request).
+000191f0: 2020 2020 2020 2020 6177 6169 7420 7365          await se
+00019200: 6c66 2e73 6572 7665 722e 7365 6e64 5f74  lf.server.send_t
+00019210: 6f5f 616c 6c28 5b74 696d 656c 6f72 645f  o_all([timelord_
+00019220: 6d73 675d 2c20 4e6f 6465 5479 7065 2e54  msg], NodeType.T
+00019230: 494d 454c 4f52 4429 0a0a 2020 2020 2020  IMELORD)..      
+00019240: 2020 2320 6372 6561 7465 2074 776f 2076    # create two v
+00019250: 6572 7369 6f6e 7320 6f66 2074 6865 204e  ersions of the N
+00019260: 6577 556e 6669 6e69 7368 6564 426c 6f63  ewUnfinishedBloc
+00019270: 6b20 6d65 7373 6167 652c 206f 6e65 2074  k message, one t
+00019280: 6f20 6265 2073 656e 740a 2020 2020 2020  o be sent.      
+00019290: 2020 2320 746f 206e 6577 6572 2063 6c69    # to newer cli
+000192a0: 656e 7473 2061 6e64 206f 6e65 2066 6f72  ents and one for
+000192b0: 206f 6c64 6572 2063 6c69 656e 7473 0a20   older clients. 
+000192c0: 2020 2020 2020 2066 756c 6c5f 6e6f 6465         full_node
+000192d0: 5f72 6571 7565 7374 203d 2066 756c 6c5f  _request = full_
+000192e0: 6e6f 6465 5f70 726f 746f 636f 6c2e 4e65  node_protocol.Ne
+000192f0: 7755 6e66 696e 6973 6865 6442 6c6f 636b  wUnfinishedBlock
+00019300: 2862 6c6f 636b 2e72 6577 6172 645f 6368  (block.reward_ch
+00019310: 6169 6e5f 626c 6f63 6b2e 6765 745f 6861  ain_block.get_ha
+00019320: 7368 2829 290a 2020 2020 2020 2020 6d73  sh()).        ms
+00019330: 6720 3d20 6d61 6b65 5f6d 7367 2850 726f  g = make_msg(Pro
+00019340: 746f 636f 6c4d 6573 7361 6765 5479 7065  tocolMessageType
+00019350: 732e 6e65 775f 756e 6669 6e69 7368 6564  s.new_unfinished
+00019360: 5f62 6c6f 636b 2c20 6675 6c6c 5f6e 6f64  _block, full_nod
+00019370: 655f 7265 7175 6573 7429 0a0a 2020 2020  e_request)..    
+00019380: 2020 2020 6675 6c6c 5f6e 6f64 655f 7265      full_node_re
+00019390: 7175 6573 7432 203d 2066 756c 6c5f 6e6f  quest2 = full_no
+000193a0: 6465 5f70 726f 746f 636f 6c2e 4e65 7755  de_protocol.NewU
+000193b0: 6e66 696e 6973 6865 6442 6c6f 636b 3228  nfinishedBlock2(
+000193c0: 0a20 2020 2020 2020 2020 2020 2062 6c6f  .            blo
+000193d0: 636b 2e72 6577 6172 645f 6368 6169 6e5f  ck.reward_chain_
+000193e0: 626c 6f63 6b2e 6765 745f 6861 7368 2829  block.get_hash()
+000193f0: 2c20 626c 6f63 6b2e 666f 6c69 6167 652e  , block.foliage.
+00019400: 666f 6c69 6167 655f 7472 616e 7361 6374  foliage_transact
+00019410: 696f 6e5f 626c 6f63 6b5f 6861 7368 0a20  ion_block_hash. 
+00019420: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00019430: 206d 7367 3220 3d20 6d61 6b65 5f6d 7367   msg2 = make_msg
+00019440: 2850 726f 746f 636f 6c4d 6573 7361 6765  (ProtocolMessage
+00019450: 5479 7065 732e 6e65 775f 756e 6669 6e69  Types.new_unfini
+00019460: 7368 6564 5f62 6c6f 636b 322c 2066 756c  shed_block2, ful
+00019470: 6c5f 6e6f 6465 5f72 6571 7565 7374 3229  l_node_request2)
+00019480: 0a0a 2020 2020 2020 2020 6465 6620 6f6c  ..        def ol
+00019490: 645f 636c 6965 6e74 7328 636f 6e6e 3a20  d_clients(conn: 
+000194a0: 5753 4368 6961 436f 6e6e 6563 7469 6f6e  WSChiaConnection
+000194b0: 2920 2d3e 2062 6f6f 6c3a 0a20 2020 2020  ) -> bool:.     
+000194c0: 2020 2020 2020 2023 2064 6f6e 2774 2073         # don't s
+000194d0: 656e 6420 7468 6973 2074 6f20 7065 6572  end this to peer
+000194e0: 7320 7769 7468 206e 6577 2063 6c69 656e  s with new clien
+000194f0: 7473 0a20 2020 2020 2020 2020 2020 2072  ts.            r
+00019500: 6574 7572 6e20 636f 6e6e 2e70 726f 746f  eturn conn.proto
+00019510: 636f 6c5f 7665 7273 696f 6e20 3c3d 2056  col_version <= V
+00019520: 6572 7369 6f6e 2822 302e 302e 3335 2229  ersion("0.0.35")
+00019530: 0a0a 2020 2020 2020 2020 6465 6620 6e65  ..        def ne
+00019540: 775f 636c 6965 6e74 7328 636f 6e6e 3a20  w_clients(conn: 
+00019550: 5753 4368 6961 436f 6e6e 6563 7469 6f6e  WSChiaConnection
+00019560: 2920 2d3e 2062 6f6f 6c3a 0a20 2020 2020  ) -> bool:.     
+00019570: 2020 2020 2020 2023 2064 6f6e 2774 2073         # don't s
+00019580: 656e 6420 7468 6973 2074 6f20 7065 6572  end this to peer
+00019590: 7320 7769 7468 206f 6c64 2063 6c69 656e  s with old clien
+000195a0: 7473 0a20 2020 2020 2020 2020 2020 2072  ts.            r
+000195b0: 6574 7572 6e20 636f 6e6e 2e70 726f 746f  eturn conn.proto
+000195c0: 636f 6c5f 7665 7273 696f 6e20 3e20 5665  col_version > Ve
+000195d0: 7273 696f 6e28 2230 2e30 2e33 3522 290a  rsion("0.0.35").
+000195e0: 0a20 2020 2020 2020 2070 6565 725f 6964  .        peer_id
+000195f0: 3a20 4f70 7469 6f6e 616c 5b62 7974 6573  : Optional[bytes
+00019600: 3332 5d20 3d20 4e6f 6e65 2069 6620 7065  32] = None if pe
+00019610: 6572 2069 7320 4e6f 6e65 2065 6c73 6520  er is None else 
+00019620: 7065 6572 2e70 6565 725f 6e6f 6465 5f69  peer.peer_node_i
+00019630: 640a 2020 2020 2020 2020 6177 6169 7420  d.        await 
+00019640: 7365 6c66 2e73 6572 7665 722e 7365 6e64  self.server.send
+00019650: 5f74 6f5f 616c 6c5f 6966 285b 6d73 675d  _to_all_if([msg]
+00019660: 2c20 4e6f 6465 5479 7065 2e46 554c 4c5f  , NodeType.FULL_
+00019670: 4e4f 4445 2c20 6f6c 645f 636c 6965 6e74  NODE, old_client
+00019680: 732c 2070 6565 725f 6964 290a 2020 2020  s, peer_id).    
+00019690: 2020 2020 6177 6169 7420 7365 6c66 2e73      await self.s
+000196a0: 6572 7665 722e 7365 6e64 5f74 6f5f 616c  erver.send_to_al
+000196b0: 6c5f 6966 285b 6d73 6732 5d2c 204e 6f64  l_if([msg2], Nod
+000196c0: 6554 7970 652e 4655 4c4c 5f4e 4f44 452c  eType.FULL_NODE,
+000196d0: 206e 6577 5f63 6c69 656e 7473 2c20 7065   new_clients, pe
+000196e0: 6572 5f69 6429 0a0a 2020 2020 2020 2020  er_id)..        
+000196f0: 7365 6c66 2e5f 7374 6174 655f 6368 616e  self._state_chan
+00019700: 6765 6428 2275 6e66 696e 6973 6865 645f  ged("unfinished_
+00019710: 626c 6f63 6b22 290a 0a20 2020 2061 7379  block")..    asy
+00019720: 6e63 2064 6566 206e 6577 5f69 6e66 7573  nc def new_infus
+00019730: 696f 6e5f 706f 696e 745f 7664 6628 0a20  ion_point_vdf(. 
+00019740: 2020 2020 2020 2073 656c 662c 2072 6571         self, req
+00019750: 7565 7374 3a20 7469 6d65 6c6f 7264 5f70  uest: timelord_p
+00019760: 726f 746f 636f 6c2e 4e65 7749 6e66 7573  rotocol.NewInfus
+00019770: 696f 6e50 6f69 6e74 5644 462c 2074 696d  ionPointVDF, tim
+00019780: 656c 6f72 645f 7065 6572 3a20 4f70 7469  elord_peer: Opti
+00019790: 6f6e 616c 5b57 5343 6869 6143 6f6e 6e65  onal[WSChiaConne
+000197a0: 6374 696f 6e5d 203d 204e 6f6e 650a 2020  ction] = None.  
+000197b0: 2020 2920 2d3e 204f 7074 696f 6e61 6c5b    ) -> Optional[
+000197c0: 4d65 7373 6167 655d 3a0a 2020 2020 2020  Message]:.      
+000197d0: 2020 2320 4c6f 6f6b 7570 2075 6e66 696e    # Lookup unfin
+000197e0: 6973 6865 6420 626c 6f63 6b73 0a20 2020  ished blocks.   
+000197f0: 2020 2020 2075 6e66 696e 6973 6865 645f       unfinished_
+00019800: 626c 6f63 6b3a 204f 7074 696f 6e61 6c5b  block: Optional[
+00019810: 556e 6669 6e69 7368 6564 426c 6f63 6b5d  UnfinishedBlock]
+00019820: 203d 2073 656c 662e 6675 6c6c 5f6e 6f64   = self.full_nod
+00019830: 655f 7374 6f72 652e 6765 745f 756e 6669  e_store.get_unfi
+00019840: 6e69 7368 6564 5f62 6c6f 636b 280a 2020  nished_block(.  
+00019850: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00019860: 742e 756e 6669 6e69 7368 6564 5f72 6577  t.unfinished_rew
+00019870: 6172 645f 6861 7368 0a20 2020 2020 2020  ard_hash.       
+00019880: 2029 0a0a 2020 2020 2020 2020 6966 2075   )..        if u
+00019890: 6e66 696e 6973 6865 645f 626c 6f63 6b20  nfinished_block 
+000198a0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+000198b0: 2020 2020 2073 656c 662e 6c6f 672e 7761       self.log.wa
+000198c0: 726e 696e 6728 0a20 2020 2020 2020 2020  rning(.         
+000198d0: 2020 2020 2020 2066 2244 6f20 6e6f 7420         f"Do not 
+000198e0: 6861 7665 2075 6e66 696e 6973 6865 6420  have unfinished 
+000198f0: 7265 7761 7264 2063 6861 696e 2062 6c6f  reward chain blo
+00019900: 636b 207b 7265 7175 6573 742e 756e 6669  ck {request.unfi
+00019910: 6e69 7368 6564 5f72 6577 6172 645f 6861  nished_reward_ha
+00019920: 7368 7d2c 2063 616e 6e6f 7420 6669 6e69  sh}, cannot fini
+00019930: 7368 2e22 0a20 2020 2020 2020 2020 2020  sh.".           
+00019940: 2029 0a20 2020 2020 2020 2020 2020 2072   ).            r
+00019950: 6574 7572 6e20 4e6f 6e65 0a0a 2020 2020  eturn None..    
+00019960: 2020 2020 7072 6576 5f62 3a20 4f70 7469      prev_b: Opti
+00019970: 6f6e 616c 5b42 6c6f 636b 5265 636f 7264  onal[BlockRecord
+00019980: 5d20 3d20 4e6f 6e65 0a0a 2020 2020 2020  ] = None..      
+00019990: 2020 7461 7267 6574 5f72 635f 6861 7368    target_rc_hash
+000199a0: 203d 2072 6571 7565 7374 2e72 6577 6172   = request.rewar
+000199b0: 645f 6368 6169 6e5f 6970 5f76 6466 2e63  d_chain_ip_vdf.c
+000199c0: 6861 6c6c 656e 6765 0a20 2020 2020 2020  hallenge.       
+000199d0: 206c 6173 745f 736c 6f74 5f63 635f 6861   last_slot_cc_ha
+000199e0: 7368 203d 2072 6571 7565 7374 2e63 6861  sh = request.cha
+000199f0: 6c6c 656e 6765 5f63 6861 696e 5f69 705f  llenge_chain_ip_
+00019a00: 7664 662e 6368 616c 6c65 6e67 650a 0a20  vdf.challenge.. 
+00019a10: 2020 2020 2020 2023 2042 6163 6b74 7261         # Backtra
+00019a20: 636b 7320 7468 726f 7567 6820 656e 6420  cks through end 
+00019a30: 6f66 2073 6c6f 7420 6f62 6a65 6374 732c  of slot objects,
+00019a40: 2073 686f 756c 6420 776f 726b 2066 6f72   should work for
+00019a50: 206d 756c 7469 706c 6520 656d 7074 7920   multiple empty 
+00019a60: 7375 6220 736c 6f74 730a 2020 2020 2020  sub slots.      
+00019a70: 2020 666f 7220 656f 732c 205f 2c20 5f20    for eos, _, _ 
+00019a80: 696e 2072 6576 6572 7365 6428 7365 6c66  in reversed(self
+00019a90: 2e66 756c 6c5f 6e6f 6465 5f73 746f 7265  .full_node_store
+00019aa0: 2e66 696e 6973 6865 645f 7375 625f 736c  .finished_sub_sl
+00019ab0: 6f74 7329 3a0a 2020 2020 2020 2020 2020  ots):.          
+00019ac0: 2020 6966 2065 6f73 2069 7320 6e6f 7420    if eos is not 
+00019ad0: 4e6f 6e65 2061 6e64 2065 6f73 2e72 6577  None and eos.rew
+00019ae0: 6172 645f 6368 6169 6e2e 6765 745f 6861  ard_chain.get_ha
+00019af0: 7368 2829 203d 3d20 7461 7267 6574 5f72  sh() == target_r
+00019b00: 635f 6861 7368 3a0a 2020 2020 2020 2020  c_hash:.        
+00019b10: 2020 2020 2020 2020 7461 7267 6574 5f72          target_r
+00019b20: 635f 6861 7368 203d 2065 6f73 2e72 6577  c_hash = eos.rew
+00019b30: 6172 645f 6368 6169 6e2e 656e 645f 6f66  ard_chain.end_of
+00019b40: 5f73 6c6f 745f 7664 662e 6368 616c 6c65  _slot_vdf.challe
+00019b50: 6e67 650a 2020 2020 2020 2020 6966 2074  nge.        if t
+00019b60: 6172 6765 745f 7263 5f68 6173 6820 3d3d  arget_rc_hash ==
+00019b70: 2073 656c 662e 636f 6e73 7461 6e74 732e   self.constants.
+00019b80: 4745 4e45 5349 535f 4348 414c 4c45 4e47  GENESIS_CHALLENG
+00019b90: 453a 0a20 2020 2020 2020 2020 2020 2070  E:.            p
+00019ba0: 7265 765f 6220 3d20 4e6f 6e65 0a20 2020  rev_b = None.   
+00019bb0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00019bc0: 2020 2020 2020 2023 2046 696e 6420 7468         # Find th
+00019bd0: 6520 7072 6576 2062 6c6f 636b 2c20 7374  e prev block, st
+00019be0: 6172 7473 206c 6f6f 6b69 6e67 2062 6163  arts looking bac
+00019bf0: 6b77 6172 6473 2066 726f 6d20 7468 6520  kwards from the 
+00019c00: 7065 616b 2e20 7461 7267 6574 5f72 635f  peak. target_rc_
+00019c10: 6861 7368 206d 7573 7420 6265 2074 6865  hash must be the
+00019c20: 2068 6173 6820 6f66 2061 2062 6c6f 636b   hash of a block
+00019c30: 0a20 2020 2020 2020 2020 2020 2023 2061  .            # a
+00019c40: 6e64 206e 6f74 2061 6e20 656e 6420 6f66  nd not an end of
+00019c50: 2073 6c6f 7420 2873 696e 6365 2077 6520   slot (since we 
+00019c60: 6a75 7374 206c 6f6f 6b65 6420 7468 726f  just looked thro
+00019c70: 7567 6820 7468 6520 736c 6f74 7320 616e  ugh the slots an
+00019c80: 6420 6261 636b 7472 6163 6b65 6429 0a20  d backtracked). 
+00019c90: 2020 2020 2020 2020 2020 2063 7572 723a             curr:
+00019ca0: 204f 7074 696f 6e61 6c5b 426c 6f63 6b52   Optional[BlockR
+00019cb0: 6563 6f72 645d 203d 2073 656c 662e 626c  ecord] = self.bl
+00019cc0: 6f63 6b63 6861 696e 2e67 6574 5f70 6561  ockchain.get_pea
+00019cd0: 6b28 290a 0a20 2020 2020 2020 2020 2020  k()..           
+00019ce0: 2066 6f72 205f 2069 6e20 7261 6e67 6528   for _ in range(
+00019cf0: 3130 293a 0a20 2020 2020 2020 2020 2020  10):.           
+00019d00: 2020 2020 2069 6620 6375 7272 2069 7320       if curr is 
+00019d10: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00019d20: 2020 2020 2020 2020 2020 6272 6561 6b0a            break.
+00019d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019d40: 6966 2063 7572 722e 7265 7761 7264 5f69  if curr.reward_i
+00019d50: 6e66 7573 696f 6e5f 6e65 775f 6368 616c  nfusion_new_chal
+00019d60: 6c65 6e67 6520 3d3d 2074 6172 6765 745f  lenge == target_
+00019d70: 7263 5f68 6173 683a 0a20 2020 2020 2020  rc_hash:.       
+00019d80: 2020 2020 2020 2020 2020 2020 2023 2046               # F
+00019d90: 6f75 6e64 206f 7572 2070 7265 7620 626c  ound our prev bl
+00019da0: 6f63 6b0a 2020 2020 2020 2020 2020 2020  ock.            
+00019db0: 2020 2020 2020 2020 7072 6576 5f62 203d          prev_b =
+00019dc0: 2063 7572 720a 2020 2020 2020 2020 2020   curr.          
+00019dd0: 2020 2020 2020 2020 2020 6272 6561 6b0a            break.
+00019de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019df0: 6375 7272 203d 2073 656c 662e 626c 6f63  curr = self.bloc
+00019e00: 6b63 6861 696e 2e74 7279 5f62 6c6f 636b  kchain.try_block
+00019e10: 5f72 6563 6f72 6428 6375 7272 2e70 7265  _record(curr.pre
+00019e20: 765f 6861 7368 290a 0a20 2020 2020 2020  v_hash)..       
+00019e30: 2020 2020 2023 2049 6620 6e6f 7420 666f       # If not fo
+00019e40: 756e 642c 2063 6163 6865 206b 6579 6564  und, cache keyed
+00019e50: 206f 6e20 7072 6576 2062 6c6f 636b 0a20   on prev block. 
+00019e60: 2020 2020 2020 2020 2020 2069 6620 7072             if pr
+00019e70: 6576 5f62 2069 7320 4e6f 6e65 3a0a 2020  ev_b is None:.  
+00019e80: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00019e90: 6c66 2e66 756c 6c5f 6e6f 6465 5f73 746f  lf.full_node_sto
+00019ea0: 7265 2e61 6464 5f74 6f5f 6675 7475 7265  re.add_to_future
+00019eb0: 5f69 7028 7265 7175 6573 7429 0a20 2020  _ip(request).   
+00019ec0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00019ed0: 662e 6c6f 672e 7761 726e 696e 6728 0a20  f.log.warning(. 
+00019ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019ef0: 2020 2066 2250 7265 7669 6f75 7320 626c     f"Previous bl
+00019f00: 6f63 6b20 6973 204e 6f6e 652c 2069 6e66  ock is None, inf
+00019f10: 7573 696f 6e20 706f 696e 7420 7b72 6571  usion point {req
+00019f20: 7565 7374 2e72 6577 6172 645f 6368 6169  uest.reward_chai
+00019f30: 6e5f 6970 5f76 6466 2e63 6861 6c6c 656e  n_ip_vdf.challen
+00019f40: 6765 2e68 6578 2829 7d22 0a20 2020 2020  ge.hex()}".     
+00019f50: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00019f60: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00019f70: 7572 6e20 4e6f 6e65 0a0a 2020 2020 2020  urn None..      
+00019f80: 2020 6669 6e69 7368 6564 5f73 7562 5f73    finished_sub_s
+00019f90: 6c6f 7473 3a20 4f70 7469 6f6e 616c 5b4c  lots: Optional[L
+00019fa0: 6973 745b 456e 644f 6653 7562 536c 6f74  ist[EndOfSubSlot
+00019fb0: 4275 6e64 6c65 5d5d 203d 2073 656c 662e  Bundle]] = self.
+00019fc0: 6675 6c6c 5f6e 6f64 655f 7374 6f72 652e  full_node_store.
+00019fd0: 6765 745f 6669 6e69 7368 6564 5f73 7562  get_finished_sub
+00019fe0: 5f73 6c6f 7473 280a 2020 2020 2020 2020  _slots(.        
+00019ff0: 2020 2020 7365 6c66 2e62 6c6f 636b 6368      self.blockch
+0001a000: 6169 6e2c 0a20 2020 2020 2020 2020 2020  ain,.           
+0001a010: 2070 7265 765f 622c 0a20 2020 2020 2020   prev_b,.       
+0001a020: 2020 2020 206c 6173 745f 736c 6f74 5f63       last_slot_c
+0001a030: 635f 6861 7368 2c0a 2020 2020 2020 2020  c_hash,.        
+0001a040: 290a 2020 2020 2020 2020 6966 2066 696e  ).        if fin
+0001a050: 6973 6865 645f 7375 625f 736c 6f74 7320  ished_sub_slots 
+0001a060: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+0001a070: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
+0001a080: 0a0a 2020 2020 2020 2020 7375 625f 736c  ..        sub_sl
+0001a090: 6f74 5f69 7465 7273 2c20 6469 6666 6963  ot_iters, diffic
+0001a0a0: 756c 7479 203d 2067 6574 5f6e 6578 745f  ulty = get_next_
+0001a0b0: 7375 625f 736c 6f74 5f69 7465 7273 5f61  sub_slot_iters_a
+0001a0c0: 6e64 5f64 6966 6669 6375 6c74 7928 0a20  nd_difficulty(. 
+0001a0d0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0001a0e0: 636f 6e73 7461 6e74 732c 0a20 2020 2020  constants,.     
+0001a0f0: 2020 2020 2020 206c 656e 2866 696e 6973         len(finis
+0001a100: 6865 645f 7375 625f 736c 6f74 7329 203e  hed_sub_slots) >
+0001a110: 2030 2c0a 2020 2020 2020 2020 2020 2020   0,.            
+0001a120: 7072 6576 5f62 2c0a 2020 2020 2020 2020  prev_b,.        
+0001a130: 2020 2020 7365 6c66 2e62 6c6f 636b 6368      self.blockch
+0001a140: 6169 6e2c 0a20 2020 2020 2020 2029 0a0a  ain,.        )..
+0001a150: 2020 2020 2020 2020 6966 2075 6e66 696e          if unfin
+0001a160: 6973 6865 645f 626c 6f63 6b2e 7265 7761  ished_block.rewa
+0001a170: 7264 5f63 6861 696e 5f62 6c6f 636b 2e70  rd_chain_block.p
+0001a180: 6f73 5f73 735f 6363 5f63 6861 6c6c 656e  os_ss_cc_challen
+0001a190: 6765 5f68 6173 6820 3d3d 2073 656c 662e  ge_hash == self.
+0001a1a0: 636f 6e73 7461 6e74 732e 4745 4e45 5349  constants.GENESI
+0001a1b0: 535f 4348 414c 4c45 4e47 453a 0a20 2020  S_CHALLENGE:.   
+0001a1c0: 2020 2020 2020 2020 2073 7562 5f73 6c6f           sub_slo
+0001a1d0: 745f 7374 6172 745f 6974 6572 7320 3d20  t_start_iters = 
+0001a1e0: 7569 6e74 3132 3828 3029 0a20 2020 2020  uint128(0).     
+0001a1f0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0001a200: 2020 2020 2073 735f 7265 7320 3d20 7365       ss_res = se
+0001a210: 6c66 2e66 756c 6c5f 6e6f 6465 5f73 746f  lf.full_node_sto
+0001a220: 7265 2e67 6574 5f73 7562 5f73 6c6f 7428  re.get_sub_slot(
+0001a230: 756e 6669 6e69 7368 6564 5f62 6c6f 636b  unfinished_block
+0001a240: 2e72 6577 6172 645f 6368 6169 6e5f 626c  .reward_chain_bl
+0001a250: 6f63 6b2e 706f 735f 7373 5f63 635f 6368  ock.pos_ss_cc_ch
+0001a260: 616c 6c65 6e67 655f 6861 7368 290a 2020  allenge_hash).  
+0001a270: 2020 2020 2020 2020 2020 6966 2073 735f            if ss_
+0001a280: 7265 7320 6973 204e 6f6e 653a 0a20 2020  res is None:.   
+0001a290: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0001a2a0: 662e 6c6f 672e 7761 726e 696e 6728 6622  f.log.warning(f"
+0001a2b0: 446f 206e 6f74 2068 6176 6520 7375 6220  Do not have sub 
+0001a2c0: 736c 6f74 207b 756e 6669 6e69 7368 6564  slot {unfinished
+0001a2d0: 5f62 6c6f 636b 2e72 6577 6172 645f 6368  _block.reward_ch
+0001a2e0: 6169 6e5f 626c 6f63 6b2e 706f 735f 7373  ain_block.pos_ss
+0001a2f0: 5f63 635f 6368 616c 6c65 6e67 655f 6861  _cc_challenge_ha
+0001a300: 7368 7d22 290a 2020 2020 2020 2020 2020  sh}").          
+0001a310: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
+0001a320: 650a 2020 2020 2020 2020 2020 2020 5f2c  e.            _,
+0001a330: 205f 2c20 7375 625f 736c 6f74 5f73 7461   _, sub_slot_sta
+0001a340: 7274 5f69 7465 7273 203d 2073 735f 7265  rt_iters = ss_re
+0001a350: 730a 2020 2020 2020 2020 7370 5f74 6f74  s.        sp_tot
+0001a360: 616c 5f69 7465 7273 203d 2075 696e 7431  al_iters = uint1
+0001a370: 3238 280a 2020 2020 2020 2020 2020 2020  28(.            
+0001a380: 7375 625f 736c 6f74 5f73 7461 7274 5f69  sub_slot_start_i
+0001a390: 7465 7273 0a20 2020 2020 2020 2020 2020  ters.           
+0001a3a0: 202b 2063 616c 6375 6c61 7465 5f73 705f   + calculate_sp_
+0001a3b0: 6974 6572 7328 0a20 2020 2020 2020 2020  iters(.         
+0001a3c0: 2020 2020 2020 2073 656c 662e 636f 6e73         self.cons
+0001a3d0: 7461 6e74 732c 0a20 2020 2020 2020 2020  tants,.         
+0001a3e0: 2020 2020 2020 2073 7562 5f73 6c6f 745f         sub_slot_
+0001a3f0: 6974 6572 732c 0a20 2020 2020 2020 2020  iters,.         
+0001a400: 2020 2020 2020 2075 6e66 696e 6973 6865         unfinishe
+0001a410: 645f 626c 6f63 6b2e 7265 7761 7264 5f63  d_block.reward_c
+0001a420: 6861 696e 5f62 6c6f 636b 2e73 6967 6e61  hain_block.signa
+0001a430: 6765 5f70 6f69 6e74 5f69 6e64 6578 2c0a  ge_point_index,.
+0001a440: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0001a450: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+0001a460: 2062 6c6f 636b 3a20 4675 6c6c 426c 6f63   block: FullBloc
+0001a470: 6b20 3d20 756e 6669 6e69 7368 6564 5f62  k = unfinished_b
+0001a480: 6c6f 636b 5f74 6f5f 6675 6c6c 5f62 6c6f  lock_to_full_blo
+0001a490: 636b 280a 2020 2020 2020 2020 2020 2020  ck(.            
+0001a4a0: 756e 6669 6e69 7368 6564 5f62 6c6f 636b  unfinished_block
+0001a4b0: 2c0a 2020 2020 2020 2020 2020 2020 7265  ,.            re
+0001a4c0: 7175 6573 742e 6368 616c 6c65 6e67 655f  quest.challenge_
+0001a4d0: 6368 6169 6e5f 6970 5f76 6466 2c0a 2020  chain_ip_vdf,.  
+0001a4e0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0001a4f0: 742e 6368 616c 6c65 6e67 655f 6368 6169  t.challenge_chai
+0001a500: 6e5f 6970 5f70 726f 6f66 2c0a 2020 2020  n_ip_proof,.    
+0001a510: 2020 2020 2020 2020 7265 7175 6573 742e          request.
+0001a520: 7265 7761 7264 5f63 6861 696e 5f69 705f  reward_chain_ip_
+0001a530: 7664 662c 0a20 2020 2020 2020 2020 2020  vdf,.           
+0001a540: 2072 6571 7565 7374 2e72 6577 6172 645f   request.reward_
+0001a550: 6368 6169 6e5f 6970 5f70 726f 6f66 2c0a  chain_ip_proof,.
+0001a560: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0001a570: 6573 742e 696e 6675 7365 645f 6368 616c  est.infused_chal
+0001a580: 6c65 6e67 655f 6368 6169 6e5f 6970 5f76  lenge_chain_ip_v
+0001a590: 6466 2c0a 2020 2020 2020 2020 2020 2020  df,.            
+0001a5a0: 7265 7175 6573 742e 696e 6675 7365 645f  request.infused_
+0001a5b0: 6368 616c 6c65 6e67 655f 6368 6169 6e5f  challenge_chain_
+0001a5c0: 6970 5f70 726f 6f66 2c0a 2020 2020 2020  ip_proof,.      
+0001a5d0: 2020 2020 2020 6669 6e69 7368 6564 5f73        finished_s
+0001a5e0: 7562 5f73 6c6f 7473 2c0a 2020 2020 2020  ub_slots,.      
+0001a5f0: 2020 2020 2020 7072 6576 5f62 2c0a 2020        prev_b,.  
+0001a600: 2020 2020 2020 2020 2020 7365 6c66 2e62            self.b
+0001a610: 6c6f 636b 6368 6169 6e2c 0a20 2020 2020  lockchain,.     
+0001a620: 2020 2020 2020 2073 705f 746f 7461 6c5f         sp_total_
+0001a630: 6974 6572 732c 0a20 2020 2020 2020 2020  iters,.         
+0001a640: 2020 2064 6966 6669 6375 6c74 792c 0a20     difficulty,. 
+0001a650: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0001a660: 2069 6620 6e6f 7420 7365 6c66 2e68 6173   if not self.has
+0001a670: 5f76 616c 6964 5f70 6f6f 6c5f 7369 6728  _valid_pool_sig(
+0001a680: 626c 6f63 6b29 3a0a 2020 2020 2020 2020  block):.        
+0001a690: 2020 2020 7365 6c66 2e6c 6f67 2e77 6172      self.log.war
+0001a6a0: 6e69 6e67 2822 5472 7969 6e67 2074 6f20  ning("Trying to 
+0001a6b0: 6d61 6b65 2061 2070 7265 2d66 6172 6d20  make a pre-farm 
+0001a6c0: 626c 6f63 6b20 6275 7420 6865 6967 6874  block but height
+0001a6d0: 2069 7320 6e6f 7420 3022 290a 2020 2020   is not 0").    
+0001a6e0: 2020 2020 2020 2020 7265 7475 726e 204e          return N
+0001a6f0: 6f6e 650a 2020 2020 2020 2020 7472 793a  one.        try:
+0001a700: 0a20 2020 2020 2020 2020 2020 2061 7761  .            awa
+0001a710: 6974 2073 656c 662e 6164 645f 626c 6f63  it self.add_bloc
+0001a720: 6b28 626c 6f63 6b2c 2072 6169 7365 5f6f  k(block, raise_o
+0001a730: 6e5f 6469 7363 6f6e 6e65 6374 6564 3d54  n_disconnected=T
+0001a740: 7275 6529 0a20 2020 2020 2020 2065 7863  rue).        exc
+0001a750: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+0001a760: 2065 3a0a 2020 2020 2020 2020 2020 2020   e:.            
+0001a770: 7365 6c66 2e6c 6f67 2e77 6172 6e69 6e67  self.log.warning
+0001a780: 2866 2243 6f6e 7365 6e73 7573 2065 7272  (f"Consensus err
+0001a790: 6f72 2076 616c 6964 6174 696e 6720 626c  or validating bl
+0001a7a0: 6f63 6b3a 207b 657d 2229 0a20 2020 2020  ock: {e}").     
+0001a7b0: 2020 2020 2020 2069 6620 7469 6d65 6c6f         if timelo
+0001a7c0: 7264 5f70 6565 7220 6973 206e 6f74 204e  rd_peer is not N
+0001a7d0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0001a7e0: 2020 2020 2023 204f 6e6c 7920 7365 6e64       # Only send
+0001a7f0: 7320 746f 2074 6865 2074 696d 656c 6f72  s to the timelor
+0001a800: 6420 7768 6f20 7365 6e74 2075 7320 7468  d who sent us th
+0001a810: 6973 2056 4446 2c20 746f 2072 6573 6574  is VDF, to reset
+0001a820: 2074 6865 6d20 746f 2074 6865 2063 6f72   them to the cor
+0001a830: 7265 6374 2070 6561 6b0a 2020 2020 2020  rect peak.      
+0001a840: 2020 2020 2020 2020 2020 6177 6169 7420            await 
+0001a850: 7365 6c66 2e73 656e 645f 7065 616b 5f74  self.send_peak_t
+0001a860: 6f5f 7469 6d65 6c6f 7264 7328 7065 6572  o_timelords(peer
+0001a870: 3d74 696d 656c 6f72 645f 7065 6572 290a  =timelord_peer).
+0001a880: 2020 2020 2020 2020 7265 7475 726e 204e          return N
+0001a890: 6f6e 650a 0a20 2020 2061 7379 6e63 2064  one..    async d
+0001a8a0: 6566 2061 6464 5f65 6e64 5f6f 665f 7375  ef add_end_of_su
+0001a8b0: 625f 736c 6f74 280a 2020 2020 2020 2020  b_slot(.        
+0001a8c0: 7365 6c66 2c20 656e 645f 6f66 5f73 6c6f  self, end_of_slo
+0001a8d0: 745f 6275 6e64 6c65 3a20 456e 644f 6653  t_bundle: EndOfS
+0001a8e0: 7562 536c 6f74 4275 6e64 6c65 2c20 7065  ubSlotBundle, pe
+0001a8f0: 6572 3a20 5753 4368 6961 436f 6e6e 6563  er: WSChiaConnec
+0001a900: 7469 6f6e 0a20 2020 2029 202d 3e20 5475  tion.    ) -> Tu
+0001a910: 706c 655b 4f70 7469 6f6e 616c 5b4d 6573  ple[Optional[Mes
+0001a920: 7361 6765 5d2c 2062 6f6f 6c5d 3a0a 2020  sage], bool]:.  
+0001a930: 2020 2020 2020 6665 7463 6865 645f 7373        fetched_ss
+0001a940: 203d 2073 656c 662e 6675 6c6c 5f6e 6f64   = self.full_nod
+0001a950: 655f 7374 6f72 652e 6765 745f 7375 625f  e_store.get_sub_
+0001a960: 736c 6f74 2865 6e64 5f6f 665f 736c 6f74  slot(end_of_slot
+0001a970: 5f62 756e 646c 652e 6368 616c 6c65 6e67  _bundle.challeng
+0001a980: 655f 6368 6169 6e2e 6765 745f 6861 7368  e_chain.get_hash
+0001a990: 2829 290a 0a20 2020 2020 2020 2023 2057  ())..        # W
+0001a9a0: 6520 6172 6520 6e6f 7420 696e 7465 7265  e are not intere
+0001a9b0: 7374 6564 2069 6e20 7375 622d 736c 6f74  sted in sub-slot
+0001a9c0: 7320 7768 6963 6820 6861 7665 2074 6865  s which have the
+0001a9d0: 2073 616d 6520 6368 616c 6c65 6e67 6520   same challenge 
+0001a9e0: 6368 6169 6e20 6275 7420 6469 6666 6572  chain but differ
+0001a9f0: 656e 7420 7265 7761 7264 2063 6861 696e  ent reward chain
+0001aa00: 2e20 4966 2074 6865 7265 0a20 2020 2020  . If there.     
+0001aa10: 2020 2023 2069 7320 6120 7265 6f72 672c     # is a reorg,
+0001aa20: 2077 6520 7769 6c6c 2066 696e 6420 6f75   we will find ou
+0001aa30: 7420 7468 726f 7567 6820 7468 6520 6272  t through the br
+0001aa40: 6f61 6463 6173 7420 6f66 2062 6c6f 636b  oadcast of block
+0001aa50: 7320 696e 7374 6561 642e 0a20 2020 2020  s instead..     
+0001aa60: 2020 2069 6620 6665 7463 6865 645f 7373     if fetched_ss
+0001aa70: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0001aa80: 2020 2020 2020 2020 2020 2320 416c 7265            # Alre
+0001aa90: 6164 7920 6861 7665 2074 6865 2073 7562  ady have the sub
+0001aaa0: 2d73 6c6f 740a 2020 2020 2020 2020 2020  -slot.          
+0001aab0: 2020 7265 7475 726e 204e 6f6e 652c 2054    return None, T
+0001aac0: 7275 650a 0a20 2020 2020 2020 2061 7379  rue..        asy
+0001aad0: 6e63 2077 6974 6820 7365 6c66 2e74 696d  nc with self.tim
+0001aae0: 656c 6f72 645f 6c6f 636b 3a0a 2020 2020  elord_lock:.    
+0001aaf0: 2020 2020 2020 2020 6665 7463 6865 645f          fetched_
+0001ab00: 7373 203d 2073 656c 662e 6675 6c6c 5f6e  ss = self.full_n
+0001ab10: 6f64 655f 7374 6f72 652e 6765 745f 7375  ode_store.get_su
+0001ab20: 625f 736c 6f74 280a 2020 2020 2020 2020  b_slot(.        
+0001ab30: 2020 2020 2020 2020 656e 645f 6f66 5f73          end_of_s
+0001ab40: 6c6f 745f 6275 6e64 6c65 2e63 6861 6c6c  lot_bundle.chall
+0001ab50: 656e 6765 5f63 6861 696e 2e63 6861 6c6c  enge_chain.chall
+0001ab60: 656e 6765 5f63 6861 696e 5f65 6e64 5f6f  enge_chain_end_o
+0001ab70: 665f 736c 6f74 5f76 6466 2e63 6861 6c6c  f_slot_vdf.chall
+0001ab80: 656e 6765 0a20 2020 2020 2020 2020 2020  enge.           
+0001ab90: 2029 0a20 2020 2020 2020 2020 2020 2069   ).            i
+0001aba0: 6620 280a 2020 2020 2020 2020 2020 2020  f (.            
+0001abb0: 2020 2020 2866 6574 6368 6564 5f73 7320      (fetched_ss 
+0001abc0: 6973 204e 6f6e 6529 0a20 2020 2020 2020  is None).       
+0001abd0: 2020 2020 2020 2020 2061 6e64 2065 6e64           and end
+0001abe0: 5f6f 665f 736c 6f74 5f62 756e 646c 652e  _of_slot_bundle.
+0001abf0: 6368 616c 6c65 6e67 655f 6368 6169 6e2e  challenge_chain.
+0001ac00: 6368 616c 6c65 6e67 655f 6368 6169 6e5f  challenge_chain_
+0001ac10: 656e 645f 6f66 5f73 6c6f 745f 7664 662e  end_of_slot_vdf.
+0001ac20: 6368 616c 6c65 6e67 650a 2020 2020 2020  challenge.      
+0001ac30: 2020 2020 2020 2020 2020 213d 2073 656c            != sel
+0001ac40: 662e 636f 6e73 7461 6e74 732e 4745 4e45  f.constants.GENE
+0001ac50: 5349 535f 4348 414c 4c45 4e47 450a 2020  SIS_CHALLENGE.  
+0001ac60: 2020 2020 2020 2020 2020 293a 0a20 2020            ):.   
+0001ac70: 2020 2020 2020 2020 2020 2020 2023 2049               # I
+0001ac80: 6620 7765 2064 6f6e 2774 2068 6176 6520  f we don't have 
+0001ac90: 7468 6520 7072 6576 2c20 7265 7175 6573  the prev, reques
+0001aca0: 7420 7468 6520 7072 6576 2069 6e73 7465  t the prev inste
+0001acb0: 6164 0a20 2020 2020 2020 2020 2020 2020  ad.             
+0001acc0: 2020 2066 756c 6c5f 6e6f 6465 5f72 6571     full_node_req
+0001acd0: 7565 7374 203d 2066 756c 6c5f 6e6f 6465  uest = full_node
+0001ace0: 5f70 726f 746f 636f 6c2e 5265 7175 6573  _protocol.Reques
+0001acf0: 7453 6967 6e61 6765 506f 696e 744f 7245  tSignagePointOrE
+0001ad00: 6e64 4f66 5375 6253 6c6f 7428 0a20 2020  ndOfSubSlot(.   
+0001ad10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ad20: 2065 6e64 5f6f 665f 736c 6f74 5f62 756e   end_of_slot_bun
+0001ad30: 646c 652e 6368 616c 6c65 6e67 655f 6368  dle.challenge_ch
+0001ad40: 6169 6e2e 6368 616c 6c65 6e67 655f 6368  ain.challenge_ch
+0001ad50: 6169 6e5f 656e 645f 6f66 5f73 6c6f 745f  ain_end_of_slot_
+0001ad60: 7664 662e 6368 616c 6c65 6e67 652c 0a20  vdf.challenge,. 
+0001ad70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ad80: 2020 2075 696e 7438 2830 292c 0a20 2020     uint8(0),.   
+0001ad90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ada0: 2062 7974 6573 3332 285b 305d 202a 2033   bytes32([0] * 3
+0001adb0: 3229 2c0a 2020 2020 2020 2020 2020 2020  2),.            
+0001adc0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+0001add0: 2020 2020 2020 7265 7475 726e 2028 0a20        return (. 
+0001ade0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001adf0: 2020 206d 616b 655f 6d73 6728 5072 6f74     make_msg(Prot
+0001ae00: 6f63 6f6c 4d65 7373 6167 6554 7970 6573  ocolMessageTypes
+0001ae10: 2e72 6571 7565 7374 5f73 6967 6e61 6765  .request_signage
+0001ae20: 5f70 6f69 6e74 5f6f 725f 656e 645f 6f66  _point_or_end_of
+0001ae30: 5f73 7562 5f73 6c6f 742c 2066 756c 6c5f  _sub_slot, full_
+0001ae40: 6e6f 6465 5f72 6571 7565 7374 292c 0a20  node_request),. 
+0001ae50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ae60: 2020 2046 616c 7365 2c0a 2020 2020 2020     False,.      
+0001ae70: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
+0001ae80: 2020 2020 2020 2020 2070 6561 6b20 3d20           peak = 
+0001ae90: 7365 6c66 2e62 6c6f 636b 6368 6169 6e2e  self.blockchain.
+0001aea0: 6765 745f 7065 616b 2829 0a20 2020 2020  get_peak().     
+0001aeb0: 2020 2020 2020 2069 6620 7065 616b 2069         if peak i
+0001aec0: 7320 6e6f 7420 4e6f 6e65 2061 6e64 2070  s not None and p
+0001aed0: 6561 6b2e 6865 6967 6874 203e 2032 3a0a  eak.height > 2:.
+0001aee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aef0: 6e65 7874 5f73 7562 5f73 6c6f 745f 6974  next_sub_slot_it
+0001af00: 6572 7320 3d20 7365 6c66 2e62 6c6f 636b  ers = self.block
+0001af10: 6368 6169 6e2e 6765 745f 6e65 7874 5f73  chain.get_next_s
+0001af20: 6c6f 745f 6974 6572 7328 7065 616b 2e68  lot_iters(peak.h
+0001af30: 6561 6465 725f 6861 7368 2c20 5472 7565  eader_hash, True
+0001af40: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001af50: 2020 6e65 7874 5f64 6966 6669 6375 6c74    next_difficult
+0001af60: 7920 3d20 7365 6c66 2e62 6c6f 636b 6368  y = self.blockch
+0001af70: 6169 6e2e 6765 745f 6e65 7874 5f64 6966  ain.get_next_dif
+0001af80: 6669 6375 6c74 7928 7065 616b 2e68 6561  ficulty(peak.hea
+0001af90: 6465 725f 6861 7368 2c20 5472 7565 290a  der_hash, True).
+0001afa0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0001afb0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001afc0: 2020 6e65 7874 5f73 7562 5f73 6c6f 745f    next_sub_slot_
+0001afd0: 6974 6572 7320 3d20 7365 6c66 2e63 6f6e  iters = self.con
+0001afe0: 7374 616e 7473 2e53 5542 5f53 4c4f 545f  stants.SUB_SLOT_
+0001aff0: 4954 4552 535f 5354 4152 5449 4e47 0a20  ITERS_STARTING. 
+0001b000: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+0001b010: 6578 745f 6469 6666 6963 756c 7479 203d  ext_difficulty =
+0001b020: 2073 656c 662e 636f 6e73 7461 6e74 732e   self.constants.
+0001b030: 4449 4646 4943 554c 5459 5f53 5441 5254  DIFFICULTY_START
+0001b040: 494e 470a 0a20 2020 2020 2020 2020 2020  ING..           
+0001b050: 2023 2041 6464 7320 7468 6520 7375 6220   # Adds the sub 
+0001b060: 736c 6f74 2061 6e64 2070 6f74 656e 7469  slot and potenti
+0001b070: 616c 6c79 2067 6574 206e 6577 2069 6e66  ally get new inf
+0001b080: 7573 696f 6e73 0a20 2020 2020 2020 2020  usions.         
+0001b090: 2020 206e 6577 5f69 6e66 7573 696f 6e73     new_infusions
+0001b0a0: 203d 2073 656c 662e 6675 6c6c 5f6e 6f64   = self.full_nod
+0001b0b0: 655f 7374 6f72 652e 6e65 775f 6669 6e69  e_store.new_fini
+0001b0c0: 7368 6564 5f73 7562 5f73 6c6f 7428 0a20  shed_sub_slot(. 
+0001b0d0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0001b0e0: 6e64 5f6f 665f 736c 6f74 5f62 756e 646c  nd_of_slot_bundl
+0001b0f0: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+0001b100: 2020 2073 656c 662e 626c 6f63 6b63 6861     self.blockcha
+0001b110: 696e 2c0a 2020 2020 2020 2020 2020 2020  in,.            
+0001b120: 2020 2020 7065 616b 2c0a 2020 2020 2020      peak,.      
+0001b130: 2020 2020 2020 2020 2020 6e65 7874 5f73            next_s
+0001b140: 7562 5f73 6c6f 745f 6974 6572 732c 0a20  ub_slot_iters,. 
+0001b150: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+0001b160: 6578 745f 6469 6666 6963 756c 7479 2c0a  ext_difficulty,.
+0001b170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b180: 6177 6169 7420 7365 6c66 2e62 6c6f 636b  await self.block
+0001b190: 6368 6169 6e2e 6765 745f 6675 6c6c 5f70  chain.get_full_p
+0001b1a0: 6561 6b28 292c 0a20 2020 2020 2020 2020  eak(),.         
+0001b1b0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+0001b1c0: 2023 2049 7420 6d61 7920 6265 2061 6e20   # It may be an 
+0001b1d0: 656d 7074 7920 6c69 7374 2c20 6576 656e  empty list, even
+0001b1e0: 2069 6620 6974 2773 206e 6f74 204e 6f6e   if it's not Non
+0001b1f0: 652e 204e 6f74 204e 6f6e 6520 6d65 616e  e. Not None mean
+0001b200: 7320 6164 6465 6420 7375 6363 6573 7366  s added successf
+0001b210: 756c 6c79 0a20 2020 2020 2020 2020 2020  ully.           
+0001b220: 2069 6620 6e65 775f 696e 6675 7369 6f6e   if new_infusion
+0001b230: 7320 6973 206e 6f74 204e 6f6e 653a 0a20  s is not None:. 
+0001b240: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001b250: 656c 662e 6c6f 672e 696e 666f 280a 2020  elf.log.info(.  
+0001b260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b270: 2020 6622 e28f b2ef b88f 2020 4669 6e69    f"......  Fini
+0001b280: 7368 6564 2073 7562 2073 6c6f 742c 2053  shed sub slot, S
+0001b290: 5020 7b73 656c 662e 636f 6e73 7461 6e74  P {self.constant
+0001b2a0: 732e 4e55 4d5f 5350 535f 5355 425f 534c  s.NUM_SPS_SUB_SL
+0001b2b0: 4f54 7d2f 7b73 656c 662e 636f 6e73 7461  OT}/{self.consta
+0001b2c0: 6e74 732e 4e55 4d5f 5350 535f 5355 425f  nts.NUM_SPS_SUB_
+0001b2d0: 534c 4f54 7d2c 2022 0a20 2020 2020 2020  SLOT}, ".       
+0001b2e0: 2020 2020 2020 2020 2020 2020 2066 227b               f"{
+0001b2f0: 656e 645f 6f66 5f73 6c6f 745f 6275 6e64  end_of_slot_bund
+0001b300: 6c65 2e63 6861 6c6c 656e 6765 5f63 6861  le.challenge_cha
+0001b310: 696e 2e67 6574 5f68 6173 6828 292e 6865  in.get_hash().he
+0001b320: 7828 297d 2c20 220a 2020 2020 2020 2020  x()}, ".        
+0001b330: 2020 2020 2020 2020 2020 2020 6622 6e75              f"nu
+0001b340: 6d62 6572 206f 6620 7375 622d 736c 6f74  mber of sub-slot
+0001b350: 733a 207b 6c65 6e28 7365 6c66 2e66 756c  s: {len(self.ful
+0001b360: 6c5f 6e6f 6465 5f73 746f 7265 2e66 696e  l_node_store.fin
+0001b370: 6973 6865 645f 7375 625f 736c 6f74 7329  ished_sub_slots)
+0001b380: 7d2c 2022 0a20 2020 2020 2020 2020 2020  }, ".           
+0001b390: 2020 2020 2020 2020 2066 2252 4320 6861           f"RC ha
+0001b3a0: 7368 3a20 7b65 6e64 5f6f 665f 736c 6f74  sh: {end_of_slot
+0001b3b0: 5f62 756e 646c 652e 7265 7761 7264 5f63  _bundle.reward_c
+0001b3c0: 6861 696e 2e67 6574 5f68 6173 6828 292e  hain.get_hash().
+0001b3d0: 6865 7828 297d 2c20 220a 2020 2020 2020  hex()}, ".      
+0001b3e0: 2020 2020 2020 2020 2020 2020 2020 6622                f"
+0001b3f0: 4465 6669 6369 7420 7b65 6e64 5f6f 665f  Deficit {end_of_
+0001b400: 736c 6f74 5f62 756e 646c 652e 7265 7761  slot_bundle.rewa
+0001b410: 7264 5f63 6861 696e 2e64 6566 6963 6974  rd_chain.deficit
+0001b420: 7d22 0a20 2020 2020 2020 2020 2020 2020  }".             
+0001b430: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+0001b440: 2020 2020 2023 2052 6573 6574 2066 6172       # Reset far
+0001b450: 6d65 7220 7265 7370 6f6e 7365 2074 696d  mer response tim
+0001b460: 6572 2066 6f72 2073 7562 2073 6c6f 7420  er for sub slot 
+0001b470: 2853 5020 3029 0a20 2020 2020 2020 2020  (SP 0).         
+0001b480: 2020 2020 2020 2073 656c 662e 7369 676e         self.sign
+0001b490: 6167 655f 706f 696e 745f 7469 6d65 735b  age_point_times[
+0001b4a0: 305d 203d 2074 696d 652e 7469 6d65 2829  0] = time.time()
+0001b4b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b4c0: 2023 204e 6f74 6966 7920 6675 6c6c 206e   # Notify full n
+0001b4d0: 6f64 6573 206f 6620 7468 6520 6e65 7720  odes of the new 
+0001b4e0: 7375 622d 736c 6f74 0a20 2020 2020 2020  sub-slot.       
+0001b4f0: 2020 2020 2020 2020 2062 726f 6164 6361           broadca
+0001b500: 7374 203d 2066 756c 6c5f 6e6f 6465 5f70  st = full_node_p
+0001b510: 726f 746f 636f 6c2e 4e65 7753 6967 6e61  rotocol.NewSigna
+0001b520: 6765 506f 696e 744f 7245 6e64 4f66 5375  gePointOrEndOfSu
+0001b530: 6253 6c6f 7428 0a20 2020 2020 2020 2020  bSlot(.         
+0001b540: 2020 2020 2020 2020 2020 2065 6e64 5f6f             end_o
+0001b550: 665f 736c 6f74 5f62 756e 646c 652e 6368  f_slot_bundle.ch
+0001b560: 616c 6c65 6e67 655f 6368 6169 6e2e 6368  allenge_chain.ch
+0001b570: 616c 6c65 6e67 655f 6368 6169 6e5f 656e  allenge_chain_en
+0001b580: 645f 6f66 5f73 6c6f 745f 7664 662e 6368  d_of_slot_vdf.ch
+0001b590: 616c 6c65 6e67 652c 0a20 2020 2020 2020  allenge,.       
+0001b5a0: 2020 2020 2020 2020 2020 2020 2065 6e64               end
+0001b5b0: 5f6f 665f 736c 6f74 5f62 756e 646c 652e  _of_slot_bundle.
+0001b5c0: 6368 616c 6c65 6e67 655f 6368 6169 6e2e  challenge_chain.
+0001b5d0: 6765 745f 6861 7368 2829 2c0a 2020 2020  get_hash(),.    
+0001b5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b5f0: 7569 6e74 3828 3029 2c0a 2020 2020 2020  uint8(0),.      
+0001b600: 2020 2020 2020 2020 2020 2020 2020 656e                en
+0001b610: 645f 6f66 5f73 6c6f 745f 6275 6e64 6c65  d_of_slot_bundle
+0001b620: 2e72 6577 6172 645f 6368 6169 6e2e 656e  .reward_chain.en
+0001b630: 645f 6f66 5f73 6c6f 745f 7664 662e 6368  d_of_slot_vdf.ch
+0001b640: 616c 6c65 6e67 652c 0a20 2020 2020 2020  allenge,.       
+0001b650: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+0001b660: 2020 2020 2020 2020 2020 206d 7367 203d             msg =
+0001b670: 206d 616b 655f 6d73 6728 5072 6f74 6f63   make_msg(Protoc
+0001b680: 6f6c 4d65 7373 6167 6554 7970 6573 2e6e  olMessageTypes.n
+0001b690: 6577 5f73 6967 6e61 6765 5f70 6f69 6e74  ew_signage_point
+0001b6a0: 5f6f 725f 656e 645f 6f66 5f73 7562 5f73  _or_end_of_sub_s
+0001b6b0: 6c6f 742c 2062 726f 6164 6361 7374 290a  lot, broadcast).
+0001b6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b6d0: 6177 6169 7420 7365 6c66 2e73 6572 7665  await self.serve
+0001b6e0: 722e 7365 6e64 5f74 6f5f 616c 6c28 5b6d  r.send_to_all([m
+0001b6f0: 7367 5d2c 204e 6f64 6554 7970 652e 4655  sg], NodeType.FU
+0001b700: 4c4c 5f4e 4f44 452c 2070 6565 722e 7065  LL_NODE, peer.pe
+0001b710: 6572 5f6e 6f64 655f 6964 290a 0a20 2020  er_node_id)..   
+0001b720: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+0001b730: 2069 6e66 7573 696f 6e20 696e 206e 6577   infusion in new
+0001b740: 5f69 6e66 7573 696f 6e73 3a0a 2020 2020  _infusions:.    
+0001b750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b760: 6177 6169 7420 7365 6c66 2e6e 6577 5f69  await self.new_i
+0001b770: 6e66 7573 696f 6e5f 706f 696e 745f 7664  nfusion_point_vd
+0001b780: 6628 696e 6675 7369 6f6e 290a 0a20 2020  f(infusion)..   
+0001b790: 2020 2020 2020 2020 2020 2020 2023 204e               # N
+0001b7a0: 6f74 6966 7920 6661 726d 6572 7320 6f66  otify farmers of
+0001b7b0: 2074 6865 206e 6577 2073 7562 2d73 6c6f   the new sub-slo
+0001b7c0: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
+0001b7d0: 2020 6272 6f61 6463 6173 745f 6661 726d    broadcast_farm
+0001b7e0: 6572 203d 2066 6172 6d65 725f 7072 6f74  er = farmer_prot
+0001b7f0: 6f63 6f6c 2e4e 6577 5369 676e 6167 6550  ocol.NewSignageP
+0001b800: 6f69 6e74 280a 2020 2020 2020 2020 2020  oint(.          
+0001b810: 2020 2020 2020 2020 2020 656e 645f 6f66            end_of
+0001b820: 5f73 6c6f 745f 6275 6e64 6c65 2e63 6861  _slot_bundle.cha
+0001b830: 6c6c 656e 6765 5f63 6861 696e 2e67 6574  llenge_chain.get
+0001b840: 5f68 6173 6828 292c 0a20 2020 2020 2020  _hash(),.       
+0001b850: 2020 2020 2020 2020 2020 2020 2065 6e64               end
+0001b860: 5f6f 665f 736c 6f74 5f62 756e 646c 652e  _of_slot_bundle.
+0001b870: 6368 616c 6c65 6e67 655f 6368 6169 6e2e  challenge_chain.
+0001b880: 6765 745f 6861 7368 2829 2c0a 2020 2020  get_hash(),.    
+0001b890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b8a0: 656e 645f 6f66 5f73 6c6f 745f 6275 6e64  end_of_slot_bund
+0001b8b0: 6c65 2e72 6577 6172 645f 6368 6169 6e2e  le.reward_chain.
+0001b8c0: 6765 745f 6861 7368 2829 2c0a 2020 2020  get_hash(),.    
+0001b8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b8e0: 6e65 7874 5f64 6966 6669 6375 6c74 792c  next_difficulty,
+0001b8f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b900: 2020 2020 206e 6578 745f 7375 625f 736c       next_sub_sl
+0001b910: 6f74 5f69 7465 7273 2c0a 2020 2020 2020  ot_iters,.      
+0001b920: 2020 2020 2020 2020 2020 2020 2020 7569                ui
+0001b930: 6e74 3828 3029 2c0a 2020 2020 2020 2020  nt8(0),.        
+0001b940: 2020 2020 2020 2020 2020 2020 7569 6e74              uint
+0001b950: 3332 2830 2920 6966 2070 6561 6b20 6973  32(0) if peak is
+0001b960: 204e 6f6e 6520 656c 7365 2070 6561 6b2e   None else peak.
+0001b970: 6865 6967 6874 2c0a 2020 2020 2020 2020  height,.        
+0001b980: 2020 2020 2020 2020 2020 2020 7370 5f73              sp_s
+0001b990: 6f75 7263 655f 6461 7461 3d53 6967 6e61  ource_data=Signa
+0001b9a0: 6765 506f 696e 7453 6f75 7263 6544 6174  gePointSourceDat
+0001b9b0: 6128 0a20 2020 2020 2020 2020 2020 2020  a(.             
+0001b9c0: 2020 2020 2020 2020 2020 2073 7562 5f73             sub_s
+0001b9d0: 6c6f 745f 6461 7461 3d53 5053 7562 536c  lot_data=SPSubSl
+0001b9e0: 6f74 536f 7572 6365 4461 7461 280a 2020  otSourceData(.  
+0001b9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ba00: 2020 2020 2020 2020 2020 656e 645f 6f66            end_of
+0001ba10: 5f73 6c6f 745f 6275 6e64 6c65 2e63 6861  _slot_bundle.cha
+0001ba20: 6c6c 656e 6765 5f63 6861 696e 2c20 656e  llenge_chain, en
+0001ba30: 645f 6f66 5f73 6c6f 745f 6275 6e64 6c65  d_of_slot_bundle
+0001ba40: 2e72 6577 6172 645f 6368 6169 6e0a 2020  .reward_chain.  
+0001ba50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ba60: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0001ba70: 2020 2020 2020 2020 2020 2020 292c 0a20              ),. 
+0001ba80: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0001ba90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001baa0: 206d 7367 203d 206d 616b 655f 6d73 6728   msg = make_msg(
+0001bab0: 5072 6f74 6f63 6f6c 4d65 7373 6167 6554  ProtocolMessageT
+0001bac0: 7970 6573 2e6e 6577 5f73 6967 6e61 6765  ypes.new_signage
+0001bad0: 5f70 6f69 6e74 2c20 6272 6f61 6463 6173  _point, broadcas
+0001bae0: 745f 6661 726d 6572 290a 2020 2020 2020  t_farmer).      
+0001baf0: 2020 2020 2020 2020 2020 6177 6169 7420            await 
+0001bb00: 7365 6c66 2e73 6572 7665 722e 7365 6e64  self.server.send
+0001bb10: 5f74 6f5f 616c 6c28 5b6d 7367 5d2c 204e  _to_all([msg], N
+0001bb20: 6f64 6554 7970 652e 4641 524d 4552 290a  odeType.FARMER).
+0001bb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bb40: 7265 7475 726e 204e 6f6e 652c 2054 7275  return None, Tru
+0001bb50: 650a 2020 2020 2020 2020 2020 2020 656c  e.            el
+0001bb60: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0001bb70: 2020 2020 7365 6c66 2e6c 6f67 2e69 6e66      self.log.inf
+0001bb80: 6f28 0a20 2020 2020 2020 2020 2020 2020  o(.             
+0001bb90: 2020 2020 2020 2066 2245 6e64 206f 6620         f"End of 
+0001bba0: 736c 6f74 206e 6f74 2061 6464 6564 2043  slot not added C
+0001bbb0: 4320 6368 616c 6c65 6e67 6520 220a 2020  C challenge ".  
+0001bbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bbd0: 2020 6622 7b65 6e64 5f6f 665f 736c 6f74    f"{end_of_slot
+0001bbe0: 5f62 756e 646c 652e 6368 616c 6c65 6e67  _bundle.challeng
+0001bbf0: 655f 6368 6169 6e2e 6368 616c 6c65 6e67  e_chain.challeng
+0001bc00: 655f 6368 6169 6e5f 656e 645f 6f66 5f73  e_chain_end_of_s
+0001bc10: 6c6f 745f 7664 662e 6368 616c 6c65 6e67  lot_vdf.challeng
+0001bc20: 652e 6865 7828 297d 220a 2020 2020 2020  e.hex()}".      
+0001bc30: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0001bc40: 2020 2020 7265 7475 726e 204e 6f6e 652c      return None,
+0001bc50: 2046 616c 7365 0a0a 2020 2020 6173 796e   False..    asyn
+0001bc60: 6320 6465 6620 6164 645f 7472 616e 7361  c def add_transa
+0001bc70: 6374 696f 6e28 0a20 2020 2020 2020 2073  ction(.        s
+0001bc80: 656c 662c 0a20 2020 2020 2020 2074 7261  elf,.        tra
+0001bc90: 6e73 6163 7469 6f6e 3a20 5370 656e 6442  nsaction: SpendB
+0001bca0: 756e 646c 652c 0a20 2020 2020 2020 2073  undle,.        s
+0001bcb0: 7065 6e64 5f6e 616d 653a 2062 7974 6573  pend_name: bytes
+0001bcc0: 3332 2c0a 2020 2020 2020 2020 7065 6572  32,.        peer
+0001bcd0: 3a20 4f70 7469 6f6e 616c 5b57 5343 6869  : Optional[WSChi
+0001bce0: 6143 6f6e 6e65 6374 696f 6e5d 203d 204e  aConnection] = N
+0001bcf0: 6f6e 652c 0a20 2020 2020 2020 2074 6573  one,.        tes
+0001bd00: 743a 2062 6f6f 6c20 3d20 4661 6c73 652c  t: bool = False,
+0001bd10: 0a20 2020 2020 2020 2074 785f 6279 7465  .        tx_byte
+0001bd20: 733a 204f 7074 696f 6e61 6c5b 6279 7465  s: Optional[byte
+0001bd30: 735d 203d 204e 6f6e 652c 0a20 2020 2029  s] = None,.    )
+0001bd40: 202d 3e20 5475 706c 655b 4d65 6d70 6f6f   -> Tuple[Mempoo
+0001bd50: 6c49 6e63 6c75 7369 6f6e 5374 6174 7573  lInclusionStatus
+0001bd60: 2c20 4f70 7469 6f6e 616c 5b45 7272 5d5d  , Optional[Err]]
+0001bd70: 3a0a 2020 2020 2020 2020 6966 2073 656c  :.        if sel
+0001bd80: 662e 7379 6e63 5f73 746f 7265 2e67 6574  f.sync_store.get
+0001bd90: 5f73 796e 635f 6d6f 6465 2829 3a0a 2020  _sync_mode():.  
+0001bda0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001bdb0: 204d 656d 706f 6f6c 496e 636c 7573 696f   MempoolInclusio
+0001bdc0: 6e53 7461 7475 732e 4641 494c 4544 2c20  nStatus.FAILED, 
+0001bdd0: 4572 722e 4e4f 5f54 5241 4e53 4143 5449  Err.NO_TRANSACTI
+0001bde0: 4f4e 535f 5748 494c 455f 5359 4e43 494e  ONS_WHILE_SYNCIN
+0001bdf0: 470a 2020 2020 2020 2020 6966 206e 6f74  G.        if not
+0001be00: 2074 6573 7420 616e 6420 6e6f 7420 2861   test and not (a
+0001be10: 7761 6974 2073 656c 662e 7379 6e63 6564  wait self.synced
+0001be20: 2829 293a 0a20 2020 2020 2020 2020 2020  ()):.           
+0001be30: 2072 6574 7572 6e20 4d65 6d70 6f6f 6c49   return MempoolI
+0001be40: 6e63 6c75 7369 6f6e 5374 6174 7573 2e46  nclusionStatus.F
+0001be50: 4149 4c45 442c 2045 7272 2e4e 4f5f 5452  AILED, Err.NO_TR
+0001be60: 414e 5341 4354 494f 4e53 5f57 4849 4c45  ANSACTIONS_WHILE
+0001be70: 5f53 594e 4349 4e47 0a0a 2020 2020 2020  _SYNCING..      
+0001be80: 2020 6966 2073 656c 662e 6d65 6d70 6f6f    if self.mempoo
+0001be90: 6c5f 6d61 6e61 6765 722e 6765 745f 7370  l_manager.get_sp
+0001bea0: 656e 6462 756e 646c 6528 7370 656e 645f  endbundle(spend_
+0001beb0: 6e61 6d65 2920 6973 206e 6f74 204e 6f6e  name) is not Non
+0001bec0: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
+0001bed0: 656c 662e 6d65 6d70 6f6f 6c5f 6d61 6e61  elf.mempool_mana
+0001bee0: 6765 722e 7265 6d6f 7665 5f73 6565 6e28  ger.remove_seen(
+0001bef0: 7370 656e 645f 6e61 6d65 290a 2020 2020  spend_name).    
+0001bf00: 2020 2020 2020 2020 7265 7475 726e 204d          return M
+0001bf10: 656d 706f 6f6c 496e 636c 7573 696f 6e53  empoolInclusionS
+0001bf20: 7461 7475 732e 5355 4343 4553 532c 204e  tatus.SUCCESS, N
+0001bf30: 6f6e 650a 2020 2020 2020 2020 6966 2073  one.        if s
+0001bf40: 656c 662e 6d65 6d70 6f6f 6c5f 6d61 6e61  elf.mempool_mana
+0001bf50: 6765 722e 7365 656e 2873 7065 6e64 5f6e  ger.seen(spend_n
+0001bf60: 616d 6529 3a0a 2020 2020 2020 2020 2020  ame):.          
+0001bf70: 2020 7265 7475 726e 204d 656d 706f 6f6c    return Mempool
+0001bf80: 496e 636c 7573 696f 6e53 7461 7475 732e  InclusionStatus.
+0001bf90: 4641 494c 4544 2c20 4572 722e 414c 5245  FAILED, Err.ALRE
+0001bfa0: 4144 595f 494e 434c 5544 494e 475f 5452  ADY_INCLUDING_TR
+0001bfb0: 414e 5341 4354 494f 4e0a 2020 2020 2020  ANSACTION.      
+0001bfc0: 2020 7365 6c66 2e6d 656d 706f 6f6c 5f6d    self.mempool_m
+0001bfd0: 616e 6167 6572 2e61 6464 5f61 6e64 5f6d  anager.add_and_m
+0001bfe0: 6179 6265 5f70 6f70 5f73 6565 6e28 7370  aybe_pop_seen(sp
+0001bff0: 656e 645f 6e61 6d65 290a 2020 2020 2020  end_name).      
+0001c000: 2020 7365 6c66 2e6c 6f67 2e64 6562 7567    self.log.debug
+0001c010: 2866 2250 726f 6365 7373 696e 6720 7472  (f"Processing tr
+0001c020: 616e 7361 6374 696f 6e3a 207b 7370 656e  ansaction: {spen
+0001c030: 645f 6e61 6d65 7d22 290a 2020 2020 2020  d_name}").      
+0001c040: 2020 2320 4967 6e6f 7265 2069 6620 7379    # Ignore if sy
+0001c050: 6e63 696e 6720 6f72 2069 6620 7765 2068  ncing or if we h
+0001c060: 6176 6520 6e6f 7420 7965 7420 7265 6365  ave not yet rece
+0001c070: 6976 6564 2061 2062 6c6f 636b 0a20 2020  ived a block.   
+0001c080: 2020 2020 2023 2074 6865 206d 656d 706f       # the mempo
+0001c090: 6f6c 206d 7573 7420 6861 7665 2061 2070  ol must have a p
+0001c0a0: 6561 6b20 746f 2076 616c 6964 6174 6520  eak to validate 
+0001c0b0: 7472 616e 7361 6374 696f 6e73 0a20 2020  transactions.   
+0001c0c0: 2020 2020 2069 6620 7365 6c66 2e73 796e       if self.syn
+0001c0d0: 635f 7374 6f72 652e 6765 745f 7379 6e63  c_store.get_sync
+0001c0e0: 5f6d 6f64 6528 2920 6f72 2073 656c 662e  _mode() or self.
+0001c0f0: 6d65 6d70 6f6f 6c5f 6d61 6e61 6765 722e  mempool_manager.
+0001c100: 7065 616b 2069 7320 4e6f 6e65 3a0a 2020  peak is None:.  
+0001c110: 2020 2020 2020 2020 2020 7374 6174 7573            status
+0001c120: 203d 204d 656d 706f 6f6c 496e 636c 7573   = MempoolInclus
+0001c130: 696f 6e53 7461 7475 732e 4641 494c 4544  ionStatus.FAILED
+0001c140: 0a20 2020 2020 2020 2020 2020 2065 7272  .            err
+0001c150: 6f72 3a20 4f70 7469 6f6e 616c 5b45 7272  or: Optional[Err
+0001c160: 5d20 3d20 4572 722e 4e4f 5f54 5241 4e53  ] = Err.NO_TRANS
+0001c170: 4143 5449 4f4e 535f 5748 494c 455f 5359  ACTIONS_WHILE_SY
+0001c180: 4e43 494e 470a 2020 2020 2020 2020 2020  NCING.          
+0001c190: 2020 7365 6c66 2e6d 656d 706f 6f6c 5f6d    self.mempool_m
+0001c1a0: 616e 6167 6572 2e72 656d 6f76 655f 7365  anager.remove_se
+0001c1b0: 656e 2873 7065 6e64 5f6e 616d 6529 0a20  en(spend_name). 
+0001c1c0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0001c1d0: 2020 2020 2020 2020 2074 7279 3a0a 2020           try:.  
+0001c1e0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+0001c1f0: 7374 5f72 6573 756c 7420 3d20 6177 6169  st_result = awai
+0001c200: 7420 7365 6c66 2e6d 656d 706f 6f6c 5f6d  t self.mempool_m
+0001c210: 616e 6167 6572 2e70 7265 5f76 616c 6964  anager.pre_valid
+0001c220: 6174 655f 7370 656e 6462 756e 646c 6528  ate_spendbundle(
+0001c230: 7472 616e 7361 6374 696f 6e2c 2074 785f  transaction, tx_
+0001c240: 6279 7465 732c 2073 7065 6e64 5f6e 616d  bytes, spend_nam
+0001c250: 6529 0a20 2020 2020 2020 2020 2020 2065  e).            e
+0001c260: 7863 6570 7420 5661 6c69 6461 7469 6f6e  xcept Validation
+0001c270: 4572 726f 7220 6173 2065 3a0a 2020 2020  Error as e:.    
+0001c280: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0001c290: 2e6d 656d 706f 6f6c 5f6d 616e 6167 6572  .mempool_manager
+0001c2a0: 2e72 656d 6f76 655f 7365 656e 2873 7065  .remove_seen(spe
+0001c2b0: 6e64 5f6e 616d 6529 0a20 2020 2020 2020  nd_name).       
+0001c2c0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0001c2d0: 4d65 6d70 6f6f 6c49 6e63 6c75 7369 6f6e  MempoolInclusion
+0001c2e0: 5374 6174 7573 2e46 4149 4c45 442c 2065  Status.FAILED, e
+0001c2f0: 2e63 6f64 650a 2020 2020 2020 2020 2020  .code.          
+0001c300: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
+0001c310: 6f6e 3a0a 2020 2020 2020 2020 2020 2020  on:.            
+0001c320: 2020 2020 7365 6c66 2e6d 656d 706f 6f6c      self.mempool
+0001c330: 5f6d 616e 6167 6572 2e72 656d 6f76 655f  _manager.remove_
+0001c340: 7365 656e 2873 7065 6e64 5f6e 616d 6529  seen(spend_name)
+0001c350: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001c360: 2072 6169 7365 0a20 2020 2020 2020 2020   raise.         
+0001c370: 2020 2061 7379 6e63 2077 6974 6820 7365     async with se
+0001c380: 6c66 2e62 6c6f 636b 6368 6169 6e2e 7072  lf.blockchain.pr
+0001c390: 696f 7269 7479 5f6d 7574 6578 2e61 6371  iority_mutex.acq
+0001c3a0: 7569 7265 2870 7269 6f72 6974 793d 426c  uire(priority=Bl
+0001c3b0: 6f63 6b63 6861 696e 4d75 7465 7850 7269  ockchainMutexPri
+0001c3c0: 6f72 6974 792e 6c6f 7729 3a0a 2020 2020  ority.low):.    
+0001c3d0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0001c3e0: 656c 662e 6d65 6d70 6f6f 6c5f 6d61 6e61  elf.mempool_mana
+0001c3f0: 6765 722e 6765 745f 7370 656e 6462 756e  ger.get_spendbun
+0001c400: 646c 6528 7370 656e 645f 6e61 6d65 2920  dle(spend_name) 
+0001c410: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0001c420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c430: 2073 656c 662e 6d65 6d70 6f6f 6c5f 6d61   self.mempool_ma
+0001c440: 6e61 6765 722e 7265 6d6f 7665 5f73 6565  nager.remove_see
+0001c450: 6e28 7370 656e 645f 6e61 6d65 290a 2020  n(spend_name).  
+0001c460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c470: 2020 7265 7475 726e 204d 656d 706f 6f6c    return Mempool
+0001c480: 496e 636c 7573 696f 6e53 7461 7475 732e  InclusionStatus.
+0001c490: 5355 4343 4553 532c 204e 6f6e 650a 2020  SUCCESS, None.  
+0001c4a0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0001c4b0: 2073 656c 662e 6d65 6d70 6f6f 6c5f 6d61   self.mempool_ma
+0001c4c0: 6e61 6765 722e 7065 616b 2069 7320 4e6f  nager.peak is No
+0001c4d0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0001c4e0: 2020 2020 2020 2020 7265 7475 726e 204d          return M
+0001c4f0: 656d 706f 6f6c 496e 636c 7573 696f 6e53  empoolInclusionS
+0001c500: 7461 7475 732e 4641 494c 4544 2c20 4572  tatus.FAILED, Er
+0001c510: 722e 4d45 4d50 4f4f 4c5f 4e4f 545f 494e  r.MEMPOOL_NOT_IN
+0001c520: 4954 4941 4c49 5a45 440a 2020 2020 2020  ITIALIZED.      
+0001c530: 2020 2020 2020 2020 2020 636f 7374 2c20            cost, 
+0001c540: 7374 6174 7573 2c20 6572 726f 7220 3d20  status, error = 
+0001c550: 6177 6169 7420 7365 6c66 2e6d 656d 706f  await self.mempo
+0001c560: 6f6c 5f6d 616e 6167 6572 2e61 6464 5f73  ol_manager.add_s
+0001c570: 7065 6e64 5f62 756e 646c 6528 0a20 2020  pend_bundle(.   
+0001c580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c590: 2074 7261 6e73 6163 7469 6f6e 2c20 636f   transaction, co
+0001c5a0: 7374 5f72 6573 756c 742c 2073 7065 6e64  st_result, spend
+0001c5b0: 5f6e 616d 652c 2073 656c 662e 6d65 6d70  _name, self.memp
+0001c5c0: 6f6f 6c5f 6d61 6e61 6765 722e 7065 616b  ool_manager.peak
+0001c5d0: 2e68 6569 6768 740a 2020 2020 2020 2020  .height.        
+0001c5e0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0001c5f0: 2020 2020 2020 6966 2073 7461 7475 7320        if status 
+0001c600: 3d3d 204d 656d 706f 6f6c 496e 636c 7573  == MempoolInclus
+0001c610: 696f 6e53 7461 7475 732e 5355 4343 4553  ionStatus.SUCCES
+0001c620: 533a 0a20 2020 2020 2020 2020 2020 2020  S:.             
+0001c630: 2020 2073 656c 662e 6c6f 672e 6465 6275     self.log.debu
+0001c640: 6728 0a20 2020 2020 2020 2020 2020 2020  g(.             
+0001c650: 2020 2020 2020 2066 2241 6464 6564 2074         f"Added t
+0001c660: 7261 6e73 6163 7469 6f6e 2074 6f20 6d65  ransaction to me
+0001c670: 6d70 6f6f 6c3a 207b 7370 656e 645f 6e61  mpool: {spend_na
+0001c680: 6d65 7d20 6d65 6d70 6f6f 6c20 7369 7a65  me} mempool size
+0001c690: 3a20 220a 2020 2020 2020 2020 2020 2020  : ".            
+0001c6a0: 2020 2020 2020 2020 6622 7b73 656c 662e          f"{self.
+0001c6b0: 6d65 6d70 6f6f 6c5f 6d61 6e61 6765 722e  mempool_manager.
+0001c6c0: 6d65 6d70 6f6f 6c2e 746f 7461 6c5f 6d65  mempool.total_me
+0001c6d0: 6d70 6f6f 6c5f 636f 7374 2829 7d20 6e6f  mpool_cost()} no
+0001c6e0: 726d 616c 697a 6564 2022 0a20 2020 2020  rmalized ".     
+0001c6f0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001c700: 227b 7365 6c66 2e6d 656d 706f 6f6c 5f6d  "{self.mempool_m
+0001c710: 616e 6167 6572 2e6d 656d 706f 6f6c 2e74  anager.mempool.t
+0001c720: 6f74 616c 5f6d 656d 706f 6f6c 5f63 6f73  otal_mempool_cos
+0001c730: 7428 2920 2f20 3530 3030 3030 307d 220a  t() / 5000000}".
+0001c740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c750: 290a 0a20 2020 2020 2020 2020 2020 2020  )..             
+0001c760: 2020 2023 204f 6e6c 7920 6272 6f61 6463     # Only broadc
+0001c770: 6173 7420 7375 6363 6573 7366 756c 2074  ast successful t
+0001c780: 7261 6e73 6163 7469 6f6e 732c 206e 6f74  ransactions, not
+0001c790: 2070 656e 6469 6e67 206f 6e65 732e 204f   pending ones. O
+0001c7a0: 7468 6572 7769 7365 2069 7427 7320 6120  therwise it's a 
+0001c7b0: 444f 530a 2020 2020 2020 2020 2020 2020  DOS.            
+0001c7c0: 2020 2020 2320 7665 6374 6f72 2e0a 2020      # vector..  
+0001c7d0: 2020 2020 2020 2020 2020 2020 2020 6d65                me
+0001c7e0: 6d70 6f6f 6c5f 6974 656d 203d 2073 656c  mpool_item = sel
+0001c7f0: 662e 6d65 6d70 6f6f 6c5f 6d61 6e61 6765  f.mempool_manage
+0001c800: 722e 6765 745f 6d65 6d70 6f6f 6c5f 6974  r.get_mempool_it
+0001c810: 656d 2873 7065 6e64 5f6e 616d 6529 0a20  em(spend_name). 
+0001c820: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0001c830: 7373 6572 7420 6d65 6d70 6f6f 6c5f 6974  ssert mempool_it
+0001c840: 656d 2069 7320 6e6f 7420 4e6f 6e65 0a20  em is not None. 
+0001c850: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001c860: 6565 7320 3d20 6d65 6d70 6f6f 6c5f 6974  ees = mempool_it
+0001c870: 656d 2e66 6565 0a20 2020 2020 2020 2020  em.fee.         
+0001c880: 2020 2020 2020 2061 7373 6572 7420 6665         assert fe
+0001c890: 6573 203e 3d20 300a 2020 2020 2020 2020  es >= 0.        
+0001c8a0: 2020 2020 2020 2020 6173 7365 7274 2063          assert c
+0001c8b0: 6f73 7420 6973 206e 6f74 204e 6f6e 650a  ost is not None.
+0001c8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c8d0: 6e65 775f 7478 203d 2066 756c 6c5f 6e6f  new_tx = full_no
+0001c8e0: 6465 5f70 726f 746f 636f 6c2e 4e65 7754  de_protocol.NewT
+0001c8f0: 7261 6e73 6163 7469 6f6e 280a 2020 2020  ransaction(.    
+0001c900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c910: 7370 656e 645f 6e61 6d65 2c0a 2020 2020  spend_name,.    
+0001c920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c930: 636f 7374 2c0a 2020 2020 2020 2020 2020  cost,.          
+0001c940: 2020 2020 2020 2020 2020 6665 6573 2c0a            fees,.
+0001c950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c960: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001c970: 2020 6d73 6720 3d20 6d61 6b65 5f6d 7367    msg = make_msg
+0001c980: 2850 726f 746f 636f 6c4d 6573 7361 6765  (ProtocolMessage
+0001c990: 5479 7065 732e 6e65 775f 7472 616e 7361  Types.new_transa
+0001c9a0: 6374 696f 6e2c 206e 6577 5f74 7829 0a20  ction, new_tx). 
+0001c9b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0001c9c0: 6620 7065 6572 2069 7320 4e6f 6e65 3a0a  f peer is None:.
+0001c9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c9e0: 2020 2020 6177 6169 7420 7365 6c66 2e73      await self.s
+0001c9f0: 6572 7665 722e 7365 6e64 5f74 6f5f 616c  erver.send_to_al
+0001ca00: 6c28 5b6d 7367 5d2c 204e 6f64 6554 7970  l([msg], NodeTyp
+0001ca10: 652e 4655 4c4c 5f4e 4f44 4529 0a20 2020  e.FULL_NODE).   
+0001ca20: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0001ca30: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0001ca40: 2020 2020 2020 2061 7761 6974 2073 656c         await sel
+0001ca50: 662e 7365 7276 6572 2e73 656e 645f 746f  f.server.send_to
+0001ca60: 5f61 6c6c 285b 6d73 675d 2c20 4e6f 6465  _all([msg], Node
+0001ca70: 5479 7065 2e46 554c 4c5f 4e4f 4445 2c20  Type.FULL_NODE, 
+0001ca80: 7065 6572 2e70 6565 725f 6e6f 6465 5f69  peer.peer_node_i
+0001ca90: 6429 0a0a 2020 2020 2020 2020 2020 2020  d)..            
+0001caa0: 2020 2020 6966 2073 656c 662e 7369 6d75      if self.simu
+0001cab0: 6c61 746f 725f 7472 616e 7361 6374 696f  lator_transactio
+0001cac0: 6e5f 6361 6c6c 6261 636b 2069 7320 6e6f  n_callback is no
+0001cad0: 7420 4e6f 6e65 3a20 2023 2063 616c 6c62  t None:  # callb
+0001cae0: 6163 6b0a 2020 2020 2020 2020 2020 2020  ack.            
+0001caf0: 2020 2020 2020 2020 6177 6169 7420 7365          await se
+0001cb00: 6c66 2e73 696d 756c 6174 6f72 5f74 7261  lf.simulator_tra
+0001cb10: 6e73 6163 7469 6f6e 5f63 616c 6c62 6163  nsaction_callbac
+0001cb20: 6b28 7370 656e 645f 6e61 6d65 2920 2023  k(spend_name)  #
+0001cb30: 2070 796c 696e 743a 2064 6973 6162 6c65   pylint: disable
+0001cb40: 3d45 3131 3032 0a0a 2020 2020 2020 2020  =E1102..        
+0001cb50: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0001cb60: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
+0001cb70: 656d 706f 6f6c 5f6d 616e 6167 6572 2e72  empool_manager.r
+0001cb80: 656d 6f76 655f 7365 656e 2873 7065 6e64  emove_seen(spend
+0001cb90: 5f6e 616d 6529 0a20 2020 2020 2020 2020  _name).         
+0001cba0: 2020 2020 2020 2073 656c 662e 6c6f 672e         self.log.
+0001cbb0: 6465 6275 6728 6622 5761 736e 2774 2061  debug(f"Wasn't a
+0001cbc0: 626c 6520 746f 2061 6464 2074 7261 6e73  ble to add trans
+0001cbd0: 6163 7469 6f6e 2077 6974 6820 6964 207b  action with id {
+0001cbe0: 7370 656e 645f 6e61 6d65 7d2c 2073 7461  spend_name}, sta
+0001cbf0: 7475 7320 7b73 7461 7475 737d 2065 7272  tus {status} err
+0001cc00: 6f72 3a20 7b65 7272 6f72 7d22 290a 2020  or: {error}").  
+0001cc10: 2020 2020 2020 7265 7475 726e 2073 7461        return sta
+0001cc20: 7475 732c 2065 7272 6f72 0a0a 2020 2020  tus, error..    
+0001cc30: 6173 796e 6320 6465 6620 5f6e 6565 6473  async def _needs
+0001cc40: 5f63 6f6d 7061 6374 5f70 726f 6f66 280a  _compact_proof(.
+0001cc50: 2020 2020 2020 2020 7365 6c66 2c20 7664          self, vd
+0001cc60: 665f 696e 666f 3a20 5644 4649 6e66 6f2c  f_info: VDFInfo,
+0001cc70: 2068 6561 6465 725f 626c 6f63 6b3a 2048   header_block: H
+0001cc80: 6561 6465 7242 6c6f 636b 2c20 6669 656c  eaderBlock, fiel
+0001cc90: 645f 7664 663a 2043 6f6d 7072 6573 7369  d_vdf: Compressi
+0001cca0: 626c 6556 4446 4669 656c 640a 2020 2020  bleVDFField.    
+0001ccb0: 2920 2d3e 2062 6f6f 6c3a 0a20 2020 2020  ) -> bool:.     
+0001ccc0: 2020 2069 6620 6669 656c 645f 7664 6620     if field_vdf 
+0001ccd0: 3d3d 2043 6f6d 7072 6573 7369 626c 6556  == CompressibleV
+0001cce0: 4446 4669 656c 642e 4343 5f45 4f53 5f56  DFField.CC_EOS_V
+0001ccf0: 4446 3a0a 2020 2020 2020 2020 2020 2020  DF:.            
+0001cd00: 666f 7220 7375 625f 736c 6f74 2069 6e20  for sub_slot in 
+0001cd10: 6865 6164 6572 5f62 6c6f 636b 2e66 696e  header_block.fin
+0001cd20: 6973 6865 645f 7375 625f 736c 6f74 733a  ished_sub_slots:
+0001cd30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001cd40: 2069 6620 7375 625f 736c 6f74 2e63 6861   if sub_slot.cha
+0001cd50: 6c6c 656e 6765 5f63 6861 696e 2e63 6861  llenge_chain.cha
+0001cd60: 6c6c 656e 6765 5f63 6861 696e 5f65 6e64  llenge_chain_end
+0001cd70: 5f6f 665f 736c 6f74 5f76 6466 203d 3d20  _of_slot_vdf == 
+0001cd80: 7664 665f 696e 666f 3a0a 2020 2020 2020  vdf_info:.      
+0001cd90: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0001cda0: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
+0001cdb0: 2020 2020 2020 2020 2020 2073 7562 5f73             sub_s
+0001cdc0: 6c6f 742e 7072 6f6f 6673 2e63 6861 6c6c  lot.proofs.chall
+0001cdd0: 656e 6765 5f63 6861 696e 5f73 6c6f 745f  enge_chain_slot_
+0001cde0: 7072 6f6f 662e 7769 746e 6573 735f 7479  proof.witness_ty
+0001cdf0: 7065 203d 3d20 300a 2020 2020 2020 2020  pe == 0.        
+0001ce00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ce10: 616e 6420 7375 625f 736c 6f74 2e70 726f  and sub_slot.pro
+0001ce20: 6f66 732e 6368 616c 6c65 6e67 655f 6368  ofs.challenge_ch
+0001ce30: 6169 6e5f 736c 6f74 5f70 726f 6f66 2e6e  ain_slot_proof.n
+0001ce40: 6f72 6d61 6c69 7a65 645f 746f 5f69 6465  ormalized_to_ide
+0001ce50: 6e74 6974 790a 2020 2020 2020 2020 2020  ntity.          
+0001ce60: 2020 2020 2020 2020 2020 293a 0a20 2020            ):.   
+0001ce70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ce80: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
+0001ce90: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+0001cea0: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
+0001ceb0: 650a 2020 2020 2020 2020 6966 2066 6965  e.        if fie
+0001cec0: 6c64 5f76 6466 203d 3d20 436f 6d70 7265  ld_vdf == Compre
+0001ced0: 7373 6962 6c65 5644 4646 6965 6c64 2e49  ssibleVDFField.I
+0001cee0: 4343 5f45 4f53 5f56 4446 3a0a 2020 2020  CC_EOS_VDF:.    
+0001cef0: 2020 2020 2020 2020 666f 7220 7375 625f          for sub_
+0001cf00: 736c 6f74 2069 6e20 6865 6164 6572 5f62  slot in header_b
+0001cf10: 6c6f 636b 2e66 696e 6973 6865 645f 7375  lock.finished_su
+0001cf20: 625f 736c 6f74 733a 0a20 2020 2020 2020  b_slots:.       
+0001cf30: 2020 2020 2020 2020 2069 6620 280a 2020           if (.  
+0001cf40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cf50: 2020 7375 625f 736c 6f74 2e69 6e66 7573    sub_slot.infus
+0001cf60: 6564 5f63 6861 6c6c 656e 6765 5f63 6861  ed_challenge_cha
+0001cf70: 696e 2069 7320 6e6f 7420 4e6f 6e65 0a20  in is not None. 
+0001cf80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cf90: 2020 2061 6e64 2073 7562 5f73 6c6f 742e     and sub_slot.
+0001cfa0: 696e 6675 7365 645f 6368 616c 6c65 6e67  infused_challeng
+0001cfb0: 655f 6368 6169 6e2e 696e 6675 7365 645f  e_chain.infused_
+0001cfc0: 6368 616c 6c65 6e67 655f 6368 6169 6e5f  challenge_chain_
+0001cfd0: 656e 645f 6f66 5f73 6c6f 745f 7664 6620  end_of_slot_vdf 
+0001cfe0: 3d3d 2076 6466 5f69 6e66 6f0a 2020 2020  == vdf_info.    
+0001cff0: 2020 2020 2020 2020 2020 2020 293a 0a20              ):. 
+0001d000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d010: 2020 2061 7373 6572 7420 7375 625f 736c     assert sub_sl
+0001d020: 6f74 2e70 726f 6f66 732e 696e 6675 7365  ot.proofs.infuse
+0001d030: 645f 6368 616c 6c65 6e67 655f 6368 6169  d_challenge_chai
+0001d040: 6e5f 736c 6f74 5f70 726f 6f66 2069 7320  n_slot_proof is 
+0001d050: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
+0001d060: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001d070: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0001d080: 2020 2020 2020 2020 2020 7375 625f 736c            sub_sl
+0001d090: 6f74 2e70 726f 6f66 732e 696e 6675 7365  ot.proofs.infuse
+0001d0a0: 645f 6368 616c 6c65 6e67 655f 6368 6169  d_challenge_chai
+0001d0b0: 6e5f 736c 6f74 5f70 726f 6f66 2e77 6974  n_slot_proof.wit
+0001d0c0: 6e65 7373 5f74 7970 6520 3d3d 2030 0a20  ness_type == 0. 
+0001d0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d0e0: 2020 2020 2020 2061 6e64 2073 7562 5f73         and sub_s
+0001d0f0: 6c6f 742e 7072 6f6f 6673 2e69 6e66 7573  lot.proofs.infus
+0001d100: 6564 5f63 6861 6c6c 656e 6765 5f63 6861  ed_challenge_cha
+0001d110: 696e 5f73 6c6f 745f 7072 6f6f 662e 6e6f  in_slot_proof.no
+0001d120: 726d 616c 697a 6564 5f74 6f5f 6964 656e  rmalized_to_iden
+0001d130: 7469 7479 0a20 2020 2020 2020 2020 2020  tity.           
+0001d140: 2020 2020 2020 2020 2029 3a0a 2020 2020           ):.    
+0001d150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d160: 2020 2020 7265 7475 726e 2046 616c 7365      return False
+0001d170: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d180: 2020 2020 2072 6574 7572 6e20 5472 7565       return True
+0001d190: 0a20 2020 2020 2020 2069 6620 6669 656c  .        if fiel
+0001d1a0: 645f 7664 6620 3d3d 2043 6f6d 7072 6573  d_vdf == Compres
+0001d1b0: 7369 626c 6556 4446 4669 656c 642e 4343  sibleVDFField.CC
+0001d1c0: 5f53 505f 5644 463a 0a20 2020 2020 2020  _SP_VDF:.       
+0001d1d0: 2020 2020 2069 6620 6865 6164 6572 5f62       if header_b
+0001d1e0: 6c6f 636b 2e72 6577 6172 645f 6368 6169  lock.reward_chai
+0001d1f0: 6e5f 626c 6f63 6b2e 6368 616c 6c65 6e67  n_block.challeng
+0001d200: 655f 6368 6169 6e5f 7370 5f76 6466 2069  e_chain_sp_vdf i
+0001d210: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+0001d220: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+0001d230: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
+0001d240: 2069 6620 7664 665f 696e 666f 203d 3d20   if vdf_info == 
+0001d250: 6865 6164 6572 5f62 6c6f 636b 2e72 6577  header_block.rew
+0001d260: 6172 645f 6368 6169 6e5f 626c 6f63 6b2e  ard_chain_block.
+0001d270: 6368 616c 6c65 6e67 655f 6368 6169 6e5f  challenge_chain_
+0001d280: 7370 5f76 6466 3a0a 2020 2020 2020 2020  sp_vdf:.        
+0001d290: 2020 2020 2020 2020 6173 7365 7274 2068          assert h
+0001d2a0: 6561 6465 725f 626c 6f63 6b2e 6368 616c  eader_block.chal
+0001d2b0: 6c65 6e67 655f 6368 6169 6e5f 7370 5f70  lenge_chain_sp_p
+0001d2c0: 726f 6f66 2069 7320 6e6f 7420 4e6f 6e65  roof is not None
+0001d2d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d2e0: 2069 6620 280a 2020 2020 2020 2020 2020   if (.          
+0001d2f0: 2020 2020 2020 2020 2020 6865 6164 6572            header
+0001d300: 5f62 6c6f 636b 2e63 6861 6c6c 656e 6765  _block.challenge
+0001d310: 5f63 6861 696e 5f73 705f 7072 6f6f 662e  _chain_sp_proof.
+0001d320: 7769 746e 6573 735f 7479 7065 203d 3d20  witness_type == 
+0001d330: 300a 2020 2020 2020 2020 2020 2020 2020  0.              
+0001d340: 2020 2020 2020 616e 6420 6865 6164 6572        and header
+0001d350: 5f62 6c6f 636b 2e63 6861 6c6c 656e 6765  _block.challenge
+0001d360: 5f63 6861 696e 5f73 705f 7072 6f6f 662e  _chain_sp_proof.
+0001d370: 6e6f 726d 616c 697a 6564 5f74 6f5f 6964  normalized_to_id
+0001d380: 656e 7469 7479 0a20 2020 2020 2020 2020  entity.         
+0001d390: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
+0001d3a0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0001d3b0: 7475 726e 2046 616c 7365 0a20 2020 2020  turn False.     
+0001d3c0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001d3d0: 6e20 5472 7565 0a20 2020 2020 2020 2069  n True.        i
+0001d3e0: 6620 6669 656c 645f 7664 6620 3d3d 2043  f field_vdf == C
+0001d3f0: 6f6d 7072 6573 7369 626c 6556 4446 4669  ompressibleVDFFi
+0001d400: 656c 642e 4343 5f49 505f 5644 463a 0a20  eld.CC_IP_VDF:. 
+0001d410: 2020 2020 2020 2020 2020 2069 6620 7664             if vd
+0001d420: 665f 696e 666f 203d 3d20 6865 6164 6572  f_info == header
+0001d430: 5f62 6c6f 636b 2e72 6577 6172 645f 6368  _block.reward_ch
+0001d440: 6169 6e5f 626c 6f63 6b2e 6368 616c 6c65  ain_block.challe
+0001d450: 6e67 655f 6368 6169 6e5f 6970 5f76 6466  nge_chain_ip_vdf
+0001d460: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001d470: 2020 6966 2028 0a20 2020 2020 2020 2020    if (.         
+0001d480: 2020 2020 2020 2020 2020 2068 6561 6465             heade
+0001d490: 725f 626c 6f63 6b2e 6368 616c 6c65 6e67  r_block.challeng
+0001d4a0: 655f 6368 6169 6e5f 6970 5f70 726f 6f66  e_chain_ip_proof
+0001d4b0: 2e77 6974 6e65 7373 5f74 7970 6520 3d3d  .witness_type ==
+0001d4c0: 2030 0a20 2020 2020 2020 2020 2020 2020   0.             
+0001d4d0: 2020 2020 2020 2061 6e64 2068 6561 6465         and heade
+0001d4e0: 725f 626c 6f63 6b2e 6368 616c 6c65 6e67  r_block.challeng
+0001d4f0: 655f 6368 6169 6e5f 6970 5f70 726f 6f66  e_chain_ip_proof
+0001d500: 2e6e 6f72 6d61 6c69 7a65 645f 746f 5f69  .normalized_to_i
+0001d510: 6465 6e74 6974 790a 2020 2020 2020 2020  dentity.        
+0001d520: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
+0001d530: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0001d540: 6574 7572 6e20 4661 6c73 650a 2020 2020  eturn False.    
+0001d550: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001d560: 726e 2054 7275 650a 2020 2020 2020 2020  rn True.        
+0001d570: 7265 7475 726e 2046 616c 7365 0a0a 2020  return False..  
+0001d580: 2020 6173 796e 6320 6465 6620 5f63 616e    async def _can
+0001d590: 5f61 6363 6570 745f 636f 6d70 6163 745f  _accept_compact_
+0001d5a0: 7072 6f6f 6628 0a20 2020 2020 2020 2073  proof(.        s
+0001d5b0: 656c 662c 0a20 2020 2020 2020 2076 6466  elf,.        vdf
+0001d5c0: 5f69 6e66 6f3a 2056 4446 496e 666f 2c0a  _info: VDFInfo,.
+0001d5d0: 2020 2020 2020 2020 7664 665f 7072 6f6f          vdf_proo
+0001d5e0: 663a 2056 4446 5072 6f6f 662c 0a20 2020  f: VDFProof,.   
+0001d5f0: 2020 2020 2068 6569 6768 743a 2075 696e       height: uin
+0001d600: 7433 322c 0a20 2020 2020 2020 2068 6561  t32,.        hea
+0001d610: 6465 725f 6861 7368 3a20 6279 7465 7333  der_hash: bytes3
+0001d620: 322c 0a20 2020 2020 2020 2066 6965 6c64  2,.        field
+0001d630: 5f76 6466 3a20 436f 6d70 7265 7373 6962  _vdf: Compressib
+0001d640: 6c65 5644 4646 6965 6c64 2c0a 2020 2020  leVDFField,.    
+0001d650: 2920 2d3e 2062 6f6f 6c3a 0a20 2020 2020  ) -> bool:.     
+0001d660: 2020 2022 2222 0a20 2020 2020 2020 202d     """.        -
+0001d670: 2043 6865 636b 7320 6966 2074 6865 2070   Checks if the p
+0001d680: 726f 7669 6465 6420 7072 6f6f 6620 6973  rovided proof is
+0001d690: 2069 6e64 6565 6420 636f 6d70 6163 742e   indeed compact.
+0001d6a0: 0a20 2020 2020 2020 202d 2043 6865 636b  .        - Check
+0001d6b0: 7320 6966 2070 726f 6f66 2076 6572 6966  s if proof verif
+0001d6c0: 6965 7320 6769 7665 6e20 7468 6520 7664  ies given the vd
+0001d6d0: 665f 696e 666f 2066 726f 6d20 7468 6520  f_info from the 
+0001d6e0: 7374 6172 7420 6f66 2073 7562 2d73 6c6f  start of sub-slo
+0001d6f0: 742e 0a20 2020 2020 2020 202d 2043 6865  t..        - Che
+0001d700: 636b 7320 6966 2074 6865 2070 726f 7669  cks if the provi
+0001d710: 6465 6420 7664 665f 696e 666f 2069 7320  ded vdf_info is 
+0001d720: 636f 7272 6563 742c 2061 7373 756d 696e  correct, assumin
+0001d730: 6720 6974 2072 6566 6572 7320 746f 2074  g it refers to t
+0001d740: 6865 2073 7461 7274 206f 6620 7375 622d  he start of sub-
+0001d750: 736c 6f74 2e0a 2020 2020 2020 2020 2d20  slot..        - 
+0001d760: 4368 6563 6b73 2069 6620 7468 6520 6578  Checks if the ex
+0001d770: 6973 7469 6e67 2070 726f 6f66 2077 6173  isting proof was
+0001d780: 206e 6f6e 2d63 6f6d 7061 6374 2e20 4967   non-compact. Ig
+0001d790: 6e6f 7265 2074 6869 7320 7072 6f6f 6620  nore this proof 
+0001d7a0: 6966 2077 6520 616c 7265 6164 7920 6861  if we already ha
+0001d7b0: 7665 2061 2063 6f6d 7061 6374 2070 726f  ve a compact pro
+0001d7c0: 6f66 2e0a 2020 2020 2020 2020 2222 220a  of..        """.
+0001d7d0: 2020 2020 2020 2020 6973 5f66 756c 6c79          is_fully
+0001d7e0: 5f63 6f6d 7061 6374 6966 6965 6420 3d20  _compactified = 
+0001d7f0: 6177 6169 7420 7365 6c66 2e62 6c6f 636b  await self.block
+0001d800: 5f73 746f 7265 2e69 735f 6675 6c6c 795f  _store.is_fully_
+0001d810: 636f 6d70 6163 7469 6669 6564 2868 6561  compactified(hea
+0001d820: 6465 725f 6861 7368 290a 2020 2020 2020  der_hash).      
+0001d830: 2020 6966 2069 735f 6675 6c6c 795f 636f    if is_fully_co
+0001d840: 6d70 6163 7469 6669 6564 2069 7320 4e6f  mpactified is No
+0001d850: 6e65 206f 7220 6973 5f66 756c 6c79 5f63  ne or is_fully_c
+0001d860: 6f6d 7061 6374 6966 6965 643a 0a20 2020  ompactified:.   
+0001d870: 2020 2020 2020 2020 2073 656c 662e 6c6f           self.lo
+0001d880: 672e 696e 666f 2866 2241 6c72 6561 6479  g.info(f"Already
+0001d890: 2063 6f6d 7061 6374 6966 6965 6420 626c   compactified bl
+0001d8a0: 6f63 6b3a 207b 6865 6164 6572 5f68 6173  ock: {header_has
+0001d8b0: 687d 2e20 4967 6e6f 7269 6e67 2e22 290a  h}. Ignoring.").
+0001d8c0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001d8d0: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
+0001d8e0: 2070 6561 6b20 3d20 7365 6c66 2e62 6c6f   peak = self.blo
+0001d8f0: 636b 6368 6169 6e2e 6765 745f 7065 616b  ckchain.get_peak
+0001d900: 2829 0a20 2020 2020 2020 2069 6620 7065  ().        if pe
+0001d910: 616b 2069 7320 4e6f 6e65 206f 7220 7065  ak is None or pe
+0001d920: 616b 2e68 6569 6768 7420 2d20 6865 6967  ak.height - heig
+0001d930: 6874 203c 2035 3a0a 2020 2020 2020 2020  ht < 5:.        
+0001d940: 2020 2020 7365 6c66 2e6c 6f67 2e64 6562      self.log.deb
+0001d950: 7567 2822 5769 6c6c 206e 6f74 2063 6f6d  ug("Will not com
+0001d960: 7061 6374 6966 7920 7265 6365 6e74 2062  pactify recent b
+0001d970: 6c6f 636b 2229 0a20 2020 2020 2020 2020  lock").         
+0001d980: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
+0001d990: 2020 2020 2020 2020 6966 2076 6466 5f70          if vdf_p
+0001d9a0: 726f 6f66 2e77 6974 6e65 7373 5f74 7970  roof.witness_typ
+0001d9b0: 6520 3e20 3020 6f72 206e 6f74 2076 6466  e > 0 or not vdf
+0001d9c0: 5f70 726f 6f66 2e6e 6f72 6d61 6c69 7a65  _proof.normalize
+0001d9d0: 645f 746f 5f69 6465 6e74 6974 793a 0a20  d_to_identity:. 
+0001d9e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0001d9f0: 6c6f 672e 6572 726f 7228 6622 5265 6365  log.error(f"Rece
+0001da00: 6976 6564 2076 6466 2070 726f 6f66 2069  ived vdf proof i
+0001da10: 7320 6e6f 7420 636f 6d70 6163 743a 207b  s not compact: {
+0001da20: 7664 665f 7072 6f6f 667d 2e22 290a 2020  vdf_proof}.").  
+0001da30: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001da40: 2046 616c 7365 0a20 2020 2020 2020 2069   False.        i
+0001da50: 6620 6e6f 7420 7661 6c69 6461 7465 5f76  f not validate_v
+0001da60: 6466 2876 6466 5f70 726f 6f66 2c20 7365  df(vdf_proof, se
+0001da70: 6c66 2e63 6f6e 7374 616e 7473 2c20 436c  lf.constants, Cl
+0001da80: 6173 7367 726f 7570 456c 656d 656e 742e  assgroupElement.
+0001da90: 6765 745f 6465 6661 756c 745f 656c 656d  get_default_elem
+0001daa0: 656e 7428 292c 2076 6466 5f69 6e66 6f29  ent(), vdf_info)
+0001dab0: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
+0001dac0: 6c66 2e6c 6f67 2e65 7272 6f72 2866 2252  lf.log.error(f"R
+0001dad0: 6563 6569 7665 6420 636f 6d70 6163 7420  eceived compact 
+0001dae0: 7664 6620 7072 6f6f 6620 6973 206e 6f74  vdf proof is not
+0001daf0: 2076 616c 6964 3a20 7b76 6466 5f70 726f   valid: {vdf_pro
+0001db00: 6f66 7d2e 2229 0a20 2020 2020 2020 2020  of}.").         
+0001db10: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
+0001db20: 2020 2020 2020 2020 6865 6164 6572 5f62          header_b
+0001db30: 6c6f 636b 203d 2061 7761 6974 2073 656c  lock = await sel
+0001db40: 662e 626c 6f63 6b63 6861 696e 2e67 6574  f.blockchain.get
+0001db50: 5f68 6561 6465 725f 626c 6f63 6b5f 6279  _header_block_by
+0001db60: 5f68 6569 6768 7428 6865 6967 6874 2c20  _height(height, 
+0001db70: 6865 6164 6572 5f68 6173 682c 2074 785f  header_hash, tx_
+0001db80: 6669 6c74 6572 3d46 616c 7365 290a 2020  filter=False).  
+0001db90: 2020 2020 2020 6966 2068 6561 6465 725f        if header_
+0001dba0: 626c 6f63 6b20 6973 204e 6f6e 653a 0a20  block is None:. 
+0001dbb0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0001dbc0: 6c6f 672e 6572 726f 7228 6622 4361 6e27  log.error(f"Can'
+0001dbd0: 7420 6669 6e64 2062 6c6f 636b 2066 6f72  t find block for
+0001dbe0: 2067 6976 656e 2063 6f6d 7061 6374 2076   given compact v
+0001dbf0: 6466 2e20 4865 6967 6874 3a20 7b68 6569  df. Height: {hei
+0001dc00: 6768 747d 2048 6561 6465 7220 6861 7368  ght} Header hash
+0001dc10: 3a20 7b68 6561 6465 725f 6861 7368 7d22  : {header_hash}"
+0001dc20: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
+0001dc30: 7475 726e 2046 616c 7365 0a20 2020 2020  turn False.     
+0001dc40: 2020 2069 735f 6e65 775f 7072 6f6f 6620     is_new_proof 
+0001dc50: 3d20 6177 6169 7420 7365 6c66 2e5f 6e65  = await self._ne
+0001dc60: 6564 735f 636f 6d70 6163 745f 7072 6f6f  eds_compact_proo
+0001dc70: 6628 7664 665f 696e 666f 2c20 6865 6164  f(vdf_info, head
+0001dc80: 6572 5f62 6c6f 636b 2c20 6669 656c 645f  er_block, field_
+0001dc90: 7664 6629 0a20 2020 2020 2020 2069 6620  vdf).        if 
+0001dca0: 6e6f 7420 6973 5f6e 6577 5f70 726f 6f66  not is_new_proof
+0001dcb0: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
+0001dcc0: 6c66 2e6c 6f67 2e69 6e66 6f28 6622 4475  lf.log.info(f"Du
+0001dcd0: 706c 6963 6174 6520 636f 6d70 6163 7420  plicate compact 
+0001dce0: 7072 6f6f 662e 2048 6569 6768 743a 207b  proof. Height: {
+0001dcf0: 6865 6967 6874 7d2e 2048 6561 6465 7220  height}. Header 
+0001dd00: 6861 7368 3a20 7b68 6561 6465 725f 6861  hash: {header_ha
+0001dd10: 7368 7d2e 2229 0a20 2020 2020 2020 2072  sh}.").        r
+0001dd20: 6574 7572 6e20 6973 5f6e 6577 5f70 726f  eturn is_new_pro
+0001dd30: 6f66 0a0a 2020 2020 2320 7265 7475 726e  of..    # return
+0001dd40: 7320 5472 7565 2069 6620 7765 2065 6e64  s True if we end
+0001dd50: 6564 2075 7020 7265 706c 6163 696e 6720  ed up replacing 
+0001dd60: 7468 6520 7072 6f6f 662c 2061 6e64 2046  the proof, and F
+0001dd70: 616c 7365 206f 7468 6572 7769 7365 0a20  alse otherwise. 
+0001dd80: 2020 2061 7379 6e63 2064 6566 205f 7265     async def _re
+0001dd90: 706c 6163 655f 7072 6f6f 6628 0a20 2020  place_proof(.   
+0001dda0: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+0001ddb0: 2020 2076 6466 5f69 6e66 6f3a 2056 4446     vdf_info: VDF
+0001ddc0: 496e 666f 2c0a 2020 2020 2020 2020 7664  Info,.        vd
+0001ddd0: 665f 7072 6f6f 663a 2056 4446 5072 6f6f  f_proof: VDFProo
+0001dde0: 662c 0a20 2020 2020 2020 2068 6561 6465  f,.        heade
+0001ddf0: 725f 6861 7368 3a20 6279 7465 7333 322c  r_hash: bytes32,
+0001de00: 0a20 2020 2020 2020 2066 6965 6c64 5f76  .        field_v
+0001de10: 6466 3a20 436f 6d70 7265 7373 6962 6c65  df: Compressible
+0001de20: 5644 4646 6965 6c64 2c0a 2020 2020 2920  VDFField,.    ) 
+0001de30: 2d3e 2062 6f6f 6c3a 0a20 2020 2020 2020  -> bool:.       
+0001de40: 2062 6c6f 636b 203d 2061 7761 6974 2073   block = await s
+0001de50: 656c 662e 626c 6f63 6b5f 7374 6f72 652e  elf.block_store.
+0001de60: 6765 745f 6675 6c6c 5f62 6c6f 636b 2868  get_full_block(h
+0001de70: 6561 6465 725f 6861 7368 290a 2020 2020  eader_hash).    
+0001de80: 2020 2020 6966 2062 6c6f 636b 2069 7320      if block is 
+0001de90: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0001dea0: 2020 7265 7475 726e 2046 616c 7365 0a0a    return False..
+0001deb0: 2020 2020 2020 2020 6e65 775f 626c 6f63          new_bloc
+0001dec0: 6b20 3d20 4e6f 6e65 0a0a 2020 2020 2020  k = None..      
+0001ded0: 2020 6966 2066 6965 6c64 5f76 6466 203d    if field_vdf =
+0001dee0: 3d20 436f 6d70 7265 7373 6962 6c65 5644  = CompressibleVD
+0001def0: 4646 6965 6c64 2e43 435f 454f 535f 5644  FField.CC_EOS_VD
+0001df00: 463a 0a20 2020 2020 2020 2020 2020 2066  F:.            f
+0001df10: 6f72 2069 6e64 6578 2c20 7375 625f 736c  or index, sub_sl
+0001df20: 6f74 2069 6e20 656e 756d 6572 6174 6528  ot in enumerate(
+0001df30: 626c 6f63 6b2e 6669 6e69 7368 6564 5f73  block.finished_s
+0001df40: 7562 5f73 6c6f 7473 293a 0a20 2020 2020  ub_slots):.     
+0001df50: 2020 2020 2020 2020 2020 2069 6620 7375             if su
+0001df60: 625f 736c 6f74 2e63 6861 6c6c 656e 6765  b_slot.challenge
+0001df70: 5f63 6861 696e 2e63 6861 6c6c 656e 6765  _chain.challenge
+0001df80: 5f63 6861 696e 5f65 6e64 5f6f 665f 736c  _chain_end_of_sl
+0001df90: 6f74 5f76 6466 203d 3d20 7664 665f 696e  ot_vdf == vdf_in
+0001dfa0: 666f 3a0a 2020 2020 2020 2020 2020 2020  fo:.            
+0001dfb0: 2020 2020 2020 2020 6e65 775f 7072 6f6f          new_proo
+0001dfc0: 6673 203d 2073 7562 5f73 6c6f 742e 7072  fs = sub_slot.pr
+0001dfd0: 6f6f 6673 2e72 6570 6c61 6365 2863 6861  oofs.replace(cha
+0001dfe0: 6c6c 656e 6765 5f63 6861 696e 5f73 6c6f  llenge_chain_slo
+0001dff0: 745f 7072 6f6f 663d 7664 665f 7072 6f6f  t_proof=vdf_proo
+0001e000: 6629 0a20 2020 2020 2020 2020 2020 2020  f).             
+0001e010: 2020 2020 2020 206e 6577 5f73 7562 736c         new_subsl
+0001e020: 6f74 203d 2073 7562 5f73 6c6f 742e 7265  ot = sub_slot.re
+0001e030: 706c 6163 6528 7072 6f6f 6673 3d6e 6577  place(proofs=new
+0001e040: 5f70 726f 6f66 7329 0a20 2020 2020 2020  _proofs).       
+0001e050: 2020 2020 2020 2020 2020 2020 206e 6577               new
+0001e060: 5f66 696e 6973 6865 645f 7375 6273 6c6f  _finished_subslo
+0001e070: 7473 203d 2062 6c6f 636b 2e66 696e 6973  ts = block.finis
+0001e080: 6865 645f 7375 625f 736c 6f74 730a 2020  hed_sub_slots.  
+0001e090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e0a0: 2020 6e65 775f 6669 6e69 7368 6564 5f73    new_finished_s
+0001e0b0: 7562 736c 6f74 735b 696e 6465 785d 203d  ubslots[index] =
+0001e0c0: 206e 6577 5f73 7562 736c 6f74 0a20 2020   new_subslot.   
+0001e0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e0e0: 206e 6577 5f62 6c6f 636b 203d 2062 6c6f   new_block = blo
+0001e0f0: 636b 2e72 6570 6c61 6365 2866 696e 6973  ck.replace(finis
+0001e100: 6865 645f 7375 625f 736c 6f74 733d 6e65  hed_sub_slots=ne
+0001e110: 775f 6669 6e69 7368 6564 5f73 7562 736c  w_finished_subsl
+0001e120: 6f74 7329 0a20 2020 2020 2020 2020 2020  ots).           
+0001e130: 2020 2020 2020 2020 2062 7265 616b 0a20           break. 
+0001e140: 2020 2020 2020 2069 6620 6669 656c 645f         if field_
+0001e150: 7664 6620 3d3d 2043 6f6d 7072 6573 7369  vdf == Compressi
+0001e160: 626c 6556 4446 4669 656c 642e 4943 435f  bleVDFField.ICC_
+0001e170: 454f 535f 5644 463a 0a20 2020 2020 2020  EOS_VDF:.       
+0001e180: 2020 2020 2066 6f72 2069 6e64 6578 2c20       for index, 
+0001e190: 7375 625f 736c 6f74 2069 6e20 656e 756d  sub_slot in enum
+0001e1a0: 6572 6174 6528 626c 6f63 6b2e 6669 6e69  erate(block.fini
+0001e1b0: 7368 6564 5f73 7562 5f73 6c6f 7473 293a  shed_sub_slots):
+0001e1c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001e1d0: 2069 6620 280a 2020 2020 2020 2020 2020   if (.          
+0001e1e0: 2020 2020 2020 2020 2020 7375 625f 736c            sub_sl
+0001e1f0: 6f74 2e69 6e66 7573 6564 5f63 6861 6c6c  ot.infused_chall
+0001e200: 656e 6765 5f63 6861 696e 2069 7320 6e6f  enge_chain is no
+0001e210: 7420 4e6f 6e65 0a20 2020 2020 2020 2020  t None.         
+0001e220: 2020 2020 2020 2020 2020 2061 6e64 2073             and s
+0001e230: 7562 5f73 6c6f 742e 696e 6675 7365 645f  ub_slot.infused_
+0001e240: 6368 616c 6c65 6e67 655f 6368 6169 6e2e  challenge_chain.
+0001e250: 696e 6675 7365 645f 6368 616c 6c65 6e67  infused_challeng
+0001e260: 655f 6368 6169 6e5f 656e 645f 6f66 5f73  e_chain_end_of_s
+0001e270: 6c6f 745f 7664 6620 3d3d 2076 6466 5f69  lot_vdf == vdf_i
+0001e280: 6e66 6f0a 2020 2020 2020 2020 2020 2020  nfo.            
+0001e290: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
+0001e2a0: 2020 2020 2020 2020 2020 206e 6577 5f70             new_p
+0001e2b0: 726f 6f66 7320 3d20 7375 625f 736c 6f74  roofs = sub_slot
+0001e2c0: 2e70 726f 6f66 732e 7265 706c 6163 6528  .proofs.replace(
+0001e2d0: 696e 6675 7365 645f 6368 616c 6c65 6e67  infused_challeng
+0001e2e0: 655f 6368 6169 6e5f 736c 6f74 5f70 726f  e_chain_slot_pro
+0001e2f0: 6f66 3d76 6466 5f70 726f 6f66 290a 2020  of=vdf_proof).  
+0001e300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e310: 2020 6e65 775f 7375 6273 6c6f 7420 3d20    new_subslot = 
+0001e320: 7375 625f 736c 6f74 2e72 6570 6c61 6365  sub_slot.replace
+0001e330: 2870 726f 6f66 733d 6e65 775f 7072 6f6f  (proofs=new_proo
+0001e340: 6673 290a 2020 2020 2020 2020 2020 2020  fs).            
+0001e350: 2020 2020 2020 2020 6e65 775f 6669 6e69          new_fini
+0001e360: 7368 6564 5f73 7562 736c 6f74 7320 3d20  shed_subslots = 
+0001e370: 626c 6f63 6b2e 6669 6e69 7368 6564 5f73  block.finished_s
+0001e380: 7562 5f73 6c6f 7473 0a20 2020 2020 2020  ub_slots.       
+0001e390: 2020 2020 2020 2020 2020 2020 206e 6577               new
+0001e3a0: 5f66 696e 6973 6865 645f 7375 6273 6c6f  _finished_subslo
+0001e3b0: 7473 5b69 6e64 6578 5d20 3d20 6e65 775f  ts[index] = new_
+0001e3c0: 7375 6273 6c6f 740a 2020 2020 2020 2020  subslot.        
+0001e3d0: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
+0001e3e0: 626c 6f63 6b20 3d20 626c 6f63 6b2e 7265  block = block.re
+0001e3f0: 706c 6163 6528 6669 6e69 7368 6564 5f73  place(finished_s
+0001e400: 7562 5f73 6c6f 7473 3d6e 6577 5f66 696e  ub_slots=new_fin
+0001e410: 6973 6865 645f 7375 6273 6c6f 7473 290a  ished_subslots).
+0001e420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e430: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
+0001e440: 2020 6966 2066 6965 6c64 5f76 6466 203d    if field_vdf =
+0001e450: 3d20 436f 6d70 7265 7373 6962 6c65 5644  = CompressibleVD
+0001e460: 4646 6965 6c64 2e43 435f 5350 5f56 4446  FField.CC_SP_VDF
+0001e470: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+0001e480: 2062 6c6f 636b 2e72 6577 6172 645f 6368   block.reward_ch
+0001e490: 6169 6e5f 626c 6f63 6b2e 6368 616c 6c65  ain_block.challe
+0001e4a0: 6e67 655f 6368 6169 6e5f 7370 5f76 6466  nge_chain_sp_vdf
+0001e4b0: 203d 3d20 7664 665f 696e 666f 3a0a 2020   == vdf_info:.  
+0001e4c0: 2020 2020 2020 2020 2020 2020 2020 6173                as
+0001e4d0: 7365 7274 2062 6c6f 636b 2e63 6861 6c6c  sert block.chall
+0001e4e0: 656e 6765 5f63 6861 696e 5f73 705f 7072  enge_chain_sp_pr
+0001e4f0: 6f6f 6620 6973 206e 6f74 204e 6f6e 650a  oof is not None.
+0001e500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e510: 6e65 775f 626c 6f63 6b20 3d20 626c 6f63  new_block = bloc
+0001e520: 6b2e 7265 706c 6163 6528 6368 616c 6c65  k.replace(challe
+0001e530: 6e67 655f 6368 6169 6e5f 7370 5f70 726f  nge_chain_sp_pro
+0001e540: 6f66 3d76 6466 5f70 726f 6f66 290a 2020  of=vdf_proof).  
+0001e550: 2020 2020 2020 6966 2066 6965 6c64 5f76        if field_v
+0001e560: 6466 203d 3d20 436f 6d70 7265 7373 6962  df == Compressib
+0001e570: 6c65 5644 4646 6965 6c64 2e43 435f 4950  leVDFField.CC_IP
+0001e580: 5f56 4446 3a0a 2020 2020 2020 2020 2020  _VDF:.          
+0001e590: 2020 6966 2062 6c6f 636b 2e72 6577 6172    if block.rewar
+0001e5a0: 645f 6368 6169 6e5f 626c 6f63 6b2e 6368  d_chain_block.ch
+0001e5b0: 616c 6c65 6e67 655f 6368 6169 6e5f 6970  allenge_chain_ip
+0001e5c0: 5f76 6466 203d 3d20 7664 665f 696e 666f  _vdf == vdf_info
+0001e5d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001e5e0: 2020 6e65 775f 626c 6f63 6b20 3d20 626c    new_block = bl
+0001e5f0: 6f63 6b2e 7265 706c 6163 6528 6368 616c  ock.replace(chal
+0001e600: 6c65 6e67 655f 6368 6169 6e5f 6970 5f70  lenge_chain_ip_p
+0001e610: 726f 6f66 3d76 6466 5f70 726f 6f66 290a  roof=vdf_proof).
+0001e620: 2020 2020 2020 2020 6966 206e 6577 5f62          if new_b
+0001e630: 6c6f 636b 2069 7320 4e6f 6e65 3a0a 2020  lock is None:.  
+0001e640: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001e650: 2046 616c 7365 0a20 2020 2020 2020 2061   False.        a
+0001e660: 7379 6e63 2077 6974 6820 7365 6c66 2e64  sync with self.d
+0001e670: 625f 7772 6170 7065 722e 7772 6974 6572  b_wrapper.writer
+0001e680: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+0001e690: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+0001e6a0: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
+0001e6b0: 626c 6f63 6b5f 7374 6f72 652e 7265 706c  block_store.repl
+0001e6c0: 6163 655f 7072 6f6f 6628 6865 6164 6572  ace_proof(header
+0001e6d0: 5f68 6173 682c 206e 6577 5f62 6c6f 636b  _hash, new_block
+0001e6e0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001e6f0: 2020 7265 7475 726e 2054 7275 650a 2020    return True.  
+0001e700: 2020 2020 2020 2020 2020 6578 6365 7074            except
+0001e710: 2042 6173 6545 7863 6570 7469 6f6e 2061   BaseException a
+0001e720: 7320 653a 0a20 2020 2020 2020 2020 2020  s e:.           
+0001e730: 2020 2020 2073 656c 662e 6c6f 672e 6572       self.log.er
+0001e740: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
+0001e750: 2020 2020 2020 2020 2066 225f 7265 706c           f"_repl
+0001e760: 6163 655f 7072 6f6f 6620 6572 726f 7220  ace_proof error 
+0001e770: 7768 696c 6520 6164 6469 6e67 2062 6c6f  while adding blo
+0001e780: 636b 207b 626c 6f63 6b2e 6865 6164 6572  ck {block.header
+0001e790: 5f68 6173 687d 2068 6569 6768 7420 7b62  _hash} height {b
+0001e7a0: 6c6f 636b 2e68 6569 6768 747d 2c22 0a20  lock.height},". 
+0001e7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e7c0: 2020 2066 2220 726f 6c6c 696e 6720 6261     f" rolling ba
+0001e7d0: 636b 3a20 7b65 7d20 7b74 7261 6365 6261  ck: {e} {traceba
+0001e7e0: 636b 2e66 6f72 6d61 745f 6578 6328 297d  ck.format_exc()}
+0001e7f0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+0001e800: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+0001e810: 2020 2020 7261 6973 650a 0a20 2020 2061      raise..    a
+0001e820: 7379 6e63 2064 6566 2061 6464 5f63 6f6d  sync def add_com
+0001e830: 7061 6374 5f70 726f 6f66 5f6f 665f 7469  pact_proof_of_ti
+0001e840: 6d65 2873 656c 662c 2072 6571 7565 7374  me(self, request
+0001e850: 3a20 7469 6d65 6c6f 7264 5f70 726f 746f  : timelord_proto
+0001e860: 636f 6c2e 5265 7370 6f6e 6443 6f6d 7061  col.RespondCompa
+0001e870: 6374 5072 6f6f 664f 6654 696d 6529 202d  ctProofOfTime) -
+0001e880: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+0001e890: 7065 616b 203d 2073 656c 662e 626c 6f63  peak = self.bloc
+0001e8a0: 6b63 6861 696e 2e67 6574 5f70 6561 6b28  kchain.get_peak(
+0001e8b0: 290a 2020 2020 2020 2020 6966 2070 6561  ).        if pea
+0001e8c0: 6b20 6973 204e 6f6e 6520 6f72 2070 6561  k is None or pea
+0001e8d0: 6b2e 6865 6967 6874 202d 2072 6571 7565  k.height - reque
+0001e8e0: 7374 2e68 6569 6768 7420 3c20 353a 0a20  st.height < 5:. 
+0001e8f0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0001e900: 6c6f 672e 696e 666f 2866 2249 676e 6f72  log.info(f"Ignor
+0001e910: 696e 6720 6164 645f 636f 6d70 6163 745f  ing add_compact_
+0001e920: 7072 6f6f 665f 6f66 5f74 696d 652c 2068  proof_of_time, h
+0001e930: 6569 6768 7420 7b72 6571 7565 7374 2e68  eight {request.h
+0001e940: 6569 6768 747d 2074 6f6f 2072 6563 656e  eight} too recen
+0001e950: 742e 2229 0a20 2020 2020 2020 2020 2020  t.").           
+0001e960: 2072 6574 7572 6e20 4e6f 6e65 0a0a 2020   return None..  
+0001e970: 2020 2020 2020 6669 656c 645f 7664 6620        field_vdf 
+0001e980: 3d20 436f 6d70 7265 7373 6962 6c65 5644  = CompressibleVD
+0001e990: 4646 6965 6c64 2869 6e74 2872 6571 7565  FField(int(reque
+0001e9a0: 7374 2e66 6965 6c64 5f76 6466 2929 0a20  st.field_vdf)). 
+0001e9b0: 2020 2020 2020 2069 6620 6e6f 7420 6177         if not aw
+0001e9c0: 6169 7420 7365 6c66 2e5f 6361 6e5f 6163  ait self._can_ac
+0001e9d0: 6365 7074 5f63 6f6d 7061 6374 5f70 726f  cept_compact_pro
+0001e9e0: 6f66 280a 2020 2020 2020 2020 2020 2020  of(.            
+0001e9f0: 7265 7175 6573 742e 7664 665f 696e 666f  request.vdf_info
+0001ea00: 2c20 7265 7175 6573 742e 7664 665f 7072  , request.vdf_pr
+0001ea10: 6f6f 662c 2072 6571 7565 7374 2e68 6569  oof, request.hei
+0001ea20: 6768 742c 2072 6571 7565 7374 2e68 6561  ght, request.hea
+0001ea30: 6465 725f 6861 7368 2c20 6669 656c 645f  der_hash, field_
+0001ea40: 7664 660a 2020 2020 2020 2020 293a 0a20  vdf.        ):. 
+0001ea50: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001ea60: 6e20 4e6f 6e65 0a20 2020 2020 2020 2061  n None.        a
+0001ea70: 7379 6e63 2077 6974 6820 7365 6c66 2e62  sync with self.b
+0001ea80: 6c6f 636b 6368 6169 6e2e 636f 6d70 6163  lockchain.compac
+0001ea90: 745f 7072 6f6f 665f 6c6f 636b 3a0a 2020  t_proof_lock:.  
+0001eaa0: 2020 2020 2020 2020 2020 7265 706c 6163            replac
+0001eab0: 6564 203d 2061 7761 6974 2073 656c 662e  ed = await self.
+0001eac0: 5f72 6570 6c61 6365 5f70 726f 6f66 2872  _replace_proof(r
+0001ead0: 6571 7565 7374 2e76 6466 5f69 6e66 6f2c  equest.vdf_info,
+0001eae0: 2072 6571 7565 7374 2e76 6466 5f70 726f   request.vdf_pro
+0001eaf0: 6f66 2c20 7265 7175 6573 742e 6865 6164  of, request.head
+0001eb00: 6572 5f68 6173 682c 2066 6965 6c64 5f76  er_hash, field_v
+0001eb10: 6466 290a 2020 2020 2020 2020 6966 206e  df).        if n
+0001eb20: 6f74 2072 6570 6c61 6365 643a 0a20 2020  ot replaced:.   
+0001eb30: 2020 2020 2020 2020 2073 656c 662e 6c6f           self.lo
+0001eb40: 672e 6572 726f 7228 6622 436f 756c 6420  g.error(f"Could 
+0001eb50: 6e6f 7420 7265 706c 6163 6520 636f 6d70  not replace comp
+0001eb60: 6163 7420 7072 6f6f 663a 207b 7265 7175  act proof: {requ
+0001eb70: 6573 742e 6865 6967 6874 7d22 290a 2020  est.height}").  
+0001eb80: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001eb90: 204e 6f6e 650a 2020 2020 2020 2020 7365   None.        se
+0001eba0: 6c66 2e6c 6f67 2e69 6e66 6f28 6622 5265  lf.log.info(f"Re
+0001ebb0: 706c 6163 6564 2063 6f6d 7061 6374 2070  placed compact p
+0001ebc0: 726f 6f66 2061 7420 6865 6967 6874 207b  roof at height {
+0001ebd0: 7265 7175 6573 742e 6865 6967 6874 7d22  request.height}"
+0001ebe0: 290a 2020 2020 2020 2020 6d73 6720 3d20  ).        msg = 
+0001ebf0: 6d61 6b65 5f6d 7367 280a 2020 2020 2020  make_msg(.      
+0001ec00: 2020 2020 2020 5072 6f74 6f63 6f6c 4d65        ProtocolMe
+0001ec10: 7373 6167 6554 7970 6573 2e6e 6577 5f63  ssageTypes.new_c
+0001ec20: 6f6d 7061 6374 5f76 6466 2c0a 2020 2020  ompact_vdf,.    
+0001ec30: 2020 2020 2020 2020 6675 6c6c 5f6e 6f64          full_nod
+0001ec40: 655f 7072 6f74 6f63 6f6c 2e4e 6577 436f  e_protocol.NewCo
+0001ec50: 6d70 6163 7456 4446 2872 6571 7565 7374  mpactVDF(request
+0001ec60: 2e68 6569 6768 742c 2072 6571 7565 7374  .height, request
+0001ec70: 2e68 6561 6465 725f 6861 7368 2c20 7265  .header_hash, re
+0001ec80: 7175 6573 742e 6669 656c 645f 7664 662c  quest.field_vdf,
+0001ec90: 2072 6571 7565 7374 2e76 6466 5f69 6e66   request.vdf_inf
+0001eca0: 6f29 2c0a 2020 2020 2020 2020 290a 2020  o),.        ).  
+0001ecb0: 2020 2020 2020 6966 2073 656c 662e 5f73        if self._s
+0001ecc0: 6572 7665 7220 6973 206e 6f74 204e 6f6e  erver is not Non
+0001ecd0: 653a 0a20 2020 2020 2020 2020 2020 2061  e:.            a
+0001ece0: 7761 6974 2073 656c 662e 7365 7276 6572  wait self.server
+0001ecf0: 2e73 656e 645f 746f 5f61 6c6c 285b 6d73  .send_to_all([ms
+0001ed00: 675d 2c20 4e6f 6465 5479 7065 2e46 554c  g], NodeType.FUL
+0001ed10: 4c5f 4e4f 4445 290a 0a20 2020 2061 7379  L_NODE)..    asy
+0001ed20: 6e63 2064 6566 206e 6577 5f63 6f6d 7061  nc def new_compa
+0001ed30: 6374 5f76 6466 2873 656c 662c 2072 6571  ct_vdf(self, req
+0001ed40: 7565 7374 3a20 6675 6c6c 5f6e 6f64 655f  uest: full_node_
+0001ed50: 7072 6f74 6f63 6f6c 2e4e 6577 436f 6d70  protocol.NewComp
+0001ed60: 6163 7456 4446 2c20 7065 6572 3a20 5753  actVDF, peer: WS
+0001ed70: 4368 6961 436f 6e6e 6563 7469 6f6e 2920  ChiaConnection) 
+0001ed80: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+0001ed90: 2070 6561 6b20 3d20 7365 6c66 2e62 6c6f   peak = self.blo
+0001eda0: 636b 6368 6169 6e2e 6765 745f 7065 616b  ckchain.get_peak
+0001edb0: 2829 0a20 2020 2020 2020 2069 6620 7065  ().        if pe
+0001edc0: 616b 2069 7320 4e6f 6e65 206f 7220 7065  ak is None or pe
+0001edd0: 616b 2e68 6569 6768 7420 2d20 7265 7175  ak.height - requ
+0001ede0: 6573 742e 6865 6967 6874 203c 2035 3a0a  est.height < 5:.
+0001edf0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0001ee00: 2e6c 6f67 2e69 6e66 6f28 6622 4967 6e6f  .log.info(f"Igno
+0001ee10: 7269 6e67 206e 6577 5f63 6f6d 7061 6374  ring new_compact
+0001ee20: 5f76 6466 2c20 6865 6967 6874 207b 7265  _vdf, height {re
+0001ee30: 7175 6573 742e 6865 6967 6874 7d20 746f  quest.height} to
+0001ee40: 6f20 7265 6365 6e74 2e22 290a 2020 2020  o recent.").    
+0001ee50: 2020 2020 2020 2020 7265 7475 726e 204e          return N
+0001ee60: 6f6e 650a 2020 2020 2020 2020 6973 5f66  one.        is_f
+0001ee70: 756c 6c79 5f63 6f6d 7061 6374 6966 6965  ully_compactifie
+0001ee80: 6420 3d20 6177 6169 7420 7365 6c66 2e62  d = await self.b
+0001ee90: 6c6f 636b 5f73 746f 7265 2e69 735f 6675  lock_store.is_fu
+0001eea0: 6c6c 795f 636f 6d70 6163 7469 6669 6564  lly_compactified
+0001eeb0: 2872 6571 7565 7374 2e68 6561 6465 725f  (request.header_
+0001eec0: 6861 7368 290a 2020 2020 2020 2020 6966  hash).        if
+0001eed0: 2069 735f 6675 6c6c 795f 636f 6d70 6163   is_fully_compac
+0001eee0: 7469 6669 6564 2069 7320 4e6f 6e65 206f  tified is None o
+0001eef0: 7220 6973 5f66 756c 6c79 5f63 6f6d 7061  r is_fully_compa
+0001ef00: 6374 6966 6965 643a 0a20 2020 2020 2020  ctified:.       
+0001ef10: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
+0001ef20: 0a20 2020 2020 2020 2068 6561 6465 725f  .        header_
+0001ef30: 626c 6f63 6b20 3d20 6177 6169 7420 7365  block = await se
+0001ef40: 6c66 2e62 6c6f 636b 6368 6169 6e2e 6765  lf.blockchain.ge
+0001ef50: 745f 6865 6164 6572 5f62 6c6f 636b 5f62  t_header_block_b
+0001ef60: 795f 6865 6967 6874 280a 2020 2020 2020  y_height(.      
+0001ef70: 2020 2020 2020 7265 7175 6573 742e 6865        request.he
+0001ef80: 6967 6874 2c20 7265 7175 6573 742e 6865  ight, request.he
+0001ef90: 6164 6572 5f68 6173 682c 2074 785f 6669  ader_hash, tx_fi
+0001efa0: 6c74 6572 3d46 616c 7365 0a20 2020 2020  lter=False.     
+0001efb0: 2020 2029 0a20 2020 2020 2020 2069 6620     ).        if 
+0001efc0: 6865 6164 6572 5f62 6c6f 636b 2069 7320  header_block is 
+0001efd0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0001efe0: 2020 7265 7475 726e 204e 6f6e 650a 2020    return None.  
+0001eff0: 2020 2020 2020 6669 656c 645f 7664 6620        field_vdf 
+0001f000: 3d20 436f 6d70 7265 7373 6962 6c65 5644  = CompressibleVD
+0001f010: 4646 6965 6c64 2869 6e74 2872 6571 7565  FField(int(reque
+0001f020: 7374 2e66 6965 6c64 5f76 6466 2929 0a20  st.field_vdf)). 
+0001f030: 2020 2020 2020 2069 6620 6177 6169 7420         if await 
+0001f040: 7365 6c66 2e5f 6e65 6564 735f 636f 6d70  self._needs_comp
+0001f050: 6163 745f 7072 6f6f 6628 7265 7175 6573  act_proof(reques
+0001f060: 742e 7664 665f 696e 666f 2c20 6865 6164  t.vdf_info, head
+0001f070: 6572 5f62 6c6f 636b 2c20 6669 656c 645f  er_block, field_
+0001f080: 7664 6629 3a0a 2020 2020 2020 2020 2020  vdf):.          
+0001f090: 2020 7065 6572 5f72 6571 7565 7374 203d    peer_request =
+0001f0a0: 2066 756c 6c5f 6e6f 6465 5f70 726f 746f   full_node_proto
+0001f0b0: 636f 6c2e 5265 7175 6573 7443 6f6d 7061  col.RequestCompa
+0001f0c0: 6374 5644 4628 0a20 2020 2020 2020 2020  ctVDF(.         
+0001f0d0: 2020 2020 2020 2072 6571 7565 7374 2e68         request.h
+0001f0e0: 6569 6768 742c 2072 6571 7565 7374 2e68  eight, request.h
+0001f0f0: 6561 6465 725f 6861 7368 2c20 7265 7175  eader_hash, requ
+0001f100: 6573 742e 6669 656c 645f 7664 662c 2072  est.field_vdf, r
+0001f110: 6571 7565 7374 2e76 6466 5f69 6e66 6f0a  equest.vdf_info.
+0001f120: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0001f130: 2020 2020 2020 2020 2020 7265 7370 6f6e            respon
+0001f140: 7365 203d 2061 7761 6974 2070 6565 722e  se = await peer.
+0001f150: 6361 6c6c 5f61 7069 2846 756c 6c4e 6f64  call_api(FullNod
+0001f160: 6541 5049 2e72 6571 7565 7374 5f63 6f6d  eAPI.request_com
+0001f170: 7061 6374 5f76 6466 2c20 7065 6572 5f72  pact_vdf, peer_r
+0001f180: 6571 7565 7374 2c20 7469 6d65 6f75 743d  equest, timeout=
+0001f190: 3130 290a 2020 2020 2020 2020 2020 2020  10).            
+0001f1a0: 6966 2072 6573 706f 6e73 6520 6973 206e  if response is n
+0001f1b0: 6f74 204e 6f6e 6520 616e 6420 6973 696e  ot None and isin
+0001f1c0: 7374 616e 6365 2872 6573 706f 6e73 652c  stance(response,
+0001f1d0: 2066 756c 6c5f 6e6f 6465 5f70 726f 746f   full_node_proto
+0001f1e0: 636f 6c2e 5265 7370 6f6e 6443 6f6d 7061  col.RespondCompa
+0001f1f0: 6374 5644 4629 3a0a 2020 2020 2020 2020  ctVDF):.        
+0001f200: 2020 2020 2020 2020 6177 6169 7420 7365          await se
+0001f210: 6c66 2e61 6464 5f63 6f6d 7061 6374 5f76  lf.add_compact_v
+0001f220: 6466 2872 6573 706f 6e73 652c 2070 6565  df(response, pee
+0001f230: 7229 0a0a 2020 2020 6173 796e 6320 6465  r)..    async de
+0001f240: 6620 7265 7175 6573 745f 636f 6d70 6163  f request_compac
+0001f250: 745f 7664 6628 7365 6c66 2c20 7265 7175  t_vdf(self, requ
+0001f260: 6573 743a 2066 756c 6c5f 6e6f 6465 5f70  est: full_node_p
+0001f270: 726f 746f 636f 6c2e 5265 7175 6573 7443  rotocol.RequestC
+0001f280: 6f6d 7061 6374 5644 462c 2070 6565 723a  ompactVDF, peer:
+0001f290: 2057 5343 6869 6143 6f6e 6e65 6374 696f   WSChiaConnectio
+0001f2a0: 6e29 202d 3e20 4e6f 6e65 3a0a 2020 2020  n) -> None:.    
+0001f2b0: 2020 2020 6865 6164 6572 5f62 6c6f 636b      header_block
+0001f2c0: 203d 2061 7761 6974 2073 656c 662e 626c   = await self.bl
+0001f2d0: 6f63 6b63 6861 696e 2e67 6574 5f68 6561  ockchain.get_hea
+0001f2e0: 6465 725f 626c 6f63 6b5f 6279 5f68 6569  der_block_by_hei
+0001f2f0: 6768 7428 0a20 2020 2020 2020 2020 2020  ght(.           
+0001f300: 2072 6571 7565 7374 2e68 6569 6768 742c   request.height,
+0001f310: 2072 6571 7565 7374 2e68 6561 6465 725f   request.header_
+0001f320: 6861 7368 2c20 7478 5f66 696c 7465 723d  hash, tx_filter=
+0001f330: 4661 6c73 650a 2020 2020 2020 2020 290a  False.        ).
+0001f340: 2020 2020 2020 2020 6966 2068 6561 6465          if heade
+0001f350: 725f 626c 6f63 6b20 6973 204e 6f6e 653a  r_block is None:
+0001f360: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0001f370: 7572 6e20 4e6f 6e65 0a20 2020 2020 2020  urn None.       
+0001f380: 2076 6466 5f70 726f 6f66 3a20 4f70 7469   vdf_proof: Opti
+0001f390: 6f6e 616c 5b56 4446 5072 6f6f 665d 203d  onal[VDFProof] =
+0001f3a0: 204e 6f6e 650a 2020 2020 2020 2020 6669   None.        fi
+0001f3b0: 656c 645f 7664 6620 3d20 436f 6d70 7265  eld_vdf = Compre
+0001f3c0: 7373 6962 6c65 5644 4646 6965 6c64 2869  ssibleVDFField(i
+0001f3d0: 6e74 2872 6571 7565 7374 2e66 6965 6c64  nt(request.field
+0001f3e0: 5f76 6466 2929 0a20 2020 2020 2020 2069  _vdf)).        i
+0001f3f0: 6620 6669 656c 645f 7664 6620 3d3d 2043  f field_vdf == C
+0001f400: 6f6d 7072 6573 7369 626c 6556 4446 4669  ompressibleVDFFi
+0001f410: 656c 642e 4343 5f45 4f53 5f56 4446 3a0a  eld.CC_EOS_VDF:.
+0001f420: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+0001f430: 7375 625f 736c 6f74 2069 6e20 6865 6164  sub_slot in head
+0001f440: 6572 5f62 6c6f 636b 2e66 696e 6973 6865  er_block.finishe
+0001f450: 645f 7375 625f 736c 6f74 733a 0a20 2020  d_sub_slots:.   
+0001f460: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001f470: 7375 625f 736c 6f74 2e63 6861 6c6c 656e  sub_slot.challen
+0001f480: 6765 5f63 6861 696e 2e63 6861 6c6c 656e  ge_chain.challen
+0001f490: 6765 5f63 6861 696e 5f65 6e64 5f6f 665f  ge_chain_end_of_
+0001f4a0: 736c 6f74 5f76 6466 203d 3d20 7265 7175  slot_vdf == requ
+0001f4b0: 6573 742e 7664 665f 696e 666f 3a0a 2020  est.vdf_info:.  
+0001f4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f4d0: 2020 7664 665f 7072 6f6f 6620 3d20 7375    vdf_proof = su
+0001f4e0: 625f 736c 6f74 2e70 726f 6f66 732e 6368  b_slot.proofs.ch
+0001f4f0: 616c 6c65 6e67 655f 6368 6169 6e5f 736c  allenge_chain_sl
+0001f500: 6f74 5f70 726f 6f66 0a20 2020 2020 2020  ot_proof.       
+0001f510: 2020 2020 2020 2020 2020 2020 2062 7265               bre
+0001f520: 616b 0a20 2020 2020 2020 2069 6620 6669  ak.        if fi
+0001f530: 656c 645f 7664 6620 3d3d 2043 6f6d 7072  eld_vdf == Compr
+0001f540: 6573 7369 626c 6556 4446 4669 656c 642e  essibleVDFField.
+0001f550: 4943 435f 454f 535f 5644 463a 0a20 2020  ICC_EOS_VDF:.   
+0001f560: 2020 2020 2020 2020 2066 6f72 2073 7562           for sub
+0001f570: 5f73 6c6f 7420 696e 2068 6561 6465 725f  _slot in header_
+0001f580: 626c 6f63 6b2e 6669 6e69 7368 6564 5f73  block.finished_s
+0001f590: 7562 5f73 6c6f 7473 3a0a 2020 2020 2020  ub_slots:.      
+0001f5a0: 2020 2020 2020 2020 2020 6966 2028 0a20            if (. 
+0001f5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f5c0: 2020 2073 7562 5f73 6c6f 742e 696e 6675     sub_slot.infu
+0001f5d0: 7365 645f 6368 616c 6c65 6e67 655f 6368  sed_challenge_ch
+0001f5e0: 6169 6e20 6973 206e 6f74 204e 6f6e 650a  ain is not None.
+0001f5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f600: 2020 2020 616e 6420 7375 625f 736c 6f74      and sub_slot
+0001f610: 2e69 6e66 7573 6564 5f63 6861 6c6c 656e  .infused_challen
+0001f620: 6765 5f63 6861 696e 2e69 6e66 7573 6564  ge_chain.infused
+0001f630: 5f63 6861 6c6c 656e 6765 5f63 6861 696e  _challenge_chain
+0001f640: 5f65 6e64 5f6f 665f 736c 6f74 5f76 6466  _end_of_slot_vdf
+0001f650: 203d 3d20 7265 7175 6573 742e 7664 665f   == request.vdf_
+0001f660: 696e 666f 0a20 2020 2020 2020 2020 2020  info.           
+0001f670: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
+0001f680: 2020 2020 2020 2020 2020 2020 7664 665f              vdf_
+0001f690: 7072 6f6f 6620 3d20 7375 625f 736c 6f74  proof = sub_slot
+0001f6a0: 2e70 726f 6f66 732e 696e 6675 7365 645f  .proofs.infused_
+0001f6b0: 6368 616c 6c65 6e67 655f 6368 6169 6e5f  challenge_chain_
+0001f6c0: 736c 6f74 5f70 726f 6f66 0a20 2020 2020  slot_proof.     
+0001f6d0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+0001f6e0: 7265 616b 0a20 2020 2020 2020 2069 6620  reak.        if 
+0001f6f0: 280a 2020 2020 2020 2020 2020 2020 6669  (.            fi
+0001f700: 656c 645f 7664 6620 3d3d 2043 6f6d 7072  eld_vdf == Compr
+0001f710: 6573 7369 626c 6556 4446 4669 656c 642e  essibleVDFField.
+0001f720: 4343 5f53 505f 5644 460a 2020 2020 2020  CC_SP_VDF.      
+0001f730: 2020 2020 2020 616e 6420 6865 6164 6572        and header
+0001f740: 5f62 6c6f 636b 2e72 6577 6172 645f 6368  _block.reward_ch
+0001f750: 6169 6e5f 626c 6f63 6b2e 6368 616c 6c65  ain_block.challe
+0001f760: 6e67 655f 6368 6169 6e5f 7370 5f76 6466  nge_chain_sp_vdf
+0001f770: 203d 3d20 7265 7175 6573 742e 7664 665f   == request.vdf_
+0001f780: 696e 666f 0a20 2020 2020 2020 2029 3a0a  info.        ):.
+0001f790: 2020 2020 2020 2020 2020 2020 7664 665f              vdf_
+0001f7a0: 7072 6f6f 6620 3d20 6865 6164 6572 5f62  proof = header_b
+0001f7b0: 6c6f 636b 2e63 6861 6c6c 656e 6765 5f63  lock.challenge_c
+0001f7c0: 6861 696e 5f73 705f 7072 6f6f 660a 2020  hain_sp_proof.  
+0001f7d0: 2020 2020 2020 6966 2028 0a20 2020 2020        if (.     
+0001f7e0: 2020 2020 2020 2066 6965 6c64 5f76 6466         field_vdf
+0001f7f0: 203d 3d20 436f 6d70 7265 7373 6962 6c65   == Compressible
+0001f800: 5644 4646 6965 6c64 2e43 435f 4950 5f56  VDFField.CC_IP_V
+0001f810: 4446 0a20 2020 2020 2020 2020 2020 2061  DF.            a
+0001f820: 6e64 2068 6561 6465 725f 626c 6f63 6b2e  nd header_block.
+0001f830: 7265 7761 7264 5f63 6861 696e 5f62 6c6f  reward_chain_blo
+0001f840: 636b 2e63 6861 6c6c 656e 6765 5f63 6861  ck.challenge_cha
+0001f850: 696e 5f69 705f 7664 6620 3d3d 2072 6571  in_ip_vdf == req
+0001f860: 7565 7374 2e76 6466 5f69 6e66 6f0a 2020  uest.vdf_info.  
+0001f870: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
+0001f880: 2020 2020 2076 6466 5f70 726f 6f66 203d       vdf_proof =
+0001f890: 2068 6561 6465 725f 626c 6f63 6b2e 6368   header_block.ch
+0001f8a0: 616c 6c65 6e67 655f 6368 6169 6e5f 6970  allenge_chain_ip
+0001f8b0: 5f70 726f 6f66 0a20 2020 2020 2020 2069  _proof.        i
+0001f8c0: 6620 7664 665f 7072 6f6f 6620 6973 204e  f vdf_proof is N
+0001f8d0: 6f6e 6520 6f72 2076 6466 5f70 726f 6f66  one or vdf_proof
+0001f8e0: 2e77 6974 6e65 7373 5f74 7970 6520 3e20  .witness_type > 
+0001f8f0: 3020 6f72 206e 6f74 2076 6466 5f70 726f  0 or not vdf_pro
+0001f900: 6f66 2e6e 6f72 6d61 6c69 7a65 645f 746f  of.normalized_to
+0001f910: 5f69 6465 6e74 6974 793a 0a20 2020 2020  _identity:.     
+0001f920: 2020 2020 2020 2073 656c 662e 6c6f 672e         self.log.
+0001f930: 6572 726f 7228 6622 7b70 6565 727d 2072  error(f"{peer} r
+0001f940: 6571 7565 7374 6564 2063 6f6d 7061 6374  equested compact
+0001f950: 2076 6466 2077 6520 646f 6e27 7420 6861   vdf we don't ha
+0001f960: 7665 2c20 6865 6967 6874 3a20 7b72 6571  ve, height: {req
+0001f970: 7565 7374 2e68 6569 6768 747d 2e22 290a  uest.height}.").
+0001f980: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001f990: 726e 204e 6f6e 650a 2020 2020 2020 2020  rn None.        
+0001f9a0: 636f 6d70 6163 745f 7664 6620 3d20 6675  compact_vdf = fu
+0001f9b0: 6c6c 5f6e 6f64 655f 7072 6f74 6f63 6f6c  ll_node_protocol
+0001f9c0: 2e52 6573 706f 6e64 436f 6d70 6163 7456  .RespondCompactV
+0001f9d0: 4446 280a 2020 2020 2020 2020 2020 2020  DF(.            
+0001f9e0: 7265 7175 6573 742e 6865 6967 6874 2c0a  request.height,.
+0001f9f0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0001fa00: 6573 742e 6865 6164 6572 5f68 6173 682c  est.header_hash,
+0001fa10: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+0001fa20: 7565 7374 2e66 6965 6c64 5f76 6466 2c0a  uest.field_vdf,.
+0001fa30: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0001fa40: 6573 742e 7664 665f 696e 666f 2c0a 2020  est.vdf_info,.  
+0001fa50: 2020 2020 2020 2020 2020 7664 665f 7072            vdf_pr
+0001fa60: 6f6f 662c 0a20 2020 2020 2020 2029 0a20  oof,.        ). 
+0001fa70: 2020 2020 2020 206d 7367 203d 206d 616b         msg = mak
+0001fa80: 655f 6d73 6728 5072 6f74 6f63 6f6c 4d65  e_msg(ProtocolMe
+0001fa90: 7373 6167 6554 7970 6573 2e72 6573 706f  ssageTypes.respo
+0001faa0: 6e64 5f63 6f6d 7061 6374 5f76 6466 2c20  nd_compact_vdf, 
+0001fab0: 636f 6d70 6163 745f 7664 6629 0a20 2020  compact_vdf).   
+0001fac0: 2020 2020 2061 7761 6974 2070 6565 722e       await peer.
+0001fad0: 7365 6e64 5f6d 6573 7361 6765 286d 7367  send_message(msg
+0001fae0: 290a 0a20 2020 2061 7379 6e63 2064 6566  )..    async def
+0001faf0: 2061 6464 5f63 6f6d 7061 6374 5f76 6466   add_compact_vdf
+0001fb00: 2873 656c 662c 2072 6571 7565 7374 3a20  (self, request: 
+0001fb10: 6675 6c6c 5f6e 6f64 655f 7072 6f74 6f63  full_node_protoc
+0001fb20: 6f6c 2e52 6573 706f 6e64 436f 6d70 6163  ol.RespondCompac
+0001fb30: 7456 4446 2c20 7065 6572 3a20 5753 4368  tVDF, peer: WSCh
+0001fb40: 6961 436f 6e6e 6563 7469 6f6e 2920 2d3e  iaConnection) ->
+0001fb50: 204e 6f6e 653a 0a20 2020 2020 2020 2066   None:.        f
+0001fb60: 6965 6c64 5f76 6466 203d 2043 6f6d 7072  ield_vdf = Compr
+0001fb70: 6573 7369 626c 6556 4446 4669 656c 6428  essibleVDFField(
+0001fb80: 696e 7428 7265 7175 6573 742e 6669 656c  int(request.fiel
+0001fb90: 645f 7664 6629 290a 2020 2020 2020 2020  d_vdf)).        
+0001fba0: 6966 206e 6f74 2061 7761 6974 2073 656c  if not await sel
+0001fbb0: 662e 5f63 616e 5f61 6363 6570 745f 636f  f._can_accept_co
+0001fbc0: 6d70 6163 745f 7072 6f6f 6628 0a20 2020  mpact_proof(.   
+0001fbd0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+0001fbe0: 2e76 6466 5f69 6e66 6f2c 2072 6571 7565  .vdf_info, reque
+0001fbf0: 7374 2e76 6466 5f70 726f 6f66 2c20 7265  st.vdf_proof, re
+0001fc00: 7175 6573 742e 6865 6967 6874 2c20 7265  quest.height, re
+0001fc10: 7175 6573 742e 6865 6164 6572 5f68 6173  quest.header_has
+0001fc20: 682c 2066 6965 6c64 5f76 6466 0a20 2020  h, field_vdf.   
+0001fc30: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
+0001fc40: 2020 2020 7265 7475 726e 204e 6f6e 650a      return None.
+0001fc50: 2020 2020 2020 2020 6173 796e 6320 7769          async wi
+0001fc60: 7468 2073 656c 662e 626c 6f63 6b63 6861  th self.blockcha
+0001fc70: 696e 2e63 6f6d 7061 6374 5f70 726f 6f66  in.compact_proof
+0001fc80: 5f6c 6f63 6b3a 0a20 2020 2020 2020 2020  _lock:.         
+0001fc90: 2020 2069 6620 7365 6c66 2e62 6c6f 636b     if self.block
+0001fca0: 6368 6169 6e2e 7365 656e 5f63 6f6d 7061  chain.seen_compa
+0001fcb0: 6374 5f70 726f 6f66 7328 7265 7175 6573  ct_proofs(reques
+0001fcc0: 742e 7664 665f 696e 666f 2c20 7265 7175  t.vdf_info, requ
+0001fcd0: 6573 742e 6865 6967 6874 293a 0a20 2020  est.height):.   
+0001fce0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001fcf0: 7572 6e20 4e6f 6e65 0a20 2020 2020 2020  urn None.       
+0001fd00: 2020 2020 2072 6570 6c61 6365 6420 3d20       replaced = 
+0001fd10: 6177 6169 7420 7365 6c66 2e5f 7265 706c  await self._repl
+0001fd20: 6163 655f 7072 6f6f 6628 7265 7175 6573  ace_proof(reques
+0001fd30: 742e 7664 665f 696e 666f 2c20 7265 7175  t.vdf_info, requ
+0001fd40: 6573 742e 7664 665f 7072 6f6f 662c 2072  est.vdf_proof, r
+0001fd50: 6571 7565 7374 2e68 6561 6465 725f 6861  equest.header_ha
+0001fd60: 7368 2c20 6669 656c 645f 7664 6629 0a20  sh, field_vdf). 
+0001fd70: 2020 2020 2020 2069 6620 6e6f 7420 7265         if not re
+0001fd80: 706c 6163 6564 3a0a 2020 2020 2020 2020  placed:.        
+0001fd90: 2020 2020 7365 6c66 2e6c 6f67 2e65 7272      self.log.err
+0001fda0: 6f72 2866 2243 6f75 6c64 206e 6f74 2072  or(f"Could not r
+0001fdb0: 6570 6c61 6365 2063 6f6d 7061 6374 2070  eplace compact p
+0001fdc0: 726f 6f66 3a20 7b72 6571 7565 7374 2e68  roof: {request.h
+0001fdd0: 6569 6768 747d 2229 0a20 2020 2020 2020  eight}").       
+0001fde0: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
+0001fdf0: 0a20 2020 2020 2020 206d 7367 203d 206d  .        msg = m
+0001fe00: 616b 655f 6d73 6728 0a20 2020 2020 2020  ake_msg(.       
+0001fe10: 2020 2020 2050 726f 746f 636f 6c4d 6573       ProtocolMes
+0001fe20: 7361 6765 5479 7065 732e 6e65 775f 636f  sageTypes.new_co
+0001fe30: 6d70 6163 745f 7664 662c 0a20 2020 2020  mpact_vdf,.     
+0001fe40: 2020 2020 2020 2066 756c 6c5f 6e6f 6465         full_node
+0001fe50: 5f70 726f 746f 636f 6c2e 4e65 7743 6f6d  _protocol.NewCom
+0001fe60: 7061 6374 5644 4628 7265 7175 6573 742e  pactVDF(request.
+0001fe70: 6865 6967 6874 2c20 7265 7175 6573 742e  height, request.
+0001fe80: 6865 6164 6572 5f68 6173 682c 2072 6571  header_hash, req
+0001fe90: 7565 7374 2e66 6965 6c64 5f76 6466 2c20  uest.field_vdf, 
+0001fea0: 7265 7175 6573 742e 7664 665f 696e 666f  request.vdf_info
+0001feb0: 292c 0a20 2020 2020 2020 2029 0a20 2020  ),.        ).   
+0001fec0: 2020 2020 2069 6620 7365 6c66 2e5f 7365       if self._se
+0001fed0: 7276 6572 2069 7320 6e6f 7420 4e6f 6e65  rver is not None
+0001fee0: 3a0a 2020 2020 2020 2020 2020 2020 6177  :.            aw
+0001fef0: 6169 7420 7365 6c66 2e73 6572 7665 722e  ait self.server.
+0001ff00: 7365 6e64 5f74 6f5f 616c 6c28 5b6d 7367  send_to_all([msg
+0001ff10: 5d2c 204e 6f64 6554 7970 652e 4655 4c4c  ], NodeType.FULL
+0001ff20: 5f4e 4f44 452c 2070 6565 722e 7065 6572  _NODE, peer.peer
+0001ff30: 5f6e 6f64 655f 6964 290a 0a20 2020 2064  _node_id)..    d
+0001ff40: 6566 2069 6e5f 6261 645f 7065 616b 5f63  ef in_bad_peak_c
+0001ff50: 6163 6865 2873 656c 662c 2077 703a 2057  ache(self, wp: W
+0001ff60: 6569 6768 7450 726f 6f66 2920 2d3e 2062  eightProof) -> b
+0001ff70: 6f6f 6c3a 0a20 2020 2020 2020 2066 6f72  ool:.        for
+0001ff80: 2062 6c6f 636b 2069 6e20 7770 2e72 6563   block in wp.rec
+0001ff90: 656e 745f 6368 6169 6e5f 6461 7461 3a0a  ent_chain_data:.
+0001ffa0: 2020 2020 2020 2020 2020 2020 6966 2062              if b
+0001ffb0: 6c6f 636b 2e68 6561 6465 725f 6861 7368  lock.header_hash
+0001ffc0: 2069 6e20 7365 6c66 2e62 6164 5f70 6561   in self.bad_pea
+0001ffd0: 6b5f 6361 6368 652e 6b65 7973 2829 3a0a  k_cache.keys():.
+0001ffe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fff0: 7265 7475 726e 2054 7275 650a 2020 2020  return True.    
+00020000: 2020 2020 7265 7475 726e 2046 616c 7365      return False
+00020010: 0a0a 2020 2020 6465 6620 6164 645f 746f  ..    def add_to
+00020020: 5f62 6164 5f70 6561 6b5f 6361 6368 6528  _bad_peak_cache(
+00020030: 7365 6c66 2c20 7065 616b 5f68 6561 6465  self, peak_heade
+00020040: 725f 6861 7368 3a20 6279 7465 7333 322c  r_hash: bytes32,
+00020050: 2070 6561 6b5f 6865 6967 6874 3a20 7569   peak_height: ui
+00020060: 6e74 3332 2920 2d3e 204e 6f6e 653a 0a20  nt32) -> None:. 
+00020070: 2020 2020 2020 2063 7572 725f 6865 6967         curr_heig
+00020080: 6874 203d 2073 656c 662e 626c 6f63 6b63  ht = self.blockc
+00020090: 6861 696e 2e67 6574 5f70 6561 6b5f 6865  hain.get_peak_he
+000200a0: 6967 6874 2829 0a0a 2020 2020 2020 2020  ight()..        
+000200b0: 6966 2063 7572 725f 6865 6967 6874 2069  if curr_height i
+000200c0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+000200d0: 2020 2020 7365 6c66 2e6c 6f67 2e64 6562      self.log.deb
+000200e0: 7567 2866 2261 6464 2062 6164 2070 6561  ug(f"add bad pea
+000200f0: 6b20 7b70 6561 6b5f 6865 6164 6572 5f68  k {peak_header_h
+00020100: 6173 687d 2074 6f20 6361 6368 6522 290a  ash} to cache").
+00020110: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00020120: 2e62 6164 5f70 6561 6b5f 6361 6368 655b  .bad_peak_cache[
+00020130: 7065 616b 5f68 6561 6465 725f 6861 7368  peak_header_hash
+00020140: 5d20 3d20 7065 616b 5f68 6569 6768 740a  ] = peak_height.
+00020150: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00020160: 726e 0a20 2020 2020 2020 206d 696e 696d  rn.        minim
+00020170: 756d 5f63 6163 6865 5f68 6569 6768 7420  um_cache_height 
+00020180: 3d20 6375 7272 5f68 6569 6768 7420 2d20  = curr_height - 
+00020190: 2832 202a 2073 656c 662e 636f 6e73 7461  (2 * self.consta
+000201a0: 6e74 732e 5355 425f 4550 4f43 485f 424c  nts.SUB_EPOCH_BL
+000201b0: 4f43 4b53 290a 2020 2020 2020 2020 6966  OCKS).        if
+000201c0: 2070 6561 6b5f 6865 6967 6874 203c 206d   peak_height < m
+000201d0: 696e 696d 756d 5f63 6163 6865 5f68 6569  inimum_cache_hei
+000201e0: 6768 743a 0a20 2020 2020 2020 2020 2020  ght:.           
+000201f0: 2072 6574 7572 6e0a 0a20 2020 2020 2020   return..       
+00020200: 206e 6577 5f63 6163 6865 203d 207b 7d0a   new_cache = {}.
+00020210: 2020 2020 2020 2020 7365 6c66 2e6c 6f67          self.log
+00020220: 2e69 6e66 6f28 6622 6164 6420 6261 6420  .info(f"add bad 
+00020230: 7065 616b 207b 7065 616b 5f68 6561 6465  peak {peak_heade
+00020240: 725f 6861 7368 7d20 746f 2063 6163 6865  r_hash} to cache
+00020250: 2229 0a20 2020 2020 2020 206e 6577 5f63  ").        new_c
+00020260: 6163 6865 5b70 6561 6b5f 6865 6164 6572  ache[peak_header
+00020270: 5f68 6173 685d 203d 2070 6561 6b5f 6865  _hash] = peak_he
+00020280: 6967 6874 0a20 2020 2020 2020 206d 696e  ight.        min
+00020290: 5f68 6569 6768 7420 3d20 7065 616b 5f68  _height = peak_h
+000202a0: 6569 6768 740a 2020 2020 2020 2020 6d69  eight.        mi
+000202b0: 6e5f 626c 6f63 6b20 3d20 7065 616b 5f68  n_block = peak_h
+000202c0: 6561 6465 725f 6861 7368 0a20 2020 2020  eader_hash.     
+000202d0: 2020 2066 6f72 2068 6561 6465 725f 6861     for header_ha
+000202e0: 7368 2c20 6865 6967 6874 2069 6e20 7365  sh, height in se
+000202f0: 6c66 2e62 6164 5f70 6561 6b5f 6361 6368  lf.bad_peak_cach
+00020300: 652e 6974 656d 7328 293a 0a20 2020 2020  e.items():.     
+00020310: 2020 2020 2020 2069 6620 6865 6967 6874         if height
+00020320: 203c 206d 696e 696d 756d 5f63 6163 6865   < minimum_cache
+00020330: 5f68 6569 6768 743a 0a20 2020 2020 2020  _height:.       
+00020340: 2020 2020 2020 2020 2073 656c 662e 6c6f           self.lo
+00020350: 672e 6465 6275 6728 6622 7265 6d6f 7665  g.debug(f"remove
+00020360: 2062 6164 2070 6561 6b20 7b70 6561 6b5f   bad peak {peak_
+00020370: 6865 6164 6572 5f68 6173 687d 2066 726f  header_hash} fro
+00020380: 6d20 6361 6368 6522 290a 2020 2020 2020  m cache").      
+00020390: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
+000203a0: 7565 0a20 2020 2020 2020 2020 2020 2069  ue.            i
+000203b0: 6620 6865 6967 6874 203c 206d 696e 5f68  f height < min_h
+000203c0: 6569 6768 743a 0a20 2020 2020 2020 2020  eight:.         
+000203d0: 2020 2020 2020 206d 696e 5f62 6c6f 636b         min_block
+000203e0: 203d 2068 6561 6465 725f 6861 7368 0a20   = header_hash. 
+000203f0: 2020 2020 2020 2020 2020 206e 6577 5f63             new_c
+00020400: 6163 6865 5b68 6561 6465 725f 6861 7368  ache[header_hash
+00020410: 5d20 3d20 6865 6967 6874 0a0a 2020 2020  ] = height..    
+00020420: 2020 2020 6966 206c 656e 286e 6577 5f63      if len(new_c
+00020430: 6163 6865 2920 3e20 7365 6c66 2e63 6f6e  ache) > self.con
+00020440: 6669 672e 6765 7428 2262 6164 5f70 6561  fig.get("bad_pea
+00020450: 6b5f 6361 6368 655f 7369 7a65 222c 2031  k_cache_size", 1
+00020460: 3030 293a 0a20 2020 2020 2020 2020 2020  00):.           
+00020470: 2064 656c 206e 6577 5f63 6163 6865 5b6d   del new_cache[m
+00020480: 696e 5f62 6c6f 636b 5d0a 0a20 2020 2020  in_block]..     
+00020490: 2020 2073 656c 662e 6261 645f 7065 616b     self.bad_peak
+000204a0: 5f63 6163 6865 203d 206e 6577 5f63 6163  _cache = new_cac
+000204b0: 6865 0a0a 2020 2020 6173 796e 6320 6465  he..    async de
+000204c0: 6620 6272 6f61 6463 6173 745f 756e 636f  f broadcast_unco
+000204d0: 6d70 6163 745f 626c 6f63 6b73 280a 2020  mpact_blocks(.  
+000204e0: 2020 2020 2020 7365 6c66 2c20 756e 636f        self, unco
+000204f0: 6d70 6163 745f 696e 7465 7276 616c 5f73  mpact_interval_s
+00020500: 6361 6e3a 2069 6e74 2c20 7461 7267 6574  can: int, target
+00020510: 5f75 6e63 6f6d 7061 6374 5f70 726f 6f66  _uncompact_proof
+00020520: 733a 2069 6e74 2c20 7361 6e69 7469 7a65  s: int, sanitize
+00020530: 5f77 6569 6768 745f 7072 6f6f 665f 6f6e  _weight_proof_on
+00020540: 6c79 3a20 626f 6f6c 0a20 2020 2029 202d  ly: bool.    ) -
+00020550: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+00020560: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+00020570: 2077 6869 6c65 206e 6f74 2073 656c 662e   while not self.
+00020580: 5f73 6875 745f 646f 776e 3a0a 2020 2020  _shut_down:.    
+00020590: 2020 2020 2020 2020 2020 2020 7768 696c              whil
+000205a0: 6520 7365 6c66 2e73 796e 635f 7374 6f72  e self.sync_stor
+000205b0: 652e 6765 745f 7379 6e63 5f6d 6f64 6528  e.get_sync_mode(
+000205c0: 2920 6f72 2073 656c 662e 7379 6e63 5f73  ) or self.sync_s
+000205d0: 746f 7265 2e67 6574 5f6c 6f6e 675f 7379  tore.get_long_sy
+000205e0: 6e63 2829 3a0a 2020 2020 2020 2020 2020  nc():.          
+000205f0: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
+00020600: 662e 5f73 6875 745f 646f 776e 3a0a 2020  f._shut_down:.  
+00020610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020620: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
+00020630: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00020640: 2020 2020 2020 6177 6169 7420 6173 796e        await asyn
+00020650: 6369 6f2e 736c 6565 7028 3330 290a 0a20  cio.sleep(30).. 
+00020660: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+00020670: 726f 6164 6361 7374 5f6c 6973 743a 204c  roadcast_list: L
+00020680: 6973 745b 7469 6d65 6c6f 7264 5f70 726f  ist[timelord_pro
+00020690: 746f 636f 6c2e 5265 7175 6573 7443 6f6d  tocol.RequestCom
+000206a0: 7061 6374 5072 6f6f 664f 6654 696d 655d  pactProofOfTime]
+000206b0: 203d 205b 5d0a 0a20 2020 2020 2020 2020   = []..         
+000206c0: 2020 2020 2020 2073 656c 662e 6c6f 672e         self.log.
+000206d0: 696e 666f 2822 4765 7474 696e 6720 7261  info("Getting ra
+000206e0: 6e64 6f6d 2068 6569 6768 7473 2066 6f72  ndom heights for
+000206f0: 2062 6c75 6562 6f78 2074 6f20 636f 6d70   bluebox to comp
+00020700: 6163 7422 290a 2020 2020 2020 2020 2020  act").          
+00020710: 2020 2020 2020 6865 6967 6874 7320 3d20        heights = 
+00020720: 6177 6169 7420 7365 6c66 2e62 6c6f 636b  await self.block
+00020730: 5f73 746f 7265 2e67 6574 5f72 616e 646f  _store.get_rando
+00020740: 6d5f 6e6f 745f 636f 6d70 6163 7469 6669  m_not_compactifi
+00020750: 6564 2874 6172 6765 745f 756e 636f 6d70  ed(target_uncomp
+00020760: 6163 745f 7072 6f6f 6673 290a 2020 2020  act_proofs).    
+00020770: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00020780: 2e6c 6f67 2e69 6e66 6f28 2248 6569 6768  .log.info("Heigh
+00020790: 7473 2066 6f75 6e64 2066 6f72 2062 6c75  ts found for blu
+000207a0: 6562 6f78 2074 6f20 636f 6d70 6163 743a  ebox to compact:
+000207b0: 205b 2573 5d22 2025 2022 2c20 222e 6a6f   [%s]" % ", ".jo
+000207c0: 696e 286d 6170 2873 7472 2c20 6865 6967  in(map(str, heig
+000207d0: 6874 7329 2929 0a0a 2020 2020 2020 2020  hts)))..        
+000207e0: 2020 2020 2020 2020 666f 7220 6820 696e          for h in
+000207f0: 2068 6569 6768 7473 3a0a 2020 2020 2020   heights:.      
+00020800: 2020 2020 2020 2020 2020 2020 2020 6865                he
+00020810: 6164 6572 7320 3d20 6177 6169 7420 7365  aders = await se
+00020820: 6c66 2e62 6c6f 636b 6368 6169 6e2e 6765  lf.blockchain.ge
+00020830: 745f 6865 6164 6572 5f62 6c6f 636b 735f  t_header_blocks_
+00020840: 696e 5f72 616e 6765 2868 2c20 682c 2074  in_range(h, h, t
+00020850: 785f 6669 6c74 6572 3d46 616c 7365 290a  x_filter=False).
+00020860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020870: 2020 2020 7265 636f 7264 733a 2044 6963      records: Dic
+00020880: 745b 6279 7465 7333 322c 2042 6c6f 636b  t[bytes32, Block
+00020890: 5265 636f 7264 5d20 3d20 7b7d 0a20 2020  Record] = {}.   
+000208a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000208b0: 2069 6620 7361 6e69 7469 7a65 5f77 6569   if sanitize_wei
+000208c0: 6768 745f 7072 6f6f 665f 6f6e 6c79 3a0a  ght_proof_only:.
+000208d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000208e0: 2020 2020 2020 2020 7265 636f 7264 7320          records 
+000208f0: 3d20 6177 6169 7420 7365 6c66 2e62 6c6f  = await self.blo
+00020900: 636b 6368 6169 6e2e 6765 745f 626c 6f63  ckchain.get_bloc
+00020910: 6b5f 7265 636f 7264 735f 696e 5f72 616e  k_records_in_ran
+00020920: 6765 2868 2c20 6829 0a20 2020 2020 2020  ge(h, h).       
+00020930: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00020940: 2068 6561 6465 7220 696e 2068 6561 6465   header in heade
+00020950: 7273 2e76 616c 7565 7328 293a 0a20 2020  rs.values():.   
+00020960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020970: 2020 2020 2065 7870 6563 7465 645f 6865       expected_he
+00020980: 6164 6572 5f68 6173 6820 3d20 7365 6c66  ader_hash = self
+00020990: 2e62 6c6f 636b 6368 6169 6e2e 6865 6967  .blockchain.heig
+000209a0: 6874 5f74 6f5f 6861 7368 2868 6561 6465  ht_to_hash(heade
+000209b0: 722e 6865 6967 6874 290a 2020 2020 2020  r.height).      
+000209c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000209d0: 2020 6966 2068 6561 6465 722e 6865 6164    if header.head
+000209e0: 6572 5f68 6173 6820 213d 2065 7870 6563  er_hash != expec
+000209f0: 7465 645f 6865 6164 6572 5f68 6173 683a  ted_header_hash:
+00020a00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020a10: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+00020a20: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
+00020a30: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00020a40: 2073 616e 6974 697a 655f 7765 6967 6874   sanitize_weight
+00020a50: 5f70 726f 6f66 5f6f 6e6c 793a 0a20 2020  _proof_only:.   
+00020a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020a70: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
+00020a80: 6865 6164 6572 2e68 6561 6465 725f 6861  header.header_ha
+00020a90: 7368 2069 6e20 7265 636f 7264 730a 2020  sh in records.  
+00020aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020ab0: 2020 2020 2020 2020 2020 7265 636f 7264            record
+00020ac0: 203d 2072 6563 6f72 6473 5b68 6561 6465   = records[heade
+00020ad0: 722e 6865 6164 6572 5f68 6173 685d 0a20  r.header_hash]. 
+00020ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020af0: 2020 2020 2020 2066 6f72 2073 7562 5f73         for sub_s
+00020b00: 6c6f 7420 696e 2068 6561 6465 722e 6669  lot in header.fi
+00020b10: 6e69 7368 6564 5f73 7562 5f73 6c6f 7473  nished_sub_slots
+00020b20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00020b30: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00020b40: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
+00020b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020b60: 2020 2073 7562 5f73 6c6f 742e 7072 6f6f     sub_slot.proo
+00020b70: 6673 2e63 6861 6c6c 656e 6765 5f63 6861  fs.challenge_cha
+00020b80: 696e 5f73 6c6f 745f 7072 6f6f 662e 7769  in_slot_proof.wi
+00020b90: 746e 6573 735f 7479 7065 203e 2030 0a20  tness_type > 0. 
+00020ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020bb0: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+00020bc0: 7220 6e6f 7420 7375 625f 736c 6f74 2e70  r not sub_slot.p
+00020bd0: 726f 6f66 732e 6368 616c 6c65 6e67 655f  roofs.challenge_
+00020be0: 6368 6169 6e5f 736c 6f74 5f70 726f 6f66  chain_slot_proof
+00020bf0: 2e6e 6f72 6d61 6c69 7a65 645f 746f 5f69  .normalized_to_i
+00020c00: 6465 6e74 6974 790a 2020 2020 2020 2020  dentity.        
+00020c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020c20: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
+00020c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020c40: 2020 2020 2020 2062 726f 6164 6361 7374         broadcast
+00020c50: 5f6c 6973 742e 6170 7065 6e64 280a 2020  _list.append(.  
+00020c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020c80: 2020 7469 6d65 6c6f 7264 5f70 726f 746f    timelord_proto
+00020c90: 636f 6c2e 5265 7175 6573 7443 6f6d 7061  col.RequestCompa
+00020ca0: 6374 5072 6f6f 664f 6654 696d 6528 0a20  ctProofOfTime(. 
 00020cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020cc0: 2020 2073 7562 5f73 6c6f 742e 6368 616c     sub_slot.chal
-00020cd0: 6c65 6e67 655f 6368 6169 6e2e 6368 616c  lenge_chain.chal
-00020ce0: 6c65 6e67 655f 6368 6169 6e5f 656e 645f  lenge_chain_end_
-00020cf0: 6f66 5f73 6c6f 745f 7664 662c 0a20 2020  of_slot_vdf,.   
-00020d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020d20: 2020 2020 2068 6561 6465 722e 6865 6164       header.head
-00020d30: 6572 5f68 6173 682c 0a20 2020 2020 2020  er_hash,.       
-00020d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020cd0: 2020 2020 2020 2073 7562 5f73 6c6f 742e         sub_slot.
+00020ce0: 6368 616c 6c65 6e67 655f 6368 6169 6e2e  challenge_chain.
+00020cf0: 6368 616c 6c65 6e67 655f 6368 6169 6e5f  challenge_chain_
+00020d00: 656e 645f 6f66 5f73 6c6f 745f 7664 662c  end_of_slot_vdf,
+00020d10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020d30: 2020 2020 2020 2020 2068 6561 6465 722e           header.
+00020d40: 6865 6164 6572 5f68 6173 682c 0a20 2020  header_hash,.   
 00020d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020d60: 2068 6561 6465 722e 6865 6967 6874 2c0a   header.height,.
-00020d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020d90: 2020 2020 2020 2020 7569 6e74 3828 436f          uint8(Co
-00020da0: 6d70 7265 7373 6962 6c65 5644 4646 6965  mpressibleVDFFie
-00020db0: 6c64 2e43 435f 454f 535f 5644 4629 2c0a  ld.CC_EOS_VDF),.
-00020dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020de0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-00020df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020e00: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00020e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020e20: 2020 2020 6966 2073 7562 5f73 6c6f 742e      if sub_slot.
-00020e30: 7072 6f6f 6673 2e69 6e66 7573 6564 5f63  proofs.infused_c
-00020e40: 6861 6c6c 656e 6765 5f63 6861 696e 5f73  hallenge_chain_s
-00020e50: 6c6f 745f 7072 6f6f 6620 6973 206e 6f74  lot_proof is not
-00020e60: 204e 6f6e 6520 616e 6420 280a 2020 2020   None and (.    
-00020e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020e80: 2020 2020 2020 2020 2020 2020 7375 625f              sub_
-00020e90: 736c 6f74 2e70 726f 6f66 732e 696e 6675  slot.proofs.infu
-00020ea0: 7365 645f 6368 616c 6c65 6e67 655f 6368  sed_challenge_ch
-00020eb0: 6169 6e5f 736c 6f74 5f70 726f 6f66 2e77  ain_slot_proof.w
-00020ec0: 6974 6e65 7373 5f74 7970 6520 3e20 300a  itness_type > 0.
-00020ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020ef0: 6f72 206e 6f74 2073 7562 5f73 6c6f 742e  or not sub_slot.
-00020f00: 7072 6f6f 6673 2e69 6e66 7573 6564 5f63  proofs.infused_c
-00020f10: 6861 6c6c 656e 6765 5f63 6861 696e 5f73  hallenge_chain_s
-00020f20: 6c6f 745f 7072 6f6f 662e 6e6f 726d 616c  lot_proof.normal
-00020f30: 697a 6564 5f74 6f5f 6964 656e 7469 7479  ized_to_identity
-00020f40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020f50: 2020 2020 2020 2020 2020 2020 2029 3a0a               ):.
+00020d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020d70: 2020 2020 2068 6561 6465 722e 6865 6967       header.heig
+00020d80: 6874 2c0a 2020 2020 2020 2020 2020 2020  ht,.            
+00020d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020da0: 2020 2020 2020 2020 2020 2020 7569 6e74              uint
+00020db0: 3828 436f 6d70 7265 7373 6962 6c65 5644  8(CompressibleVD
+00020dc0: 4646 6965 6c64 2e43 435f 454f 535f 5644  FField.CC_EOS_VD
+00020dd0: 4629 2c0a 2020 2020 2020 2020 2020 2020  F),.            
+00020de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020df0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00020e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020e10: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00020e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020e30: 2020 2020 2020 2020 6966 2073 7562 5f73          if sub_s
+00020e40: 6c6f 742e 7072 6f6f 6673 2e69 6e66 7573  lot.proofs.infus
+00020e50: 6564 5f63 6861 6c6c 656e 6765 5f63 6861  ed_challenge_cha
+00020e60: 696e 5f73 6c6f 745f 7072 6f6f 6620 6973  in_slot_proof is
+00020e70: 206e 6f74 204e 6f6e 6520 616e 6420 280a   not None and (.
+00020e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020ea0: 7375 625f 736c 6f74 2e70 726f 6f66 732e  sub_slot.proofs.
+00020eb0: 696e 6675 7365 645f 6368 616c 6c65 6e67  infused_challeng
+00020ec0: 655f 6368 6169 6e5f 736c 6f74 5f70 726f  e_chain_slot_pro
+00020ed0: 6f66 2e77 6974 6e65 7373 5f74 7970 6520  of.witness_type 
+00020ee0: 3e20 300a 2020 2020 2020 2020 2020 2020  > 0.            
+00020ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020f00: 2020 2020 6f72 206e 6f74 2073 7562 5f73      or not sub_s
+00020f10: 6c6f 742e 7072 6f6f 6673 2e69 6e66 7573  lot.proofs.infus
+00020f20: 6564 5f63 6861 6c6c 656e 6765 5f63 6861  ed_challenge_cha
+00020f30: 696e 5f73 6c6f 745f 7072 6f6f 662e 6e6f  in_slot_proof.no
+00020f40: 726d 616c 697a 6564 5f74 6f5f 6964 656e  rmalized_to_iden
+00020f50: 7469 7479 0a20 2020 2020 2020 2020 2020  tity.           
 00020f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020f80: 6173 7365 7274 2073 7562 5f73 6c6f 742e  assert sub_slot.
-00020f90: 696e 6675 7365 645f 6368 616c 6c65 6e67  infused_challeng
-00020fa0: 655f 6368 6169 6e20 6973 206e 6f74 204e  e_chain is not N
-00020fb0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-00020fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020fd0: 2020 2020 6272 6f61 6463 6173 745f 6c69      broadcast_li
-00020fe0: 7374 2e61 7070 656e 6428 0a20 2020 2020  st.append(.     
-00020ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021000: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00021010: 696d 656c 6f72 645f 7072 6f74 6f63 6f6c  imelord_protocol
-00021020: 2e52 6571 7565 7374 436f 6d70 6163 7450  .RequestCompactP
-00021030: 726f 6f66 4f66 5469 6d65 280a 2020 2020  roofOfTime(.    
-00021040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020f70: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
+00020f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020f90: 2020 2020 6173 7365 7274 2073 7562 5f73      assert sub_s
+00020fa0: 6c6f 742e 696e 6675 7365 645f 6368 616c  lot.infused_chal
+00020fb0: 6c65 6e67 655f 6368 6169 6e20 6973 206e  lenge_chain is n
+00020fc0: 6f74 204e 6f6e 650a 2020 2020 2020 2020  ot None.        
+00020fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020fe0: 2020 2020 2020 2020 6272 6f61 6463 6173          broadcas
+00020ff0: 745f 6c69 7374 2e61 7070 656e 6428 0a20  t_list.append(. 
+00021000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021020: 2020 2074 696d 656c 6f72 645f 7072 6f74     timelord_prot
+00021030: 6f63 6f6c 2e52 6571 7565 7374 436f 6d70  ocol.RequestComp
+00021040: 6163 7450 726f 6f66 4f66 5469 6d65 280a  actProofOfTime(.
 00021050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021060: 2020 2020 7375 625f 736c 6f74 2e69 6e66      sub_slot.inf
-00021070: 7573 6564 5f63 6861 6c6c 656e 6765 5f63  used_challenge_c
-00021080: 6861 696e 2e69 6e66 7573 6564 5f63 6861  hain.infused_cha
-00021090: 6c6c 656e 6765 5f63 6861 696e 5f65 6e64  llenge_chain_end
-000210a0: 5f6f 665f 736c 6f74 5f76 6466 2c0a 2020  _of_slot_vdf,.  
-000210b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000210c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000210d0: 2020 2020 2020 6865 6164 6572 2e68 6561        header.hea
-000210e0: 6465 725f 6861 7368 2c0a 2020 2020 2020  der_hash,.      
-000210f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021070: 2020 2020 2020 2020 7375 625f 736c 6f74          sub_slot
+00021080: 2e69 6e66 7573 6564 5f63 6861 6c6c 656e  .infused_challen
+00021090: 6765 5f63 6861 696e 2e69 6e66 7573 6564  ge_chain.infused
+000210a0: 5f63 6861 6c6c 656e 6765 5f63 6861 696e  _challenge_chain
+000210b0: 5f65 6e64 5f6f 665f 736c 6f74 5f76 6466  _end_of_slot_vdf
+000210c0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000210d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000210e0: 2020 2020 2020 2020 2020 6865 6164 6572            header
+000210f0: 2e68 6561 6465 725f 6861 7368 2c0a 2020  .header_hash,.  
 00021100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021110: 2020 6865 6164 6572 2e68 6569 6768 742c    header.height,
-00021120: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00021130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021140: 2020 2020 2020 2020 2075 696e 7438 2843           uint8(C
-00021150: 6f6d 7072 6573 7369 626c 6556 4446 4669  ompressibleVDFFi
-00021160: 656c 642e 4943 435f 454f 535f 5644 4629  eld.ICC_EOS_VDF)
-00021170: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00021180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021190: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-000211a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000211b0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-000211c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000211d0: 2020 2320 5275 6e6e 696e 6720 696e 2027    # Running in '
-000211e0: 7361 6e69 7469 7a65 5f77 6569 6768 745f  sanitize_weight_
-000211f0: 7072 6f6f 665f 6f6e 6c79 2720 6967 6e6f  proof_only' igno
-00021200: 7265 7320 4343 5f53 505f 5644 4620 616e  res CC_SP_VDF an
-00021210: 6420 4343 5f49 505f 5644 460a 2020 2020  d CC_IP_VDF.    
-00021220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021230: 2020 2020 2320 756e 6c65 7373 2074 6869      # unless thi
-00021240: 7320 6973 2061 2063 6861 6c6c 656e 6765  s is a challenge
-00021250: 2062 6c6f 636b 2e0a 2020 2020 2020 2020   block..        
-00021260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021270: 6966 2073 616e 6974 697a 655f 7765 6967  if sanitize_weig
-00021280: 6874 5f70 726f 6f66 5f6f 6e6c 793a 0a20  ht_proof_only:. 
-00021290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000212a0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-000212b0: 7420 7265 636f 7264 2e69 735f 6368 616c  t record.is_chal
-000212c0: 6c65 6e67 655f 626c 6f63 6b28 7365 6c66  lenge_block(self
-000212d0: 2e63 6f6e 7374 616e 7473 293a 0a20 2020  .constants):.   
-000212e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000212f0: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-00021300: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
-00021310: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00021320: 2068 6561 6465 722e 6368 616c 6c65 6e67   header.challeng
-00021330: 655f 6368 6169 6e5f 7370 5f70 726f 6f66  e_chain_sp_proof
-00021340: 2069 7320 6e6f 7420 4e6f 6e65 2061 6e64   is not None and
-00021350: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
-00021360: 2020 2020 2020 2020 2020 2020 2020 2068                 h
-00021370: 6561 6465 722e 6368 616c 6c65 6e67 655f  eader.challenge_
-00021380: 6368 6169 6e5f 7370 5f70 726f 6f66 2e77  chain_sp_proof.w
-00021390: 6974 6e65 7373 5f74 7970 6520 3e20 300a  itness_type > 0.
-000213a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000213b0: 2020 2020 2020 2020 2020 2020 6f72 206e              or n
-000213c0: 6f74 2068 6561 6465 722e 6368 616c 6c65  ot header.challe
-000213d0: 6e67 655f 6368 6169 6e5f 7370 5f70 726f  nge_chain_sp_pro
-000213e0: 6f66 2e6e 6f72 6d61 6c69 7a65 645f 746f  of.normalized_to
-000213f0: 5f69 6465 6e74 6974 790a 2020 2020 2020  _identity.      
-00021400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021410: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
-00021420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021430: 2061 7373 6572 7420 6865 6164 6572 2e72   assert header.r
-00021440: 6577 6172 645f 6368 6169 6e5f 626c 6f63  eward_chain_bloc
-00021450: 6b2e 6368 616c 6c65 6e67 655f 6368 6169  k.challenge_chai
-00021460: 6e5f 7370 5f76 6466 2069 7320 6e6f 7420  n_sp_vdf is not 
-00021470: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-00021480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021490: 2062 726f 6164 6361 7374 5f6c 6973 742e   broadcast_list.
-000214a0: 6170 7065 6e64 280a 2020 2020 2020 2020  append(.        
-000214b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000214c0: 2020 2020 2020 2020 7469 6d65 6c6f 7264          timelord
-000214d0: 5f70 726f 746f 636f 6c2e 5265 7175 6573  _protocol.Reques
-000214e0: 7443 6f6d 7061 6374 5072 6f6f 664f 6654  tCompactProofOfT
-000214f0: 696d 6528 0a20 2020 2020 2020 2020 2020  ime(.           
-00021500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021510: 2020 2020 2020 2020 2068 6561 6465 722e           header.
-00021520: 7265 7761 7264 5f63 6861 696e 5f62 6c6f  reward_chain_blo
-00021530: 636b 2e63 6861 6c6c 656e 6765 5f63 6861  ck.challenge_cha
-00021540: 696e 5f73 705f 7664 662c 0a20 2020 2020  in_sp_vdf,.     
-00021550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021560: 2020 2020 2020 2020 2020 2020 2020 2068                 h
-00021570: 6561 6465 722e 6865 6164 6572 5f68 6173  eader.header_has
-00021580: 682c 0a20 2020 2020 2020 2020 2020 2020  h,.             
-00021590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000215a0: 2020 2020 2020 2068 6561 6465 722e 6865         header.he
-000215b0: 6967 6874 2c0a 2020 2020 2020 2020 2020  ight,.          
-000215c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000215d0: 2020 2020 2020 2020 2020 7569 6e74 3828            uint8(
-000215e0: 436f 6d70 7265 7373 6962 6c65 5644 4646  CompressibleVDFF
-000215f0: 6965 6c64 2e43 435f 5350 5f56 4446 292c  ield.CC_SP_VDF),
-00021600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00021610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021620: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
-00021630: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00021640: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00021650: 2020 2020 2020 2020 2020 6966 2028 0a20            if (. 
-00021660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021670: 2020 2020 2020 2020 2020 2068 6561 6465             heade
-00021680: 722e 6368 616c 6c65 6e67 655f 6368 6169  r.challenge_chai
-00021690: 6e5f 6970 5f70 726f 6f66 2e77 6974 6e65  n_ip_proof.witne
-000216a0: 7373 5f74 7970 6520 3e20 300a 2020 2020  ss_type > 0.    
-000216b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000216c0: 2020 2020 2020 2020 6f72 206e 6f74 2068          or not h
-000216d0: 6561 6465 722e 6368 616c 6c65 6e67 655f  eader.challenge_
-000216e0: 6368 6169 6e5f 6970 5f70 726f 6f66 2e6e  chain_ip_proof.n
-000216f0: 6f72 6d61 6c69 7a65 645f 746f 5f69 6465  ormalized_to_ide
-00021700: 6e74 6974 790a 2020 2020 2020 2020 2020  ntity.          
-00021710: 2020 2020 2020 2020 2020 2020 2020 293a                ):
-00021720: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00021730: 2020 2020 2020 2020 2020 2020 2062 726f               bro
-00021740: 6164 6361 7374 5f6c 6973 742e 6170 7065  adcast_list.appe
-00021750: 6e64 280a 2020 2020 2020 2020 2020 2020  nd(.            
-00021760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021770: 2020 2020 7469 6d65 6c6f 7264 5f70 726f      timelord_pro
-00021780: 746f 636f 6c2e 5265 7175 6573 7443 6f6d  tocol.RequestCom
-00021790: 7061 6374 5072 6f6f 664f 6654 696d 6528  pactProofOfTime(
-000217a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000217b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000217c0: 2020 2020 2068 6561 6465 722e 7265 7761       header.rewa
-000217d0: 7264 5f63 6861 696e 5f62 6c6f 636b 2e63  rd_chain_block.c
-000217e0: 6861 6c6c 656e 6765 5f63 6861 696e 5f69  hallenge_chain_i
-000217f0: 705f 7664 662c 0a20 2020 2020 2020 2020  p_vdf,.         
-00021800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021810: 2020 2020 2020 2020 2020 2068 6561 6465             heade
-00021820: 722e 6865 6164 6572 5f68 6173 682c 0a20  r.header_hash,. 
-00021830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021850: 2020 2068 6561 6465 722e 6865 6967 6874     header.height
-00021860: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00021870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021880: 2020 2020 2020 7569 6e74 3828 436f 6d70        uint8(Comp
-00021890: 7265 7373 6962 6c65 5644 4646 6965 6c64  ressibleVDFField
-000218a0: 2e43 435f 4950 5f56 4446 292c 0a20 2020  .CC_IP_VDF),.   
-000218b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000218c0: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
+00021110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021120: 2020 2020 2020 6865 6164 6572 2e68 6569        header.hei
+00021130: 6768 742c 0a20 2020 2020 2020 2020 2020  ght,.           
+00021140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021150: 2020 2020 2020 2020 2020 2020 2075 696e               uin
+00021160: 7438 2843 6f6d 7072 6573 7369 626c 6556  t8(CompressibleV
+00021170: 4446 4669 656c 642e 4943 435f 454f 535f  DFField.ICC_EOS_
+00021180: 5644 4629 2c0a 2020 2020 2020 2020 2020  VDF),.          
+00021190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000211a0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+000211b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000211c0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+000211d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000211e0: 2020 2020 2020 2320 5275 6e6e 696e 6720        # Running 
+000211f0: 696e 2027 7361 6e69 7469 7a65 5f77 6569  in 'sanitize_wei
+00021200: 6768 745f 7072 6f6f 665f 6f6e 6c79 2720  ght_proof_only' 
+00021210: 6967 6e6f 7265 7320 4343 5f53 505f 5644  ignores CC_SP_VD
+00021220: 4620 616e 6420 4343 5f49 505f 5644 460a  F and CC_IP_VDF.
+00021230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021240: 2020 2020 2020 2020 2320 756e 6c65 7373          # unless
+00021250: 2074 6869 7320 6973 2061 2063 6861 6c6c   this is a chall
+00021260: 656e 6765 2062 6c6f 636b 2e0a 2020 2020  enge block..    
+00021270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021280: 2020 2020 6966 2073 616e 6974 697a 655f      if sanitize_
+00021290: 7765 6967 6874 5f70 726f 6f66 5f6f 6e6c  weight_proof_onl
+000212a0: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+000212b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000212c0: 6620 6e6f 7420 7265 636f 7264 2e69 735f  f not record.is_
+000212d0: 6368 616c 6c65 6e67 655f 626c 6f63 6b28  challenge_block(
+000212e0: 7365 6c66 2e63 6f6e 7374 616e 7473 293a  self.constants):
+000212f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00021300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021310: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
+00021320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021330: 2020 6966 2068 6561 6465 722e 6368 616c    if header.chal
+00021340: 6c65 6e67 655f 6368 6169 6e5f 7370 5f70  lenge_chain_sp_p
+00021350: 726f 6f66 2069 7320 6e6f 7420 4e6f 6e65  roof is not None
+00021360: 2061 6e64 2028 0a20 2020 2020 2020 2020   and (.         
+00021370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021380: 2020 2068 6561 6465 722e 6368 616c 6c65     header.challe
+00021390: 6e67 655f 6368 6169 6e5f 7370 5f70 726f  nge_chain_sp_pro
+000213a0: 6f66 2e77 6974 6e65 7373 5f74 7970 6520  of.witness_type 
+000213b0: 3e20 300a 2020 2020 2020 2020 2020 2020  > 0.            
+000213c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000213d0: 6f72 206e 6f74 2068 6561 6465 722e 6368  or not header.ch
+000213e0: 616c 6c65 6e67 655f 6368 6169 6e5f 7370  allenge_chain_sp
+000213f0: 5f70 726f 6f66 2e6e 6f72 6d61 6c69 7a65  _proof.normalize
+00021400: 645f 746f 5f69 6465 6e74 6974 790a 2020  d_to_identity.  
+00021410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021420: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
+00021430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021440: 2020 2020 2061 7373 6572 7420 6865 6164       assert head
+00021450: 6572 2e72 6577 6172 645f 6368 6169 6e5f  er.reward_chain_
+00021460: 626c 6f63 6b2e 6368 616c 6c65 6e67 655f  block.challenge_
+00021470: 6368 6169 6e5f 7370 5f76 6466 2069 7320  chain_sp_vdf is 
+00021480: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
+00021490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000214a0: 2020 2020 2062 726f 6164 6361 7374 5f6c       broadcast_l
+000214b0: 6973 742e 6170 7065 6e64 280a 2020 2020  ist.append(.    
+000214c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000214d0: 2020 2020 2020 2020 2020 2020 7469 6d65              time
+000214e0: 6c6f 7264 5f70 726f 746f 636f 6c2e 5265  lord_protocol.Re
+000214f0: 7175 6573 7443 6f6d 7061 6374 5072 6f6f  questCompactProo
+00021500: 664f 6654 696d 6528 0a20 2020 2020 2020  fOfTime(.       
+00021510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021520: 2020 2020 2020 2020 2020 2020 2068 6561               hea
+00021530: 6465 722e 7265 7761 7264 5f63 6861 696e  der.reward_chain
+00021540: 5f62 6c6f 636b 2e63 6861 6c6c 656e 6765  _block.challenge
+00021550: 5f63 6861 696e 5f73 705f 7664 662c 0a20  _chain_sp_vdf,. 
+00021560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021580: 2020 2068 6561 6465 722e 6865 6164 6572     header.header
+00021590: 5f68 6173 682c 0a20 2020 2020 2020 2020  _hash,.         
+000215a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000215b0: 2020 2020 2020 2020 2020 2068 6561 6465             heade
+000215c0: 722e 6865 6967 6874 2c0a 2020 2020 2020  r.height,.      
+000215d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000215e0: 2020 2020 2020 2020 2020 2020 2020 7569                ui
+000215f0: 6e74 3828 436f 6d70 7265 7373 6962 6c65  nt8(Compressible
+00021600: 5644 4646 6965 6c64 2e43 435f 5350 5f56  VDFField.CC_SP_V
+00021610: 4446 292c 0a20 2020 2020 2020 2020 2020  DF),.           
+00021620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021630: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+00021640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021650: 2020 2029 0a0a 2020 2020 2020 2020 2020     )..          
+00021660: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00021670: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
+00021680: 2020 2020 2020 2020 2020 2020 2020 2068                 h
+00021690: 6561 6465 722e 6368 616c 6c65 6e67 655f  eader.challenge_
+000216a0: 6368 6169 6e5f 6970 5f70 726f 6f66 2e77  chain_ip_proof.w
+000216b0: 6974 6e65 7373 5f74 7970 6520 3e20 300a  itness_type > 0.
+000216c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000216d0: 2020 2020 2020 2020 2020 2020 6f72 206e              or n
+000216e0: 6f74 2068 6561 6465 722e 6368 616c 6c65  ot header.challe
+000216f0: 6e67 655f 6368 6169 6e5f 6970 5f70 726f  nge_chain_ip_pro
+00021700: 6f66 2e6e 6f72 6d61 6c69 7a65 645f 746f  of.normalized_to
+00021710: 5f69 6465 6e74 6974 790a 2020 2020 2020  _identity.      
+00021720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021730: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
+00021740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021750: 2062 726f 6164 6361 7374 5f6c 6973 742e   broadcast_list.
+00021760: 6170 7065 6e64 280a 2020 2020 2020 2020  append(.        
+00021770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021780: 2020 2020 2020 2020 7469 6d65 6c6f 7264          timelord
+00021790: 5f70 726f 746f 636f 6c2e 5265 7175 6573  _protocol.Reques
+000217a0: 7443 6f6d 7061 6374 5072 6f6f 664f 6654  tCompactProofOfT
+000217b0: 696d 6528 0a20 2020 2020 2020 2020 2020  ime(.           
+000217c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000217d0: 2020 2020 2020 2020 2068 6561 6465 722e           header.
+000217e0: 7265 7761 7264 5f63 6861 696e 5f62 6c6f  reward_chain_blo
+000217f0: 636b 2e63 6861 6c6c 656e 6765 5f63 6861  ck.challenge_cha
+00021800: 696e 5f69 705f 7664 662c 0a20 2020 2020  in_ip_vdf,.     
+00021810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021820: 2020 2020 2020 2020 2020 2020 2020 2068                 h
+00021830: 6561 6465 722e 6865 6164 6572 5f68 6173  eader.header_has
+00021840: 682c 0a20 2020 2020 2020 2020 2020 2020  h,.             
+00021850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021860: 2020 2020 2020 2068 6561 6465 722e 6865         header.he
+00021870: 6967 6874 2c0a 2020 2020 2020 2020 2020  ight,.          
+00021880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021890: 2020 2020 2020 2020 2020 7569 6e74 3828            uint8(
+000218a0: 436f 6d70 7265 7373 6962 6c65 5644 4646  CompressibleVDFF
+000218b0: 6965 6c64 2e43 435f 4950 5f56 4446 292c  ield.CC_IP_VDF),
+000218c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 000218d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000218e0: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
-000218f0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00021900: 206c 656e 2862 726f 6164 6361 7374 5f6c   len(broadcast_l
-00021910: 6973 7429 203e 2074 6172 6765 745f 756e  ist) > target_un
-00021920: 636f 6d70 6163 745f 7072 6f6f 6673 3a0a  compact_proofs:.
-00021930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021940: 2020 2020 6272 6f61 6463 6173 745f 6c69      broadcast_li
-00021950: 7374 203d 2062 726f 6164 6361 7374 5f6c  st = broadcast_l
-00021960: 6973 745b 3a74 6172 6765 745f 756e 636f  ist[:target_unco
-00021970: 6d70 6163 745f 7072 6f6f 6673 5d0a 2020  mpact_proofs].  
-00021980: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00021990: 2073 656c 662e 7379 6e63 5f73 746f 7265   self.sync_store
-000219a0: 2e67 6574 5f73 796e 635f 6d6f 6465 2829  .get_sync_mode()
-000219b0: 206f 7220 7365 6c66 2e73 796e 635f 7374   or self.sync_st
-000219c0: 6f72 652e 6765 745f 6c6f 6e67 5f73 796e  ore.get_long_syn
-000219d0: 6328 293a 0a20 2020 2020 2020 2020 2020  c():.           
-000219e0: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
-000219f0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00021a00: 2020 6966 2073 656c 662e 5f73 6572 7665    if self._serve
-00021a10: 7220 6973 206e 6f74 204e 6f6e 653a 0a20  r is not None:. 
-00021a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021a30: 2020 2073 656c 662e 6c6f 672e 696e 666f     self.log.info
-00021a40: 2866 2242 726f 6164 6361 7374 696e 6720  (f"Broadcasting 
-00021a50: 7b6c 656e 2862 726f 6164 6361 7374 5f6c  {len(broadcast_l
-00021a60: 6973 7429 7d20 6974 656d 7320 746f 2074  ist)} items to t
-00021a70: 6865 2062 6c75 6562 6f78 2229 0a20 2020  he bluebox").   
-00021a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021a90: 206d 7367 7320 3d20 5b5d 0a20 2020 2020   msgs = [].     
-00021aa0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00021ab0: 6f72 206e 6577 5f70 6f74 2069 6e20 6272  or new_pot in br
-00021ac0: 6f61 6463 6173 745f 6c69 7374 3a0a 2020  oadcast_list:.  
-00021ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021ae0: 2020 2020 2020 6d73 6720 3d20 6d61 6b65        msg = make
-00021af0: 5f6d 7367 2850 726f 746f 636f 6c4d 6573  _msg(ProtocolMes
-00021b00: 7361 6765 5479 7065 732e 7265 7175 6573  sageTypes.reques
-00021b10: 745f 636f 6d70 6163 745f 7072 6f6f 665f  t_compact_proof_
-00021b20: 6f66 5f74 696d 652c 206e 6577 5f70 6f74  of_time, new_pot
-00021b30: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00021b40: 2020 2020 2020 2020 2020 6d73 6773 2e61            msgs.a
-00021b50: 7070 656e 6428 6d73 6729 0a20 2020 2020  ppend(msg).     
-00021b60: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00021b70: 7761 6974 2073 656c 662e 7365 7276 6572  wait self.server
-00021b80: 2e73 656e 645f 746f 5f61 6c6c 286d 7367  .send_to_all(msg
-00021b90: 732c 204e 6f64 6554 7970 652e 5449 4d45  s, NodeType.TIME
-00021ba0: 4c4f 5244 290a 2020 2020 2020 2020 2020  LORD).          
-00021bb0: 2020 2020 2020 6177 6169 7420 6173 796e        await asyn
-00021bc0: 6369 6f2e 736c 6565 7028 756e 636f 6d70  cio.sleep(uncomp
-00021bd0: 6163 745f 696e 7465 7276 616c 5f73 6361  act_interval_sca
-00021be0: 6e29 0a20 2020 2020 2020 2065 7863 6570  n).        excep
-00021bf0: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
-00021c00: 3a0a 2020 2020 2020 2020 2020 2020 6572  :.            er
-00021c10: 726f 725f 7374 6163 6b20 3d20 7472 6163  ror_stack = trac
-00021c20: 6562 6163 6b2e 666f 726d 6174 5f65 7863  eback.format_exc
-00021c30: 2829 0a20 2020 2020 2020 2020 2020 2073  ().            s
-00021c40: 656c 662e 6c6f 672e 6572 726f 7228 6622  elf.log.error(f"
-00021c50: 4578 6365 7074 696f 6e20 696e 2062 726f  Exception in bro
-00021c60: 6164 6361 7374 5f75 6e63 6f6d 7061 6374  adcast_uncompact
-00021c70: 5f62 6c6f 636b 733a 207b 657d 2229 0a20  _blocks: {e}"). 
-00021c80: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00021c90: 6c6f 672e 6572 726f 7228 6622 4578 6365  log.error(f"Exce
-00021ca0: 7074 696f 6e20 5374 6163 6b3a 207b 6572  ption Stack: {er
-00021cb0: 726f 725f 7374 6163 6b7d 2229 0a0a 0a61  ror_stack}")...a
-00021cc0: 7379 6e63 2064 6566 206e 6f64 655f 6e65  sync def node_ne
-00021cd0: 7874 5f62 6c6f 636b 5f63 6865 636b 280a  xt_block_check(.
-00021ce0: 2020 2020 7065 6572 3a20 5753 4368 6961      peer: WSChia
-00021cf0: 436f 6e6e 6563 7469 6f6e 2c20 706f 7465  Connection, pote
-00021d00: 6e74 6961 6c5f 7065 656b 3a20 7569 6e74  ntial_peek: uint
-00021d10: 3332 2c20 626c 6f63 6b63 6861 696e 3a20  32, blockchain: 
-00021d20: 426c 6f63 6b63 6861 696e 496e 7465 7266  BlockchainInterf
-00021d30: 6163 650a 2920 2d3e 2062 6f6f 6c3a 0a20  ace.) -> bool:. 
-00021d40: 2020 2062 6c6f 636b 5f72 6573 706f 6e73     block_respons
-00021d50: 653a 204f 7074 696f 6e61 6c5b 416e 795d  e: Optional[Any]
-00021d60: 203d 2061 7761 6974 2070 6565 722e 6361   = await peer.ca
-00021d70: 6c6c 5f61 7069 280a 2020 2020 2020 2020  ll_api(.        
-00021d80: 4675 6c6c 4e6f 6465 4150 492e 7265 7175  FullNodeAPI.requ
-00021d90: 6573 745f 626c 6f63 6b2c 2066 756c 6c5f  est_block, full_
-00021da0: 6e6f 6465 5f70 726f 746f 636f 6c2e 5265  node_protocol.Re
-00021db0: 7175 6573 7442 6c6f 636b 2870 6f74 656e  questBlock(poten
-00021dc0: 7469 616c 5f70 6565 6b2c 2054 7275 6529  tial_peek, True)
-00021dd0: 0a20 2020 2029 0a20 2020 2069 6620 626c  .    ).    if bl
-00021de0: 6f63 6b5f 7265 7370 6f6e 7365 2069 7320  ock_response is 
-00021df0: 6e6f 7420 4e6f 6e65 2061 6e64 2069 7369  not None and isi
-00021e00: 6e73 7461 6e63 6528 626c 6f63 6b5f 7265  nstance(block_re
-00021e10: 7370 6f6e 7365 2c20 6675 6c6c 5f6e 6f64  sponse, full_nod
-00021e20: 655f 7072 6f74 6f63 6f6c 2e52 6573 706f  e_protocol.Respo
-00021e30: 6e64 426c 6f63 6b29 3a0a 2020 2020 2020  ndBlock):.      
-00021e40: 2020 7065 616b 203d 2062 6c6f 636b 6368    peak = blockch
-00021e50: 6169 6e2e 6765 745f 7065 616b 2829 0a20  ain.get_peak(). 
-00021e60: 2020 2020 2020 2069 6620 7065 616b 2069         if peak i
-00021e70: 7320 6e6f 7420 4e6f 6e65 2061 6e64 2062  s not None and b
-00021e80: 6c6f 636b 5f72 6573 706f 6e73 652e 626c  lock_response.bl
-00021e90: 6f63 6b2e 7072 6576 5f68 6561 6465 725f  ock.prev_header_
-00021ea0: 6861 7368 203d 3d20 7065 616b 2e68 6561  hash == peak.hea
-00021eb0: 6465 725f 6861 7368 3a0a 2020 2020 2020  der_hash:.      
-00021ec0: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
-00021ed0: 650a 2020 2020 7265 7475 726e 2046 616c  e.    return Fal
-00021ee0: 7365 0a                                  se.
+000218e0: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+000218f0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00021900: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00021910: 2020 6966 206c 656e 2862 726f 6164 6361    if len(broadca
+00021920: 7374 5f6c 6973 7429 203e 2074 6172 6765  st_list) > targe
+00021930: 745f 756e 636f 6d70 6163 745f 7072 6f6f  t_uncompact_proo
+00021940: 6673 3a0a 2020 2020 2020 2020 2020 2020  fs:.            
+00021950: 2020 2020 2020 2020 6272 6f61 6463 6173          broadcas
+00021960: 745f 6c69 7374 203d 2062 726f 6164 6361  t_list = broadca
+00021970: 7374 5f6c 6973 745b 3a74 6172 6765 745f  st_list[:target_
+00021980: 756e 636f 6d70 6163 745f 7072 6f6f 6673  uncompact_proofs
+00021990: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+000219a0: 2020 6966 2073 656c 662e 7379 6e63 5f73    if self.sync_s
+000219b0: 746f 7265 2e67 6574 5f73 796e 635f 6d6f  tore.get_sync_mo
+000219c0: 6465 2829 206f 7220 7365 6c66 2e73 796e  de() or self.syn
+000219d0: 635f 7374 6f72 652e 6765 745f 6c6f 6e67  c_store.get_long
+000219e0: 5f73 796e 6328 293a 0a20 2020 2020 2020  _sync():.       
+000219f0: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+00021a00: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
+00021a10: 2020 2020 2020 6966 2073 656c 662e 5f73        if self._s
+00021a20: 6572 7665 7220 6973 206e 6f74 204e 6f6e  erver is not Non
+00021a30: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00021a40: 2020 2020 2020 2073 656c 662e 6c6f 672e         self.log.
+00021a50: 696e 666f 2866 2242 726f 6164 6361 7374  info(f"Broadcast
+00021a60: 696e 6720 7b6c 656e 2862 726f 6164 6361  ing {len(broadca
+00021a70: 7374 5f6c 6973 7429 7d20 6974 656d 7320  st_list)} items 
+00021a80: 746f 2074 6865 2062 6c75 6562 6f78 2229  to the bluebox")
+00021a90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00021aa0: 2020 2020 206d 7367 7320 3d20 5b5d 0a20       msgs = []. 
+00021ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021ac0: 2020 2066 6f72 206e 6577 5f70 6f74 2069     for new_pot i
+00021ad0: 6e20 6272 6f61 6463 6173 745f 6c69 7374  n broadcast_list
+00021ae0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00021af0: 2020 2020 2020 2020 2020 6d73 6720 3d20            msg = 
+00021b00: 6d61 6b65 5f6d 7367 2850 726f 746f 636f  make_msg(Protoco
+00021b10: 6c4d 6573 7361 6765 5479 7065 732e 7265  lMessageTypes.re
+00021b20: 7175 6573 745f 636f 6d70 6163 745f 7072  quest_compact_pr
+00021b30: 6f6f 665f 6f66 5f74 696d 652c 206e 6577  oof_of_time, new
+00021b40: 5f70 6f74 290a 2020 2020 2020 2020 2020  _pot).          
+00021b50: 2020 2020 2020 2020 2020 2020 2020 6d73                ms
+00021b60: 6773 2e61 7070 656e 6428 6d73 6729 0a20  gs.append(msg). 
+00021b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021b80: 2020 2061 7761 6974 2073 656c 662e 7365     await self.se
+00021b90: 7276 6572 2e73 656e 645f 746f 5f61 6c6c  rver.send_to_all
+00021ba0: 286d 7367 732c 204e 6f64 6554 7970 652e  (msgs, NodeType.
+00021bb0: 5449 4d45 4c4f 5244 290a 2020 2020 2020  TIMELORD).      
+00021bc0: 2020 2020 2020 2020 2020 6177 6169 7420            await 
+00021bd0: 6173 796e 6369 6f2e 736c 6565 7028 756e  asyncio.sleep(un
+00021be0: 636f 6d70 6163 745f 696e 7465 7276 616c  compact_interval
+00021bf0: 5f73 6361 6e29 0a20 2020 2020 2020 2065  _scan).        e
+00021c00: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
+00021c10: 6173 2065 3a0a 2020 2020 2020 2020 2020  as e:.          
+00021c20: 2020 6572 726f 725f 7374 6163 6b20 3d20    error_stack = 
+00021c30: 7472 6163 6562 6163 6b2e 666f 726d 6174  traceback.format
+00021c40: 5f65 7863 2829 0a20 2020 2020 2020 2020  _exc().         
+00021c50: 2020 2073 656c 662e 6c6f 672e 6572 726f     self.log.erro
+00021c60: 7228 6622 4578 6365 7074 696f 6e20 696e  r(f"Exception in
+00021c70: 2062 726f 6164 6361 7374 5f75 6e63 6f6d   broadcast_uncom
+00021c80: 7061 6374 5f62 6c6f 636b 733a 207b 657d  pact_blocks: {e}
+00021c90: 2229 0a20 2020 2020 2020 2020 2020 2073  ").            s
+00021ca0: 656c 662e 6c6f 672e 6572 726f 7228 6622  elf.log.error(f"
+00021cb0: 4578 6365 7074 696f 6e20 5374 6163 6b3a  Exception Stack:
+00021cc0: 207b 6572 726f 725f 7374 6163 6b7d 2229   {error_stack}")
+00021cd0: 0a0a 0a61 7379 6e63 2064 6566 206e 6f64  ...async def nod
+00021ce0: 655f 6e65 7874 5f62 6c6f 636b 5f63 6865  e_next_block_che
+00021cf0: 636b 280a 2020 2020 7065 6572 3a20 5753  ck(.    peer: WS
+00021d00: 4368 6961 436f 6e6e 6563 7469 6f6e 2c20  ChiaConnection, 
+00021d10: 706f 7465 6e74 6961 6c5f 7065 656b 3a20  potential_peek: 
+00021d20: 7569 6e74 3332 2c20 626c 6f63 6b63 6861  uint32, blockcha
+00021d30: 696e 3a20 426c 6f63 6b63 6861 696e 496e  in: BlockchainIn
+00021d40: 7465 7266 6163 650a 2920 2d3e 2062 6f6f  terface.) -> boo
+00021d50: 6c3a 0a20 2020 2062 6c6f 636b 5f72 6573  l:.    block_res
+00021d60: 706f 6e73 653a 204f 7074 696f 6e61 6c5b  ponse: Optional[
+00021d70: 416e 795d 203d 2061 7761 6974 2070 6565  Any] = await pee
+00021d80: 722e 6361 6c6c 5f61 7069 280a 2020 2020  r.call_api(.    
+00021d90: 2020 2020 4675 6c6c 4e6f 6465 4150 492e      FullNodeAPI.
+00021da0: 7265 7175 6573 745f 626c 6f63 6b2c 2066  request_block, f
+00021db0: 756c 6c5f 6e6f 6465 5f70 726f 746f 636f  ull_node_protoco
+00021dc0: 6c2e 5265 7175 6573 7442 6c6f 636b 2870  l.RequestBlock(p
+00021dd0: 6f74 656e 7469 616c 5f70 6565 6b2c 2054  otential_peek, T
+00021de0: 7275 6529 0a20 2020 2029 0a20 2020 2069  rue).    ).    i
+00021df0: 6620 626c 6f63 6b5f 7265 7370 6f6e 7365  f block_response
+00021e00: 2069 7320 6e6f 7420 4e6f 6e65 2061 6e64   is not None and
+00021e10: 2069 7369 6e73 7461 6e63 6528 626c 6f63   isinstance(bloc
+00021e20: 6b5f 7265 7370 6f6e 7365 2c20 6675 6c6c  k_response, full
+00021e30: 5f6e 6f64 655f 7072 6f74 6f63 6f6c 2e52  _node_protocol.R
+00021e40: 6573 706f 6e64 426c 6f63 6b29 3a0a 2020  espondBlock):.  
+00021e50: 2020 2020 2020 7065 616b 203d 2062 6c6f        peak = blo
+00021e60: 636b 6368 6169 6e2e 6765 745f 7065 616b  ckchain.get_peak
+00021e70: 2829 0a20 2020 2020 2020 2069 6620 7065  ().        if pe
+00021e80: 616b 2069 7320 6e6f 7420 4e6f 6e65 2061  ak is not None a
+00021e90: 6e64 2062 6c6f 636b 5f72 6573 706f 6e73  nd block_respons
+00021ea0: 652e 626c 6f63 6b2e 7072 6576 5f68 6561  e.block.prev_hea
+00021eb0: 6465 725f 6861 7368 203d 3d20 7065 616b  der_hash == peak
+00021ec0: 2e68 6561 6465 725f 6861 7368 3a0a 2020  .header_hash:.  
+00021ed0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00021ee0: 2054 7275 650a 2020 2020 7265 7475 726e   True.    return
+00021ef0: 2046 616c 7365 0a                         False.
```

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/full_node_api.py` & `chia-blockchain-2.3.0rc2/chia/full_node/full_node_api.py`

 * *Files 0% similar despite different names*

```diff
@@ -1590,15 +1590,15 @@
         # Send all coins with requested puzzle hash that have been created after the specified height
         states: Set[CoinState] = await self.full_node.coin_store.get_coin_states_by_puzzle_hashes(
             include_spent_coins=True, puzzle_hashes=puzzle_hashes, min_height=request.min_height, max_items=max_items
         )
         max_items -= len(states)
 
         hint_coin_ids = await self.full_node.hint_store.get_coin_ids_multi(
-            cast(set[bytes], puzzle_hashes), max_items=max_items
+            cast(Set[bytes], puzzle_hashes), max_items=max_items
         )
 
         hint_states: List[CoinState] = []
         if len(hint_coin_ids) > 0:
             hint_states = await self.full_node.coin_store.get_coin_states_by_ids(
                 include_spent_coins=True,
                 coin_ids=hint_coin_ids,
```

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/full_node_store.py` & `chia-blockchain-2.3.0rc2/chia/full_node/full_node_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/generator.py` & `chia-blockchain-2.3.0rc2/chia/full_node/generator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/hint_management.py` & `chia-blockchain-2.3.0rc2/chia/full_node/hint_management.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/hint_store.py` & `chia-blockchain-2.3.0rc2/chia/full_node/hint_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/mempool.py` & `chia-blockchain-2.3.0rc2/chia/full_node/mempool.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/mempool_check_conditions.py` & `chia-blockchain-2.3.0rc2/chia/full_node/mempool_check_conditions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/mempool_manager.py` & `chia-blockchain-2.3.0rc2/chia/full_node/mempool_manager.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/pending_tx_cache.py` & `chia-blockchain-2.3.0rc2/chia/full_node/pending_tx_cache.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/puzzles/block_program_zero.clsp` & `chia-blockchain-2.3.0rc2/chia/full_node/puzzles/block_program_zero.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/subscriptions.py` & `chia-blockchain-2.3.0rc2/chia/full_node/subscriptions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/sync_store.py` & `chia-blockchain-2.3.0rc2/chia/full_node/sync_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/tx_processing_queue.py` & `chia-blockchain-2.3.0rc2/chia/full_node/tx_processing_queue.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/full_node/weight_proof.py` & `chia-blockchain-2.3.0rc2/chia/full_node/weight_proof.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/harvester/harvester.py` & `chia-blockchain-2.3.0rc2/chia/harvester/harvester.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/harvester/harvester_api.py` & `chia-blockchain-2.3.0rc2/chia/harvester/harvester_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/introducer/introducer.py` & `chia-blockchain-2.3.0rc2/chia/introducer/introducer.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/introducer/introducer_api.py` & `chia-blockchain-2.3.0rc2/chia/introducer/introducer_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/legacy/keyring.py` & `chia-blockchain-2.3.0rc2/chia/legacy/keyring.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/plot_sync/delta.py` & `chia-blockchain-2.3.0rc2/chia/plot_sync/delta.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/plot_sync/exceptions.py` & `chia-blockchain-2.3.0rc2/chia/plot_sync/exceptions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/plot_sync/receiver.py` & `chia-blockchain-2.3.0rc2/chia/plot_sync/receiver.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/plot_sync/sender.py` & `chia-blockchain-2.3.0rc2/chia/plot_sync/sender.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/plot_sync/util.py` & `chia-blockchain-2.3.0rc2/chia/plot_sync/util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/plotters/bladebit.py` & `chia-blockchain-2.3.0rc2/chia/plotters/bladebit.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/plotters/chiapos.py` & `chia-blockchain-2.3.0rc2/chia/plotters/chiapos.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/plotters/madmax.py` & `chia-blockchain-2.3.0rc2/chia/plotters/madmax.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/plotters/plotters.py` & `chia-blockchain-2.3.0rc2/chia/plotters/plotters.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/plotters/plotters_util.py` & `chia-blockchain-2.3.0rc2/chia/plotters/plotters_util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/plotting/cache.py` & `chia-blockchain-2.3.0rc2/chia/plotting/cache.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/plotting/check_plots.py` & `chia-blockchain-2.3.0rc2/chia/plotting/check_plots.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/plotting/create_plots.py` & `chia-blockchain-2.3.0rc2/chia/plotting/create_plots.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/plotting/manager.py` & `chia-blockchain-2.3.0rc2/chia/plotting/manager.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/plotting/util.py` & `chia-blockchain-2.3.0rc2/chia/plotting/util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/pools/pool_config.py` & `chia-blockchain-2.3.0rc2/chia/pools/pool_config.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/pools/pool_puzzles.py` & `chia-blockchain-2.3.0rc2/chia/pools/pool_puzzles.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/pools/pool_wallet.py` & `chia-blockchain-2.3.0rc2/chia/pools/pool_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/pools/pool_wallet_info.py` & `chia-blockchain-2.3.0rc2/chia/pools/pool_wallet_info.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/pools/puzzles/pool_member_innerpuz.clsp` & `chia-blockchain-2.3.0rc2/chia/pools/puzzles/pool_member_innerpuz.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/pools/puzzles/pool_member_innerpuz.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/pools/puzzles/pool_member_innerpuz.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/pools/puzzles/pool_waitingroom_innerpuz.clsp` & `chia-blockchain-2.3.0rc2/chia/pools/puzzles/pool_waitingroom_innerpuz.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/pools/puzzles/pool_waitingroom_innerpuz.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/pools/puzzles/pool_waitingroom_innerpuz.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/protocols/farmer_protocol.py` & `chia-blockchain-2.3.0rc2/chia/protocols/farmer_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/protocols/full_node_protocol.py` & `chia-blockchain-2.3.0rc2/chia/protocols/full_node_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/protocols/harvester_protocol.py` & `chia-blockchain-2.3.0rc2/chia/protocols/harvester_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/protocols/introducer_protocol.py` & `chia-blockchain-2.3.0rc2/chia/protocols/introducer_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/protocols/pool_protocol.py` & `chia-blockchain-2.3.0rc2/chia/protocols/pool_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/protocols/protocol_message_types.py` & `chia-blockchain-2.3.0rc2/chia/protocols/protocol_message_types.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/protocols/protocol_state_machine.py` & `chia-blockchain-2.3.0rc2/chia/protocols/protocol_state_machine.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/protocols/shared_protocol.py` & `chia-blockchain-2.3.0rc2/chia/protocols/shared_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/protocols/timelord_protocol.py` & `chia-blockchain-2.3.0rc2/chia/protocols/timelord_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/protocols/wallet_protocol.py` & `chia-blockchain-2.3.0rc2/chia/protocols/wallet_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/rpc/crawler_rpc_api.py` & `chia-blockchain-2.3.0rc2/chia/rpc/crawler_rpc_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/rpc/data_layer_rpc_api.py` & `chia-blockchain-2.3.0rc2/chia/rpc/data_layer_rpc_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/rpc/data_layer_rpc_client.py` & `chia-blockchain-2.3.0rc2/chia/rpc/data_layer_rpc_client.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/rpc/data_layer_rpc_util.py` & `chia-blockchain-2.3.0rc2/chia/rpc/data_layer_rpc_util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/rpc/farmer_rpc_api.py` & `chia-blockchain-2.3.0rc2/chia/rpc/farmer_rpc_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/rpc/farmer_rpc_client.py` & `chia-blockchain-2.3.0rc2/chia/rpc/farmer_rpc_client.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/rpc/full_node_rpc_api.py` & `chia-blockchain-2.3.0rc2/chia/rpc/full_node_rpc_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/rpc/full_node_rpc_client.py` & `chia-blockchain-2.3.0rc2/chia/rpc/full_node_rpc_client.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/rpc/harvester_rpc_api.py` & `chia-blockchain-2.3.0rc2/chia/rpc/harvester_rpc_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/rpc/harvester_rpc_client.py` & `chia-blockchain-2.3.0rc2/chia/rpc/harvester_rpc_client.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/rpc/rpc_client.py` & `chia-blockchain-2.3.0rc2/chia/rpc/rpc_client.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/rpc/rpc_server.py` & `chia-blockchain-2.3.0rc2/chia/rpc/rpc_server.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/rpc/timelord_rpc_api.py` & `chia-blockchain-2.3.0rc2/chia/rpc/timelord_rpc_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/rpc/util.py` & `chia-blockchain-2.3.0rc2/chia/rpc/util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/rpc/wallet_request_types.py` & `chia-blockchain-2.3.0rc2/chia/rpc/wallet_request_types.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/rpc/wallet_rpc_api.py` & `chia-blockchain-2.3.0rc2/chia/rpc/wallet_rpc_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/rpc/wallet_rpc_client.py` & `chia-blockchain-2.3.0rc2/chia/rpc/wallet_rpc_client.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/seeder/crawl_store.py` & `chia-blockchain-2.3.0rc2/chia/seeder/crawl_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/seeder/crawler.py` & `chia-blockchain-2.3.0rc2/chia/seeder/crawler.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/seeder/crawler_api.py` & `chia-blockchain-2.3.0rc2/chia/seeder/crawler_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/seeder/dns_server.py` & `chia-blockchain-2.3.0rc2/chia/seeder/dns_server.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/seeder/peer_record.py` & `chia-blockchain-2.3.0rc2/chia/seeder/peer_record.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/seeder/start_crawler.py` & `chia-blockchain-2.3.0rc2/chia/seeder/start_crawler.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/address_manager.py` & `chia-blockchain-2.3.0rc2/chia/server/address_manager.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/address_manager_store.py` & `chia-blockchain-2.3.0rc2/chia/server/address_manager_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/capabilities.py` & `chia-blockchain-2.3.0rc2/chia/server/capabilities.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/chia_policy.py` & `chia-blockchain-2.3.0rc2/chia/server/chia_policy.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/introducer_peers.py` & `chia-blockchain-2.3.0rc2/chia/server/introducer_peers.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/node_discovery.py` & `chia-blockchain-2.3.0rc2/chia/server/node_discovery.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/outbound_message.py` & `chia-blockchain-2.3.0rc2/chia/server/outbound_message.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/rate_limit_numbers.py` & `chia-blockchain-2.3.0rc2/chia/server/rate_limit_numbers.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/rate_limits.py` & `chia-blockchain-2.3.0rc2/chia/server/rate_limits.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/server.py` & `chia-blockchain-2.3.0rc2/chia/server/server.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/ssl_context.py` & `chia-blockchain-2.3.0rc2/chia/server/ssl_context.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/start_data_layer.py` & `chia-blockchain-2.3.0rc2/chia/server/start_data_layer.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/start_farmer.py` & `chia-blockchain-2.3.0rc2/chia/server/start_farmer.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/start_full_node.py` & `chia-blockchain-2.3.0rc2/chia/server/start_full_node.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/start_harvester.py` & `chia-blockchain-2.3.0rc2/chia/server/start_harvester.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/start_introducer.py` & `chia-blockchain-2.3.0rc2/chia/server/start_introducer.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/start_service.py` & `chia-blockchain-2.3.0rc2/chia/server/start_service.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/start_timelord.py` & `chia-blockchain-2.3.0rc2/chia/server/start_timelord.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/start_wallet.py` & `chia-blockchain-2.3.0rc2/chia/server/start_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/upnp.py` & `chia-blockchain-2.3.0rc2/chia/server/upnp.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/server/ws_connection.py` & `chia-blockchain-2.3.0rc2/chia/server/ws_connection.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/block_tools.py` & `chia-blockchain-2.3.0rc2/chia/simulator/block_tools.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/full_node_simulator.py` & `chia-blockchain-2.3.0rc2/chia/simulator/full_node_simulator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/keyring.py` & `chia-blockchain-2.3.0rc2/chia/simulator/keyring.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/setup_services.py` & `chia-blockchain-2.3.0rc2/chia/simulator/setup_services.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/simulator_constants.py` & `chia-blockchain-2.3.0rc2/chia/simulator/simulator_constants.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/simulator_full_node_rpc_api.py` & `chia-blockchain-2.3.0rc2/chia/simulator/simulator_full_node_rpc_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/simulator_full_node_rpc_client.py` & `chia-blockchain-2.3.0rc2/chia/simulator/simulator_full_node_rpc_client.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/simulator_protocol.py` & `chia-blockchain-2.3.0rc2/chia/simulator/simulator_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/simulator_test_tools.py` & `chia-blockchain-2.3.0rc2/chia/simulator/simulator_test_tools.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/socket.py` & `chia-blockchain-2.3.0rc2/chia/simulator/socket.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs.py` & `chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_1.py` & `chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_1.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_10.py` & `chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_10.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_2.py` & `chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_2.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_3.py` & `chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_3.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_4.py` & `chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_4.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_5.py` & `chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_5.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_6.py` & `chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_6.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_7.py` & `chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_7.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_8.py` & `chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_8.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/ssl_certs_9.py` & `chia-blockchain-2.3.0rc2/chia/simulator/ssl_certs_9.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/start_simulator.py` & `chia-blockchain-2.3.0rc2/chia/simulator/start_simulator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/simulator/wallet_tools.py` & `chia-blockchain-2.3.0rc2/chia/simulator/wallet_tools.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/ssl/chia_ca.crt` & `chia-blockchain-2.3.0rc2/chia/ssl/chia_ca.crt`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/ssl/chia_ca.key` & `chia-blockchain-2.3.0rc2/chia/ssl/chia_ca.key`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/ssl/create_ssl.py` & `chia-blockchain-2.3.0rc2/chia/ssl/create_ssl.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/ssl/dst_root_ca.pem` & `chia-blockchain-2.3.0rc2/chia/ssl/dst_root_ca.pem`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/timelord/iters_from_block.py` & `chia-blockchain-2.3.0rc2/chia/timelord/iters_from_block.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/timelord/timelord.py` & `chia-blockchain-2.3.0rc2/chia/timelord/timelord.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/timelord/timelord_api.py` & `chia-blockchain-2.3.0rc2/chia/timelord/timelord_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/timelord/timelord_launcher.py` & `chia-blockchain-2.3.0rc2/chia/timelord/timelord_launcher.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/timelord/timelord_state.py` & `chia-blockchain-2.3.0rc2/chia/timelord/timelord_state.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/aliases.py` & `chia-blockchain-2.3.0rc2/chia/types/aliases.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/block_protocol.py` & `chia-blockchain-2.3.0rc2/chia/types/block_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/blockchain_format/coin.py` & `chia-blockchain-2.3.0rc2/chia/types/blockchain_format/coin.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/blockchain_format/program.py` & `chia-blockchain-2.3.0rc2/chia/types/blockchain_format/program.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/blockchain_format/proof_of_space.py` & `chia-blockchain-2.3.0rc2/chia/types/blockchain_format/proof_of_space.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/blockchain_format/tree_hash.py` & `chia-blockchain-2.3.0rc2/chia/types/blockchain_format/tree_hash.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/blockchain_format/vdf.py` & `chia-blockchain-2.3.0rc2/chia/types/blockchain_format/vdf.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/coin_record.py` & `chia-blockchain-2.3.0rc2/chia/types/coin_record.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/coin_spend.py` & `chia-blockchain-2.3.0rc2/chia/types/coin_spend.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/condition_opcodes.py` & `chia-blockchain-2.3.0rc2/chia/types/condition_opcodes.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/eligible_coin_spends.py` & `chia-blockchain-2.3.0rc2/chia/types/eligible_coin_spends.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/fee_rate.py` & `chia-blockchain-2.3.0rc2/chia/types/fee_rate.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/generator_types.py` & `chia-blockchain-2.3.0rc2/chia/types/generator_types.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/internal_mempool_item.py` & `chia-blockchain-2.3.0rc2/chia/types/internal_mempool_item.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/mempool_item.py` & `chia-blockchain-2.3.0rc2/chia/types/mempool_item.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/mempool_submission_status.py` & `chia-blockchain-2.3.0rc2/chia/types/mempool_submission_status.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/peer_info.py` & `chia-blockchain-2.3.0rc2/chia/types/peer_info.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/signing_mode.py` & `chia-blockchain-2.3.0rc2/chia/types/signing_mode.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/spend_bundle.py` & `chia-blockchain-2.3.0rc2/chia/types/spend_bundle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/transaction_queue_entry.py` & `chia-blockchain-2.3.0rc2/chia/types/transaction_queue_entry.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/unfinished_header_block.py` & `chia-blockchain-2.3.0rc2/chia/types/unfinished_header_block.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/types/weight_proof.py` & `chia-blockchain-2.3.0rc2/chia/types/weight_proof.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/api_decorators.py` & `chia-blockchain-2.3.0rc2/chia/util/api_decorators.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/async_pool.py` & `chia-blockchain-2.3.0rc2/chia/util/async_pool.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/bech32m.py` & `chia-blockchain-2.3.0rc2/chia/util/bech32m.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/beta_metrics.py` & `chia-blockchain-2.3.0rc2/chia/util/beta_metrics.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/block_cache.py` & `chia-blockchain-2.3.0rc2/chia/util/block_cache.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/byte_types.py` & `chia-blockchain-2.3.0rc2/chia/util/byte_types.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/cached_bls.py` & `chia-blockchain-2.3.0rc2/chia/util/cached_bls.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/check_fork_next_block.py` & `chia-blockchain-2.3.0rc2/chia/util/check_fork_next_block.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/chia_logging.py` & `chia-blockchain-2.3.0rc2/chia/util/chia_logging.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/chia_version.py` & `chia-blockchain-2.3.0rc2/chia/util/chia_version.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/condition_tools.py` & `chia-blockchain-2.3.0rc2/chia/util/condition_tools.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/config.py` & `chia-blockchain-2.3.0rc2/chia/util/config.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/db_synchronous.py` & `chia-blockchain-2.3.0rc2/chia/util/db_synchronous.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/db_version.py` & `chia-blockchain-2.3.0rc2/chia/util/db_version.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/db_wrapper.py` & `chia-blockchain-2.3.0rc2/chia/util/db_wrapper.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/dump_keyring.py` & `chia-blockchain-2.3.0rc2/chia/util/dump_keyring.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/english.txt` & `chia-blockchain-2.3.0rc2/chia/util/english.txt`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/errors.py` & `chia-blockchain-2.3.0rc2/chia/util/errors.py`

 * *Files 2% similar despite different names*

```diff
@@ -182,18 +182,20 @@
     INVALID_SOFTFORK_CONDITION = 142
     # raised if the first argument to the SOFTFORK condition is not a valid
     # cost. e.g. negative or > UINT64 MAX
     INVALID_SOFTFORK_COST = 143
     # raised if a spend issues too many assert spend, assert puzzle,
     # assert announcement or create announcement
     TOO_MANY_ANNOUNCEMENTS = 144
+    # the message mode in SEND_MESSAGE or RECEIVE_MESSAGE condition is not valid
+    INVALID_MESSAGE_MODE = 145
     # the specified coin ID is not valid
-    INVALID_COIN_ID = 145
+    INVALID_COIN_ID = 146
     # message not sent/received
-    MESSAGE_NOT_SENT_OR_RECEIVED = 146
+    MESSAGE_NOT_SENT_OR_RECEIVED = 147
 
 
 class ValidationError(Exception):
     def __init__(self, code: Err, error_msg: str = ""):
         super().__init__(f"Error code: {code.name} {error_msg}")
         self.code = code
         self.error_msg = error_msg
```

### Comparing `chia-blockchain-2.3.0rc1/chia/util/file_keyring.py` & `chia-blockchain-2.3.0rc2/chia/util/file_keyring.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/files.py` & `chia-blockchain-2.3.0rc2/chia/util/files.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/full_block_utils.py` & `chia-blockchain-2.3.0rc2/chia/util/full_block_utils.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/generator_tools.py` & `chia-blockchain-2.3.0rc2/chia/util/generator_tools.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/hash.py` & `chia-blockchain-2.3.0rc2/chia/util/hash.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/initial-config.yaml` & `chia-blockchain-2.3.0rc2/chia/util/initial-config.yaml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/inline_executor.py` & `chia-blockchain-2.3.0rc2/chia/util/inline_executor.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/ints.py` & `chia-blockchain-2.3.0rc2/chia/util/ints.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/json_util.py` & `chia-blockchain-2.3.0rc2/chia/util/json_util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/keychain.py` & `chia-blockchain-2.3.0rc2/chia/util/keychain.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/keyring_wrapper.py` & `chia-blockchain-2.3.0rc2/chia/util/keyring_wrapper.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/limited_semaphore.py` & `chia-blockchain-2.3.0rc2/chia/util/limited_semaphore.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/lock.py` & `chia-blockchain-2.3.0rc2/chia/util/lock.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/log_exceptions.py` & `chia-blockchain-2.3.0rc2/chia/util/log_exceptions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/logging.py` & `chia-blockchain-2.3.0rc2/chia/util/logging.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/lru_cache.py` & `chia-blockchain-2.3.0rc2/chia/util/lru_cache.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/merkle_set.py` & `chia-blockchain-2.3.0rc2/chia/util/merkle_set.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/misc.py` & `chia-blockchain-2.3.0rc2/chia/util/misc.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/network.py` & `chia-blockchain-2.3.0rc2/chia/util/network.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/paginator.py` & `chia-blockchain-2.3.0rc2/chia/util/paginator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/path.py` & `chia-blockchain-2.3.0rc2/chia/util/path.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/pprint.py` & `chia-blockchain-2.3.0rc2/chia/util/pprint.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/prev_transaction_block.py` & `chia-blockchain-2.3.0rc2/chia/util/prev_transaction_block.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/priority_mutex.py` & `chia-blockchain-2.3.0rc2/chia/util/priority_mutex.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/profiler.py` & `chia-blockchain-2.3.0rc2/chia/util/profiler.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/recursive_replace.py` & `chia-blockchain-2.3.0rc2/chia/util/recursive_replace.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/service_groups.py` & `chia-blockchain-2.3.0rc2/chia/util/service_groups.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/significant_bits.py` & `chia-blockchain-2.3.0rc2/chia/util/significant_bits.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/ssl_check.py` & `chia-blockchain-2.3.0rc2/chia/util/ssl_check.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/streamable.py` & `chia-blockchain-2.3.0rc2/chia/util/streamable.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/struct_stream.py` & `chia-blockchain-2.3.0rc2/chia/util/struct_stream.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/task_timing.py` & `chia-blockchain-2.3.0rc2/chia/util/task_timing.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/timing.py` & `chia-blockchain-2.3.0rc2/chia/util/timing.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/vdf_prover.py` & `chia-blockchain-2.3.0rc2/chia/util/vdf_prover.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/util/ws_message.py` & `chia-blockchain-2.3.0rc2/chia/util/ws_message.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/cat_constants.py` & `chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/cat_constants.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/cat_info.py` & `chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/cat_info.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/cat_outer_puzzle.py` & `chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/cat_outer_puzzle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/cat_utils.py` & `chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/cat_utils.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/cat_wallet.py` & `chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/cat_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/dao_cat_info.py` & `chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/dao_cat_info.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/dao_cat_wallet.py` & `chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/dao_cat_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/lineage_store.py` & `chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/lineage_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/cat_truths.clib` & `chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/cat_truths.clib`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/cat_v2.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/cat_v2.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/cat_v2.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/cat_v2.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/delegated_tail.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/delegated_tail.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/genesis_by_coin_id_or_singleton.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/genesis_by_coin_id_or_singleton.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/cat_wallet/puzzles/genesis_by_puzzle_hash.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/cat_wallet/puzzles/genesis_by_puzzle_hash.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/chialisp.py` & `chia-blockchain-2.3.0rc2/chia/wallet/chialisp.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/coin_selection.py` & `chia-blockchain-2.3.0rc2/chia/wallet/coin_selection.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/conditions.py` & `chia-blockchain-2.3.0rc2/chia/wallet/conditions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/dao_wallet/dao_info.py` & `chia-blockchain-2.3.0rc2/chia/wallet/dao_wallet/dao_info.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/dao_wallet/dao_utils.py` & `chia-blockchain-2.3.0rc2/chia/wallet/dao_wallet/dao_utils.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/dao_wallet/dao_wallet.py` & `chia-blockchain-2.3.0rc2/chia/wallet/dao_wallet/dao_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/db_wallet/db_wallet_puzzles.py` & `chia-blockchain-2.3.0rc2/chia/wallet/db_wallet/db_wallet_puzzles.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/derivation_record.py` & `chia-blockchain-2.3.0rc2/chia/wallet/derivation_record.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/derive_keys.py` & `chia-blockchain-2.3.0rc2/chia/wallet/derive_keys.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/did_wallet/did_info.py` & `chia-blockchain-2.3.0rc2/chia/wallet/did_wallet/did_info.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/did_wallet/did_wallet.py` & `chia-blockchain-2.3.0rc2/chia/wallet/did_wallet/did_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/did_wallet/did_wallet_puzzles.py` & `chia-blockchain-2.3.0rc2/chia/wallet/did_wallet/did_wallet_puzzles.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/did_wallet/puzzles/did_innerpuz.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/did_wallet/puzzles/did_innerpuz.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/did_wallet/puzzles/did_innerpuz.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/did_wallet/puzzles/did_innerpuz.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/driver_protocol.py` & `chia-blockchain-2.3.0rc2/chia/wallet/driver_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/key_val_store.py` & `chia-blockchain-2.3.0rc2/chia/wallet/key_val_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/lineage_proof.py` & `chia-blockchain-2.3.0rc2/chia/wallet/lineage_proof.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/metadata_outer_puzzle.py` & `chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/metadata_outer_puzzle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/nft_info.py` & `chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/nft_info.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/nft_puzzles.py` & `chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/nft_puzzles.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/nft_wallet.py` & `chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/nft_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/ownership_outer_puzzle.py` & `chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/ownership_outer_puzzle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_metadata_updater_default.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_metadata_updater_default.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_metadata_updater_updateable.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_metadata_updater_updateable.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_ownership_layer.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_ownership_layer.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_ownership_layer.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_ownership_layer.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_ownership_transfer_program_one_way_claim_with_royalties.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_ownership_transfer_program_one_way_claim_with_royalties.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_ownership_transfer_program_one_way_claim_with_royalties.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_ownership_transfer_program_one_way_claim_with_royalties.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_state_layer.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_state_layer.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/puzzles/nft_state_layer.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/puzzles/nft_state_layer.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/singleton_outer_puzzle.py` & `chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/singleton_outer_puzzle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/transfer_program_puzzle.py` & `chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/transfer_program_puzzle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/nft_wallet/uncurry_nft.py` & `chia-blockchain-2.3.0rc2/chia/wallet/nft_wallet/uncurry_nft.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/notification_manager.py` & `chia-blockchain-2.3.0rc2/chia/wallet/notification_manager.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/notification_store.py` & `chia-blockchain-2.3.0rc2/chia/wallet/notification_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/outer_puzzles.py` & `chia-blockchain-2.3.0rc2/chia/wallet/outer_puzzles.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/payment.py` & `chia-blockchain-2.3.0rc2/chia/wallet/payment.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzle_drivers.py` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzle_drivers.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/clawback/drivers.py` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/clawback/drivers.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/clawback/metadata.py` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/clawback/metadata.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/clawback/puzzle_decorator.py` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/clawback/puzzle_decorator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/condition_codes.clib` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/condition_codes.clib`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/curry-and-treehash.clib` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/curry-and-treehash.clib`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/curry.clib` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/curry.clib`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/curry_by_index.clib` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/curry_by_index.clib`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_cat_eve.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_cat_eve.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_cat_launcher.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_cat_launcher.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_cat_launcher.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_cat_launcher.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_finished_state.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_finished_state.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_finished_state.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_finished_state.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_lockup.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_lockup.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_lockup.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_lockup.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_proposal.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_proposal.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_proposal.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_proposal.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_proposal_timer.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_proposal_timer.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_proposal_timer.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_proposal_timer.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_proposal_validator.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_proposal_validator.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_proposal_validator.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_proposal_validator.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_spend_p2_singleton_v2.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_spend_p2_singleton_v2.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_spend_p2_singleton_v2.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_spend_p2_singleton_v2.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_treasury.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_treasury.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_treasury.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_treasury.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_update_proposal.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_update_proposal.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/dao_update_proposal.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/dao_update_proposal.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/deployed_puzzle_hashes.json` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/deployed_puzzle_hashes.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/json.clib` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/json.clib`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/load_clvm.py` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/load_clvm.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_1_of_n.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_1_of_n.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_conditions.py` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_conditions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_delegated_conditions.py` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_delegated_conditions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_delegated_puzzle.py` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_delegated_puzzle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.py` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_m_of_n_delegate_direct.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_m_of_n_delegate_direct.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_m_of_n_delegate_direct.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_m_of_n_delegate_direct.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_m_of_n_delegate_direct.py` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_m_of_n_delegate_direct.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_puzzle_hash.py` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_puzzle_hash.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_singleton.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_singleton.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_singleton.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_singleton.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_singleton_aggregator.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_singleton_aggregator.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_singleton_aggregator.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_singleton_aggregator.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_singleton_or_delayed_puzhash.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_singleton_or_delayed_puzhash.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_singleton_or_delayed_puzhash.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_singleton_or_delayed_puzhash.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_singleton_via_delegated_puzzle.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_singleton_via_delegated_puzzle.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/p2_singleton_via_delegated_puzzle.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/p2_singleton_via_delegated_puzzle.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/prefarm/make_prefarm_ph.py` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/prefarm/make_prefarm_ph.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/prefarm/spend_prefarm.py` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/prefarm/spend_prefarm.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/puzzle_utils.py` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/puzzle_utils.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/settlement_payments.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/settlement_payments.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/settlement_payments.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/settlement_payments.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/singleton_top_layer.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/singleton_top_layer.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/singleton_top_layer.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/singleton_top_layer.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/singleton_top_layer.py` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/singleton_top_layer.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/singleton_top_layer_v1_1.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/singleton_top_layer_v1_1.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/singleton_top_layer_v1_1.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/singleton_top_layer_v1_1.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/singleton_top_layer_v1_1.py` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/singleton_top_layer_v1_1.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/singleton_truths.clib` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/singleton_truths.clib`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/tails.py` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/tails.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/puzzles/utility_macros.clib` & `chia-blockchain-2.3.0rc2/chia/wallet/puzzles/utility_macros.clib`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/sign_coin_spends.py` & `chia-blockchain-2.3.0rc2/chia/wallet/sign_coin_spends.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/singleton.py` & `chia-blockchain-2.3.0rc2/chia/wallet/singleton.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/singleton_record.py` & `chia-blockchain-2.3.0rc2/chia/wallet/singleton_record.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/trade_manager.py` & `chia-blockchain-2.3.0rc2/chia/wallet/trade_manager.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/trade_record.py` & `chia-blockchain-2.3.0rc2/chia/wallet/trade_record.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/trading/offer.py` & `chia-blockchain-2.3.0rc2/chia/wallet/trading/offer.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/trading/trade_store.py` & `chia-blockchain-2.3.0rc2/chia/wallet/trading/trade_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/transaction_record.py` & `chia-blockchain-2.3.0rc2/chia/wallet/transaction_record.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/util/address_type.py` & `chia-blockchain-2.3.0rc2/chia/wallet/util/address_type.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/util/compute_hints.py` & `chia-blockchain-2.3.0rc2/chia/wallet/util/compute_hints.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/util/compute_memos.py` & `chia-blockchain-2.3.0rc2/chia/wallet/util/compute_memos.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/util/curry_and_treehash.py` & `chia-blockchain-2.3.0rc2/chia/wallet/util/curry_and_treehash.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/util/debug_spend_bundle.py` & `chia-blockchain-2.3.0rc2/chia/wallet/util/debug_spend_bundle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/util/json_clvm_utils.py` & `chia-blockchain-2.3.0rc2/chia/wallet/util/json_clvm_utils.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/util/merkle_tree.py` & `chia-blockchain-2.3.0rc2/chia/wallet/util/merkle_tree.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/util/merkle_utils.py` & `chia-blockchain-2.3.0rc2/chia/wallet/util/merkle_utils.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/util/new_peak_queue.py` & `chia-blockchain-2.3.0rc2/chia/wallet/util/new_peak_queue.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/util/peer_request_cache.py` & `chia-blockchain-2.3.0rc2/chia/wallet/util/peer_request_cache.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/util/puzzle_compression.py` & `chia-blockchain-2.3.0rc2/chia/wallet/util/puzzle_compression.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/util/puzzle_decorator.py` & `chia-blockchain-2.3.0rc2/chia/wallet/util/puzzle_decorator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/util/query_filter.py` & `chia-blockchain-2.3.0rc2/chia/wallet/util/query_filter.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/util/transaction_type.py` & `chia-blockchain-2.3.0rc2/chia/wallet/util/transaction_type.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/util/tx_config.py` & `chia-blockchain-2.3.0rc2/chia/wallet/util/tx_config.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/util/wallet_sync_utils.py` & `chia-blockchain-2.3.0rc2/chia/wallet/util/wallet_sync_utils.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/util/wallet_types.py` & `chia-blockchain-2.3.0rc2/chia/wallet/util/wallet_types.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/cr_cat_drivers.py` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/cr_cat_drivers.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/cr_cat_wallet.py` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/cr_cat_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/cr_outer_puzzle.py` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/cr_outer_puzzle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/cr_puzzles/credential_restriction.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/cr_puzzles/credential_restriction.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/cr_puzzles/credential_restriction.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/cr_puzzles/credential_restriction.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/cr_puzzles/flag_proofs_checker.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/cr_puzzles/flag_proofs_checker.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/cr_puzzles/flag_proofs_checker.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/cr_puzzles/flag_proofs_checker.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_drivers.py` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_drivers.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/covenant_layer.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/covenant_layer.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/eml_covenant_morpher.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/eml_covenant_morpher.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/eml_covenant_morpher.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/eml_covenant_morpher.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/eml_transfer_program_covenant_adapter.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/eml_transfer_program_covenant_adapter.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/eml_update_metadata_with_DID.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/eml_update_metadata_with_DID.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/eml_update_metadata_with_DID.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/eml_update_metadata_with_DID.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/exigent_metadata_layer.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/exigent_metadata_layer.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/exigent_metadata_layer.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/exigent_metadata_layer.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/p2_announced_delegated_puzzle.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/p2_announced_delegated_puzzle.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/standard_vc_backdoor_puzzle.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/standard_vc_backdoor_puzzle.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/standard_vc_backdoor_puzzle.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/standard_vc_backdoor_puzzle.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/std_parent_morpher.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/std_parent_morpher.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/std_parent_morpher.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/std_parent_morpher.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/viral_backdoor.clsp` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/viral_backdoor.clsp`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_puzzles/viral_backdoor.clsp.hex` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_puzzles/viral_backdoor.clsp.hex`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_store.py` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/vc_wallet/vc_wallet.py` & `chia-blockchain-2.3.0rc2/chia/wallet/vc_wallet/vc_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/wallet.py` & `chia-blockchain-2.3.0rc2/chia/wallet/wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/wallet_blockchain.py` & `chia-blockchain-2.3.0rc2/chia/wallet/wallet_blockchain.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/wallet_coin_record.py` & `chia-blockchain-2.3.0rc2/chia/wallet/wallet_coin_record.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/wallet_coin_store.py` & `chia-blockchain-2.3.0rc2/chia/wallet/wallet_coin_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/wallet_info.py` & `chia-blockchain-2.3.0rc2/chia/wallet/wallet_info.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/wallet_interested_store.py` & `chia-blockchain-2.3.0rc2/chia/wallet/wallet_interested_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/wallet_nft_store.py` & `chia-blockchain-2.3.0rc2/chia/wallet/wallet_nft_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/wallet_node.py` & `chia-blockchain-2.3.0rc2/chia/wallet/wallet_node.py`

 * *Files 1% similar despite different names*

```diff
@@ -664,15 +664,15 @@
             default_port = None
         connect_to_unknown_peers = self.config.get("connect_to_unknown_peers", True)
         testing = self.config.get("testing", False)
         if self.wallet_peers is None and connect_to_unknown_peers and not testing:
             self.wallet_peers = WalletPeers(
                 self.server,
                 self.config["target_peer_count"],
-                self.root_path / Path(self.config["wallet_peers_file_path"]),
+                self.root_path / Path(self.config.get("wallet_peers_file_path", "wallet/db/wallet_peers.dat")),
                 self.config["introducer_peer"],
                 self.config.get("dns_servers", ["dns-introducer.chia.net"]),
                 self.config["peer_connect_interval"],
                 network_name,
                 default_port,
                 self.log,
             )
```

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/wallet_node_api.py` & `chia-blockchain-2.3.0rc2/chia/wallet/wallet_node_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/wallet_pool_store.py` & `chia-blockchain-2.3.0rc2/chia/wallet/wallet_pool_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/wallet_protocol.py` & `chia-blockchain-2.3.0rc2/chia/wallet/wallet_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/wallet_puzzle_store.py` & `chia-blockchain-2.3.0rc2/chia/wallet/wallet_puzzle_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/wallet_retry_store.py` & `chia-blockchain-2.3.0rc2/chia/wallet/wallet_retry_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/wallet_singleton_store.py` & `chia-blockchain-2.3.0rc2/chia/wallet/wallet_singleton_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/wallet_state_manager.py` & `chia-blockchain-2.3.0rc2/chia/wallet/wallet_state_manager.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/wallet_transaction_store.py` & `chia-blockchain-2.3.0rc2/chia/wallet/wallet_transaction_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/wallet_user_store.py` & `chia-blockchain-2.3.0rc2/chia/wallet/wallet_user_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia/wallet/wallet_weight_proof_handler.py` & `chia-blockchain-2.3.0rc2/chia/wallet/wallet_weight_proof_handler.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia_blockchain.egg-info/PKG-INFO` & `chia-blockchain-2.3.0rc2/chia_blockchain.egg-info/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: chia-blockchain
-Version: 2.3.0rc1
+Version: 2.3.0rc2
 Summary: Chia blockchain full node, farmer, timelord, and wallet.
 Home-page: https://chia.net/
 Author: Mariano Sorgente
 Author-email: mariano@chia.net
 License: Apache License
 Project-URL: Source, https://github.com/Chia-Network/chia-blockchain/
 Project-URL: Changelog, https://github.com/Chia-Network/chia-blockchain/blob/main/CHANGELOG.md
```

### Comparing `chia-blockchain-2.3.0rc1/chia_blockchain.egg-info/SOURCES.txt` & `chia-blockchain-2.3.0rc2/chia_blockchain.egg-info/SOURCES.txt`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia_blockchain.egg-info/entry_points.txt` & `chia-blockchain-2.3.0rc2/chia_blockchain.egg-info/entry_points.txt`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/chia_blockchain.egg-info/requires.txt` & `chia-blockchain-2.3.0rc2/chia_blockchain.egg-info/requires.txt`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/install-gui.sh` & `chia-blockchain-2.3.0rc2/install-gui.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/install-plotter.sh` & `chia-blockchain-2.3.0rc2/install-plotter.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/install-timelord.sh` & `chia-blockchain-2.3.0rc2/install-timelord.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/install.sh` & `chia-blockchain-2.3.0rc2/install.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/installhelper.py` & `chia-blockchain-2.3.0rc2/installhelper.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/manage-mypy.py` & `chia-blockchain-2.3.0rc2/manage-mypy.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/mozilla-ca/cacert.pem` & `chia-blockchain-2.3.0rc2/mozilla-ca/cacert.pem`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/mypy-exclusions.txt` & `chia-blockchain-2.3.0rc2/mypy-exclusions.txt`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/mypy.ini.template` & `chia-blockchain-2.3.0rc2/mypy.ini.template`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/pylintrc` & `chia-blockchain-2.3.0rc2/pylintrc`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/pytest.ini` & `chia-blockchain-2.3.0rc2/pytest.ini`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/setup.py` & `chia-blockchain-2.3.0rc2/setup.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/start-gui.sh` & `chia-blockchain-2.3.0rc2/start-gui.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/tools/analyze-chain.py` & `chia-blockchain-2.3.0rc2/tools/analyze-chain.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/tools/analyze_memory_profile.py` & `chia-blockchain-2.3.0rc2/tools/analyze_memory_profile.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/tools/chialispp.py` & `chia-blockchain-2.3.0rc2/tools/chialispp.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/tools/cpu_utilization.py` & `chia-blockchain-2.3.0rc2/tools/cpu_utilization.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/tools/generate_chain.py` & `chia-blockchain-2.3.0rc2/tools/generate_chain.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/tools/manage_clvm.py` & `chia-blockchain-2.3.0rc2/tools/manage_clvm.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/tools/plot-log.gnuplot` & `chia-blockchain-2.3.0rc2/tools/plot-log.gnuplot`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/tools/run_benchmark.sh` & `chia-blockchain-2.3.0rc2/tools/run_benchmark.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/tools/run_block.py` & `chia-blockchain-2.3.0rc2/tools/run_block.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.3.0rc1/tools/test_full_sync.py` & `chia-blockchain-2.3.0rc2/tools/test_full_sync.py`

 * *Files identical despite different names*

